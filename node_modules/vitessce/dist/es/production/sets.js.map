{"version":3,"sources":["../webpack/bootstrap","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../external \"lodash/isEqual\"","components/sets/constants.js","utils.js","components/sets/utils.js","../external \"@material-ui/core/styles\"","components/spatial/constants.js","components/sets/cell-set-utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","loaders/errors/AbstractLoaderError.js","loaders/errors/LoaderFetchError.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/index.js","../external \"deck.gl\"","components/hooks.js","components/data-hooks.js","app/state/coordination.js","../external \"@hms-dbmi/viv\"","../external \"mathjs\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/classNames.js","../external \"zustand\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","components/LoadingIndicator.js","components/TitleInfo.js","components/shared-mui/styles.js","../external \"d3-array\"","../external \"@material-ui/core/colors\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/IconButton\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","components/spatial/utils.js","../external \"@material-ui/core/MenuItem\"","../external \"lodash/clamp\"","../external \"lodash/range\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"lodash/debounce\"","../external \"@turf/helpers\"","../external \"uuid/v4\"","../external \"@material-ui/core/Paper\"","../external \"lodash\"","../external \"math.gl\"","components/sets/io.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/Popper\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../external \"short-number\"","../external \"lodash/isNil\"","../external \"tinycolor2\"","components/vega/ReactVega.js","components/vega/VegaPlot.js","components/vega/utils.js","components/vega/index.js","../external \"@turf/concave\"","../external \"@turf/centroid\"","../external \"ajv\"","../external \"regenerator-runtime\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../external \"classnames\"","../external \"rc-tree\"","components/sets/CellSetSizesPlot.js","components/sets/Tree.js","components/sets/HelpTooltip.js","components/sets/Popover.js","components/sets/PopoverMenu.js","assets/menu.svg","components/sets/TreeNode.js","assets/sets/union.svg","assets/sets/intersection.svg","assets/sets/complement.svg","components/sets/SetsManagerButtons.js","components/sets/SetsManager.js","../external \"react-vega\"","components/sets/CellSetsManagerSubscriber.js","components/sets/CellSetSizesPlotSubscriber.js","../external \"d3-dsv\"","../external \"json2csv\"","../external \"clsx\"","../external \"rc-tree/es/util\"","../external \"react-color\"","../external \"rc-tooltip\"","../external \"vega-tooltip\"","components/sets/index.js"],"names":["useViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","i","newLayout","layout","slice","splice","changeLayout","newComponentProps","forEach","newProps","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","coordinationScopes","values","fromEntries","map","undefined","shallow","setters","setterName","capitalize","setterFunc","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","makeCellStatusMessage","cellInfoFactors","Object","entries","factor","join","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","data","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_COLOR","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","console","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","length","push","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","component","__esModule","default","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","iterable","reduce","obj","key","val","assign","range","Array","keys","pluralize","singular","plural","count","word","charAt","toUpperCase","getNextScope","prevScopes","chars","nextCharIndices","next","r","charIndex","unshift","increment","nextScope","includes","callbackOnKeyPress","event","callback","preventDefault","colorArrayToString","rgbArray","tinycolor","g","b","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","isEqual","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","GLOBAL_SLIDER_DIMENSION_FIELDS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","colormap","opacity","domainType","transparentColor","DEFAULT_MOLECULES_LAYER","type","radius","visible","DEFAULT_CELLS_LAYER","DEFAULT_NEIGHBORHOODS_LAYER","DEFAULT_LAYER_TYPE_ORDERING","generateKey","uuidv4","nodeToSet","currNode","flatMap","c","nodeToHeight","level","newLevel","childrenHeights","Math","max","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","filter","Boolean","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transform","transformedPaths","currPath","newPath","concat","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","from","treeToUnion","checkedPaths","nodeSets","a","h","hEl","treeToIntersection","treeToComplement","items","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","size","isLeaf","height","colorMixWithUncertainty","originalColor","p","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","isNil","Map","treeToObjectsBySetNames","setColor","cellsArray","obsId","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","mappings","points","turfFeatureCollection","turfPoint","hull","concave","hullCoords","geometry","coordinates","centroidCoords","centroid","treeToSetSizesBySetNames","sizes","filterNode","filterPath","treeToExpectedCheckedLevel","result","lzn","levelZeroPath","levelIndex","levelNodePaths","treesConflict","testCellSets","paths","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","fill","processNode","hierarchyLevel","treeIndex","index","getCellSetPolygons","params","cellSetSelection","AbstractLoaderError","Error","LoaderFetchError","datasetType","datasetFileType","datasetUrl","responseHeaders","LoaderValidationError","reason","JSON","stringify","LoaderNotFoundError","useGridItemSize","containerRef","useState","setHeight","width","setWidth","useEffect","onWindowResize","onResizeDebounced","debounce","trailing","window","addEventListener","removeEventListener","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","log","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","error","warnInConsole","useDescription","dataset","description","setDescription","useCellsData","isRequired","onLoad","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","attrs","cols","rows","matrix","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","l","useNeighborhoodsData","neighborhoods","setNeighborhoods","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","rasterLayers","layers","rasterRenderLayers","renderLayers","usePhysicalSizeScaling","initializeRasterLayersAndChannels","autoImageLayers","nextImageLoaders","nextImageMeta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_LAYERS","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","LoadingIndicator","useStyles","makeStyles","theme","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","useReducer","v","toggle","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","styles","paper","maxHeight","overflow","zIndex","span","textAlign","popper","muiTheme","dark","createMuiTheme","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","light","MuiPopper","anchorEl","placement","MuiPaper","MuiSpan","PopperMenu","buttonIcon","buttonClassName","anchorRef","square","x","y","sortLayers","sort","indexOf","getDefaultGlobalSelection","imageDims","globalIndices","dim","field","selection","floor","buildDefaultSelection","globalSelection","firstNonGlobalDimension","min","initializeChannelForSelection","loader","getChannelStats","loaderSelection","stats","domain","isRgb","slider","autoSliders","initializeLayerChannels","loaderDimensions","dimensions","defaultSelection","domains","stat","colors","sliders","channel","initializeLayerChannelsIfMissing","layerDefsOrig","layerDefs","cloneDeep","newLayerDefPromises","didInitialize","layerIndex","layerDef","newLayerDefPromise","Promise","resolve","channels","newChannelDefPromises","channelIndex","channelDef","newChannelDefPromise","autoChannelDef","all","newChannelDefs","newLayerDefs","getMetaWithTransformMatrices","imageMeta","imageLoaders","meta","metadata","scale","translate","some","every","physicalSizes","minPhysicalSize","acc","unit","replace","compare","imageMetaWithTransform","k","divide","Matrix4","newMeta","toArray","autoImageLayerDefPromises","layer","loaderCreator","autoImageLayerDefPromise","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","initialTargetX","Infinity","initialTargetY","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","cellCoordinates","xy","xExtent","extent","yExtent","xRange","yRange","log2","tryUpgradeTreeToLatestSchema","validate","Ajv","compile","valid","failureReason","errors","isArray","itemId","handleImportJSON","importData","parse","handleImportTabular","dsvParser","dsvFormat","row","groupName","setName","predictionScore","treeToImport","uniqueGroupNames","Set","groupRows","uniqueSetNames","setRows","levelOneNode","handleExportJSON","jsonString","dataString","encodeURIComponent","handleExportTabular","exportData","csvString","json2csv","fields","delimiter","downloadForUser","fileName","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","DATASET_NAME","isVega","spec","$schema","VegaPlot","partialSpec","signalListeners","vegaComponent","useMemo","Handler","call","VEGA_THEMES","style","axis","domainColor","gridColor","tickColor","CellSetSizesPlot","rawData","marginBottom","keyLength","keyName","mark","encoding","labelExpr","legend","tooltip","clamp","config","Tree","React","forwardRef","ref","prefixCls","className","showIcon","blockNode","checkable","classNames","defaultProps","virtual","HelpTooltip","content","overlayClassName","spanRef","getTooltipContainer","closest","overlay","trigger","mouseEnterDelay","mouseLeaveDelay","Popover","PopoverMenuListButton","subtitle","onClick","handler","handlerKey","confirm","isConfirming","setIsConfirming","handleOrRequireConfirm","titleWithConfirm","PopoverMenuList","menuConfig","handleColorChange","rgb","defaultPalette","PopoverMenu","setVisible","makeNodeViewMenuConfig","onCheckNode","onNodeRemove","onNodeSetIsEditing","onExportLevelZeroNodeJSON","onExportLevelZeroNodeTabular","onExportSetJSON","editable","exportable","checked","NamedSetNodeStatic","checkbox","isChecking","onNodeSetColor","onNodeView","expanded","onCheckLevel","checkedLevelPath","checkedLevelIndex","disableTooltip","shouldCheckNextLevel","nextLevelToCheck","numberFormatter","Intl","NumberFormat","niceSize","format","tooltipText","tooltipProps","popoverMenuConfig","NamedSetNodeEditing","onNodeSetName","onNodeCheckNewName","currentTitle","setCurrentTitle","hasConflicts","trySetName","select","NamedSetNode","isEditing","isCurrentSet","LevelsButtons","hasColorEncoding","onCheck","parseInt","isChecked","clsx","SwitcherIcon","isOpen","hexColor","TreeNode","renderSelector","isSelected","onDragStartProp","onDragStart","context","rcTree","prefixClass","draggable","wrapClass","isDraggable","setSelectHandle","getNodeState","renderCheckbox","renderLevels","renderSwitcher","onNodeExpand","onNodeExpandWrapper","switcherClass","loading","dragOver","dragOverGapTop","dragOverGapBottom","selected","halfChecked","onDragEndProp","onDragEnd","expandable","otherProps","filterTreeNode","disabled","isDisabled","dataAndAriaAttributeProps","getDataAndAria","onDragEnter","onDragOver","onDragLeave","onDrop","bind","renderChildren","RcTreeNode","PlusButton","onError","onImportTree","onCreateLevelZeroNode","importable","onImport","importHandler","mimeType","uploadInputNode","File","FileReader","FileList","Blob","files","reader","readAsText","SetOperationButtons","onUnion","onIntersection","onComplement","operatable","hasCheckedSetsToUnion","hasCheckedSetsToIntersect","hasCheckedSetsToComplement","processSets","sets","getAllKeys","SetsManager","additionalSets","checkedLevel","levelSelection","setSelection","setExpansion","onExpandNode","onDropNode","autoExpandParent","isDragging","setIsDragging","isEditingNodeName","setIsEditingNodeName","processedSets","processedAdditionalSets","additionalSetKeys","allSetSelectionKeys","allSetExpansionKeys","setSelectionKeys","setExpansionKeys","additionalSetSelectionKeys","additionalSetExpansionKeys","renderTreeNodes","readOnly","checkedKeys","expandedKeys","dropKey","eventKey","dragKey","dragNode","dropToGap","dropPosition","CELL_SETS_DATA_TYPES","CellSetsManagerSubscriber","initializeSelection","initializeColor","cellColorEncoding","autoSetSelections","setAutoSetSelections","autoSetColors","setAutoSetColors","cellSetExpansion","setCellSetExpansion","newAutoSetSelectionParentName","newAutoSetSelections","newAutoSetColors","upgradedCellSets","allCellIds","setCellSetColorEncoding","mergedCellSets","levelZeroName","newCellSetSelection","targetKey","split","dropPath","dropNode","dropNodeLevel","dropNodeIsLevelZero","dragPath","dropParentNode","dropParentPath","dropNodeCurrIndex","hasSiblingNameConflict","dragNodeName","newDragPath","addChildFunction","checkPathFunction","newLevelZero","oldColors","newColors","newCellSetColor","prevNodeColor","nextNamePath","pop","renameNode","nextCellSetSelection","nextCellSetExpansion","setsToView","viewNode","expandedPath","targetNode","newSet","importAutoSetColors","packageJson","CELL_SET_SIZES_DATA_TYPES","CellSetSizesPlotSubscriber"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;;;;ACAe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AACJ;AACsB;AAClB;AACrC;AACf,SAAS,kBAAiB,SAAS,gBAAe,SAAS,qDAA0B,SAAS,kBAAiB;AAC/G,C;;;;;;;ACNA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc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","file":"sets.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 182);\n","module.exports = require(\"react\");","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useRef, useCallback } from 'react';\nimport create from 'zustand';\nimport shallow from 'zustand/shallow';\nimport { fromEntries, capitalize } from '../../utils';\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const useViewConfigStore = create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: i => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  }));\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig() {\n  const setViewConfigRef = useRef(useViewConfigStore.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from 'deck.gl';\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_COLOR = [128, 128, 128];\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","module.exports = require(\"regenerator-runtime\");\n","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","module.exports = require(\"lodash/isEqual\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\nexport function range(length) {\n  return [...Array(length).keys()];\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n","import tinycolor from 'tinycolor2';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * Execute a callback function based on a keypress event.\n * @param {object} event The event from onKeyPress\n * @param {string} key The key identifier to match.\n * @param {Function} callback The function to execute.\n */\nexport function callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\n/**\n * Convert an array of [r, g, b] numbers to a hex color.\n * @param {number[]} rgbArray The color [r, g, b] array.\n * @returns {string} The hex color as a string.\n */\nexport function colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\n\n/**\n * Convert a string color representation to an array of [r,g,b].\n * @param {string} colorString The color as a string.\n * @returns {number[]} The color as an array.\n */\nexport function colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\n/**\n * Get a string of help text for coloring a particular hierarchy level.\n * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.\n * @returns {string} The tooltip text for coloring the level.\n */\nexport function getLevelTooltipText(i) {\n  if (i === 0) return 'Color by hierarchy';\n  if (i <= 2) {\n    const subs = j => ('sub'.repeat(j));\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\n\nexport function isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\n\nexport function tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\n\nexport const PATH_SEP = '___';\n\nexport function pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n","module.exports = require(\"@material-ui/core/styles\");","export const GLOBAL_SLIDER_DIMENSION_FIELDS = ['z', 'time'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  type: 'molecules', opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  type: 'cells', opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  type: 'neighborhoods', visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","/* eslint-disable no-underscore-dangle */\nimport uuidv4 from 'uuid/v4';\nimport isNil from 'lodash/isNil';\nimport isEqual from 'lodash/isEqual';\nimport range from 'lodash/range';\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from '@turf/helpers';\nimport concave from '@turf/concave';\nimport centroid from '@turf/centroid';\nimport {\n  HIERARCHICAL_SCHEMAS,\n} from './constants';\nimport { DEFAULT_COLOR, PALETTE } from '../utils';\nimport { pathToKey } from './utils';\n\n/**\n * Alias for the uuidv4 function to make code more readable.\n * @returns {string} UUID.\n */\nfunction generateKey() {\n  return uuidv4();\n}\n\n/**\n * Get the set associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {array} The array representing the set associated with the node.\n */\nexport function nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return (currNode.set || []);\n  }\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\n/**\n * Get the height of a node (the number of levels to reach a leaf).\n * @param {object} currNode A node object.\n * @param {number} level The level that the height will be computed relative to. By default, 0.\n * @returns {number} The height. If the node has a .children property,\n * then the minimum value returned is 1.\n */\nexport function nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\n/**\n * Find a node with a matching name path, relative to a particular node.\n * @param {object} node A node object.\n * @param {string[]} path The name path for the node of interest.\n * @param {number} currLevelIndex The index of the current hierarchy level.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children\n        .map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1))\n        .filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Find a node with a matching name path, relative to the whole tree.\n * @param {object} currTree A tree object.\n * @param {string[]} targetNamePath The name path for the node of interest.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nexport function treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree\n    .map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0))\n    .filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\n\n/**\n * Transform a node object using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...node,\n      children: node.children.map(\n        child => nodeTransform(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return node;\n}\n\n/**\n * Transform many node objects using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...newNode,\n      children: newNode.children.map(\n        child => nodeTransformAll(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return newNode;\n}\n\n/**\n * Append a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodeAppendChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [...currNode.children, newChild],\n  };\n}\n\n/**\n * Prepend a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodePrependChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [newChild, ...currNode.children],\n  };\n}\n\n/**\n * Insert a child to a parent node.\n * @param {object} currNode A node object.\n * @param {*} newChild The child node object.\n * @param {*} insertIndex The index at which to insert the child.\n * @returns {object} The updated node.\n */\nexport function nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return {\n    ...currNode,\n    children: newChildren,\n  };\n}\n\n/**\n * Get an array representing the union of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the union of the sets of checked nodes.\n */\nexport function treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the intersection of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the intersection of the sets of checked nodes.\n */\nexport function treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the complement of the union of the sets of checked nodes.\n * @param {object} currTree\n * @returns {array} An array representing the complement of the\n * union of the sets of checked nodes.\n */\nexport function treeToComplement(currTree, checkedPaths, items) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items.filter(el => !primaryUnion.includes(el));\n}\n\n/**\n * Get an flattened array of descendants at a particular relative\n * level of interest.\n * @param {object} node A node object.\n * @param {number} level The relative level of interest.\n * 0 for this node's children, 1 for grandchildren, etc.\n * @param {boolean} stopEarly Should a node be returned early if no children exist?\n * @returns {object[]} An array of descendants at the specified level,\n * where the level is relative to the node.\n */\nexport function nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children\n    .flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly))\n    .filter(Boolean);\n}\n\n/**\n * Export the tree by clearing tree state and all node states.\n * @param {object} currTree A tree object.\n * @returns {object} Tree object with tree and node state removed.\n */\nexport function treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree,\n  };\n}\n\n/**\n * Export the tree by clearing tree state and all node states,\n * and filter so that only the level zero node of interest is included.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { treeToExport, nodeName }\n * Tree with one level zero node, and with state removed.\n */\nexport function treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    const nodeColor = cellSetColors?.find(c => isEqual(c.path, nPath))?.color ?? DEFAULT_COLOR;\n    return {\n      ...n,\n      color: nodeColor.slice(0, 3),\n    };\n  }, []);\n  const treeWithOneLevelZeroNode = {\n    ...currTree,\n    tree: [nodeWithColors],\n  };\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name,\n  };\n}\n\n/**\n * Prepare the set of a node of interest for export.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { setToExport, nodeName } The set as an array.\n */\nexport function treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\n\n/**\n * Get an empty tree, with a default tree state.\n * @param {string} datatype The type of sets that this tree contains.\n * @returns {object} Empty tree.\n */\nexport function treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: [],\n  };\n}\n\n/**\n * For convenience, get an object with information required\n * to render a node as a component.\n * @param {object} node A node to be rendered.\n * @returns {object} An object containing properties required\n * by the TreeNode render functions.\n */\nexport function nodeToRenderProps(node, path, cellSetColor) {\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: nodeToSet(node).length,\n    color: cellSetColor?.find(d => isEqual(d.path, path))?.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node),\n  };\n}\n\n/**\n * Using a color and a probability, mix the color with an \"uncertainty\" color,\n * for example, gray.\n * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701\n * @param {number[]} originalColor The color assignment for the class.\n * @param {number} p The mixing amount, or level certainty in the originalColor classification,\n * between 0 and 1.\n * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.\n * @returns {number[]} Returns the color after mixing.\n */\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    ((originalColor[0] - mixingColor[0]) * p) + mixingColor[0],\n    ((originalColor[1] - mixingColor[1]) * p) + mixingColor[1],\n    ((originalColor[2] - mixingColor[2]) * p) + mixingColor[2],\n  ];\n}\n\n/**\n * Given a tree with state, get the cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n *  @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} cellSetColor Array of objects with the\n * properties `path` and `color`.\n * @returns {array} Tuple of [cellIds, cellColors]\n * where cellIds is an array of strings,\n * and cellColors is an object mapping cellIds to color [r,g,b] arrays.\n */\nexport function treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          (isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)),\n        ]),\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\n/**\n * Given a tree with state, get an array of\n * objects with cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @returns {object[]} Array of objects with properties\n * `obsId`, `name`, and `color`.\n */\nexport function treeToObjectsBySetNames(currTree, selectedNamePaths, setColor) {\n  let cellsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      cellsArray = [\n        ...cellsArray,\n        ...nodeSet.map(([cellId]) => ({\n          obsId: cellId,\n          name: node.name,\n          color: nodeColor,\n        })),\n      ];\n    }\n  });\n  return cellsArray;\n}\n\nexport function treeToCellPolygonsBySetNames(\n  currTree, cells, mapping, selectedNamePaths, cellSetColor,\n) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      const cellPositions = nodeSet\n        .map(([cellId]) => ([\n          cells[cellId]?.mappings[mapping][0],\n          -cells[cellId]?.mappings[mapping][1],\n        ]))\n        .filter(Boolean);\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(\n          cellPositions.map(turfPoint),\n        );\n        const hull = concave(points);\n        if (hull) {\n          const hullCoords = hull.geometry.coordinates;\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords,\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\n/**\n * Given a tree with state, get the sizes of the\n * sets currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @returns {object[]} Array of objects\n * with the properties `name`, `size`, `key`,\n * and `color`.\n */\nexport function treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = setColor.find(d => isEqual(d.path, setNamePath))?.color || DEFAULT_COLOR;\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor,\n      });\n    }\n  });\n  return sizes;\n}\n\n/**\n * Find and remove a node from the descendants of the current node.\n * @param {object} node A node to search on.\n * @param {array} prevPath Path of the current node to be searched.\n * @param {array} filterPath The path sought.\n * @returns {object} A new node without a node at filterPath.\n */\nexport function filterNode(node, prevPath, filterPath) {\n  if (isEqual([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return {\n    ...node,\n    children: node.children.map(\n      c => filterNode(c, [...prevPath, node.name], filterPath),\n    ).filter(Boolean),\n  };\n}\n\nexport function treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\n\nexport function treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n\n  testPaths.forEach((testPath) => {\n    if (paths.find(p => isEqual(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nexport function initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array\n    .from({\n      length: nodeToHeight(tree) + 1, // Need to add one because its an array.\n    }).fill(0));\n\n  function processNode(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n\n    const nodeColor = nextCellSetColor.find(d => isEqual(d.path, nodePath));\n    if (!nodeColor) {\n      nextCellSetColor.push({\n        path: nodePath,\n        color: PALETTE[index % PALETTE.length],\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach(c => processNode(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nexport function getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(cellSets, cells, mapping, cellSetSelection, cellSetColor);\n  }\n  return [];\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderFetchError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, responseHeaders) {\n    super(`Error HTTP status fetching ${datasetType}.`);\n    this.name = 'LoaderFetchError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.responseHeaders = responseHeaders;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, responseHeaders,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: fetch failed`,\n      responseHeaders,\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderFetchError } from './LoaderFetchError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\n","module.exports = require(\"deck.gl\");","import {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n","import { useState, useEffect } from 'react';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n} from '../loaders/errors/index';\nimport { initializeRasterLayersAndChannels } from './spatial/utils';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        if (onLoad) {\n          onLoad(data);\n        }\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, urls } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n\n        const {\n          layers: rasterLayers,\n          renderLayers:\n          rasterRenderLayers,\n          usePhysicalSizeScaling,\n        } = data;\n        initializeRasterLayersAndChannels(rasterLayers, rasterRenderLayers, usePhysicalSizeScaling)\n          .then(([autoImageLayers, nextImageLoaders, nextImageMeta]) => {\n            setImageLayerLoaders(nextImageLoaders);\n            setImageLayerMeta(nextImageMeta);\n            if (onLoad) {\n              onLoad(autoImageLayers);\n            }\n            setItemIsReady('raster');\n          });\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const COORDINATION_TYPES = {\n  DATASET: 'dataset',\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: 'embeddingCellSetPolygonsVisible',\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: 'embeddingCellSetLabelsVisible',\n  EMBEDDING_CELL_SET_LABEL_SIZE: 'embeddingCellSetLabelSize',\n  EMBEDDING_CELL_RADIUS: 'embeddingCellRadius',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  CELL_FILTER: 'cellFilter',\n  CELL_HIGHLIGHT: 'cellHighlight',\n  CELL_SET_SELECTION: 'cellSetSelection',\n  CELL_SET_HIGHLIGHT: 'cellSetHighlight',\n  CELL_SET_COLOR: 'cellSetColor',\n  GENE_FILTER: 'geneFilter',\n  GENE_HIGHLIGHT: 'geneHighlight',\n  GENE_SELECTION: 'geneSelection',\n  GENE_EXPRESSION_COLORMAP: 'geneExpressionColormap',\n  GENE_EXPRESSION_COLORMAP_RANGE: 'geneExpressionColormapRange',\n  CELL_COLOR_ENCODING: 'cellColorEncoding',\n  SPATIAL_LAYERS: 'spatialLayers',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_CELL_SETS: 'additionalCellSets',\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n};\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: 0,\n  [COORDINATION_TYPES.SPATIAL_LAYERS]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: 'plasma',\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0.0, 1.0],\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: 'cellSetSelection',\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 1549999999.5,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 1549999999.5,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.SPATIAL_ZOOM,\n  COORDINATION_TYPES.SPATIAL_TARGET_X,\n  COORDINATION_TYPES.SPATIAL_TARGET_Y,\n  COORDINATION_TYPES.SPATIAL_TARGET_Z,\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n};\n","module.exports = require(\"@hms-dbmi/viv\");","module.exports = require(\"mathjs\");","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\n","module.exports = require(\"zustand\");","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.75em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title d-flex justify-content-between align-items-baseline\">\n        <div className=\"justify-content-between d-flex align-items-end\">\n          <span>{title}</span>\n        </div>\n        <span className=\"details pl-2 align-items-end\">\n          <span className=\"d-flex justify-content-between\">\n            {info}\n            { options && (\n              <PlotOptions\n                options={options}\n              />\n            ) }\n            {urls && urls.length > 0 && (\n              <DownloadOptions\n                urls={urls}\n              />\n            )}\n            <ClosePaneButton\n              removeGridComponent={removeGridComponent}\n            />\n          </span>\n        </span>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","import { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n    zIndex: 1500,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nexport const muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/core/colors\");","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/IconButton\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { styles } from './styles';\n\nfunction MuiPopper(props) {\n  const classes = styles();\n  const {\n    anchorEl,\n    open,\n    placement = 'bottom-start',\n    children,\n  } = props;\n  return (\n    <Popper\n      className={classes.popper}\n      open={open}\n      anchorEl={anchorEl.current}\n      placement={placement}\n    >\n      {children}\n    </Popper>\n  );\n}\n\nfunction MuiPaper(props) {\n  const { children } = props;\n  const classes = styles();\n  return (\n    <Paper className={classes.paper} elevation={4}>\n      {children}\n    </Paper>\n  );\n}\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    toggle,\n    children,\n    placement,\n    buttonClassName,\n  } = props;\n  const anchorRef = useRef(null);\n  const classes = styles();\n  return (\n    <>\n      <IconButton\n        onClick={toggle}\n        size=\"small\"\n        ref={anchorRef}\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <MuiPopper\n        className={classes.popper}\n        open={open}\n        anchorEl={anchorRef}\n        placement={placement}\n      >\n        <MuiPaper>\n          <ClickAwayListener onClickAway={toggle}>\n            <MenuList>{children}</MenuList>\n          </ClickAwayListener>\n        </MuiPaper>\n      </MuiPopper>\n    </>\n  );\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport { cloneDeep, isEqual } from 'lodash';\nimport { getChannelStats, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_SLIDER_DIMENSION_FIELDS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(imageDims) {\n  const globalIndices = imageDims\n    .filter(dim => GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim.field] = Math.floor((dim.values.length || 0) / 2);\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(imageDims) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(imageDims);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = imageDims.filter(\n    dim => !GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field) && dim.values,\n  )[0];\n  for (let i = 0; i < Math.min(4, firstNonGlobalDimension.values.length); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension.field]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * Initialize the channel settings for an individual channel and selection.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @param {object} selection The channel selection object.\n * @param {number} i The index of this channel for the layer.\n * @returns {object} The initialized channel with\n * domain/slider settings.\n */\nexport async function initializeChannelForSelection(loader, selection, i) {\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: [selection] });\n\n  const domain = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].domain;\n  const color = loader.isRgb ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]][i] : VIEWER_PALETTE[i];\n  const slider = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].autoSliders;\n\n  return {\n    selection,\n    color,\n    visible: true,\n    slider: slider || domain,\n  };\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader) {\n  const result = [];\n  const loaderDimensions = loader.dimensions;\n  // Add channel automatically as the first avaialable value for each dimension.\n  const defaultSelection = buildDefaultSelection(loaderDimensions);\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: defaultSelection });\n\n  const domains = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.domain);\n  const colors = loader.isRgb\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.autoSliders);\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      color: colors ? colors[i] : VIEWER_PALETTE[i],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\n/**\n * A user may want to use pre-defined channels of interest\n * (defined in a `spatialLayers` coordination object),\n * but wants to allow Vitessce to auto-initialize the\n * sliders, colors, and/or domains for those channels.\n * This function allows those channel properties to\n * be initialized.\n * @param {object[]} layerDefsOrig The original array\n * of user-defined layer definitions, which must contain\n * an array of channel definitions with the .selection\n * property, but may be missing the .domain, .color, .visible,\n * or .slider properties.\n * @param {object} loaders Mapping from layer index to loader\n * instance.\n * @returns {Promise<array>} A tuple of [newLayerDefs, didInitialize],\n * where newLayerDefs is an array of the layers which contains\n * initialized channel properties,\n * and didInitialize is a boolean value indicating whether any\n * channels were initialized.\n */\nexport async function initializeLayerChannelsIfMissing(layerDefsOrig, loaders) {\n  const layerDefs = cloneDeep(layerDefsOrig);\n  const newLayerDefPromises = [];\n\n  let didInitialize = false;\n  for (let layerIndex = 0; layerIndex < layerDefs.length; layerIndex++) {\n    const layerDef = layerDefs[layerIndex];\n    const loader = loaders[layerDef.index];\n    let newLayerDefPromise = Promise.resolve(layerDef);\n    if (layerDef.channels) {\n      const newChannelDefPromises = [];\n      for (let channelIndex = 0; channelIndex < layerDef.channels.length; channelIndex++) {\n        const channelDef = layerDef.channels[channelIndex];\n        let newChannelDefPromise = Promise.resolve(channelDef);\n        // Only auto-initialize if domains, colors, or sliders is missing.\n        if (channelDef.selection && !(channelDef.color && channelDef.slider)) {\n          newChannelDefPromise = initializeChannelForSelection(\n            loader, channelDef.selection, channelIndex,\n          )\n            .then(autoChannelDef => Promise.resolve({ ...autoChannelDef, ...channelDef }));\n          didInitialize = true;\n        }\n        newChannelDefPromises.push(newChannelDefPromise);\n      }\n      newLayerDefPromise = Promise.all(newChannelDefPromises)\n        .then(newChannelDefs => Promise.resolve({ ...layerDef, channels: newChannelDefs }));\n    }\n    newLayerDefPromises.push(newLayerDefPromise);\n  }\n  const newLayerDefs = await Promise.all(newLayerDefPromises);\n  return [newLayerDefs, didInitialize];\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n      || imageLoaders.every(loader => !loader?.physicalSizes?.x || !loader?.physicalSizes?.y)\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = imageLoaders.reduce((acc, loader) => {\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const loader = imageLoaders[j];\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale, 1]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMeta = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMeta[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMeta = getMetaWithTransformMatrices(nextImageMeta, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, domainType: 'Min/Max', modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMeta];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i],\n        viewSize,\n        zoomBackoff,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n    }\n  } else if (cellValues.length > 0) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    const xExtent = extent(cellCoordinates, c => c[0]);\n    const yExtent = extent(cellCoordinates, c => c[1]);\n    const xRange = xExtent[1] - xExtent[0];\n    const yRange = yExtent[1] - yExtent[0];\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  }\n  return { initialTargetX, initialTargetY, initialZoom };\n}\n","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"lodash/clamp\");","module.exports = require(\"lodash/range\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"@turf/helpers\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"lodash\");","module.exports = require(\"math.gl\");","import Ajv from 'ajv';\nimport isNil from 'lodash/isNil';\nimport { dsvFormat } from 'd3-dsv';\nimport { parse as json2csv } from 'json2csv';\nimport { colorArrayToString, colorStringToArray } from './utils';\nimport { nodeTransform } from './cell-set-utils';\nimport { DEFAULT_COLOR } from '../utils';\nimport {\n  HIERARCHICAL_SCHEMAS, TABULAR_SCHEMAS,\n  MIME_TYPE_JSON, MIME_TYPE_TABULAR,\n  SEPARATOR_TABULAR, NA_VALUE_TABULAR,\n} from './constants';\n\n/**\n * Check if an imported tree has an old schema version that we know how to\n * \"upgrade\" to the latest schema version.  Validate against the schema.\n * @param {object} currTree A hierarchical tree object with a .version property,\n * which has already passed schema validation, but may not have the latest schema version.\n * @param {string} datatype The data type of the items in the schema.\n */\nexport function tryUpgradeTreeToLatestSchema(currTree, datatype) {\n  const validate = new Ajv().compile(HIERARCHICAL_SCHEMAS[datatype].schema);\n  const valid = validate(currTree);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Tree validation failed: ${failureReason}`);\n  } else if (currTree.datatype !== datatype) {\n    throw new Error(\n      `The data type does not match the expected data type of '${datatype}'.`,\n    );\n  }\n  if (currTree.version === '0.1.2') {\n    // To upgrade from cell-sets schema 0.1.2 to 0.1.3,\n    // add a confidence value of null for each cell ID.\n    return {\n      ...currTree,\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      tree: currTree.tree.map(levelZeroNode => nodeTransform(\n        levelZeroNode,\n        n => !n.children && Array.isArray(n.set),\n        n => ({ ...n, set: n.set.map(itemId => ([itemId, null])) }), [],\n      )),\n    };\n  }\n  return currTree;\n}\n\n/**\n * Handler for JSON imports. Validates and upgrades against the hierarchical sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\nexport function handleImportJSON(result, datatype) {\n  let importData = JSON.parse(result);\n  // Validate the imported file.\n  importData = tryUpgradeTreeToLatestSchema(importData, datatype);\n  return importData;\n}\n\n/**\n * Handler for tabular imports. Validates against the tabular sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\nexport function handleImportTabular(result, datatype) {\n  const dsvParser = dsvFormat(SEPARATOR_TABULAR);\n  const importData = dsvParser.parse(result, row => ({\n    groupName: row.groupName,\n    setName: row.setName,\n    setColor: (row.setColor ? colorStringToArray(row.setColor) : DEFAULT_COLOR),\n    obsId: row.obsId,\n    predictionScore: (\n      (\n        isNil(row.predictionScore)\n        || row.predictionScore === NA_VALUE_TABULAR\n      )\n        ? null\n        : +row.predictionScore\n    ),\n  }));\n  // Validate the imported file.\n  const validate = new Ajv().compile(TABULAR_SCHEMAS[datatype].schema);\n  const valid = validate(importData);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Import validation failed: ${failureReason}`);\n  } else {\n    // Convert the validated array to a tree representation.\n    const treeToImport = {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      datatype,\n      tree: [],\n    };\n    const uniqueGroupNames = Array.from(new Set(importData.map(d => d.groupName)));\n    uniqueGroupNames.forEach((groupName) => {\n      const levelZeroNode = {\n        name: groupName,\n        children: [],\n      };\n      const groupRows = importData.filter(d => d.groupName === groupName);\n      const uniqueSetNames = Array.from(new Set(groupRows.map(d => d.setName)));\n      uniqueSetNames.forEach((setName) => {\n        const setRows = groupRows.filter(d => d.setName === setName);\n        const { setColor } = setRows[0];\n        const levelOneNode = {\n          name: setName,\n          color: setColor,\n          set: setRows.map(d => ([d.obsId, d.predictionScore])),\n        };\n        levelZeroNode.children.push(levelOneNode);\n      });\n      treeToImport.tree.push(levelZeroNode);\n    });\n    return treeToImport;\n  }\n}\n\n/**\n * Convert a tree object to a JSON representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportJSON(result) {\n  const jsonString = JSON.stringify(result);\n  const dataString = `data:${MIME_TYPE_JSON};charset=utf-8,${encodeURIComponent(jsonString)}`;\n  return dataString;\n}\n\n/**\n * Convert a tree object with one level (height === 1) to a tabular representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportTabular(result) {\n  // Convert a tree object to an array of JSON objects.\n  const exportData = [];\n  result.tree.forEach((levelZeroNode) => {\n    levelZeroNode.children.forEach((levelOneNode) => {\n      if (levelOneNode.set) {\n        levelOneNode.set.forEach(([obsId, prob]) => {\n          exportData.push({\n            groupName: levelZeroNode.name,\n            setName: levelOneNode.name,\n            setColor: colorArrayToString(levelOneNode.color),\n            obsId,\n            predictionScore: isNil(prob) ? NA_VALUE_TABULAR : prob,\n          });\n        });\n      }\n    });\n  });\n  const csvString = json2csv(exportData, {\n    fields: ['groupName', 'setName', 'setColor', 'obsId', 'predictionScore'],\n    delimiter: SEPARATOR_TABULAR,\n  });\n  const dataString = `data:${MIME_TYPE_TABULAR};charset=utf-8,${encodeURIComponent(csvString)}`;\n  return dataString;\n}\n\n/**\n * Download a file. Appends and removes an anchor node in the DOM.\n * @param {string} dataString The function that converts the data to a string.\n * @param {string} fileName The name of the file to be downloaded.\n */\nexport function downloadForUser(dataString, fileName) {\n  const downloadAnchorNode = document.createElement('a');\n  downloadAnchorNode.setAttribute('href', dataString);\n  downloadAnchorNode.setAttribute('download', fileName);\n  document.body.appendChild(downloadAnchorNode); // required for firefox\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Popper\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"zustand/shallow\");","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","module.exports = require(\"short-number\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"tinycolor2\");","// See https://reactjs.org/docs/code-splitting.html#named-exports\nexport { Vega as default } from 'react-vega';\n","import React, { Suspense, useMemo } from 'react';\nimport { Handler } from 'vega-tooltip';\nimport ReactVega from './ReactVega';\n\n// TODO: React.lazy is not working with Vitessce in the portal-ui.\n// For now, we can work around this by not using React.lazy,\n// but for performance benefits that come with lazy-loading\n// we should eventually try to resolve this issue.\n// const ReactVega = React.lazy(() => import('./ReactVega'));\n\nexport const DATASET_NAME = 'table';\n\nfunction isVega(spec) {\n  return spec.$schema === 'https://vega.github.io/schema/vega/v5.json';\n}\n\n/**\n * A wrapper around the react-vega Vega component.\n * @param {object} props\n * @param {object} spec A vega or vega-lite spec.\n * @param {object[]} data The plot data as an array of objects.\n * @param {object} signalListeners Vega signal listeners. Optional.\n */\nexport default function VegaPlot(props) {\n  const {\n    spec: partialSpec,\n    data,\n    signalListeners,\n  } = props;\n\n  const spec = {\n    ...partialSpec,\n    data: (isVega(partialSpec)\n      ? [\n        { name: DATASET_NAME },\n        ...partialSpec.data,\n      ]\n      : { name: DATASET_NAME }\n    ),\n  };\n\n  const vegaComponent = useMemo(() => (\n    <ReactVega\n      spec={spec}\n      data={{\n        [DATASET_NAME]: data,\n      }}\n      signalListeners={signalListeners}\n      tooltip={new Handler().call}\n      renderer=\"canvas\"\n      scaleFactor={3}\n    />\n  ), [spec, data, signalListeners]);\n\n  return (\n    spec && data && data.length > 0 ? (\n      <Suspense fallback={<div>Loading...</div>}>\n        {vegaComponent}\n      </Suspense>\n    ) : null\n  );\n}\n","/**\n * Vega-Lite themes that can be passed to the `config` property\n * of the vega-lite spec.\n */\nexport const VEGA_THEMES = {\n  dark: {\n    // The vega-themes dark theme.\n    // Reference: https://github.com/vega/vega-themes/blob/master/src/theme-dark.ts\n    background: null,\n    title: { color: '#fff' },\n    style: {\n      'guide-label': {\n        fill: '#fff',\n      },\n      'guide-title': {\n        fill: '#fff',\n      },\n    },\n    axis: {\n      domainColor: '#fff',\n      gridColor: '#888',\n      tickColor: '#fff',\n    },\n  },\n  light: {\n    // The default vega theme.\n    background: null,\n  },\n};\n","export { default as VegaPlot, DATASET_NAME } from './VegaPlot';\nexport { VEGA_THEMES } from './utils';\n","module.exports = require(\"@turf/concave\");","module.exports = require(\"@turf/centroid\");","module.exports = require(\"ajv\");","module.exports = require(\"regenerator-runtime\");","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","module.exports = require(\"classnames\");","module.exports = require(\"rc-tree\");","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES } from '../vega';\nimport { colorArrayToString } from './utils';\n\n/**\n * Cell set sizes displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {object[]} props.data The set size data, an array\n * of objects with properties `name`, `key`, `color`, and `size`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 120.\n * @param {number} props.keyLength The length of the `key` property of\n * each data point. Assumes all key strings have the same length.\n * By default, 36.\n */\nexport default function CellSetSizesPlot(props) {\n  const {\n    data: rawData,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n    keyLength = 36,\n  } = props;\n\n  // Add a property `keyName` which concatenates the key and the name,\n  // which is both unique and can easily be converted\n  // back to the name by taking a substring.\n  // Add a property `colorString` which contains the `[r, g, b]` color\n  // after converting to a color hex string.\n  const data = rawData.map(d => ({\n    ...d,\n    keyName: d.key + d.name,\n    colorString: colorArrayToString(d.color),\n  }));\n\n  // Manually set the color scale so that Vega-Lite does\n  // not choose the colors automatically.\n  const colors = {\n    domain: data.map(d => d.key),\n    range: data.map(d => d.colorString),\n  };\n\n  // Get an array of keys for sorting purposes.\n  const keys = data.map(d => d.keyName);\n\n  const spec = {\n    mark: { type: 'bar' },\n    encoding: {\n      x: {\n        field: 'keyName',\n        type: 'nominal',\n        axis: { labelExpr: `substring(datum.label, ${keyLength})` },\n        title: 'Cell Set',\n        sort: keys,\n      },\n      y: {\n        field: 'size',\n        type: 'quantitative',\n        title: 'Cell Set Size',\n      },\n      color: {\n        field: 'key',\n        type: 'nominal',\n        scale: colors,\n        legend: null,\n      },\n      tooltip: {\n        field: 'size',\n        type: 'quantitative',\n      },\n    },\n    width: clamp(width - marginRight, 10, Infinity),\n    height: clamp(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React from 'react';\nimport RcTree from 'rc-tree';\nimport classNames from 'classnames';\n\n/**\n * A helper component around the rc-tree\n * library's tree component, to set\n * default props.\n */\nconst Tree = React.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    className,\n    showIcon,\n    blockNode,\n    children,\n    checkable,\n  } = props;\n  return (\n    <RcTree\n      itemHeight={32}\n      ref={ref}\n      {...props}\n      className={classNames(className, {\n        [`${prefixCls}-icon-hide`]: !showIcon,\n        [`${prefixCls}-block-node`]: blockNode,\n      })}\n      checkable={checkable ? <span className={`${prefixCls}-checkbox-inner`} /> : checkable}\n    >\n      {children}\n    </RcTree>\n  );\n});\n\nTree.defaultProps = {\n  virtual: false,\n  checkable: false,\n  showIcon: false,\n  blockNode: true,\n  prefixCls: 'rc-tree',\n};\n\nexport default Tree;\n","import React, { useRef, useCallback } from 'react';\nimport RcTooltip from 'rc-tooltip';\n\n/**\n * This is a small wrapper around the Tooltip component from the rc-tooltip library,\n * which is required to be able to apply theme styles to the tooltip.\n * The default `getTooltipContainer` function used by rc-tooltip\n * just returns `document.body` (see https://github.com/react-component/tooltip#props),\n * We want theme styles to be applied relative to the closest `.vitessce-container`\n * ancestor element.\n * https://github.com/hubmapconsortium/vitessce/pull/494#discussion_r395957914\n * @param {object} props Props are passed through to the <RcTooltip/> from the library.\n */\nexport default function HelpTooltip(props) {\n  const { title, content, overlayClassName } = props;\n  const spanRef = useRef();\n\n  const getTooltipContainer = useCallback(() => {\n    if (spanRef.current) {\n      return spanRef.current.closest('.vitessce-container');\n    }\n    return null;\n  }, [spanRef]);\n\n  const overlay = title || content;\n\n  return (\n    <>\n      <span ref={spanRef} />\n      <RcTooltip\n        getTooltipContainer={getTooltipContainer}\n        overlayClassName={overlayClassName}\n        overlay={overlay}\n        {...props}\n      />\n    </>\n  );\n}\n\nHelpTooltip.defaultProps = {\n  overlayClassName: 'help-tooltip',\n  placement: 'top',\n  trigger: 'hover',\n  mouseEnterDelay: 0.2,\n  mouseLeaveDelay: 0,\n};\n","import React from 'react';\nimport HelpTooltip from './HelpTooltip';\n\n/**\n * This is a wrapper around the HelpTooltip component, to style it as a popover,\n * and change the trigger to \"click\" rather than \"hover\".\n * @param {*} props Props are passed through to the HelpTooltip component.\n */\nexport default function Popover(props) {\n  return (\n    <HelpTooltip {...props} />\n  );\n}\n\nPopover.defaultProps = {\n  overlayClassName: 'popover',\n  placement: 'top',\n  trigger: 'click',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0,\n};\n","import React, { useState, useEffect } from 'react';\nimport { TwitterPicker } from 'react-color';\nimport { colorArrayToString, callbackOnKeyPress } from './utils';\nimport { PALETTE } from '../utils';\nimport Popover from './Popover';\n\n/**\n * Wrapper around a button element that supports asking for confirmation.\n * @param {object} props\n * @param {string} props.title The main button text.\n * @param {string} props.subtitle Smaller text on a line beneath the main text. Optional.\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {function} props.handler A function to call on button click (or after confirmation).\n * @param {string} props.handlerKey A key associated with the button, to support accessibility.\n * @param {boolean} props.confirm Does the user need to press the button again to confirm?\n * By default, false.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, the button can clear its confirmation state.\n */\nfunction PopoverMenuListButton(props) {\n  const {\n    title, subtitle, onClick, handler, handlerKey, confirm,\n    visible,\n  } = props;\n\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    // Want to clear the \"confirming\",\n    // state if the user hides the popover.\n    setIsConfirming(false);\n  }, [visible]);\n\n  function handleOrRequireConfirm() {\n    if (!confirm || isConfirming) {\n      onClick();\n      handler();\n    } else {\n      setIsConfirming(true);\n    }\n  }\n\n  const titleWithConfirm = `${isConfirming ? 'Confirm ' : ''}${title}`;\n\n  return (\n    <button\n      title={titleWithConfirm}\n      type=\"button\"\n      onClick={handleOrRequireConfirm}\n      onKeyPress={e => callbackOnKeyPress(e, handlerKey, handleOrRequireConfirm)}\n    >{titleWithConfirm}\n      {subtitle && (<><br /><span className=\"small\">{subtitle}</span></>)}\n    </button>\n  );\n}\n\n/**\n * Helper component to create a list of buttons for the body of a popover.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, buttons can clear confirmation states.\n */\nfunction PopoverMenuList(props) {\n  const {\n    menuConfig,\n    onClick,\n    color = null,\n    palette = null,\n    setColor = null,\n    visible,\n  } = props;\n\n  function handleColorChange({ rgb }) {\n    if (rgb && setColor) {\n      setColor([rgb.r, rgb.g, rgb.b]);\n    }\n  }\n\n  const defaultPalette = palette\n    ? palette.map(colorArrayToString)\n    : PALETTE.concat([[255, 255, 255], [128, 128, 128], [0, 0, 0]]).map(colorArrayToString);\n\n  return (\n    <div>\n      {color && setColor && defaultPalette && (\n        <TwitterPicker\n          className=\"popover-menu-color\"\n          disableAlpha\n          width={108}\n          triangle=\"hide\"\n          colors={defaultPalette}\n          color={colorArrayToString(color)}\n          onChangeComplete={handleColorChange}\n        />\n      )}\n      <ul className=\"popover-menu-list\">\n        {menuConfig.map(item => (\n          <li key={item.title + item.subtitle}>\n            <PopoverMenuListButton\n              {...item}\n              onClick={onClick}\n              visible={visible}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n/**\n * Helper component to create a popover component with a list of buttons.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {string} placement Where to place the popover (top, bottom, left, right).\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {Element|React.Component} props.children Children to render,\n * which will trigger the popover on click.\n */\nexport default function PopoverMenu(props) {\n  const {\n    menuConfig, placement, children,\n    color = null, setColor = null, palette = null,\n  } = props;\n\n  const [visible, setVisible] = useState(false);\n\n  return (\n    <Popover\n      content={(\n        <PopoverMenuList\n          menuConfig={menuConfig}\n          onClick={() => setVisible(false)}\n          color={color}\n          setColor={setColor}\n          palette={palette}\n          visible={visible}\n        />\n)}\n      placement={placement}\n      visible={visible}\n      onVisibleChange={setVisible}\n    >\n      {children}\n    </Popover>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\"\n});\n\nfunction SvgMenu(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMenu, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/menu.bc56e94a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { TreeNode as RcTreeNode } from 'rc-tree';\nimport { getDataAndAria } from 'rc-tree/es/util';\nimport classNames from 'classnames';\nimport range from 'lodash/range';\nimport isEqual from 'lodash/isEqual';\nimport PopoverMenu from './PopoverMenu';\nimport HelpTooltip from './HelpTooltip';\nimport { callbackOnKeyPress, colorArrayToString, getLevelTooltipText } from './utils';\nimport { ReactComponent as MenuSVG } from '../../assets/menu.svg';\nimport { DEFAULT_COLOR } from '../utils';\n\n\n/**\n * Construct a `menuConfig` array for the PopoverMenu component.\n * @param {object} props The props for the TreeNode component.\n * @returns {object[]} An array of menu items to pass to PopoverMenu.\n */\nfunction makeNodeViewMenuConfig(props) {\n  const {\n    path,\n    level,\n    height,\n    onCheckNode,\n    onNodeRemove,\n    onNodeSetIsEditing,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    checkable,\n    editable,\n    exportable,\n    checked,\n  } = props;\n\n  return [\n    ...(editable ? [\n      {\n        title: 'Rename',\n        handler: () => { onNodeSetIsEditing(path, true); },\n        handlerKey: 'r',\n      },\n      {\n        title: 'Delete',\n        confirm: true,\n        handler: () => { onNodeRemove(path); },\n        handlerKey: 'd',\n      },\n    ] : []),\n    ...(level === 0 && exportable ? [\n      {\n        title: 'Export hierarchy',\n        subtitle: '(to JSON file)',\n        handler: () => { onExportLevelZeroNodeJSON(path); },\n        handlerKey: 'j',\n      },\n      ...(height <= 1 ? [\n        {\n          title: 'Export hierarchy',\n          subtitle: '(to CSV file)',\n          handler: () => { onExportLevelZeroNodeTabular(path); },\n          handlerKey: 't',\n        },\n      ] : []),\n    ] : []),\n    ...(level > 0 ? [\n      ...(checkable ? [\n        {\n          title: (checked ? 'Uncheck' : 'Check'),\n          handler: () => { onCheckNode(path, !checked); },\n          handlerKey: 's',\n        },\n      ] : []),\n      ...(exportable ? [\n        {\n          title: 'Export set',\n          subtitle: '(to JSON file)',\n          handler: () => { onExportSetJSON(path); },\n          handlerKey: 'e',\n        },\n      ] : []),\n    ] : []),\n  ];\n}\n\n/**\n * The \"static\" node component to render when the user is not renaming.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeStatic(props) {\n  const {\n    title,\n    path,\n    nodeKey,\n    level,\n    height,\n    color,\n    checkbox,\n    isChecking,\n    isLeaf,\n    onNodeSetColor,\n    onNodeView,\n    expanded,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    disableTooltip,\n    size,\n    datatype,\n    editable,\n  } = props;\n  const shouldCheckNextLevel = (level === 0 && !expanded);\n  const nextLevelToCheck = (\n    (checkedLevelIndex && isEqual(path, checkedLevelPath) && checkedLevelIndex < height)\n      ? checkedLevelIndex + 1\n      : 1\n  );\n  const numberFormatter = new Intl.NumberFormat('en-US');\n  const niceSize = numberFormatter.format(size);\n  let tooltipText;\n  if (shouldCheckNextLevel) {\n    tooltipText = getLevelTooltipText(nextLevelToCheck);\n  } else if (isLeaf || !expanded) {\n    tooltipText = `Color individual set (${niceSize} ${datatype}${(size === 1 ? '' : 's')})`;\n  } else {\n    tooltipText = 'Color by expanded descendants';\n  }\n  // If this is a level zero node and is _not_ expanded, then upon click,\n  // the behavior should be to color by the first or next cluster level.\n  // If this is a level zero node and _is_ expanded, or if any other node,\n  // click should trigger onNodeView.\n  const onClick = (level === 0 && !expanded\n    ? () => onCheckLevel(nodeKey, nextLevelToCheck)\n    : () => onNodeView(path)\n  );\n  const tooltipProps = (disableTooltip ? { visible: false } : {});\n  const popoverMenuConfig = makeNodeViewMenuConfig(props);\n  return (\n    <span>\n      <HelpTooltip title={tooltipText} {...tooltipProps}>\n        <button\n          type=\"button\"\n          onClick={onClick}\n          onKeyPress={e => callbackOnKeyPress(e, 'v', () => onNodeView(path))}\n          className=\"title-button\"\n        >\n          {title}\n        </button>\n      </HelpTooltip>\n      {popoverMenuConfig.length > 0 ? (\n        <PopoverMenu\n          menuConfig={makeNodeViewMenuConfig(props)}\n          color={level > 0 && editable ? (color || DEFAULT_COLOR) : null}\n          setColor={c => onNodeSetColor(path, c)}\n        >\n          <MenuSVG className=\"node-menu-icon\" />\n        </PopoverMenu>\n      ) : null}\n      {level > 0 && isChecking ? checkbox : null}\n      {level > 0 && (<span className=\"node-size-label\">{niceSize}</span>)}\n    </span>\n  );\n}\n\n/**\n * The \"editing\" node component to render when the user is renaming,\n * containing a text input field and a save button.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeEditing(props) {\n  const {\n    title,\n    path,\n    onNodeSetName,\n    onNodeCheckNewName,\n  } = props;\n  const [currentTitle, setCurrentTitle] = useState(title);\n\n  // Do not allow the user to save a potential name if it conflicts with\n  // another name in the hierarchy.\n  const hasConflicts = onNodeCheckNewName(path, currentTitle);\n  function trySetName() {\n    if (!hasConflicts) {\n      onNodeSetName(path, currentTitle, true);\n    }\n  }\n  return (\n    <span className=\"title-button-with-input\">\n      <input\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus\n        className=\"title-input\"\n        type=\"text\"\n        value={currentTitle}\n        onChange={(e) => { setCurrentTitle(e.target.value); }}\n        onKeyPress={e => callbackOnKeyPress(\n          e,\n          'Enter',\n          trySetName,\n        )}\n        onFocus={e => e.target.select()}\n      />\n      {!hasConflicts && (\n        <button\n          type=\"button\"\n          className=\"title-save-button\"\n          onClick={trySetName}\n        >\n          Save\n        </button>\n      )}\n    </span>\n  );\n}\n\n/**\n * A \"delegation\" component, to decide whether to render\n * an \"editing\" vs. \"static\" node component.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNode(props) {\n  const {\n    isEditing,\n    isCurrentSet,\n  } = props;\n  return (\n    (isEditing || isCurrentSet)\n      ? (<NamedSetNodeEditing {...props} />)\n      : (<NamedSetNodeStatic {...props} />)\n  );\n}\n\n/**\n * Buttons for viewing each hierarchy level,\n * rendered below collapsed level zero nodes.\n * @param {object} props The props for the (level zero) TreeNode component.\n */\nfunction LevelsButtons(props) {\n  const {\n    nodeKey,\n    path,\n    height,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    hasColorEncoding,\n  } = props;\n  function onCheck(event) {\n    if (event.target.checked) {\n      const newLevel = parseInt(event.target.value, 10);\n      onCheckLevel(nodeKey, newLevel);\n    }\n  }\n  return (\n    <div className=\"level-buttons-container\">\n      {range(1, height + 1).map((i) => {\n        const isChecked = isEqual(path, checkedLevelPath) && i === checkedLevelIndex;\n        return (\n          <div className=\"level-buttons\" key={i}>\n            <HelpTooltip title={getLevelTooltipText(i)}>\n              <input\n                className={clsx('level-radio-button', { checked: isChecked && !hasColorEncoding })}\n                type=\"checkbox\"\n                value={i}\n                checked={isChecked && hasColorEncoding}\n                onChange={onCheck}\n              />\n            </HelpTooltip>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/**\n * Render the \"switcher\" icon.\n * Arrow for collapsed/expanded non-leaf nodes,\n * or square for leaf nodes.\n * @param {object} props The props for the TreeNode component.\n */\nfunction SwitcherIcon(props) {\n  const {\n    isLeaf, isOpen, color,\n  } = props;\n  const hexColor = (color ? colorArrayToString(color) : undefined);\n  if (isLeaf) {\n    return (\n      <i\n        className=\"anticon anticon-circle rc-tree-switcher-icon\"\n      >\n        <svg\n          viewBox=\"0 0 1024 1024\"\n          focusable=\"false\"\n          data-icon=\"caret-down\"\n          width=\"1em\"\n          height=\"1em\"\n          aria-hidden=\"true\"\n        >\n          <rect fill={hexColor} x={600 / 2} y={600 / 2} width={1024 - 600} height={1024 - 600} />\n        </svg>\n      </i>\n    );\n  }\n  return (\n    <i\n      className=\"anticon anticon-caret-down rc-tree-switcher-icon\"\n    >\n      <svg\n        viewBox=\"0 0 1024 1024\"\n        focusable=\"false\"\n        data-icon=\"caret-down\"\n        width=\"1em\"\n        height=\"1em\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fill={(isOpen ? '#444' : hexColor)}\n          d=\"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z\"\n        />\n      </svg>\n    </i>\n  );\n}\n\n/**\n * A custom TreeNode component.\n * @extends {RcTreeNode} TreeNode from the rc-tree library.\n */\nexport default class TreeNode extends RcTreeNode {\n  /**\n   * Override the main node text elements.\n   */\n  renderSelector = () => {\n    const {\n      title,\n      isCurrentSet,\n      isSelected,\n      isEditing,\n      onDragStart: onDragStartProp,\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        draggable,\n      },\n    } = this.context;\n\n    const onDragStart = (e) => {\n      onDragStartProp();\n      this.onDragStart(e);\n    };\n\n    const wrapClass = `${prefixClass}-node-content-wrapper`;\n    const isDraggable = (!isCurrentSet && !isEditing && draggable);\n    return (\n      <span\n        ref={this.setSelectHandle}\n        title={title}\n        className={classNames(\n          wrapClass,\n          `${wrapClass}-${this.getNodeState() || 'normal'}`,\n          isSelected && `${prefixClass}-node-selected`,\n          isDraggable && 'draggable',\n        )}\n        draggable={isDraggable}\n        aria-grabbed={isDraggable}\n        onDragStart={isDraggable ? onDragStart : undefined}\n      >\n        <NamedSetNode\n          {...this.props}\n          prefixClass={prefixClass}\n          checkbox={this.renderCheckbox()}\n        />\n        {this.renderLevels()}\n      </span>\n    );\n  };\n\n  /**\n   * Render the LevelsButtons component if this node\n   * is a collapsed level zero node.\n   */\n  renderLevels = () => {\n    const { level, expanded } = this.props;\n    if (level !== 0 || expanded) {\n      return null;\n    }\n    return (\n      <LevelsButtons\n        {...this.props}\n      />\n    );\n  }\n\n  /**\n   * Override the switcher element.\n   */\n  renderSwitcher = () => {\n    const { expanded, isLeaf, color } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        onNodeExpand,\n      },\n    } = this.context;\n\n    const onNodeExpandWrapper = (e) => {\n      // Do not call onNodeExpand if the node is a leaf node.\n      if (!isLeaf) {\n        onNodeExpand(e, this);\n      }\n    };\n\n    const switcherClass = classNames(\n      `${prefixClass}-switcher`,\n      { [`${prefixClass}-switcher_${(expanded ? 'open' : 'close')}`]: !isLeaf },\n    );\n    return (\n      <span\n        className={switcherClass}\n        onClick={onNodeExpandWrapper}\n        onKeyPress={e => callbackOnKeyPress(e, 'd', onNodeExpandWrapper)}\n        role=\"button\"\n        tabIndex=\"0\"\n      >\n        <SwitcherIcon\n          isLeaf={isLeaf}\n          isOpen={expanded}\n          color={color}\n        />\n      </span>\n    );\n  };\n\n  /**\n   * Override main render function,\n   * to enable overriding the sub-render functions\n   * for switcher, selector, etc.\n   */\n  render() {\n    const {\n      style, loading, level,\n      dragOver, dragOverGapTop, dragOverGapBottom,\n      isLeaf,\n      expanded, selected, checked, halfChecked,\n      onDragEnd: onDragEndProp,\n      expandable,\n      ...otherProps\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        filterTreeNode,\n        draggable,\n      },\n    } = this.context;\n    const disabled = this.isDisabled();\n    const dataAndAriaAttributeProps = getDataAndAria(otherProps);\n\n    const onDragEnd = (e) => {\n      onDragEndProp();\n      this.onDragEnd(e);\n    };\n\n    return (\n      <li\n        className={classNames('rc-tree-treenode', `level-${level}-treenode`, {\n          [`${prefixClass}-treenode-disabled`]: disabled,\n          [`${prefixClass}-treenode-switcher-${expanded ? 'open' : 'close'}`]: !isLeaf,\n          [`${prefixClass}-treenode-checkbox-checked`]: checked,\n          [`${prefixClass}-treenode-checkbox-indeterminate`]: halfChecked,\n          [`${prefixClass}-treenode-selected`]: selected,\n          [`${prefixClass}-treenode-loading`]: loading,\n\n          'drag-over': !disabled && dragOver,\n          'drag-over-gap-top': !disabled && dragOverGapTop,\n          'drag-over-gap-bottom': !disabled && dragOverGapBottom,\n          'filter-node': filterTreeNode && filterTreeNode(this),\n        })}\n        style={style}\n        role=\"treeitem\"\n        onDragEnter={draggable ? this.onDragEnter : undefined}\n        onDragOver={draggable ? this.onDragOver : undefined}\n        onDragLeave={draggable ? this.onDragLeave : undefined}\n        onDrop={draggable ? this.onDrop.bind(this) : undefined}\n        onDragEnd={draggable ? onDragEnd : undefined}\n        {...dataAndAriaAttributeProps}\n      >\n        {expandable ? this.renderSwitcher() : null}\n        {this.renderSelector()}\n        {this.renderChildren()}\n      </li>\n    );\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUnion(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16.433999 10.234\",\n    height: 12,\n    width: 18,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.117,-2.883)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUnion, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/union.de5168c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIntersection(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 12,\n    viewBox: \"0 0 16 10\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,-3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgIntersection, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/intersection.b0003109.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: \"5%\",\n  width: \"90%\",\n  height: \"100%\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"rect\", {\n  x: 0,\n  y: 0,\n  width: 25.3804963846,\n  height: 16,\n  mask: \"url(#union-mask)\"\n}));\n\nfunction SvgComplement(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"svg14\",\n    viewBox: \"0 0 25.3804963846 16\",\n    height: 16,\n    width: 25.3804963846,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"union-mask\",\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16\n  }, _ref2, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(4.69,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    },\n    fill: \"black\"\n  })))), _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgComplement, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/complement.c220ca8c.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback } from 'react';\nimport PopoverMenu from './PopoverMenu';\nimport {\n  handleImportJSON,\n  handleImportTabular,\n} from './io';\nimport {\n  MIME_TYPE_JSON,\n  MIME_TYPE_TABULAR,\n} from './constants';\n\nimport { ReactComponent as SetUnionSVG } from '../../assets/sets/union.svg';\nimport { ReactComponent as SetIntersectionSVG } from '../../assets/sets/intersection.svg';\nimport { ReactComponent as SetComplementSVG } from '../../assets/sets/complement.svg';\n\n/**\n * A plus button for creating or importing set hierarchies.\n * @param {object} props\n * @param {string} props.datatype The data type to validate imported hierarchies against.\n * @param {function} props.onError A callback to pass error message strings.\n * @param {function} props.onImportTree A callback to pass successfully-validated tree objects.\n * @param {function} props.onCreateLevelZeroNode A callback to create a new empty\n * level zero node.\n * @param {boolean} props.importable Is importing allowed?\n * If not, the import button will not be rendered.\n * @param {boolean} props.editable Is editing allowed?\n * If not, the create button will not be rendered.\n */\nexport function PlusButton(props) {\n  const {\n    datatype, onError, onImportTree, onCreateLevelZeroNode,\n    importable, editable,\n  } = props;\n\n  /**\n   * Import a file, then process the imported data via the supplied handler function.\n   * @param {Function} importHandler The function to process the imported data.\n   * @param {string} mimeType The accepted mime type for the file upload input.\n   * @returns {Function} An import function corresponding to the supplied parameters.\n   */\n  const onImport = useCallback((importHandler, mimeType) => () => {\n    const uploadInputNode = document.createElement('input');\n    uploadInputNode.setAttribute('type', 'file');\n    uploadInputNode.setAttribute('accept', mimeType);\n    document.body.appendChild(uploadInputNode); // required for firefox\n    uploadInputNode.click();\n    uploadInputNode.addEventListener('change', (event) => {\n      if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n        onError('Local file reading APIs are not fully supported in this browser.');\n        return;\n      }\n      const { files } = event.target;\n      if (!files || files.length !== 1) {\n        onError('Incorrect number of files selected.');\n        return;\n      }\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        const { result } = reader;\n        try {\n          const treeToImport = importHandler(result, datatype);\n          onError(false); // Clear any previous import error.\n          onImportTree(treeToImport);\n        } catch (e) {\n          onError(e.message);\n        }\n      }, false);\n      reader.readAsText(files[0]);\n    });\n    uploadInputNode.remove();\n  }, [datatype, onError, onImportTree]);\n\n  const menuConfig = [\n    ...(editable ? [\n      {\n        title: 'Create hierarchy',\n        handler: onCreateLevelZeroNode,\n        handlerKey: 'n',\n      },\n    ] : []),\n    ...(importable ? [\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from CSV file)',\n        handler: onImport(handleImportTabular, MIME_TYPE_TABULAR),\n        handlerKey: 'c',\n      },\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from JSON file)',\n        handler: onImport(handleImportJSON, MIME_TYPE_JSON),\n        handlerKey: 'j',\n      },\n    ] : []),\n  ];\n\n  return (menuConfig.length > 0 ? (\n    <PopoverMenu\n      menuConfig={menuConfig}\n    >\n      <button className=\"plus-button\" type=\"submit\">+</button>\n    </PopoverMenu>\n  ) : null);\n}\n\n/**\n * Set operations buttons (union, intersection, complement)\n * and a view checked sets button.\n * @param {object} props\n * @param {function} props.onUnion A callback for the union button.\n * @param {function} props.onIntersection A callback for the intersection button.\n * @param {function} props.onComplement A callback for the complement button.\n * @param {boolean} props.operatable Are set operations allowed?\n * If not, the union, intersection, and complement buttons will not be rendered.\n */\nexport function SetOperationButtons(props) {\n  const {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  return (\n    <>\n      {operatable && (\n        <>\n          <button\n            onClick={onUnion}\n            title=\"New set from union of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToUnion}\n          >\n            <SetUnionSVG />\n          </button>\n          <button\n            onClick={onIntersection}\n            title=\"New set from intersection of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToIntersect}\n          >\n            <SetIntersectionSVG />\n          </button>\n          <button\n            onClick={onComplement}\n            title=\"New set from complement of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToComplement}\n          >\n            <SetComplementSVG />\n          </button>\n        </>\n      )}\n    </>\n  );\n}\n","/* eslint-disable no-underscore-dangle */\nimport React, { useState, useMemo } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport Tree from './Tree';\nimport TreeNode from './TreeNode';\nimport { PlusButton, SetOperationButtons } from './SetsManagerButtons';\nimport { nodeToRenderProps } from './cell-set-utils';\nimport { DEFAULT_COLOR } from '../utils';\nimport { pathToKey } from './utils';\n\nfunction processNode(node, prevPath, setColor) {\n  const nodePath = [...prevPath, node.name];\n  return {\n    ...node,\n    ...(node.children ? ({\n      children: node.children\n        .map(c => processNode(c, nodePath, setColor)),\n    }) : {}),\n    color: setColor?.find(d => isEqual(d.path, nodePath))?.color || DEFAULT_COLOR,\n  };\n}\n\nfunction processSets(sets, setColor) {\n  return {\n    ...sets,\n    tree: sets ? sets.tree.map(lzn => processNode(lzn, [], setColor)) : [],\n  };\n}\n\nfunction getAllKeys(node, path = []) {\n  if (!node) {\n    return null;\n  }\n  const newPath = [...path, node.name];\n  if (node.children) {\n    return [pathToKey(newPath), ...node.children.flatMap(v => getAllKeys(v, newPath))];\n  }\n  return pathToKey(newPath);\n}\n\n/**\n * A generic hierarchical set manager component.\n * @prop {object} tree An object representing set hierarchies.\n * @prop {string} datatype The data type for sets (e.g. \"cell\")\n * @prop {function} clearPleaseWait A callback to signal that loading is complete.\n * @prop {boolean} draggable Whether tree nodes can be rearranged via drag-and-drop.\n * By default, true.\n * @prop {boolean} checkable Whether to show the \"Check\" menu button\n * and checkboxes for selecting multiple sets. By default, true.\n * @prop {boolean} editable Whether to show rename, delete, color, or create options.\n * By default, true.\n * @prop {boolean} expandable Whether to allow hierarchies to be expanded\n * to show the list or tree of sets contained. By default, true.\n * @prop {boolean} operatable Whether to enable union, intersection,\n * and complement operations on checked sets. By default, true.\n * @prop {boolean} exportable Whether to enable exporting hierarchies and sets to files.\n * By default, true.\n * @prop {boolean} importable Whether to enable importing hierarchies from files.\n * By default, true.\n * @prop {function} onError Function to call with error messages (failed import validation, etc).\n * @prop {function} onCheckNode Function to call when a single node has been checked or un-checked.\n * @prop {function} onExpandNode Function to call when a node has been expanded.\n * @prop {function} onDropNode Function to call when a node has been dragged-and-dropped.\n * @prop {function} onCheckLevel Function to call when an entire hierarchy level has been selected,\n * via the \"Color by cluster\" and \"Color by subcluster\" buttons below collapsed level zero nodes.\n * @prop {function} onNodeSetColor Function to call when a new node color has been selected.\n * @prop {function} onNodeSetName Function to call when a node has been renamed.\n * @prop {function} onNodeRemove Function to call when the user clicks the \"Delete\" menu button\n * to remove a node.\n * @prop {function} onNodeView Function to call when the user wants to view the set associated\n * with a particular node.\n * @prop {function} onImportTree Function to call when a tree has been imported\n * using the \"plus\" button.\n * @prop {function} onCreateLevelZeroNode Function to call when a user clicks the \"Create hierarchy\"\n * menu option using the \"plus\" button.\n * @prop {function} onExportLevelZeroNode Function to call when a user wants to\n * export an entire hierarchy via the \"Export hierarchy\" menu button for a\n * particular level zero node.\n * @prop {function} onExportSet Function to call when a user wants to export a set associated with\n * a particular node via the \"Export set\" menu button.\n * @prop {function} onUnion Function to call when a user wants to create a new set from the union\n * of the sets associated with the currently-checked nodes.\n * @prop {function} onIntersection Function to call when a user wants to create a new set from the\n * intersection of the sets associated with the currently-checked nodes.\n * @prop {function} onComplement Function to call when a user wants to create a new set from the\n * complement of the (union of the) sets associated with the currently-checked nodes.\n * @prop {function} onView Function to call when a user wants to view the sets\n * associated with the currently-checked nodes.\n */\nexport default function SetsManager(props) {\n  const {\n    sets,\n    additionalSets,\n    setColor, // TODO: use this\n    levelSelection: checkedLevel,\n    setSelection,\n    setExpansion,\n    hasColorEncoding,\n    datatype,\n    draggable = true,\n    checkable = true,\n    editable = true,\n    expandable = true,\n    operatable = true,\n    exportable = true,\n    importable = true,\n    onError,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  const isChecking = true;\n  const autoExpandParent = true;\n  const [isDragging, setIsDragging] = useState(false);\n  const [isEditingNodeName, setIsEditingNodeName] = useState(null);\n\n  const processedSets = useMemo(() => processSets(\n    sets, setColor,\n  ), [sets, setColor]);\n  const processedAdditionalSets = useMemo(() => processSets(\n    additionalSets, setColor,\n  ), [additionalSets, setColor]);\n\n  const additionalSetKeys = (processedAdditionalSets\n    ? processedAdditionalSets.tree.flatMap(v => getAllKeys(v, []))\n    : []\n  );\n\n  const allSetSelectionKeys = (setSelection || []).map(pathToKey);\n  const allSetExpansionKeys = (setExpansion || []).map(pathToKey);\n\n  const setSelectionKeys = allSetSelectionKeys.filter(k => !additionalSetKeys.includes(k));\n  const setExpansionKeys = allSetExpansionKeys.filter(k => !additionalSetKeys.includes(k));\n\n  const additionalSetSelectionKeys = allSetSelectionKeys.filter(k => additionalSetKeys.includes(k));\n  const additionalSetExpansionKeys = allSetExpansionKeys.filter(k => additionalSetKeys.includes(k));\n\n  /**\n   * Recursively render TreeNode components.\n   * @param {object[]} nodes An array of node objects.\n   * @returns {TreeNode[]|null} Array of TreeNode components or null.\n   */\n  function renderTreeNodes(nodes, readOnly, currPath) {\n    if (!nodes) {\n      return null;\n    }\n    return nodes.map((node) => {\n      const newPath = [...currPath, node.name];\n      return (\n        <TreeNode\n          key={pathToKey(newPath)}\n          {...nodeToRenderProps(node, newPath, setColor)}\n\n          isEditing={isEqual(isEditingNodeName, newPath)}\n\n          datatype={datatype}\n          draggable={draggable && !readOnly}\n          editable={editable && !readOnly}\n          checkable={checkable}\n          expandable={expandable}\n          exportable={exportable}\n\n          hasColorEncoding={hasColorEncoding}\n          isChecking={isChecking}\n          checkedLevelPath={checkedLevel ? checkedLevel.levelZeroPath : null}\n          checkedLevelIndex={checkedLevel ? checkedLevel.levelIndex : null}\n\n          onCheckNode={onCheckNode}\n          onCheckLevel={onCheckLevel}\n          onNodeView={onNodeView}\n          onNodeSetColor={onNodeSetColor}\n          onNodeSetName={(targetPath, name) => {\n            onNodeSetName(targetPath, name);\n            setIsEditingNodeName(null);\n          }}\n          onNodeCheckNewName={onNodeCheckNewName}\n          onNodeSetIsEditing={setIsEditingNodeName}\n          onNodeRemove={onNodeRemove}\n          onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n          onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n          onExportSetJSON={onExportSetJSON}\n\n          disableTooltip={isDragging}\n          onDragStart={() => setIsDragging(true)}\n          onDragEnd={() => setIsDragging(false)}\n        >\n          {renderTreeNodes(node.children, readOnly, newPath)}\n        </TreeNode>\n      );\n    });\n  }\n\n  return (\n    <div className=\"sets-manager\">\n      <div className=\"sets-manager-tree\">\n        <Tree\n          draggable={false}\n          checkable={checkable}\n\n          checkedKeys={setSelectionKeys}\n          expandedKeys={setExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n        >\n          {renderTreeNodes(processedSets.tree, true, [])}\n        </Tree>\n        <Tree\n          draggable /* TODO */\n          checkable={checkable}\n\n          checkedKeys={additionalSetSelectionKeys}\n          expandedKeys={additionalSetExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n          onDrop={(info) => {\n            const { eventKey: dropKey } = info.node.props;\n            const { eventKey: dragKey } = info.dragNode.props;\n            const { dropToGap, dropPosition } = info;\n            onDropNode(dropKey, dragKey, dropPosition, dropToGap);\n          }}\n        >\n          {renderTreeNodes(processedAdditionalSets.tree, false, [])}\n        </Tree>\n\n        <PlusButton\n          datatype={datatype}\n          onError={onError}\n          onImportTree={onImportTree}\n          onCreateLevelZeroNode={onCreateLevelZeroNode}\n          importable={importable}\n          editable={editable}\n        />\n      </div>\n      {isChecking ? (\n        <div className=\"set-operation-buttons\">\n          <SetOperationButtons\n            onUnion={onUnion}\n            onIntersection={onIntersection}\n            onComplement={onComplement}\n            operatable={operatable}\n\n            hasCheckedSetsToUnion={hasCheckedSetsToUnion}\n            hasCheckedSetsToIntersect={hasCheckedSetsToIntersect}\n            hasCheckedSetsToComplement={hasCheckedSetsToComplement}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","module.exports = require(\"react-vega\");","import React, {\n  useEffect,\n  useState,\n  useMemo,\n} from 'react';\nimport isEqual from 'lodash/isEqual';\nimport packageJson from '../../../package.json';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetWarning,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport SetsManager from './SetsManager';\nimport TitleInfo from '../TitleInfo';\nimport {\n  treeExportLevelZeroNode,\n  treeExportSet,\n  treeToExpectedCheckedLevel,\n  nodeToLevelDescendantNamePaths,\n  treeToIntersection,\n  treeToUnion,\n  treeToComplement,\n  treeFindNodeByNamePath,\n  treesConflict,\n  initializeCellSetColor,\n  nodeTransform,\n  nodeAppendChild,\n  nodePrependChild,\n  nodeInsertChild,\n  filterNode,\n  treeInitialize,\n} from './cell-set-utils';\nimport {\n  isEqualOrPrefix,\n  tryRenamePath,\n  PATH_SEP,\n} from './utils';\nimport {\n  downloadForUser,\n  handleExportJSON,\n  handleExportTabular,\n  tryUpgradeTreeToLatestSchema,\n} from './io';\nimport {\n  FILE_EXTENSION_JSON,\n  FILE_EXTENSION_TABULAR,\n  SETS_DATATYPE_CELL,\n} from './constants';\nimport { useUrls, useReady } from '../hooks';\nimport {\n  setCellSelection,\n  mergeCellSets,\n  getNextNumberedNodeName,\n} from '../utils';\nimport { useCellsData, useCellSetsData } from '../data-hooks';\n\nconst CELL_SETS_DATA_TYPES = ['cells', 'cell-sets'];\n\n/**\n * A subscriber wrapper around the SetsManager component\n * for the 'cell' datatype.\n * @param {object} props\n * @param {function} removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {function} onReady The function to call when the component has finished\n * initializing (subscribing to relevant events, etc).\n * @param {boolean} initializeSelection Should an event be emitted upon initialization,\n * so that cells are colored by some heuristic (e.g. the first clustering in the cell_sets tree)?\n */\nexport default function CellSetsManagerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    initializeSelection = true,\n    initializeColor = true,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n  const setWarning = useSetWarning();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    cellColorEncoding,\n  }, {\n    setCellSetSelection,\n    setCellColorEncoding,\n    setCellSetColor,\n    setAdditionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSets, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    CELL_SETS_DATA_TYPES,\n  );\n\n  const [autoSetSelections, setAutoSetSelections] = useState({});\n  const [autoSetColors, setAutoSetColors] = useState({});\n\n  const [cellSetExpansion, setCellSetExpansion] = useState([]);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    setAutoSetSelections({});\n    setAutoSetColors({});\n    setCellSetExpansion([]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true,\n    (data) => {\n      if (data && data.tree.length >= 1) {\n        // eslint-disable-next-line no-underscore-dangle\n        const newAutoSetSelectionParentName = data.tree[0].name;\n        const newAutoSetSelections = data.tree[0].children\n          .map(node => ([newAutoSetSelectionParentName, node.name]));\n        setAutoSetSelections(prev => ({\n          [dataset]: [\n            ...(prev[dataset] || []),\n            ...newAutoSetSelections,\n          ],\n        }));\n\n        const newAutoSetColors = initializeCellSetColor(data, cellSetColor);\n        setAutoSetColors(prev => ({\n          [dataset]: [\n            ...(prev[dataset] || []),\n            ...newAutoSetColors,\n          ],\n        }));\n      } else {\n        setAutoSetSelections(prev => ({ [dataset]: (prev[dataset] || []) }));\n        setAutoSetColors(prev => ({ [dataset]: (prev[dataset] || []) }));\n      }\n    });\n\n  // Try to set up the selected sets array automatically if undefined.\n  useEffect(() => {\n    // Only initialize cell sets if the value of `cellSetSelection` is `null`\n    // and the `initializeSelection` prop is `true`.\n    if (\n      isReady\n      && initializeSelection\n      && autoSetSelections[dataset]\n      && !cellSetSelection\n    ) {\n      setCellSetSelection(autoSetSelections[dataset]);\n    }\n  }, [dataset, autoSetSelections, isReady, cellSetSelection,\n    setCellSetSelection, initializeSelection]);\n\n  // Try to set up the colored sets array automatically if undefined.\n  useEffect(() => {\n    // Only initialize cell sets if the value of `cellSetColor` is `null`\n    // and the `initializeColor` prop is `true`.\n    if (\n      isReady\n      && initializeColor\n      && autoSetColors[dataset]\n      && !cellSetColor\n    ) {\n      setCellSetColor(autoSetColors[dataset]);\n    }\n  }, [dataset, autoSetColors, isReady, setCellSetColor, initializeColor, cellSetColor]);\n\n  // Validate and upgrade the additionalCellSets.\n  useEffect(() => {\n    if (additionalCellSets) {\n      let upgradedCellSets;\n      try {\n        upgradedCellSets = tryUpgradeTreeToLatestSchema(additionalCellSets, SETS_DATATYPE_CELL);\n      } catch (e) {\n        setWarning(e.message);\n        return;\n      }\n      setAdditionalCellSets(upgradedCellSets);\n    }\n  }, [additionalCellSets, setAdditionalCellSets, setWarning]);\n\n  // Get an array of all cell IDs to use for set complement operations.\n  const allCellIds = useMemo(() => (cells ? Object.keys(cells) : []), [cells]);\n\n  // A helper function for updating the encoding for cell colors,\n  // which may have previously been set to 'geneSelection'.\n  function setCellSetColorEncoding() {\n    setCellColorEncoding('cellSetSelection');\n  }\n\n  // Merged cell sets are only to be used for convenience when reading\n  // (if writing: update either `cellSets` _or_ `additionalCellSets`).\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // Infer the state of the \"checked level\" radio button based on the selected cell sets.\n  const checkedLevel = useMemo(() => {\n    if (cellSetSelection && cellSetSelection.length > 0\n    && mergedCellSets && mergedCellSets.tree.length > 0) {\n      return treeToExpectedCheckedLevel(mergedCellSets, cellSetSelection);\n    }\n    return null;\n  }, [cellSetSelection, mergedCellSets]);\n\n  // Callback functions\n\n  // The user wants to select all nodes at a particular hierarchy level.\n  function onCheckLevel(levelZeroName, levelIndex) {\n    const lzn = mergedCellSets.tree.find(n => n.name === levelZeroName);\n    if (lzn) {\n      const newCellSetSelection = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n      setCellSetSelection(newCellSetSelection);\n      setCellSetColorEncoding();\n    }\n  }\n\n  // The user wants to check or uncheck a cell set node.\n  function onCheckNode(targetKey, checked) {\n    const targetPath = (Array.isArray(targetKey) ? targetKey : targetKey.split(PATH_SEP));\n    if (!targetKey) {\n      return;\n    }\n    if (checked) {\n      setCellSetSelection([...cellSetSelection, targetPath]);\n    } else {\n      setCellSetSelection(cellSetSelection.filter(d => !isEqual(d, targetPath)));\n    }\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to expand or collapse a node in the tree.\n  function onExpandNode(expandedKeys, targetKey, expanded) {\n    if (expanded) {\n      setCellSetExpansion(prev => ([...prev, targetKey.split(PATH_SEP)]));\n    } else {\n      setCellSetExpansion(prev => prev.filter(d => !isEqual(d, targetKey.split(PATH_SEP))));\n    }\n  }\n\n  // The user dragged a tree node and dropped it somewhere else in the tree\n  // to re-arrange or re-order the nodes.\n  // We need to verify that their drop target is valid, and if so, complete\n  // the tree re-arrangement.\n  function onDropNode(dropKey, dragKey, dropPosition, dropToGap) {\n    const dropPath = dropKey.split(PATH_SEP);\n    const dropNode = treeFindNodeByNamePath(additionalCellSets, dropPath);\n    if (!dropNode.children && !dropToGap) {\n      // Do not allow a node with a set (i.e. leaf) to become a child of another node with a set,\n      // as this will result in an internal node having a set, which we do not allow.\n      return;\n    }\n    const dropNodeLevel = dropPath.length - 1;\n    const dropNodeIsLevelZero = dropNodeLevel === 0;\n\n    // Get drag node.\n    const dragPath = dragKey.split(PATH_SEP);\n    const dragNode = treeFindNodeByNamePath(additionalCellSets, dragPath);\n\n    if (dropNodeIsLevelZero && dropToGap && !dragNode.children) {\n      // Do not allow a leaf node to become a level zero node.\n      return;\n    }\n\n    let dropParentNode;\n    let dropParentPath;\n    let dropNodeCurrIndex;\n    if (!dropNodeIsLevelZero) {\n      dropParentPath = dropPath.slice(0, -1);\n      dropParentNode = treeFindNodeByNamePath(additionalCellSets, dropParentPath);\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = additionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    // Further, only allow dragging if the dragged node will have a unique\n    // name among its new siblings.\n    let hasSiblingNameConflict;\n    const dragNodeName = dragNode.name;\n    if (!dropNodeIsLevelZero && dropToGap) {\n      hasSiblingNameConflict = dropParentNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else if (!dropToGap) {\n      hasSiblingNameConflict = dropNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else {\n      hasSiblingNameConflict = additionalCellSets.tree\n        .find(lzn => lzn !== dragNode && lzn.name === dragNodeName);\n    }\n\n    if (hasSiblingNameConflict) {\n      return;\n    }\n\n    // Remove the dragged object from its current position.\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], dragPath)).filter(Boolean),\n    };\n\n    // Update index values after temporarily removing the dragged node.\n    // Names are unique as children of their parents.\n    if (!dropNodeIsLevelZero) {\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = nextAdditionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    let newDragPath = [];\n    if (!dropToGap || !dropNodeIsLevelZero) {\n      let addChildFunction;\n      let checkPathFunction;\n      const newPath = [];\n      if (!dropToGap) {\n        // Append the dragNode to dropNode's children if dropping _onto_ the dropNode.\n        // Set dragNode as the last child of dropNode.\n        addChildFunction = n => nodeAppendChild(n, dragNode);\n        checkPathFunction = path => isEqual(path, dropPath);\n      } else if (!dropNodeIsLevelZero) {\n        // Prepend or insert the dragNode if dropping _between_ (above or below dropNode).\n        // The dropNode is at a level greater than zero,\n        // so it has a parent.\n        checkPathFunction = path => isEqual(path, dropParentPath);\n        if (dropPosition === -1) {\n          // Set dragNode as first child of dropParentNode.\n          addChildFunction = n => nodePrependChild(n, dragNode);\n        } else {\n          // Set dragNode before or after dropNode.\n          const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n          addChildFunction = n => nodeInsertChild(n, dragNode, insertIndex);\n        }\n      }\n      nextAdditionalCellSets.tree = nextAdditionalCellSets.tree.map(\n        node => nodeTransform(\n          node,\n          (n, path) => checkPathFunction(path),\n          (n) => {\n            const newNode = addChildFunction(n);\n            return newNode;\n          },\n          newPath,\n        ),\n      );\n      // Done\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [...newPath[0], dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else if (dropPosition === -1) {\n      // We need to drop the dragNode to level zero,\n      // and level zero nodes do not have parents.\n      // Set dragNode as first level zero node of the tree.\n      nextAdditionalCellSets.tree.unshift(dragNode);\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else {\n      // Set dragNode before or after dropNode in level zero.\n      const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n      const newLevelZero = Array.from(nextAdditionalCellSets.tree);\n      newLevelZero.splice(insertIndex, 0, dragNode);\n      nextAdditionalCellSets.tree = newLevelZero;\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    }\n    const oldColors = cellSetColor.filter(\n      i => isEqualOrPrefix(dragPath, i.path),\n    );\n    const newColors = oldColors.map(\n      i => (\n        {\n          ...i,\n          path: !isEqual(i.path, dragPath)\n            ? newDragPath.concat(i.path.slice(dragPath.length))\n            : newDragPath,\n        }\n      ),\n    );\n    const newCellSetColor = cellSetColor.filter(\n      i => !isEqualOrPrefix(dragPath, i.path),\n    );\n    newCellSetColor.push(...newColors);\n    setCellSetColor(newCellSetColor);\n  }\n\n  // The user wants to change the color of a cell set node.\n  function onNodeSetColor(targetPath, color) {\n    // Replace the color if an array element for this path already exists.\n    const prevNodeColor = cellSetColor?.find(d => isEqual(d.path, targetPath));\n    if (!prevNodeColor) {\n      setCellSetColor([\n        ...(cellSetColor || []),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    } else {\n      setCellSetColor([\n        ...cellSetColor.filter(d => !isEqual(d.path, targetPath)),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    }\n  }\n\n  // The user wants to change the name of a cell set node.\n  function onNodeSetName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n\n    // Recursively check whether each node path\n    // matches the path or a prefix of the path of the node to rename.\n    // If so, rename the node using the new path.\n    function renameNode(node, prevPath) {\n      if (isEqual([...prevPath, node.name], targetPath)) {\n        return {\n          ...node,\n          name,\n        };\n      }\n      if (!node.children) {\n        return node;\n      }\n      return {\n        ...node,\n        children: node.children.map(c => renameNode(c, [...prevPath, node.name])),\n      };\n    }\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => renameNode(lzn, [])),\n    };\n    // Change all paths that have this node as a prefix (i.e. descendants).\n    const nextCellSetColor = cellSetColor.map(d => ({\n      path: tryRenamePath(targetPath, d.path, nextNamePath),\n      color: d.color,\n    }));\n    const nextCellSetSelection = cellSetSelection.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    const nextCellSetExpansion = cellSetExpansion.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    // Need to update the node path everywhere it may be present.\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // Each time the user types while renaming a cell set node,\n  // we need to check whether the potential new name conflicts\n  // with any existing cell set node names.\n  // If there are conflicts, we want to disable the \"Save\" button.\n  function onNodeCheckNewName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n    const hasConflicts = (\n      !isEqual(targetPath, nextNamePath)\n      && treeFindNodeByNamePath(additionalCellSets, nextNamePath)\n    );\n    return hasConflicts;\n  }\n\n  // The user wants to delete a cell set node, and has confirmed their choice.\n  function onNodeRemove(targetPath) {\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], targetPath)).filter(Boolean),\n    };\n    // Delete state for all paths that have this node\n    // path as a prefix (i.e. delete all descendents).\n    const nextCellSetColor = cellSetColor.filter(d => !isEqualOrPrefix(targetPath, d.path));\n    const nextCellSetSelection = cellSetSelection.filter(d => !isEqualOrPrefix(targetPath, d));\n    const nextCellSetExpansion = cellSetExpansion.filter(d => !isEqualOrPrefix(targetPath, d));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // The user wants to view (i.e. select) a particular node,\n  // or its expanded descendents.\n  function onNodeView(targetPath) {\n    // If parent node is clicked, and if it is expanded,\n    // then select the expanded descendent nodes.\n    const setsToView = [];\n    // Recursively determine which descendent nodes are currently expanded.\n    function viewNode(node, nodePath) {\n      if (cellSetExpansion.find(expandedPath => isEqual(nodePath, expandedPath))) {\n        if (node.children) {\n          node.children.forEach((c) => {\n            viewNode(c, [...nodePath, c.name]);\n          });\n        } else {\n          setsToView.push(nodePath);\n        }\n      } else {\n        setsToView.push(nodePath);\n      }\n    }\n    const targetNode = treeFindNodeByNamePath(mergedCellSets, targetPath);\n    viewNode(targetNode, targetPath);\n    setCellSetSelection(setsToView);\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to create a new level zero node.\n  function onCreateLevelZeroNode() {\n    const nextName = getNextNumberedNodeName(additionalCellSets?.tree, 'My hierarchy ');\n    setAdditionalCellSets({\n      ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n      tree: [\n        ...(additionalCellSets ? additionalCellSets.tree : []),\n        {\n          name: nextName,\n          children: [],\n        },\n      ],\n    });\n  }\n\n  // The user wants to create a new node corresponding to\n  // the union of the selected sets.\n  function onUnion() {\n    const newSet = treeToUnion(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Union ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the intersection of the selected sets.\n  function onIntersection() {\n    const newSet = treeToIntersection(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Intersection ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the complement of the selected sets.\n  function onComplement() {\n    const newSet = treeToComplement(mergedCellSets, cellSetSelection, allCellIds);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Complement ',\n    );\n  }\n\n  // The user wants to import a cell set hierarchy,\n  // probably from a CSV or JSON file.\n  function onImportTree(treeToImport) {\n    // Check for any naming conflicts with the current sets\n    // (both user-defined and dataset-defined) before importing.\n    const hasConflict = treesConflict(mergedCellSets, treeToImport);\n    if (!hasConflict) {\n      setAdditionalCellSets({\n        ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n        tree: [\n          ...(additionalCellSets ? additionalCellSets.tree : []),\n          ...treeToImport.tree,\n        ],\n      });\n      // Automatically initialize set colors for the imported sets.\n      const importAutoSetColors = initializeCellSetColor(treeToImport, cellSetColor);\n      setCellSetColor([\n        ...cellSetColor,\n        ...importAutoSetColors,\n      ]);\n    }\n  }\n\n  // The user wants to download a particular hierarchy to a JSON file.\n  function onExportLevelZeroNodeJSON(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor);\n    downloadForUser(\n      handleExportJSON(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_JSON}`,\n    );\n  }\n\n  // The user wants to download a particular hierarchy to a CSV file.\n  function onExportLevelZeroNodeTabular(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor);\n    downloadForUser(\n      handleExportTabular(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_TABULAR}`,\n    );\n  }\n\n  // The user wants to download a particular set to a JSON file.\n  function onExportSetJSON(nodePath) {\n    const { setToExport, nodeName } = treeExportSet(mergedCellSets, nodePath);\n    downloadForUser(\n      handleExportJSON(setToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-set.${FILE_EXTENSION_JSON}`,\n      FILE_EXTENSION_JSON,\n    );\n  }\n  return (\n    <TitleInfo\n      title=\"Cell Sets\"\n      isScroll\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <SetsManager\n        setColor={cellSetColor}\n        sets={cellSets}\n        additionalSets={additionalCellSets}\n        levelSelection={checkedLevel}\n        setSelection={cellSetSelection}\n        setExpansion={cellSetExpansion}\n        hasColorEncoding={cellColorEncoding === 'cellSetSelection'}\n        draggable\n        datatype={SETS_DATATYPE_CELL}\n        onError={setWarning}\n        onCheckNode={onCheckNode}\n        onExpandNode={onExpandNode}\n        onDropNode={onDropNode}\n        onCheckLevel={onCheckLevel}\n        onNodeSetColor={onNodeSetColor}\n        onNodeSetName={onNodeSetName}\n        onNodeCheckNewName={onNodeCheckNewName}\n        onNodeRemove={onNodeRemove}\n        onNodeView={onNodeView}\n        onImportTree={onImportTree}\n        onCreateLevelZeroNode={onCreateLevelZeroNode}\n        onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n        onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n        onExportSetJSON={onExportSetJSON}\n        onUnion={onUnion}\n        onIntersection={onIntersection}\n        onComplement={onComplement}\n        hasCheckedSetsToUnion={cellSetSelection?.length > 1}\n        hasCheckedSetsToIntersect={cellSetSelection?.length > 1}\n        hasCheckedSetsToComplement={cellSetSelection?.length > 0}\n      />\n    </TitleInfo>\n  );\n}\n","import React, { useMemo, useEffect } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { mergeCellSets } from '../utils';\nimport { useCellSetsData } from '../data-hooks';\nimport { treeToSetSizesBySetNames } from './cell-set-utils';\nimport CellSetSizesPlot from './CellSetSizesPlot';\n\nconst CELL_SET_SIZES_DATA_TYPES = ['cell-sets'];\n\n/**\n * A subscriber component for `CellSetSizePlot`,\n * which listens for cell sets data updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {function} props.onReady The function to call when the subscriptions\n * have been made.\n * @param {string} props.theme The name of the current Vitessce theme.\n */\nexport default function CellSetSizesPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetSizes, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    CELL_SET_SIZES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true);\n\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // From the cell sets hierarchy and the list of selected cell sets,\n  // generate the array of set sizes data points for the bar plot.\n  const data = useMemo(() => (mergedCellSets && cellSetSelection\n    ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor)\n    : []\n  ), [mergedCellSets, cellSetSelection, cellSetColor]);\n\n  return (\n    <TitleInfo\n      title=\"Cell Set Sizes\"\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        <CellSetSizesPlot\n          data={data}\n          theme={theme}\n          width={width}\n          height={height}\n        />\n      </div>\n    </TitleInfo>\n  );\n}\n","module.exports = require(\"d3-dsv\");","module.exports = require(\"json2csv\");","module.exports = require(\"clsx\");","module.exports = require(\"rc-tree/es/util\");","module.exports = require(\"react-color\");","module.exports = require(\"rc-tooltip\");","module.exports = require(\"vega-tooltip\");","export { default as CellSetsManagerSubscriber } from './CellSetsManagerSubscriber';\nexport { default as SetsManager } from './SetsManager';\nexport { default as CellSetSizesPlot } from './CellSetSizesPlot';\nexport { default as CellSetSizesPlotSubscriber } from './CellSetSizesPlotSubscriber';\n"],"sourceRoot":""}
module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "./";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 184);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = require("react");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js
function _iterableToArrayLimit(arr, i) {
  if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js
var unsupportedIterableToArray = __webpack_require__(43);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _slicedToArray; });




function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || Object(unsupportedIterableToArray["a" /* default */])(arr, i) || _nonIterableRest();
}

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _defineProperty; });
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js
var arrayLikeToArray = __webpack_require__(34);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return Object(arrayLikeToArray["a" /* default */])(arr);
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js
var unsupportedIterableToArray = __webpack_require__(43);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _toConsumableArray; });




function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || Object(unsupportedIterableToArray["a" /* default */])(arr) || _nonIterableSpread();
}

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _objectSpread2; });
/* harmony import */ var _defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);


function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        Object(_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return useViewConfigStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return useCoordination; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return useLoaders; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return useLayout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return useRemoveComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return useChangeLayout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return useSetLoaders; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return useSetViewConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return useComponentHover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return useSetComponentHover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return useWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return useSetWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return useComponentViewInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return useSetComponentViewInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return useGridResize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return useEmitGridResize; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32);
/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(zustand__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var zustand_shallow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(70);
/* harmony import */ var zustand_shallow__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(zustand_shallow__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(15);
/**
 * The useViewConfigStore hook is initialized via the zustand
 * create() function, which sets up both the state variables
 * and the reducer-type functions.
 * Reference: https://github.com/react-spring/zustand
 * @returns {function} The useStore hook.
 */var useViewConfigStore=zustand__WEBPACK_IMPORTED_MODULE_4___default()(function(set){return{// State:
// The viewConfig is an object which must conform to the schema
// found in src/schemas/config.schema.json.
viewConfig:null,// The loaders object is a mapping from dataset ID to
// data type to loader object instance.
loaders:null,// Reducer functions which update the state
// (although technically also part of state):
setViewConfig:function setViewConfig(viewConfig){return set({viewConfig:viewConfig});},setLoaders:function setLoaders(loaders){return set({loaders:loaders});},setCoordinationValue:function setCoordinationValue(_ref){var parameter=_ref.parameter,scope=_ref.scope,value=_ref.value;return set(function(state){return{viewConfig:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},state.viewConfig,{coordinationSpace:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},state.viewConfig.coordinationSpace,Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},parameter,Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},state.viewConfig.coordinationSpace[parameter],Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},scope,value))))})};});},removeComponent:function removeComponent(i){return set(function(state){var newLayout=state.viewConfig.layout.slice();newLayout.splice(i,1);return{viewConfig:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},state.viewConfig,{layout:newLayout})};});},changeLayout:function changeLayout(newComponentProps){return set(function(state){var newLayout=state.viewConfig.layout.slice();newComponentProps.forEach(function(_ref2){var _ref3=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref2,2),i=_ref3[0],newProps=_ref3[1];newLayout[i]=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},newLayout[i],{},newProps);});return{viewConfig:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},state.viewConfig,{layout:newLayout})};});}};});/**
 * The hover store can be used to store global state
 * related to which component is currently hovered,
 * which is required for tooltip / crossover elements.
 * @returns {function} The useStore hook.
 */var useHoverStore=zustand__WEBPACK_IMPORTED_MODULE_4___default()(function(set){return{// Components may need to know if they are the "hover source"
// for tooltip interactions. This value should be a unique
// component ID, such as its index in the view config layout.
componentHover:null,setComponentHover:function setComponentHover(componentHover){return set({componentHover:componentHover});}};});/**
 * The warning store can be used to store global state
 * related to app warning messages.
 * @returns {function} The useStore hook.
 */var useWarnStore=zustand__WEBPACK_IMPORTED_MODULE_4___default()(function(set){return{// Want a global state to collect warning messages
// that occur anywhere in the app.
warning:null,setWarning:function setWarning(warning){return set({warning:warning});}};});/**
 * The view info store can be used to store component-level
 * viewInfo objects,
 * which are required for tooltip / crossover elements.
 * @returns {function} The useStore hook.
 */var useViewInfoStore=zustand__WEBPACK_IMPORTED_MODULE_4___default()(function(set){return{// The viewInfo object is a mapping from
// component IDs to component view info objects.
// Each view info object must have a project() function.
viewInfo:{},setComponentViewInfo:function setComponentViewInfo(uuid,viewInfo){return set(function(state){return{viewInfo:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},state.viewInfo,Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},uuid,viewInfo))};});}};});/**
 * The grid size store can be used to store a
 * counter which updates on each window or react-grid-layout
 * resize event.
 * @returns {function} The useStore hook.
 */var useGridSizeStore=zustand__WEBPACK_IMPORTED_MODULE_4___default()(function(set){return{resizeCount:{},incrementResizeCount:function incrementResizeCount(){return set(function(state){return{resizeCount:state.resizeCount+1};});}};});/**
 * The useCoordination hook returns both the
 * values and setter functions for the coordination objects
 * in a particular coordination scope mapping.
 * This hook is intended to be used within the ___Subscriber
 * components to allow them to "hook into" only those coordination
 * objects and setter functions of relevance.
 * @param {string[]} parameters Array of coordination types.
 * @param {object} coordinationScopes Mapping of coordination types
 * to scope names.
 * @returns {array} Returns a tuple [values, setters]
 * where values is an object containing all coordination values,
 * and setters is an object containing all coordination setter
 * functions for the values in `values`, named with a "set"
 * prefix.
 */function useCoordination(parameters,coordinationScopes){var setCoordinationValue=useViewConfigStore(function(state){return state.setCoordinationValue;});var values=useViewConfigStore(function(state){var coordinationSpace=state.viewConfig.coordinationSpace;return Object(_utils__WEBPACK_IMPORTED_MODULE_6__[/* fromEntries */ "b"])(parameters.map(function(parameter){if(coordinationSpace&&coordinationSpace[parameter]){var value=coordinationSpace[parameter][coordinationScopes[parameter]];return[parameter,value];}return[parameter,undefined];}));},zustand_shallow__WEBPACK_IMPORTED_MODULE_5___default.a);var setters=Object(_utils__WEBPACK_IMPORTED_MODULE_6__[/* fromEntries */ "b"])(parameters.map(function(parameter){var setterName="set".concat(Object(_utils__WEBPACK_IMPORTED_MODULE_6__[/* capitalize */ "a"])(parameter));var setterFunc=function setterFunc(value){return setCoordinationValue({parameter:parameter,scope:coordinationScopes[parameter],value:value});};return[setterName,setterFunc];}));return[values,setters];}/**
 * Obtain the loaders object from
 * the global app state.
 * @returns {object} The loaders object
 * in the `useViewConfigStore` store.
 */function useLoaders(){return useViewConfigStore(function(state){return state.loaders;});}/**
 * Obtain the view config layout array from
 * the global app state.
 * @returns {object[]} The layout array
 * in the `useViewConfigStore` store.
 */function useLayout(){return useViewConfigStore(function(state){var _state$viewConfig;return(_state$viewConfig=state.viewConfig)===null||_state$viewConfig===void 0?void 0:_state$viewConfig.layout;});}/**
 * Obtain the component removal function from
 * the global app state.
 * @returns {function} The remove component function
 * in the `useViewInfoStore` store.
 */function useRemoveComponent(){return useViewConfigStore(function(state){return state.removeComponent;});}/**
 * Obtain the component prop setter function from
 * the global app state.
 * @returns {function} The set component props function
 * in the `useViewInfoStore` store.
 */function useChangeLayout(){return useViewConfigStore(function(state){return state.changeLayout;});}/**
 * Obtain the loaders setter function from
 * the global app state.
 * @returns {function} The loaders setter function
 * in the `useViewConfigStore` store.
 */function useSetLoaders(){return useViewConfigStore(function(state){return state.setLoaders;});}/**
 * Obtain the view config setter function from
 * the global app state.
 * @returns {function} The view config setter function
 * in the `useViewConfigStore` store.
 */function useSetViewConfig(){var setViewConfigRef=Object(react__WEBPACK_IMPORTED_MODULE_3__["useRef"])(useViewConfigStore.getState().setViewConfig);var setViewConfig=setViewConfigRef.current;return setViewConfig;}/**
 * Obtain the component hover value from
 * the global app state.
 * @returns {number} The hovered component ID
 * in the `useHoverStore` store.
 */function useComponentHover(){return useHoverStore(function(state){return state.componentHover;});}/**
 * Obtain the component hover setter function from
 * the global app state.
 * @returns {function} The component hover setter function
 * in the `useHoverStore` store.
 */function useSetComponentHover(){return useHoverStore(function(state){return state.setComponentHover;});}/**
 * Obtain the warning message from
 * the global app state.
 * @returns {string} The warning message
 * in the `useWarnStore` store.
 */function useWarning(){return useWarnStore(function(state){return state.warning;});}/**
 * Obtain the warning setter function from
 * the global app state.
 * @returns {function} The warning setter function
 * in the `useWarnStore` store.
 */function useSetWarning(){return useWarnStore(function(state){return state.setWarning;});}/**
 * Obtain the component view info value from
 * the global app state.
 * @returns {object} The view info object for the component
 * in the `useViewInfoStore` store.
 */function useComponentViewInfo(uuid){return useViewInfoStore(Object(react__WEBPACK_IMPORTED_MODULE_3__["useCallback"])(function(state){return state.viewInfo[uuid];},[uuid]));}/**
 * Obtain the component view info setter function from
 * the global app state.
 * @returns {function} The component view info setter function
 * in the `useViewInfoStore` store.
 */function useSetComponentViewInfo(uuid){var setViewInfoRef=Object(react__WEBPACK_IMPORTED_MODULE_3__["useRef"])(useViewInfoStore.getState().setComponentViewInfo);var setComponentViewInfo=function setComponentViewInfo(viewInfo){return setViewInfoRef.current(uuid,viewInfo);};return setComponentViewInfo;}/**
 * Obtain the grid resize count value
 * from the global app state.
 * @returns {number} The grid resize increment value.
 */function useGridResize(){return useGridSizeStore(function(state){return state.resizeCount;});}/**
 * Obtain the grid resize count increment function
 * from the global app state.
 * @returns {function} The grid resize count increment
 * function.
 */function useEmitGridResize(){return useGridSizeStore(function(state){return state.incrementResizeCount;});}

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return TILE_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return MIN_ROW_AGG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return MAX_ROW_AGG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return COLOR_BAR_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return AXIS_LABEL_TEXT_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return AXIS_TITLE_TEXT_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return AXIS_MIN_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return AXIS_MAX_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return AXIS_MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return THEME_TO_TEXT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AXIS_FONT_FAMILY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return PIXELATED_TEXTURE_PARAMETERS; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);
/* harmony import */ var _luma_gl_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(33);
/* harmony import */ var _luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1__);
var _PIXELATED_TEXTURE_PA;var TILE_SIZE=2048;var MIN_ROW_AGG=1;var MAX_ROW_AGG=16;var COLOR_BAR_SIZE=20;var AXIS_LABEL_TEXT_SIZE=9;var AXIS_TITLE_TEXT_SIZE=15;var AXIS_MIN_SIZE=10;var AXIS_MAX_SIZE=90;var AXIS_MARGIN=3;var THEME_TO_TEXT_COLOR={dark:[224,224,224],light:[64,64,64]};var AXIS_FONT_FAMILY="-apple-system, 'Helvetica Neue', Arial, sans-serif";var PIXELATED_TEXTURE_PARAMETERS=(_PIXELATED_TEXTURE_PA={},Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_PIXELATED_TEXTURE_PA,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.TEXTURE_MIN_FILTER,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.NEAREST),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_PIXELATED_TEXTURE_PA,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.TEXTURE_MAG_FILTER,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.NEAREST),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_PIXELATED_TEXTURE_PA,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.TEXTURE_WRAP_S,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.CLAMP_TO_EDGE),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_PIXELATED_TEXTURE_PA,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.TEXTURE_WRAP_T,_luma_gl_constants__WEBPACK_IMPORTED_MODULE_1___default.a.CLAMP_TO_EDGE),_PIXELATED_TEXTURE_PA);

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _classCallCheck; });
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export makeCellStatusMessage */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return cellLayerDefaultProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DEFAULT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return PALETTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return VIEWER_PALETTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return COLORMAP_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return DEFAULT_GL_OPTIONS; });
/* unused harmony export createDefaultUpdateStatus */
/* unused harmony export createDefaultUpdateCellsSelection */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return createDefaultUpdateCellsHover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return createDefaultUpdateGenesHover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return createDefaultUpdateViewInfo; });
/* unused harmony export createDefaultClearPleaseWait */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return copyUint8Array; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return getNextNumberedNodeName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return setCellSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return mergeCellSets; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return createWarningComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return asEsModule; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var deck_gl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22);
/* harmony import */ var deck_gl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(deck_gl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _sets_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14);
/* harmony import */ var _classNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(31);
function makeCellStatusMessage(cellInfoFactors){return Object.entries(cellInfoFactors).map(function(_ref){var _ref2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_ref,2),factor=_ref2[0],value=_ref2[1];return"".concat(factor,": ").concat(value);}).join('; ');}function cellLayerDefaultProps(cells,updateStatus,setCellHighlight,setComponentHover){return{coordinateSystem:deck_gl__WEBPACK_IMPORTED_MODULE_3__["COORDINATE_SYSTEM"].CARTESIAN,data:cells,pickable:true,autoHighlight:true,stroked:true,filled:true,getElevation:0,onHover:function onHover(info){// Notify the parent component that its child component is
// the "hover source".
if(setComponentHover){setComponentHover();}if(info.object){var _info$object=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(info.object,2),cellId=_info$object[0],cellInfo=_info$object[1];var _cellInfo$factors=cellInfo.factors,factors=_cellInfo$factors===void 0?{}:_cellInfo$factors;if(updateStatus){updateStatus(makeCellStatusMessage(factors));}if(setCellHighlight){setCellHighlight(cellId);}}else if(setCellHighlight){// Clear the currently-hovered cell info by passing null.
setCellHighlight('');}}};}var DEFAULT_COLOR=[128,128,128];// From https://personal.sron.nl/~pault/#sec:qualitative
var PALETTE=[[68,119,170],[136,204,238],[68,170,153],[17,119,51],[153,153,51],[221,204,119],[204,102,119],[136,34,85],[170,68,153]];var VIEWER_PALETTE=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[0,255,255],[255,255,255],[255,128,0],[255,0,0]];var COLORMAP_OPTIONS=['viridis','greys','magma','jet','hot','bone','copper','summer','density','inferno'];var DEFAULT_GL_OPTIONS={webgl2:true};function createDefaultUpdateStatus(componentName){return function(message){return console.warn("".concat(componentName," updateStatus: ").concat(message));};}function createDefaultUpdateCellsSelection(componentName){return function(cellsSelection){return console.warn("".concat(componentName," updateCellsSelection: ").concat(cellsSelection));};}function createDefaultUpdateCellsHover(componentName){return function(hoverInfo){return console.warn("".concat(componentName," updateCellsHover: ").concat(hoverInfo.cellId));};}function createDefaultUpdateGenesHover(componentName){return function(hoverInfo){return console.warn("".concat(componentName," updateGenesHover: ").concat(hoverInfo.geneId));};}function createDefaultUpdateViewInfo(componentName){return function(viewInfo){return console.warn("".concat(componentName," updateViewInfo: ").concat(viewInfo));};}function createDefaultClearPleaseWait(){return function(){};}/**
 * Copy a typed array into a new array buffer.
 * @param {Uint8Array} arr The typed array to be copied.
 * @returns {Uint8Array} The copied array.
 */function copyUint8Array(arr){var newBuffer=new ArrayBuffer(arr.buffer.byteLength);var newArr=new Uint8Array(newBuffer);newArr.set(arr);return newArr;}function getNextNumberedNodeName(nodes,prefix){var i=1;if(nodes){// eslint-disable-next-line no-loop-func
while(nodes.find(function(n){return n.name==="".concat(prefix).concat(i);})){// eslint-disable-next-line no-plusplus
i++;}}return"".concat(prefix).concat(i);}/**
 * Create a new selected cell set based on a cell selection.
 * @param {string[]} cellSelection An array of cell IDs.
 * @param {object[]} additionalCellSets The previous array of user-defined cell sets.
 * @param {function} setCellSetSelection The setter function for cell set selections.
 * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.
 */function setCellSelection(cellSelection,additionalCellSets,cellSetColor,setCellSetSelection,setAdditionalCellSets,setCellSetColor,setCellColorEncoding){var prefix=arguments.length>7&&arguments[7]!==undefined?arguments[7]:'Selection ';var CELL_SELECTIONS_LEVEL_ZERO_NAME='My Selections';var selectionsLevelZeroNode=additionalCellSets===null||additionalCellSets===void 0?void 0:additionalCellSets.tree.find(function(n){return n.name===CELL_SELECTIONS_LEVEL_ZERO_NAME;});var nextAdditionalCellSets={version:_sets_constants__WEBPACK_IMPORTED_MODULE_4__[/* HIERARCHICAL_SCHEMAS */ "c"][_sets_constants__WEBPACK_IMPORTED_MODULE_4__[/* SETS_DATATYPE_CELL */ "h"]].latestVersion,datatype:_sets_constants__WEBPACK_IMPORTED_MODULE_4__[/* SETS_DATATYPE_CELL */ "h"],tree:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(additionalCellSets?additionalCellSets.tree:[])};var nextName=getNextNumberedNodeName(selectionsLevelZeroNode===null||selectionsLevelZeroNode===void 0?void 0:selectionsLevelZeroNode.children,prefix);var colorIndex=0;if(selectionsLevelZeroNode){colorIndex=selectionsLevelZeroNode.children.length;selectionsLevelZeroNode.children.push({name:nextName,set:cellSelection.map(function(d){return[d,null];})});}else{nextAdditionalCellSets.tree.push({name:CELL_SELECTIONS_LEVEL_ZERO_NAME,children:[{name:nextName,set:cellSelection.map(function(d){return[d,null];})}]});}setAdditionalCellSets(nextAdditionalCellSets);var nextPath=['My Selections',nextName];setCellSetColor([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(cellSetColor||[]),[{path:nextPath,color:PALETTE[colorIndex%PALETTE.length]}]));setCellSetSelection([nextPath]);setCellColorEncoding('cellSetSelection');}function mergeCellSets(cellSets,additionalCellSets){return{version:_sets_constants__WEBPACK_IMPORTED_MODULE_4__[/* HIERARCHICAL_SCHEMAS */ "c"][_sets_constants__WEBPACK_IMPORTED_MODULE_4__[/* SETS_DATATYPE_CELL */ "h"]].latestVersion,datatype:_sets_constants__WEBPACK_IMPORTED_MODULE_4__[/* SETS_DATATYPE_CELL */ "h"],tree:[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(cellSets?cellSets.tree:[]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(additionalCellSets?additionalCellSets.tree:[]))};}function createWarningComponent(props){return function(){var title=props.title,message=props.message;return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:_classNames__WEBPACK_IMPORTED_MODULE_5__[/* PRIMARY_CARD */ "b"]},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h1",null,title),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,message));};}function asEsModule(component){return{__esModule:true,default:component};}

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _createClass; });
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(94);


/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _inherits; });
/* harmony import */ var _setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71);

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object(_setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(subClass, superClass);
}

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(30);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js
var isNativeReflectConstruct = __webpack_require__(72);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(40);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js


function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return Object(assertThisInitialized["a" /* default */])(self);
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _createSuper; });



function _createSuper(Derived) {
  return function () {
    var Super = Object(getPrototypeOf["a" /* default */])(Derived),
        result;

    if (Object(isNativeReflectConstruct["a" /* default */])()) {
      var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

/***/ }),
/* 13 */
/***/ (function(module, exports) {

module.exports = require("lodash/isEqual");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FILE_EXTENSION_JSON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return MIME_TYPE_JSON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return FILE_EXTENSION_TABULAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return MIME_TYPE_TABULAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return SEPARATOR_TABULAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return NA_VALUE_TABULAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return SETS_DATATYPE_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return HIERARCHICAL_SCHEMAS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return TABULAR_SCHEMAS; });
/* harmony import */ var _schemas_cell_sets_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55);
var _schemas_cell_sets_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(55, 1);
/* harmony import */ var _schemas_cell_sets_tabular_schema_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73);
var _schemas_cell_sets_tabular_schema_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(73, 1);
var FILE_EXTENSION_JSON='json';var MIME_TYPE_JSON='application/json';var FILE_EXTENSION_TABULAR='csv';var MIME_TYPE_TABULAR='text/csv';var SEPARATOR_TABULAR=',';// The NA value below corresponds to the allowed string enum
// value "NA" in the cell-sets-tabular JSON schema.
var NA_VALUE_TABULAR='NA';var SETS_DATATYPE_CELL='cell';var HIERARCHICAL_SCHEMAS={cell:{latestVersion:'0.1.3',schema:_schemas_cell_sets_schema_json__WEBPACK_IMPORTED_MODULE_0__}};var TABULAR_SCHEMAS={cell:{schema:_schemas_cell_sets_tabular_schema_json__WEBPACK_IMPORTED_MODULE_1__}};

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return fromEntries; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return range; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return pluralize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return capitalize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return getNextScope; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* eslint-disable no-plusplus */ // Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js
function fromEntries(iterable){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(iterable).reduce(function(obj,_ref){var key=_ref[0],val=_ref[1];return Object.assign(obj,Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},key,val));},{});}function range(length){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(Array(length).keys());}/**
 * Select between a singular and plural version of a word,
 * based on an item count.
 * @param {string} singular The singular version of the word.
 * @param {string} plural The plural version of the word.
 * @param {number} count The number of items.
 * @returns {string} Singular if count is one, else plural.
 */function pluralize(singular,plural,count){return count===1?singular:plural;}/**
 * Capitalize a the first letter of a string.
 * @param {string} word A string to capitalize.
 * @returns {string} The word parameter with the first letter capitalized.
 */function capitalize(word){return word.charAt(0).toUpperCase()+word.slice(1);}/**
 * Generate a new scope name which does not
 * conflict / overlap with a previous scope name.
 * Really these just need to be unique within the coordination object.
 * So in theory they could be String(Math.random()) or uuidv4() or something.
 * However it may be good to make them more human-readable and memorable
 * since eventually we will want to expose a UI to update the coordination.
 * @param {string[]} prevScopes Previous scope names.
 * @returns {string} The new scope name.
 */function getNextScope(prevScopes){// Keep an ordered list of valid characters.
var chars='ABCDEFGHIJKLMNOPQRSTUVWXYZ';// Store the value of the next character for each position
// in the new string.
// For example, [0] -> "A", [1] -> "B", [0, 1] -> "AB"
var nextCharIndices=[0];// Generate a new scope name,
// potentially conflicting with an existing name.
// Reference: https://stackoverflow.com/a/12504061
function next(){var r=[];nextCharIndices.forEach(function(charIndex){r.unshift(chars[charIndex]);});var increment=true;for(var i=0;i<nextCharIndices.length;i++){var val=++nextCharIndices[i];if(val>=chars.length){nextCharIndices[i]=0;}else{increment=false;break;}}if(increment){nextCharIndices.push(0);}return r.join('');}var nextScope;do{nextScope=next();}while(prevScopes.includes(nextScope));return nextScope;}

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return callbackOnKeyPress; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return colorArrayToString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return colorStringToArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return getLevelTooltipText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return isEqualOrPrefix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return tryRenamePath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PATH_SEP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return pathToKey; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78);
/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_2__);
/**
 * Execute a callback function based on a keypress event.
 * @param {object} event The event from onKeyPress
 * @param {string} key The key identifier to match.
 * @param {Function} callback The function to execute.
 */function callbackOnKeyPress(event,key,callback){if(event.key===key){event.preventDefault();callback();}}/**
 * Convert an array of [r, g, b] numbers to a hex color.
 * @param {number[]} rgbArray The color [r, g, b] array.
 * @returns {string} The hex color as a string.
 */function colorArrayToString(rgbArray){return tinycolor2__WEBPACK_IMPORTED_MODULE_1___default()({r:rgbArray[0],g:rgbArray[1],b:rgbArray[2]}).toHexString();}/**
 * Convert a string color representation to an array of [r,g,b].
 * @param {string} colorString The color as a string.
 * @returns {number[]} The color as an array.
 */function colorStringToArray(colorString){var colorObj=tinycolor2__WEBPACK_IMPORTED_MODULE_1___default()(colorString).toRgb();return[colorObj.r,colorObj.g,colorObj.b];}/**
 * Get a string of help text for coloring a particular hierarchy level.
 * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.
 * @returns {string} The tooltip text for coloring the level.
 */function getLevelTooltipText(i){if(i===0)return'Color by hierarchy';if(i<=2){var subs=function subs(j){return'sub'.repeat(j);};return"Color by ".concat(subs(i-1),"cluster");}return"Color by cluster level ".concat(i);}function isEqualOrPrefix(targetPath,testPath){if(targetPath.length<=testPath.length){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_2___default()(targetPath,testPath.slice(0,targetPath.length));}return false;}function tryRenamePath(targetPath,testPath,nextTargetPath){if(isEqualOrPrefix(targetPath,testPath)){return[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(nextTargetPath),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(testPath.slice(nextTargetPath.length)));}return testPath;}var PATH_SEP='___';function pathToKey(path){return path.join(PATH_SEP);}

/***/ }),
/* 17 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/styles");

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return GLOBAL_SLIDER_DIMENSION_FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return DEFAULT_RASTER_DOMAIN_TYPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return DEFAULT_RASTER_LAYER_PROPS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return DEFAULT_MOLECULES_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DEFAULT_CELLS_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return DEFAULT_NEIGHBORHOODS_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DEFAULT_LAYER_TYPE_ORDERING; });
var GLOBAL_SLIDER_DIMENSION_FIELDS=['z','time'];var DEFAULT_RASTER_DOMAIN_TYPE='Min/Max';var DEFAULT_RASTER_LAYER_PROPS={colormap:null,opacity:1,domainType:DEFAULT_RASTER_DOMAIN_TYPE,transparentColor:[0,0,0]};var DEFAULT_MOLECULES_LAYER={type:'molecules',opacity:1,radius:20,visible:true};var DEFAULT_CELLS_LAYER={type:'cells',opacity:1,radius:50,visible:true,stroked:false};var DEFAULT_NEIGHBORHOODS_LAYER={type:'neighborhoods',visible:false};var DEFAULT_LAYER_TYPE_ORDERING=['molecules','cells','neighborhoods','raster'];

/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export nodeToSet */
/* unused harmony export nodeToHeight */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return treeFindNodeByNamePath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return nodeTransform; });
/* unused harmony export nodeTransformAll */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return nodeAppendChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return nodePrependChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return nodeInsertChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return treeToUnion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return treeToIntersection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return treeToComplement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return nodeToLevelDescendantNamePaths; });
/* unused harmony export treeExport */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return treeExportLevelZeroNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return treeExportSet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return treeInitialize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return nodeToRenderProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return treeToCellColorsBySetNames; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return treeToObjectsBySetNames; });
/* unused harmony export treeToCellPolygonsBySetNames */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return treeToSetSizesBySetNames; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return filterNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return treeToExpectedCheckedLevel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return treesConflict; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return initializeCellSetColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return getCellSetPolygons; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var uuid_v4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(53);
/* harmony import */ var uuid_v4__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(uuid_v4__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var lodash_range__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(47);
/* harmony import */ var lodash_range__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _turf_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(52);
/* harmony import */ var _turf_helpers__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_turf_helpers__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _turf_concave__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88);
/* harmony import */ var _turf_concave__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_turf_concave__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _turf_centroid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89);
/* harmony import */ var _turf_centroid__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_turf_centroid__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(14);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(8);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16);
/* eslint-disable no-underscore-dangle *//**
 * Alias for the uuidv4 function to make code more readable.
 * @returns {string} UUID.
 */function generateKey(){return uuid_v4__WEBPACK_IMPORTED_MODULE_3___default()();}/**
 * Get the set associated with a particular node.
 * Recursive.
 * @param {object} currNode A node object.
 * @returns {array} The array representing the set associated with the node.
 */function nodeToSet(currNode){if(!currNode){return[];}if(!currNode.children){return currNode.set||[];}return currNode.children.flatMap(function(c){return nodeToSet(c);});}/**
 * Get the height of a node (the number of levels to reach a leaf).
 * @param {object} currNode A node object.
 * @param {number} level The level that the height will be computed relative to. By default, 0.
 * @returns {number} The height. If the node has a .children property,
 * then the minimum value returned is 1.
 */function nodeToHeight(currNode){var level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!currNode.children){return level;}var newLevel=level+1;var childrenHeights=currNode.children.map(function(c){return nodeToHeight(c,newLevel);});return Math.max.apply(Math,Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(childrenHeights).concat([newLevel]));}/**
 * Find a node with a matching name path, relative to a particular node.
 * @param {object} node A node object.
 * @param {string[]} path The name path for the node of interest.
 * @param {number} currLevelIndex The index of the current hierarchy level.
 * @returns {object|null} A matching node object, or null if none is found.
 */function nodeFindNodeByNamePath(node,path,currLevelIndex){var currNodeName=path[currLevelIndex];if(node.name===currNodeName){if(currLevelIndex===path.length-1){return node;}if(node.children){var foundNodes=node.children.map(function(child){return nodeFindNodeByNamePath(child,path,currLevelIndex+1);}).filter(Boolean);if(foundNodes.length===1){return foundNodes[0];}}}return null;}/**
 * Find a node with a matching name path, relative to the whole tree.
 * @param {object} currTree A tree object.
 * @param {string[]} targetNamePath The name path for the node of interest.
 * @returns {object|null} A matching node object, or null if none is found.
 */function treeFindNodeByNamePath(currTree,targetNamePath){var foundNodes=currTree.tree.map(function(levelZeroNode){return nodeFindNodeByNamePath(levelZeroNode,targetNamePath,0);}).filter(Boolean);if(foundNodes.length===1){return foundNodes[0];}return null;}/**
 * Transform a node object using a transform function.
 * @param {object} node A node object.
 * @param {function} predicate Returns true if a node matches a condition of interest.
 * @param {function} transform Takes the node matching the predicate as input, returns
 * a transformed version of the node.
 * @param {array} transformedPaths This array parameter is mutated. The path of
 * each transformed node is appended to this array.
 * @param {string[]} The current path of the node being updated, used internally
 * during recursion.
 * @returns {object} The updated node.
 */function nodeTransform(node,predicate,transform,transformedPaths,currPath){var newPath;if(!currPath){newPath=[node.name];}else{newPath=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(currPath);}if(predicate(node,newPath)){transformedPaths.push(newPath);return transform(node,newPath);}if(node.children){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},node,{children:node.children.map(function(child){return nodeTransform(child,predicate,transform,transformedPaths,newPath.concat([child.name]));})});}return node;}/**
 * Transform many node objects using a transform function.
 * @param {object} node A node object.
 * @param {function} predicate Returns true if a node matches a condition of interest.
 * @param {function} transform Takes the node matching the predicate as input, returns
 * a transformed version of the node.
 * @param {array} transformedPaths This array parameter is mutated. The path of
 * each transformed node is appended to this array.
 * @param {string[]} The current path of the node being updated, used internally
 * during recursion.
 * @returns {object} The updated node.
 */function nodeTransformAll(node,predicate,transform,transformedPaths,currPath){var newPath;if(!currPath){newPath=[node.name];}else{newPath=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(currPath);}var newNode=node;if(predicate(node,newPath)){transformedPaths.push(newPath);newNode=transform(node,newPath);}if(node.children){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},newNode,{children:newNode.children.map(function(child){return nodeTransformAll(child,predicate,transform,transformedPaths,newPath.concat([child.name]));})});}return newNode;}/**
 * Append a child to a parent node.
 * @param {object} currNode A node object.
 * @param {object} newChild The child node object.
 * @returns {object} The updated node.
 */function nodeAppendChild(currNode,newChild){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},currNode,{children:[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(currNode.children),[newChild])});}/**
 * Prepend a child to a parent node.
 * @param {object} currNode A node object.
 * @param {object} newChild The child node object.
 * @returns {object} The updated node.
 */function nodePrependChild(currNode,newChild){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},currNode,{children:[newChild].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(currNode.children))});}/**
 * Insert a child to a parent node.
 * @param {object} currNode A node object.
 * @param {*} newChild The child node object.
 * @param {*} insertIndex The index at which to insert the child.
 * @returns {object} The updated node.
 */function nodeInsertChild(currNode,newChild,insertIndex){var newChildren=Array.from(currNode.children);newChildren.splice(insertIndex,0,newChild);return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},currNode,{children:newChildren});}/**
 * Get an array representing the union of the sets of checked nodes.
 * @param {object} currTree A tree object.
 * @returns {array} An array representing the union of the sets of checked nodes.
 */function treeToUnion(currTree,checkedPaths){var nodes=checkedPaths.map(function(path){return treeFindNodeByNamePath(currTree,path);});var nodeSets=nodes.map(function(node){return nodeToSet(node).map(function(_ref){var _ref2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref,1),cellId=_ref2[0];return cellId;});});return nodeSets.reduce(function(a,h){return a.concat(h.filter(function(hEl){return!a.includes(hEl);}));},nodeSets[0]||[]);}/**
 * Get an array representing the intersection of the sets of checked nodes.
 * @param {object} currTree A tree object.
 * @returns {array} An array representing the intersection of the sets of checked nodes.
 */function treeToIntersection(currTree,checkedPaths){var nodes=checkedPaths.map(function(path){return treeFindNodeByNamePath(currTree,path);});var nodeSets=nodes.map(function(node){return nodeToSet(node).map(function(_ref3){var _ref4=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref3,1),cellId=_ref4[0];return cellId;});});return nodeSets.reduce(function(a,h){return h.filter(function(hEl){return a.includes(hEl);});},nodeSets[0]||[]);}/**
 * Get an array representing the complement of the union of the sets of checked nodes.
 * @param {object} currTree
 * @returns {array} An array representing the complement of the
 * union of the sets of checked nodes.
 */function treeToComplement(currTree,checkedPaths,items){var primaryUnion=treeToUnion(currTree,checkedPaths);return items.filter(function(el){return!primaryUnion.includes(el);});}/**
 * Get an flattened array of descendants at a particular relative
 * level of interest.
 * @param {object} node A node object.
 * @param {number} level The relative level of interest.
 * 0 for this node's children, 1 for grandchildren, etc.
 * @param {boolean} stopEarly Should a node be returned early if no children exist?
 * @returns {object[]} An array of descendants at the specified level,
 * where the level is relative to the node.
 */function nodeToLevelDescendantNamePaths(node,level,prevPath){var stopEarly=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!node.children){if(!stopEarly){return null;}return[[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name])];}if(level===0){return[[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name])];}return node.children.flatMap(function(c){return nodeToLevelDescendantNamePaths(c,level-1,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]),stopEarly);}).filter(Boolean);}/**
 * Export the tree by clearing tree state and all node states.
 * @param {object} currTree A tree object.
 * @returns {object} Tree object with tree and node state removed.
 */function treeExport(currTree,datatype){return{version:_constants__WEBPACK_IMPORTED_MODULE_10__[/* HIERARCHICAL_SCHEMAS */ "c"][datatype].latestVersion,datatype:datatype,tree:currTree.tree};}/**
 * Export the tree by clearing tree state and all node states,
 * and filter so that only the level zero node of interest is included.
 * @param {object} currTree A tree object.
 * @param {string} nodeKey The key of the node of interest.
 * @returns {object} { treeToExport, nodeName }
 * Tree with one level zero node, and with state removed.
 */function treeExportLevelZeroNode(currTree,nodePath,datatype,cellSetColors){var node=treeFindNodeByNamePath(currTree,nodePath);var nodeWithColors=nodeTransformAll(node,function(){return true;},function(n,nPath){var _cellSetColors$find$c,_cellSetColors$find;var nodeColor=(_cellSetColors$find$c=cellSetColors===null||cellSetColors===void 0?void 0:(_cellSetColors$find=cellSetColors.find(function(c){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(c.path,nPath);}))===null||_cellSetColors$find===void 0?void 0:_cellSetColors$find.color)!==null&&_cellSetColors$find$c!==void 0?_cellSetColors$find$c:_utils__WEBPACK_IMPORTED_MODULE_11__[/* DEFAULT_COLOR */ "b"];return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},n,{color:nodeColor.slice(0,3)});},[]);var treeWithOneLevelZeroNode=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},currTree,{tree:[nodeWithColors]});return{treeToExport:treeExport(treeWithOneLevelZeroNode,datatype),nodeName:node.name};}/**
 * Prepare the set of a node of interest for export.
 * @param {object} currTree A tree object.
 * @param {string} nodeKey The key of the node of interest.
 * @returns {object} { setToExport, nodeName } The set as an array.
 */function treeExportSet(currTree,nodePath){var node=treeFindNodeByNamePath(currTree,nodePath);return{setToExport:nodeToSet(node),nodeName:node.name};}/**
 * Get an empty tree, with a default tree state.
 * @param {string} datatype The type of sets that this tree contains.
 * @returns {object} Empty tree.
 */function treeInitialize(datatype){return{version:_constants__WEBPACK_IMPORTED_MODULE_10__[/* HIERARCHICAL_SCHEMAS */ "c"][datatype].latestVersion,datatype:datatype,tree:[]};}/**
 * For convenience, get an object with information required
 * to render a node as a component.
 * @param {object} node A node to be rendered.
 * @returns {object} An object containing properties required
 * by the TreeNode render functions.
 */function nodeToRenderProps(node,path,cellSetColor){var _cellSetColor$find;var level=path.length-1;return{title:node.name,nodeKey:Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* pathToKey */ "g"])(path),path:path,size:nodeToSet(node).length,color:cellSetColor===null||cellSetColor===void 0?void 0:(_cellSetColor$find=cellSetColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,path);}))===null||_cellSetColor$find===void 0?void 0:_cellSetColor$find.color,level:level,isLeaf:(!node.children||node.children.length===0)&&Boolean(node.set),height:nodeToHeight(node)};}/**
 * Using a color and a probability, mix the color with an "uncertainty" color,
 * for example, gray.
 * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701
 * @param {number[]} originalColor The color assignment for the class.
 * @param {number} p The mixing amount, or level certainty in the originalColor classification,
 * between 0 and 1.
 * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.
 * @returns {number[]} Returns the color after mixing.
 */function colorMixWithUncertainty(originalColor,p){var mixingColor=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[128,128,128];return[(originalColor[0]-mixingColor[0])*p+mixingColor[0],(originalColor[1]-mixingColor[1])*p+mixingColor[1],(originalColor[2]-mixingColor[2])*p+mixingColor[2]];}/**
 * Given a tree with state, get the cellIds and cellColors,
 * based on the nodes currently marked as "visible".
 * @param {object} currTree A tree object.
 *  @param {array} selectedNamePaths Array of arrays of strings,
 * representing set "paths".
 * @param {object[]} cellSetColor Array of objects with the
 * properties `path` and `color`.
 * @returns {array} Tuple of [cellIds, cellColors]
 * where cellIds is an array of strings,
 * and cellColors is an object mapping cellIds to color [r,g,b] arrays.
 */function treeToCellColorsBySetNames(currTree,selectedNamePaths,cellSetColor){var cellColorsArray=[];selectedNamePaths.forEach(function(setNamePath){var node=treeFindNodeByNamePath(currTree,setNamePath);if(node){var _cellSetColor$find2;var nodeSet=nodeToSet(node);var nodeColor=(cellSetColor===null||cellSetColor===void 0?void 0:(_cellSetColor$find2=cellSetColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,setNamePath);}))===null||_cellSetColor$find2===void 0?void 0:_cellSetColor$find2.color)||_utils__WEBPACK_IMPORTED_MODULE_11__[/* DEFAULT_COLOR */ "b"];cellColorsArray=[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellColorsArray),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(nodeSet.map(function(_ref5){var _ref6=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref5,2),cellId=_ref6[0],prob=_ref6[1];return[cellId,lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(prob)?nodeColor:colorMixWithUncertainty(nodeColor,prob)];})));}});return new Map(cellColorsArray);}/**
 * Given a tree with state, get an array of
 * objects with cellIds and cellColors,
 * based on the nodes currently marked as "visible".
 * @param {object} currTree A tree object.
 * @param {array} selectedNamePaths Array of arrays of strings,
 * representing set "paths".
 * @param {object[]} setColor Array of objects with the
 * properties `path` and `color`.
 * @returns {object[]} Array of objects with properties
 * `obsId`, `name`, and `color`.
 */function treeToObjectsBySetNames(currTree,selectedNamePaths,setColor){var cellsArray=[];selectedNamePaths.forEach(function(setNamePath){var node=treeFindNodeByNamePath(currTree,setNamePath);if(node){var _setColor$find;var nodeSet=nodeToSet(node);var nodeColor=(setColor===null||setColor===void 0?void 0:(_setColor$find=setColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,setNamePath);}))===null||_setColor$find===void 0?void 0:_setColor$find.color)||_utils__WEBPACK_IMPORTED_MODULE_11__[/* DEFAULT_COLOR */ "b"];cellsArray=[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellsArray),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(nodeSet.map(function(_ref7){var _ref8=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref7,1),cellId=_ref8[0];return{obsId:cellId,name:node.name,color:nodeColor};})));}});return cellsArray;}function treeToCellPolygonsBySetNames(currTree,cells,mapping,selectedNamePaths,cellSetColor){var cellSetPolygons=[];selectedNamePaths.forEach(function(setNamePath){var node=treeFindNodeByNamePath(currTree,setNamePath);if(node){var _cellSetColor$find3;var nodeSet=nodeToSet(node);var nodeColor=(cellSetColor===null||cellSetColor===void 0?void 0:(_cellSetColor$find3=cellSetColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,setNamePath);}))===null||_cellSetColor$find3===void 0?void 0:_cellSetColor$find3.color)||_utils__WEBPACK_IMPORTED_MODULE_11__[/* DEFAULT_COLOR */ "b"];var cellPositions=nodeSet.map(function(_ref9){var _cells$cellId,_cells$cellId2;var _ref10=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref9,1),cellId=_ref10[0];return[(_cells$cellId=cells[cellId])===null||_cells$cellId===void 0?void 0:_cells$cellId.mappings[mapping][0],-((_cells$cellId2=cells[cellId])===null||_cells$cellId2===void 0?void 0:_cells$cellId2.mappings[mapping][1])];}).filter(Boolean);if(cellPositions.length>2){var points=Object(_turf_helpers__WEBPACK_IMPORTED_MODULE_7__["featureCollection"])(cellPositions.map(_turf_helpers__WEBPACK_IMPORTED_MODULE_7__["point"]));var hull=_turf_concave__WEBPACK_IMPORTED_MODULE_8___default()(points);if(hull){var hullCoords=hull.geometry.coordinates;var centroidCoords=_turf_centroid__WEBPACK_IMPORTED_MODULE_9___default()(points).geometry.coordinates;cellSetPolygons.push({path:setNamePath,name:setNamePath[setNamePath.length-1],hull:hullCoords,color:nodeColor,centroid:centroidCoords});}}}});return cellSetPolygons;}/**
 * Given a tree with state, get the sizes of the
 * sets currently marked as "visible".
 * @param {object} currTree A tree object.
 * @param {array} selectedNamePaths Array of arrays of strings,
 * representing set "paths".
 * @param {object[]} setColor Array of objects with the
 * properties `path` and `color`.
 * @returns {object[]} Array of objects
 * with the properties `name`, `size`, `key`,
 * and `color`.
 */function treeToSetSizesBySetNames(currTree,selectedNamePaths,setColor){var sizes=[];selectedNamePaths.forEach(function(setNamePath){var node=treeFindNodeByNamePath(currTree,setNamePath);if(node){var _setColor$find2;var nodeSet=nodeToSet(node);var nodeColor=((_setColor$find2=setColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,setNamePath);}))===null||_setColor$find2===void 0?void 0:_setColor$find2.color)||_utils__WEBPACK_IMPORTED_MODULE_11__[/* DEFAULT_COLOR */ "b"];sizes.push({key:generateKey(),name:node.name,size:nodeSet.length,color:nodeColor});}});return sizes;}/**
 * Find and remove a node from the descendants of the current node.
 * @param {object} node A node to search on.
 * @param {array} prevPath Path of the current node to be searched.
 * @param {array} filterPath The path sought.
 * @returns {object} A new node without a node at filterPath.
 */function filterNode(node,prevPath,filterPath){if(lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]),filterPath)){return null;}if(!node.children){return node;}return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},node,{children:node.children.map(function(c){return filterNode(c,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]),filterPath);}).filter(Boolean)});}function treeToExpectedCheckedLevel(currTree,checkedPaths){var result=null;if(currTree){currTree.tree.forEach(function(lzn){var levelZeroPath=[lzn.name];var height=nodeToHeight(lzn);lodash_range__WEBPACK_IMPORTED_MODULE_6___default()(height).forEach(function(i){var levelIndex=i+1;var levelNodePaths=nodeToLevelDescendantNamePaths(lzn,levelIndex,[],true);if(lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(levelNodePaths,checkedPaths)){result={levelZeroPath:levelZeroPath,levelIndex:levelIndex};}});});}return result;}function treesConflict(cellSets,testCellSets){var paths=[];var testPaths=[];var hasConflict=false;function getPaths(node,prevPath){paths.push([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]));if(node.children){node.children.forEach(function(c){return getPaths(c,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]));});}}cellSets.tree.forEach(function(lzn){return getPaths(lzn,[]);});function getTestPaths(node,prevPath){testPaths.push([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]));if(node.children){node.children.forEach(function(c){return getPaths(c,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]));});}}testCellSets.tree.forEach(function(lzn){return getTestPaths(lzn,[]);});testPaths.forEach(function(testPath){if(paths.find(function(p){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(p,testPath);})){hasConflict=true;}});return hasConflict;}function initializeCellSetColor(cellSets,cellSetColor){var nextCellSetColor=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellSetColor||[]);var nodeCountPerTreePerLevel=cellSets.tree.map(function(tree){return Array.from({length:nodeToHeight(tree)+1// Need to add one because its an array.
}).fill(0);});function processNode(node,prevPath,hierarchyLevel,treeIndex){var index=nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];var nodePath=[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]);var nodeColor=nextCellSetColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,nodePath);});if(!nodeColor){nextCellSetColor.push({path:nodePath,color:_utils__WEBPACK_IMPORTED_MODULE_11__[/* PALETTE */ "d"][index%_utils__WEBPACK_IMPORTED_MODULE_11__[/* PALETTE */ "d"].length]});}nodeCountPerTreePerLevel[treeIndex][hierarchyLevel]+=1;if(node.children){node.children.forEach(function(c){return processNode(c,nodePath,hierarchyLevel+1,treeIndex);});}}cellSets.tree.forEach(function(lzn,treeIndex){return processNode(lzn,[],0,treeIndex);});return nextCellSetColor;}function getCellSetPolygons(params){var cells=params.cells,mapping=params.mapping,cellSets=params.cellSets,cellSetSelection=params.cellSetSelection,cellSetColor=params.cellSetColor;if(cellSetSelection&&cellSetSelection.length>0&&cellSets&&cells){return treeToCellPolygonsBySetNames(cellSets,cells,mapping,cellSetSelection,cellSetColor);}return[];}

/***/ }),
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _asyncToGenerator; });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// CONCATENATED MODULE: ./src/loaders/errors/AbstractLoaderError.js
/**
 * A loader error ancestor class containing a default constructor
 * and a stub for the required warnInConsole() method.
 */var AbstractLoaderError_AbstractLoaderError=/*#__PURE__*/function(){function AbstractLoaderError(message){Object(classCallCheck["a" /* default */])(this,AbstractLoaderError);this.message=message;}// eslint-disable-next-line class-methods-use-this
Object(createClass["a" /* default */])(AbstractLoaderError,[{key:"warnInConsole",value:function warnInConsole(){throw new Error('The warnInConsole() method has not been implemented.');}}]);return AbstractLoaderError;}();
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// CONCATENATED MODULE: ./src/loaders/errors/LoaderFetchError.js
var LoaderFetchError_LoaderFetchError=/*#__PURE__*/function(_AbstractLoaderError){Object(inherits["a" /* default */])(LoaderFetchError,_AbstractLoaderError);var _super=Object(createSuper["a" /* default */])(LoaderFetchError);function LoaderFetchError(datasetType,datasetFileType,datasetUrl,responseHeaders){var _this;Object(classCallCheck["a" /* default */])(this,LoaderFetchError);_this=_super.call(this,"Error HTTP status fetching ".concat(datasetType,"."));_this.name='LoaderFetchError';_this.datasetType=datasetType;_this.datasetFileType=datasetFileType;_this.datasetUrl=datasetUrl;_this.responseHeaders=responseHeaders;return _this;}Object(createClass["a" /* default */])(LoaderFetchError,[{key:"warnInConsole",value:function warnInConsole(){var datasetType=this.datasetType,datasetUrl=this.datasetUrl,responseHeaders=this.responseHeaders;console.warn("".concat(datasetType," from ").concat(datasetUrl,": fetch failed"),responseHeaders);}}]);return LoaderFetchError;}(AbstractLoaderError_AbstractLoaderError);
// CONCATENATED MODULE: ./src/loaders/errors/LoaderValidationError.js
var LoaderValidationError_LoaderValidationError=/*#__PURE__*/function(_AbstractLoaderError){Object(inherits["a" /* default */])(LoaderValidationError,_AbstractLoaderError);var _super=Object(createSuper["a" /* default */])(LoaderValidationError);function LoaderValidationError(datasetType,datasetFileType,datasetUrl,reason){var _this;Object(classCallCheck["a" /* default */])(this,LoaderValidationError);_this=_super.call(this,"Error while validating ".concat(datasetType,"."));_this.name='LoaderValidationError';_this.datasetType=datasetType;_this.datasetFileType=datasetFileType;_this.datasetUrl=datasetUrl;_this.reason=reason;return _this;}Object(createClass["a" /* default */])(LoaderValidationError,[{key:"warnInConsole",value:function warnInConsole(){var datasetType=this.datasetType,datasetUrl=this.datasetUrl,reason=this.reason;console.warn("".concat(datasetType," from ").concat(datasetUrl,": validation failed"),JSON.stringify(reason,null,2));}}]);return LoaderValidationError;}(AbstractLoaderError_AbstractLoaderError);
// CONCATENATED MODULE: ./src/loaders/errors/LoaderNotFoundError.js
var LoaderNotFoundError_LoaderNotFoundError=/*#__PURE__*/function(_AbstractLoaderError){Object(inherits["a" /* default */])(LoaderNotFoundError,_AbstractLoaderError);var _super=Object(createSuper["a" /* default */])(LoaderNotFoundError);function LoaderNotFoundError(datasetType,datasetFileType,datasetUrl){var _this;Object(classCallCheck["a" /* default */])(this,LoaderNotFoundError);_this=_super.call(this,"Error finding loader for ".concat(datasetType,"."));_this.name='LoaderNotFoundError';_this.datasetType=datasetType;_this.datasetFileType=datasetFileType;_this.datasetUrl=datasetUrl;return _this;}Object(createClass["a" /* default */])(LoaderNotFoundError,[{key:"warnInConsole",value:function warnInConsole(){var datasetType=this.datasetType,datasetFileType=this.datasetFileType,datasetUrl=this.datasetUrl;if(datasetFileType&&datasetUrl){console.warn("".concat(datasetType," from ").concat(datasetUrl,": unable to find loader for fileType ").concat(datasetFileType));}else{console.warn("".concat(datasetType,": unable to find loader"));}}}]);return LoaderNotFoundError;}(AbstractLoaderError_AbstractLoaderError);
// CONCATENATED MODULE: ./src/loaders/errors/index.js
/* concated harmony reexport AbstractLoaderError */__webpack_require__.d(__webpack_exports__, "a", function() { return AbstractLoaderError_AbstractLoaderError; });
/* concated harmony reexport LoaderFetchError */__webpack_require__.d(__webpack_exports__, "b", function() { return LoaderFetchError_LoaderFetchError; });
/* concated harmony reexport LoaderValidationError */__webpack_require__.d(__webpack_exports__, "d", function() { return LoaderValidationError_LoaderValidationError; });
/* concated harmony reexport LoaderNotFoundError */__webpack_require__.d(__webpack_exports__, "c", function() { return LoaderNotFoundError_LoaderNotFoundError; });


/***/ }),
/* 22 */
/***/ (function(module, exports) {

module.exports = require("deck.gl");

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return useGridItemSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return useDeckCanvasSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return useReady; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return useUrls; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _app_state_hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5);
/**
 * Custom hook, subscribes to GRID_RESIZE and window resize events.
 * @returns {array} `[width, height, containerRef]` where width and height
 * are numbers and containerRef is a React ref.
 */function useGridItemSize(){var containerRef=Object(react__WEBPACK_IMPORTED_MODULE_2__["useRef"])();var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(),_useState2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useState,2),height=_useState2[0],setHeight=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(),_useState4=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useState3,2),width=_useState4[0],setWidth=_useState4[1];var resizeCount=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_4__[/* useGridResize */ "f"])();var incrementResizeCount=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_4__[/* useEmitGridResize */ "e"])();// On window resize events, increment the grid resize count.
Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function(){function onWindowResize(){incrementResizeCount();}var onResizeDebounced=lodash_debounce__WEBPACK_IMPORTED_MODULE_3___default()(onWindowResize,100,{trailing:true});window.addEventListener('resize',onResizeDebounced);onWindowResize();return function(){window.removeEventListener('resize',onResizeDebounced);};},[incrementResizeCount]);// On new grid resize counts, re-compute the component
// width/height.
Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function(){if(!containerRef.current)return;var container=containerRef.current;var containerRect=container.getBoundingClientRect();setHeight(containerRect.height);setWidth(containerRect.width);},[resizeCount]);return[width,height,containerRef];}/**
 * Custom hook, subscribes to GRID_RESIZE and window resize events.
 * @returns {array} `[width, height, deckRef]` where width and height
 * are numbers and deckRef is a React ref to be used with
 * a <DeckGL/> element (or a forwardRef to one).
 */function useDeckCanvasSize(){var deckRef=Object(react__WEBPACK_IMPORTED_MODULE_2__["useRef"])();var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(),_useState6=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useState5,2),height=_useState6[0],setHeight=_useState6[1];var _useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(),_useState8=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useState7,2),width=_useState8[0],setWidth=_useState8[1];var resizeCount=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_4__[/* useGridResize */ "f"])();var incrementResizeCount=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_4__[/* useEmitGridResize */ "e"])();// On window resize events, increment the grid resize count.
Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function(){function onWindowResize(){incrementResizeCount();}var onResizeDebounced=lodash_debounce__WEBPACK_IMPORTED_MODULE_3___default()(onWindowResize,100,{trailing:true});window.addEventListener('resize',onResizeDebounced);onWindowResize();return function(){window.removeEventListener('resize',onResizeDebounced);};},[incrementResizeCount]);// On new grid resize counts, re-compute the DeckGL canvas
// width/height.
Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function(){if(!deckRef.current)return;var canvas=deckRef.current.deck.canvas;var canvasRect=canvas.getBoundingClientRect();setHeight(canvasRect.height);setWidth(canvasRect.width);},[resizeCount]);return[width,height,deckRef];}/**
 * This hook handles a boolean isReady value,
 * which only returns true once every item in the
 * input list has been marked as "ready".
 * @param {string[]} items The items to wait on.
 * Should be defined as a constant
 * (outside a function component / render function),
 * otherwise strange bugs may occur.
 * @returns {array} An array
 * [isReady, setItemIsReady, resetReadyItems]
 * where isReady is the boolean value,
 * setItemIsReady marks one item as ready,
 * and resetReadyItem marks all items as waiting.
 */function useReady(supportedItems){var items=supportedItems;var _useState9=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(items),_useState10=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useState9,2),waiting=_useState10[0],setWaiting=_useState10[1];var setItemIsReady=Object(react__WEBPACK_IMPORTED_MODULE_2__["useCallback"])(function(readyItem){setWaiting(function(waitingItems){var nextWaitingItems=waitingItems.filter(function(item){return item!==readyItem;});// eslint-disable-next-line no-console
console.log("cleared ".concat(readyItem,"; waiting on ").concat(nextWaitingItems.length,": ").concat(JSON.stringify(nextWaitingItems)));return nextWaitingItems;});},[setWaiting]);var resetReadyItems=Object(react__WEBPACK_IMPORTED_MODULE_2__["useCallback"])(function(){setWaiting(items);// eslint-disable-next-line no-console
console.log("waiting on ".concat(items.length,": ").concat(JSON.stringify(items)));},[setWaiting,items]);var isReady=waiting.length===0;return[isReady,setItemIsReady,resetReadyItems];}/**
 * This hook manages a list of URLs,
 * with adding and resetting helpers.
 * @returns {array} An array
 * [urls, addUrl, resetUrls]
 * where urls is the array of URL objects,
 * addUrl is a function for adding a URL to the array,
 * resetUrls is a function that clears the array.
 */function useUrls(){var _useState11=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])([]),_useState12=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useState11,2),urls=_useState12[0],setUrls=_useState12[1];var addUrl=Object(react__WEBPACK_IMPORTED_MODULE_2__["useCallback"])(function(url,name){if(url){setUrls(function(prev){return[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(prev),[{url:url,name:name}]);});}},[setUrls]);var resetUrls=Object(react__WEBPACK_IMPORTED_MODULE_2__["useCallback"])(function(){setUrls([]);},[setUrls]);return[urls,addUrl,resetUrls];}

/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return useDescription; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return useCellsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return useCellSetsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return useExpressionMatrixData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return useMoleculesData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return useNeighborhoodsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return useRasterData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return useGenomicProfilesData; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_state_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);
/* harmony import */ var _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21);
/* harmony import */ var _spatial_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(44);
/**
 * Warn via publishing to the console
 * and to the global warning store.
 * @param {AbstractLoaderError} error An error instance.
 */function warn(error,setWarning){setWarning(error.message);console.warn(error.message);if(error instanceof _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* AbstractLoaderError */ "a"]){error.warnInConsole();}}/**
 * Get the dataset description string.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @returns {array} [description] where
 * description is a string.
 */function useDescription(loaders,dataset){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState,2),description=_useState2[0],setDescription=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].description){setDescription(loaders[dataset].description);}else{setDescription(null);}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[description];}/**
 * Get data from a cells data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @param {(function|null)} onLoad An extra function to execute upon load of the data.
 * @returns {array} [cells, cellsCount] where
 * cells is an object and cellsCount is the
 * number of items in the cells object.
 */function useCellsData(loaders,dataset,setItemIsReady,addUrl,isRequired){var onLoad=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({}),_useState4=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState3,2),cells=_useState4[0],setCells=_useState4[1];var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0),_useState6=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState5,2),cellsCount=_useState6[0],setCellsCount=_useState6[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders.cells){loaders[dataset].loaders.cells.load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,url=payload.url;setCells(data);setCellsCount(Object.keys(data).length);addUrl(url,'Cells');if(onLoad){onLoad();}setItemIsReady('cells');});}else{setCells({});setCellsCount(0);if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'cells',null,null),setWarning);}else{setItemIsReady('cells');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[cells,cellsCount];}/**
 * Get data from a cell sets data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @returns {array} [cellSets] where
 * cellSets is a sets tree object.
 */function useCellSetsData(loaders,dataset,setItemIsReady,addUrl,isRequired){var onLoad=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var _useState7=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState8=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState7,2),cellSets=_useState8[0],setCellSets=_useState8[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders['cell-sets']){// Load the data initially.
loaders[dataset].loaders['cell-sets'].load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,url=payload.url;setCellSets(data);addUrl(url,'Cell Sets');if(onLoad){onLoad(data);}setItemIsReady('cell-sets');});}else{setCellSets(null);if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'cell-sets',null,null),setWarning);}else{setItemIsReady('cell-sets');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[cellSets];}/**
 * Get data from an expression matrix data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @returns {array} [expressionMatrix] where
 * expressionMatrix is an object with
 * shape { cols, rows, matrix }.
 */function useExpressionMatrixData(loaders,dataset,setItemIsReady,addUrl,isRequired){var _useState9=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState10=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState9,2),expressionMatrix=_useState10[0],setExpressionMatrix=_useState10[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders['expression-matrix']){loaders[dataset].loaders['expression-matrix'].load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,url=payload.url;var _data=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(data,2),attrs=_data[0],arr=_data[1];setExpressionMatrix({cols:attrs.cols,rows:attrs.rows,matrix:arr.data});addUrl(url,'Expression Matrix');setItemIsReady('expression-matrix');});}else{setExpressionMatrix(null);if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'expression-matrix',null,null),setWarning);}else{setItemIsReady('expression-matrix');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[expressionMatrix];}/**
 * Get data from a molecules data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @param {(function|null)} onLoad An extra function to execute upon load of the data.
 * @returns {array} [molecules, moleculesCount, locationsCount] where
 * molecules is an object,
 * moleculesCount is the number of unique molecule types, and
 * locationsCount is the number of molecules.
 */function useMoleculesData(loaders,dataset,setItemIsReady,addUrl,isRequired){var onLoad=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var _useState11=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState12=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState11,2),molecules=_useState12[0],setMolecules=_useState12[1];var _useState13=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0),_useState14=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState13,2),moleculesCount=_useState14[0],setMoleculesCount=_useState14[1];var _useState15=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0),_useState16=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState15,2),locationsCount=_useState16[0],setLocationsCount=_useState16[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders.molecules){loaders[dataset].loaders.molecules.load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,url=payload.url;setMolecules(data);setMoleculesCount(Object.keys(data).length);setLocationsCount(Object.values(data).map(function(l){return l.length;}).reduce(function(a,b){return a+b;},0));addUrl(url,'Molecules');if(onLoad){onLoad();}setItemIsReady('molecules');});}else{setMolecules({});setMoleculesCount(0);setLocationsCount(0);if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'molecules',null,null),setWarning);}else{setItemIsReady('molecules');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[molecules,moleculesCount,locationsCount];}/**
 * Get data from a neighborhoods data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @param {(function|null)} onLoad An extra function to execute upon load of the data.
 * @returns {array} [neighborhoods] where
 * neighborhoods is an object.
 */function useNeighborhoodsData(loaders,dataset,setItemIsReady,addUrl,isRequired){var onLoad=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var _useState17=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState18=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState17,2),neighborhoods=_useState18[0],setNeighborhoods=_useState18[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders.neighborhoods){loaders[dataset].loaders.neighborhoods.load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,url=payload.url;setNeighborhoods(data);addUrl(url,'Neighborhoods');if(onLoad){onLoad();}setItemIsReady('neighborhoods');});}else{setNeighborhoods({});if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'neighborhoods',null,null),setWarning);}else{setItemIsReady('neighborhoods');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[neighborhoods];}/**
 * Get data from a raster data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @param {(function|null)} onLoad An extra function to execute upon load of the data.
 * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where
 * raster is an object,
 * imageLayerLoaders is an object, and
 * imageLayerMeta is an object.
 */function useRasterData(loaders,dataset,setItemIsReady,addUrl,isRequired){var onLoad=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var _useState19=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState20=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState19,2),raster=_useState20[0],setRaster=_useState20[1];// Since we want the image layer / channel definitions to come from the
// coordination space stored as JSON in the view config,
// we need to set up a separate state variable here to store the
// non-JSON objects, such as layer loader instances.
var _useState21=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])([]),_useState22=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState21,2),imageLayerLoaders=_useState22[0],setImageLayerLoaders=_useState22[1];var _useState23=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])([]),_useState24=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState23,2),imageLayerMeta=_useState24[0],setImageLayerMeta=_useState24[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders.raster){loaders[dataset].loaders.raster.load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,urls=payload.urls;setRaster(data);urls.forEach(function(_ref){var _ref2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref,2),url=_ref2[0],name=_ref2[1];addUrl(url,name);});var rasterLayers=data.layers,rasterRenderLayers=data.renderLayers,usePhysicalSizeScaling=data.usePhysicalSizeScaling;Object(_spatial_utils__WEBPACK_IMPORTED_MODULE_4__[/* initializeRasterLayersAndChannels */ "d"])(rasterLayers,rasterRenderLayers,usePhysicalSizeScaling).then(function(_ref3){var _ref4=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref3,3),autoImageLayers=_ref4[0],nextImageLoaders=_ref4[1],nextImageMeta=_ref4[2];setImageLayerLoaders(nextImageLoaders);setImageLayerMeta(nextImageMeta);if(onLoad){onLoad(autoImageLayers);}setItemIsReady('raster');});});}else{// There was no raster loader for this dataset,
// and raster should be optional.
setImageLayerLoaders([]);setImageLayerMeta([]);if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'raster',null,null),setWarning);}else{setItemIsReady('raster');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[raster,imageLayerLoaders,imageLayerMeta];}/**
 * Get data from a genomic-profiles data type loader,
 * updating "ready" and URL state appropriately.
 * Throw warnings if the data is marked as required.
 * Subscribe to loader updates.
 * @param {object} loaders The object mapping
 * datasets and data types to loader instances.
 * @param {string} dataset The key for a dataset,
 * used to identify which loader to use.
 * @param {function} setItemIsReady A function to call
 * when done loading.
 * @param {function} addUrl A function to call to update
 * the URL list.
 * @param {boolean} isRequired Should a warning be thrown if
 * loading is unsuccessful?
 * @param {(function|null)} onLoad An extra function to execute upon load of the data.
 * @returns {array} [neighborhoods] where
 * neighborhoods is an object.
 */function useGenomicProfilesData(loaders,dataset,setItemIsReady,addUrl,isRequired){var onLoad=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var _useState25=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState26=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useState25,2),genomicProfilesAttrs=_useState26[0],setGenomicProfilesAttrs=_useState26[1];var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_2__[/* useSetWarning */ "n"])();Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){if(!loaders[dataset]){return;}if(loaders[dataset].loaders['genomic-profiles']){loaders[dataset].loaders['genomic-profiles'].load().catch(function(e){return warn(e,setWarning);}).then(function(payload){if(!payload)return;var data=payload.data,url=payload.url;setGenomicProfilesAttrs(data);addUrl(url);if(onLoad){onLoad();}setItemIsReady('genomic-profiles');});}else{setGenomicProfilesAttrs(null);if(isRequired){warn(new _loaders_errors_index__WEBPACK_IMPORTED_MODULE_3__[/* LoaderNotFoundError */ "c"](dataset,'genomic-profiles',null,null),setWarning);}else{setItemIsReady('genomic-profiles');}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return[genomicProfilesAttrs];}

/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return COORDINATION_TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return DEFAULT_COORDINATION_VALUES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AUTO_INDEPENDENT_COORDINATION_TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return COMPONENT_COORDINATION_TYPES; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);
var _DEFAULT_COORDINATION;/**
 * Constants representing names of coordination types,
 * to help prevent typos.
 */var COORDINATION_TYPES={DATASET:'dataset',EMBEDDING_TYPE:'embeddingType',EMBEDDING_ZOOM:'embeddingZoom',EMBEDDING_ROTATION:'embeddingRotation',EMBEDDING_TARGET_X:'embeddingTargetX',EMBEDDING_TARGET_Y:'embeddingTargetY',EMBEDDING_TARGET_Z:'embeddingTargetZ',EMBEDDING_CELL_SET_POLYGONS_VISIBLE:'embeddingCellSetPolygonsVisible',EMBEDDING_CELL_SET_LABELS_VISIBLE:'embeddingCellSetLabelsVisible',EMBEDDING_CELL_SET_LABEL_SIZE:'embeddingCellSetLabelSize',EMBEDDING_CELL_RADIUS:'embeddingCellRadius',SPATIAL_ZOOM:'spatialZoom',SPATIAL_ROTATION:'spatialRotation',SPATIAL_TARGET_X:'spatialTargetX',SPATIAL_TARGET_Y:'spatialTargetY',SPATIAL_TARGET_Z:'spatialTargetZ',HEATMAP_ZOOM_X:'heatmapZoomX',HEATMAP_ZOOM_Y:'heatmapZoomY',HEATMAP_TARGET_X:'heatmapTargetX',HEATMAP_TARGET_Y:'heatmapTargetY',CELL_FILTER:'cellFilter',CELL_HIGHLIGHT:'cellHighlight',CELL_SET_SELECTION:'cellSetSelection',CELL_SET_HIGHLIGHT:'cellSetHighlight',CELL_SET_COLOR:'cellSetColor',GENE_FILTER:'geneFilter',GENE_HIGHLIGHT:'geneHighlight',GENE_SELECTION:'geneSelection',GENE_EXPRESSION_COLORMAP:'geneExpressionColormap',GENE_EXPRESSION_COLORMAP_RANGE:'geneExpressionColormapRange',CELL_COLOR_ENCODING:'cellColorEncoding',SPATIAL_LAYERS:'spatialLayers',GENOMIC_ZOOM_X:'genomicZoomX',GENOMIC_ZOOM_Y:'genomicZoomY',GENOMIC_TARGET_X:'genomicTargetX',GENOMIC_TARGET_Y:'genomicTargetY',ADDITIONAL_CELL_SETS:'additionalCellSets',MOLECULE_HIGHLIGHT:'moleculeHighlight'};/**
 * Coordination types may have default values,
 * which can be defined here, and used by the
 * auto initialization strategy.
 */var DEFAULT_COORDINATION_VALUES=(_DEFAULT_COORDINATION={},Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_ZOOM,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_ROTATION,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_TARGET_X,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_TARGET_Y,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_TARGET_Z,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,false),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,false),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,14),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,1),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.SPATIAL_ZOOM,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.SPATIAL_ROTATION,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.SPATIAL_TARGET_X,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.SPATIAL_TARGET_Y,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.SPATIAL_TARGET_Z,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.SPATIAL_LAYERS,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.HEATMAP_ZOOM_X,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.HEATMAP_ZOOM_Y,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.HEATMAP_TARGET_X,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.HEATMAP_TARGET_Y,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,'plasma'),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,[0.0,1.0]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENE_FILTER,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENE_HIGHLIGHT,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENE_SELECTION,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.CELL_FILTER,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.CELL_HIGHLIGHT,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.CELL_SET_SELECTION,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.CELL_SET_COLOR,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.CELL_COLOR_ENCODING,'cellSetSelection'),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENOMIC_ZOOM_X,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENOMIC_ZOOM_Y,0),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENOMIC_TARGET_X,1549999999.5),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.GENOMIC_TARGET_Y,1549999999.5),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.ADDITIONAL_CELL_SETS,null),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_DEFAULT_COORDINATION,COORDINATION_TYPES.MOLECULE_HIGHLIGHT,null),_DEFAULT_COORDINATION);// The following coordination types should be
// initialized to independent scopes when
// initialized automatically.
// These make the resulting view config
// (after auto-initialization) behave
// like "legacy" Vitessce (pre-coordination model).
var AUTO_INDEPENDENT_COORDINATION_TYPES=[COORDINATION_TYPES.SPATIAL_ZOOM,COORDINATION_TYPES.SPATIAL_TARGET_X,COORDINATION_TYPES.SPATIAL_TARGET_Y,COORDINATION_TYPES.SPATIAL_TARGET_Z,COORDINATION_TYPES.HEATMAP_ZOOM_X,COORDINATION_TYPES.HEATMAP_ZOOM_Y,COORDINATION_TYPES.HEATMAP_TARGET_X,COORDINATION_TYPES.HEATMAP_TARGET_Y,COORDINATION_TYPES.EMBEDDING_ZOOM,COORDINATION_TYPES.EMBEDDING_TARGET_X,COORDINATION_TYPES.EMBEDDING_TARGET_Y,COORDINATION_TYPES.EMBEDDING_TARGET_Z,COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,COORDINATION_TYPES.EMBEDDING_CELL_RADIUS];/**
   * Mapping from component type to
   * supported coordination object types.
   * This mapping can be used to determine
   * which pieces of state that a component will
   * need to get/set.
   * Keys here are the component registry keys.
   */var COMPONENT_COORDINATION_TYPES={scatterplot:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.EMBEDDING_TYPE,COORDINATION_TYPES.EMBEDDING_ZOOM,COORDINATION_TYPES.EMBEDDING_ROTATION,COORDINATION_TYPES.EMBEDDING_TARGET_X,COORDINATION_TYPES.EMBEDDING_TARGET_Y,COORDINATION_TYPES.EMBEDDING_TARGET_Z,COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,COORDINATION_TYPES.CELL_FILTER,COORDINATION_TYPES.CELL_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.GENE_SELECTION,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,COORDINATION_TYPES.CELL_COLOR_ENCODING,COORDINATION_TYPES.ADDITIONAL_CELL_SETS],spatial:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.SPATIAL_ZOOM,COORDINATION_TYPES.SPATIAL_ROTATION,COORDINATION_TYPES.SPATIAL_LAYERS,COORDINATION_TYPES.SPATIAL_TARGET_X,COORDINATION_TYPES.SPATIAL_TARGET_Y,COORDINATION_TYPES.SPATIAL_TARGET_Z,COORDINATION_TYPES.CELL_FILTER,COORDINATION_TYPES.CELL_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.GENE_SELECTION,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,COORDINATION_TYPES.CELL_COLOR_ENCODING,COORDINATION_TYPES.ADDITIONAL_CELL_SETS,COORDINATION_TYPES.MOLECULE_HIGHLIGHT],heatmap:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.HEATMAP_ZOOM_X,COORDINATION_TYPES.HEATMAP_ZOOM_Y,COORDINATION_TYPES.HEATMAP_TARGET_X,COORDINATION_TYPES.HEATMAP_TARGET_Y,COORDINATION_TYPES.CELL_FILTER,COORDINATION_TYPES.CELL_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.GENE_FILTER,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.GENE_SELECTION,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,COORDINATION_TYPES.CELL_COLOR_ENCODING,COORDINATION_TYPES.ADDITIONAL_CELL_SETS],cellSets:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.CELL_COLOR_ENCODING,COORDINATION_TYPES.ADDITIONAL_CELL_SETS],cellSetSizes:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.ADDITIONAL_CELL_SETS],cellSetExpression:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.GENE_SELECTION,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.ADDITIONAL_CELL_SETS],status:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.CELL_HIGHLIGHT,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.MOLECULE_HIGHLIGHT],genes:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.GENE_FILTER,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.GENE_SELECTION,COORDINATION_TYPES.CELL_COLOR_ENCODING],expressionHistogram:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.GENE_SELECTION],layerController:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.SPATIAL_LAYERS],higlass:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.GENOMIC_ZOOM_X,COORDINATION_TYPES.GENOMIC_ZOOM_Y,COORDINATION_TYPES.GENOMIC_TARGET_X,COORDINATION_TYPES.GENOMIC_TARGET_Y,COORDINATION_TYPES.GENE_FILTER,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.GENE_SELECTION],genomicProfiles:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.GENOMIC_ZOOM_X,COORDINATION_TYPES.GENOMIC_ZOOM_Y,COORDINATION_TYPES.GENOMIC_TARGET_X,COORDINATION_TYPES.GENOMIC_TARGET_Y,COORDINATION_TYPES.GENE_FILTER,COORDINATION_TYPES.GENE_HIGHLIGHT,COORDINATION_TYPES.GENE_SELECTION,COORDINATION_TYPES.CELL_SET_SELECTION,COORDINATION_TYPES.CELL_SET_HIGHLIGHT,COORDINATION_TYPES.CELL_SET_COLOR,COORDINATION_TYPES.ADDITIONAL_CELL_SETS],description:[COORDINATION_TYPES.DATASET,COORDINATION_TYPES.SPATIAL_LAYERS]};

/***/ }),
/* 26 */
/***/ (function(module, exports) {

module.exports = require("@deck.gl/core");

/***/ }),
/* 27 */
/***/ (function(module, exports) {

module.exports = require("@hms-dbmi/viv");

/***/ }),
/* 28 */
/***/ (function(module, exports) {

module.exports = require("mathjs");

/***/ }),
/* 29 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Grid");

/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _getPrototypeOf; });
function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export TOOLTIP_ANCESTOR */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return PRIMARY_CARD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return SECONDARY_CARD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BLACK_CARD; });
/* unused harmony export TITLE_CARD */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return SCROLL_CARD; });
var TOOLTIP_ANCESTOR='tooltip-ancestor';var CARD="card card-body my-2 ".concat(TOOLTIP_ANCESTOR);var PRIMARY_CARD="".concat(CARD," bg-primary");var SECONDARY_CARD="".concat(CARD," bg-secondary");var BLACK_CARD="".concat(CARD," bg-black");var TITLE_CARD='title';var SCROLL_CARD="".concat(PRIMARY_CARD," scroll");

/***/ }),
/* 32 */
/***/ (function(module, exports) {

module.exports = require("zustand");

/***/ }),
/* 33 */
/***/ (function(module, exports) {

module.exports = require("@luma.gl/constants");

/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _arrayLikeToArray; });
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "@material-ui/core/styles"
var styles_ = __webpack_require__(17);

// EXTERNAL MODULE: external "@material-ui/icons/CloudDownload"
var CloudDownload_ = __webpack_require__(62);
var CloudDownload_default = /*#__PURE__*/__webpack_require__.n(CloudDownload_);

// EXTERNAL MODULE: external "@material-ui/core/MenuItem"
var MenuItem_ = __webpack_require__(45);
var MenuItem_default = /*#__PURE__*/__webpack_require__.n(MenuItem_);

// EXTERNAL MODULE: external "@material-ui/core/IconButton"
var IconButton_ = __webpack_require__(41);
var IconButton_default = /*#__PURE__*/__webpack_require__.n(IconButton_);

// EXTERNAL MODULE: external "@material-ui/core/Link"
var Link_ = __webpack_require__(63);
var Link_default = /*#__PURE__*/__webpack_require__.n(Link_);

// EXTERNAL MODULE: external "@material-ui/icons/ArrowDropDown"
var ArrowDropDown_ = __webpack_require__(49);
var ArrowDropDown_default = /*#__PURE__*/__webpack_require__.n(ArrowDropDown_);

// EXTERNAL MODULE: external "@material-ui/icons/ArrowDropUp"
var ArrowDropUp_ = __webpack_require__(50);
var ArrowDropUp_default = /*#__PURE__*/__webpack_require__.n(ArrowDropUp_);

// EXTERNAL MODULE: external "@material-ui/icons/Settings"
var Settings_ = __webpack_require__(64);
var Settings_default = /*#__PURE__*/__webpack_require__.n(Settings_);

// EXTERNAL MODULE: external "@material-ui/icons/Close"
var Close_ = __webpack_require__(65);
var Close_default = /*#__PURE__*/__webpack_require__.n(Close_);

// EXTERNAL MODULE: ./src/components/classNames.js
var classNames = __webpack_require__(31);

// EXTERNAL MODULE: external "@material-ui/core/CircularProgress"
var CircularProgress_ = __webpack_require__(66);
var CircularProgress_default = /*#__PURE__*/__webpack_require__.n(CircularProgress_);

// CONCATENATED MODULE: ./src/components/LoadingIndicator.js
function LoadingIndicator(){return/*#__PURE__*/external_react_default.a.createElement("div",{className:"loading-indicator-backdrop"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"loading-indicator-container"},/*#__PURE__*/external_react_default.a.createElement(CircularProgress_default.a,null)));}
// EXTERNAL MODULE: ./src/components/shared-mui/components.js
var components = __webpack_require__(42);

// CONCATENATED MODULE: ./src/components/TitleInfo.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TitleInfo; });
var useStyles=Object(styles_["makeStyles"])(function(theme){return{iconButton:{border:'none',marginLeft:0,background:'none',color:theme.palette.primaryForeground,paddingLeft:'0.25em',paddingRight:'0.25em',borderRadius:'2px','&:hover':{backgroundColor:theme.palette.primaryBackgroundLight},'&:first-child':{marginLeft:'0.75em'},'&:last-child':{marginRight:'0.25em'},'& svg':{width:'0.7em',height:'0.7em',verticalAlign:'middle'}},downloadLink:{color:theme.palette.primaryForeground}};});function SettingsIconWithArrow(_ref){var open=_ref.open;return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement(Settings_default.a,null),open?/*#__PURE__*/external_react_default.a.createElement(ArrowDropUp_default.a,null):/*#__PURE__*/external_react_default.a.createElement(ArrowDropDown_default.a,null));}function PlotOptions(props){var options=props.options;var _useReducer=Object(external_react_["useReducer"])(function(v){return!v;},false),_useReducer2=Object(slicedToArray["a" /* default */])(_useReducer,2),open=_useReducer2[0],toggle=_useReducer2[1];var classes=useStyles();return/*#__PURE__*/external_react_default.a.createElement(components["b" /* PopperMenu */],{open:open,toggle:toggle,buttonIcon:/*#__PURE__*/external_react_default.a.createElement(SettingsIconWithArrow,{open:open}),buttonClassName:classes.iconButton,placement:"bottom-end"},options);}function CloudDownloadIconWithArrow(_ref2){var open=_ref2.open;return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement(CloudDownload_default.a,null),open?/*#__PURE__*/external_react_default.a.createElement(ArrowDropUp_default.a,null):/*#__PURE__*/external_react_default.a.createElement(ArrowDropDown_default.a,null));}function DownloadOptions(props){var urls=props.urls;var _useReducer3=Object(external_react_["useReducer"])(function(v){return!v;},false),_useReducer4=Object(slicedToArray["a" /* default */])(_useReducer3,2),open=_useReducer4[0],toggle=_useReducer4[1];var classes=useStyles();return/*#__PURE__*/external_react_default.a.createElement(components["b" /* PopperMenu */],{open:open,toggle:toggle,buttonIcon:/*#__PURE__*/external_react_default.a.createElement(CloudDownloadIconWithArrow,{open:open}),buttonClassName:classes.iconButton,placement:"bottom-end"},urls.map(function(_ref3){var url=_ref3.url,name=_ref3.name;return/*#__PURE__*/external_react_default.a.createElement(MenuItem_default.a,{dense:true,key:url},/*#__PURE__*/external_react_default.a.createElement(Link_default.a,{underline:"none",href:url,target:"_blank",rel:"noopener",className:classes.downloadLink},"Download ",name));}));}function ClosePaneButton(props){var removeGridComponent=props.removeGridComponent;var classes=useStyles();return/*#__PURE__*/external_react_default.a.createElement(IconButton_default.a,{onClick:removeGridComponent,size:"small",className:classes.iconButton,title:"close"},/*#__PURE__*/external_react_default.a.createElement(Close_default.a,null));}function TitleInfo(props){var title=props.title,info=props.info,children=props.children,isScroll=props.isScroll,isSpatial=props.isSpatial,removeGridComponent=props.removeGridComponent,urls=props.urls,isReady=props.isReady,options=props.options;// eslint-disable-next-line no-nested-ternary
var childClassName=isScroll?classNames["c" /* SCROLL_CARD */]:isSpatial?classNames["a" /* BLACK_CARD */]:classNames["d" /* SECONDARY_CARD */];return/*#__PURE__*/ (// d-flex without wrapping div is not always full height; I don't understand the root cause.
external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement("div",{className:"title d-flex justify-content-between align-items-baseline"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"justify-content-between d-flex align-items-end"},/*#__PURE__*/external_react_default.a.createElement("span",null,title)),/*#__PURE__*/external_react_default.a.createElement("span",{className:"details pl-2 align-items-end"},/*#__PURE__*/external_react_default.a.createElement("span",{className:"d-flex justify-content-between"},info,options&&/*#__PURE__*/external_react_default.a.createElement(PlotOptions,{options:options}),urls&&urls.length>0&&/*#__PURE__*/external_react_default.a.createElement(DownloadOptions,{urls:urls}),/*#__PURE__*/external_react_default.a.createElement(ClosePaneButton,{removeGridComponent:removeGridComponent})))),/*#__PURE__*/external_react_default.a.createElement("div",{className:childClassName},!isReady&&/*#__PURE__*/external_react_default.a.createElement(LoadingIndicator,null),children))// "pl-2" only matters when the window is very narrow.
);}

/***/ }),
/* 36 */
/***/ (function(module, exports) {

module.exports = require("@deck.gl/layers");

/***/ }),
/* 37 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return styles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return muiTheme; });
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39);
/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1__);
var styles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["makeStyles"])(function(){return{paper:{maxHeight:200,overflow:'auto',zIndex:1500},span:{width:'70px',textAlign:'center',paddingLeft:'2px',paddingRight:'2px'},popper:{zIndex:4}};});var muiTheme={dark:Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["createMuiTheme"])({palette:{type:'dark',primary:_material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1__["grey"],secondary:_material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1__["grey"],primaryBackground:'#222222',primaryBackgroundHighlight:'#000000',primaryBackgroundInput:'#D3D3D3',primaryBackgroundDim:'#333333',primaryBackgroundLight:'#757575',primaryForeground:'#D3D3D3',primaryForegroundDim:'#000000',primaryForegroundActive:'#9bb7d6',secondaryBackground:'#000000',secondaryBackgroundDim:'#444444',secondaryForeground:'#D3D3D3'},props:{MuiButtonBase:{disableRipple:true}}}),light:Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["createMuiTheme"])({palette:{type:'light',primary:_material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1__["grey"],secondary:_material_ui_core_colors__WEBPACK_IMPORTED_MODULE_1__["grey"],primaryBackground:'#F1F1F1',primaryBackgroundHighlight:'#FFFFFF',primaryBackgroundInput:'#FFFFFF',primaryBackgroundDim:'#8A8A8A',primaryBackgroundLight:'#e0e0e0',primaryForeground:'#333333',primaryForegroundDim:'#808080',primaryForegroundActive:'#0074D9',secondaryBackground:'#F1F1F1',secondaryBackgroundDim:'#C0C0C0',secondaryForeground:'#222222'},props:{MuiButtonBase:{disableRipple:true}}})};

/***/ }),
/* 38 */
/***/ (function(module, exports) {

module.exports = require("d3-array");

/***/ }),
/* 39 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/colors");

/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _assertThisInitialized; });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

/***/ }),
/* 41 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/IconButton");

/***/ }),
/* 42 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MuiSpan; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return PopperMenu; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56);
/* harmony import */ var _material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_Popper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67);
/* harmony import */ var _material_ui_core_Popper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Popper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(41);
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_MenuList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(68);
/* harmony import */ var _material_ui_core_MenuList__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_MenuList__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_ClickAwayListener__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69);
/* harmony import */ var _material_ui_core_ClickAwayListener__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_ClickAwayListener__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(37);
function MuiPopper(props){var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_6__[/* styles */ "b"])();var anchorEl=props.anchorEl,open=props.open,_props$placement=props.placement,placement=_props$placement===void 0?'bottom-start':_props$placement,children=props.children;return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Popper__WEBPACK_IMPORTED_MODULE_2___default.a,{className:classes.popper,open:open,anchorEl:anchorEl.current,placement:placement},children);}function MuiPaper(props){var children=props.children;var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_6__[/* styles */ "b"])();return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_1___default.a,{className:classes.paper,elevation:4},children);}function MuiSpan(props){var children=props.children;var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_6__[/* styles */ "b"])();return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{className:classes.span},children);}function PopperMenu(props){var buttonIcon=props.buttonIcon,open=props.open,toggle=props.toggle,children=props.children,placement=props.placement,buttonClassName=props.buttonClassName;var anchorRef=Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_6__[/* styles */ "b"])();return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default.a,{onClick:toggle,size:"small",ref:anchorRef,className:buttonClassName},buttonIcon),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MuiPopper,{className:classes.popper,open:open,anchorEl:anchorRef,placement:placement},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MuiPaper,null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_ClickAwayListener__WEBPACK_IMPORTED_MODULE_5___default.a,{onClickAway:toggle},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_MenuList__WEBPACK_IMPORTED_MODULE_4___default.a,null,children)))));}

/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _unsupportedIterableToArray; });
/* harmony import */ var _arrayLikeToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34);

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return Object(_arrayLikeToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(n);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return Object(_arrayLikeToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(o, minLen);
}

/***/ }),
/* 44 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return square; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return sortLayers; });
/* unused harmony export initializeChannelForSelection */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return initializeLayerChannels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return initializeLayerChannelsIfMissing; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return initializeRasterLayersAndChannels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return makeSpatialSubtitle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return getInitialSpatialTargets; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4);
/* harmony import */ var short_number__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(74);
/* harmony import */ var short_number__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(short_number__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(58);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(27);
/* harmony import */ var _hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(38);
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(d3_array__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var math_gl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(60);
/* harmony import */ var math_gl__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(math_gl__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var mathjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(28);
/* harmony import */ var mathjs__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(mathjs__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(15);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(8);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(18);
/* eslint-disable no-plusplus */function square(x,y,r){return[[x,y+r],[x+r,y],[x,y-r],[x-r,y]];}/**
 * Sort spatial layer definition array,
 * to keep the ordering in the layer controller
 * consistent.
 * Intended to be used with auto-initialized layer
 * definition arrays only, as a pre-defined layer array
 * should not be re-ordered.
 * @param {object[]} layers Array of layer definition objects.
 * Object must have a .type property.
 */function sortLayers(layers){return layers.sort(function(a,b){return _constants__WEBPACK_IMPORTED_MODULE_13__[/* DEFAULT_LAYER_TYPE_ORDERING */ "b"].indexOf(a.type)-_constants__WEBPACK_IMPORTED_MODULE_13__[/* DEFAULT_LAYER_TYPE_ORDERING */ "b"].indexOf(b.type);});}/**
 * Return the midpoint of the global dimensions.
 * @param {object[]} imageDims Loader dimensions object array.
 * @returns {object} The selection.
 */function getDefaultGlobalSelection(imageDims){var globalIndices=imageDims.filter(function(dim){return _constants__WEBPACK_IMPORTED_MODULE_13__[/* GLOBAL_SLIDER_DIMENSION_FIELDS */ "g"].includes(dim.field);});var selection={};globalIndices.forEach(function(dim){selection[dim.field]=Math.floor((dim.values.length||0)/2);});return selection;}/**
 * Create a default selection using the midpoint of the available global dimensions,
 * and then the first four available selections from the first selectable channel.
 * @param {object[]} imageDims Loader dimensions object array.
 * @returns {object} The selection.
 */function buildDefaultSelection(imageDims){var selection=[];var globalSelection=getDefaultGlobalSelection(imageDims);// First non-global dimension with some sort of selectable values
var firstNonGlobalDimension=imageDims.filter(function(dim){return!_constants__WEBPACK_IMPORTED_MODULE_13__[/* GLOBAL_SLIDER_DIMENSION_FIELDS */ "g"].includes(dim.field)&&dim.values;})[0];for(var i=0;i<Math.min(4,firstNonGlobalDimension.values.length);i+=1){selection.push(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])({},firstNonGlobalDimension.field,i),globalSelection));}return selection;}/**
 * Initialize the channel settings for an individual channel and selection.
 * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.
 * @param {object} selection The channel selection object.
 * @param {number} i The index of this channel for the layer.
 * @returns {object} The initialized channel with
 * domain/slider settings.
 */function initializeChannelForSelection(_x,_x2,_x3){return _initializeChannelForSelection.apply(this,arguments);}/**
 * Initialize the channel selections for an individual layer.
 * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.
 * @returns {object[]} An array of selected channels with default
 * domain/slider settings.
 */function _initializeChannelForSelection(){_initializeChannelForSelection=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(/*#__PURE__*/_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(loader,selection,i){var stats,domain,color,slider;return _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_7__["getChannelStats"])({loader:loader,loaderSelection:[selection]});case 2:stats=_context.sent;domain=loader.isRgb?[[0,255],[0,255],[0,255]][i]:stats[0].domain;color=loader.isRgb?[[255,0,0],[0,255,0],[0,0,255]][i]:_utils__WEBPACK_IMPORTED_MODULE_12__[/* VIEWER_PALETTE */ "e"][i];slider=loader.isRgb?[[0,255],[0,255],[0,255]][i]:stats[0].autoSliders;return _context.abrupt("return",{selection:selection,color:color,visible:true,slider:slider||domain});case 7:case"end":return _context.stop();}}},_callee);}));return _initializeChannelForSelection.apply(this,arguments);}function initializeLayerChannels(_x4){return _initializeLayerChannels.apply(this,arguments);}/**
 * A user may want to use pre-defined channels of interest
 * (defined in a `spatialLayers` coordination object),
 * but wants to allow Vitessce to auto-initialize the
 * sliders, colors, and/or domains for those channels.
 * This function allows those channel properties to
 * be initialized.
 * @param {object[]} layerDefsOrig The original array
 * of user-defined layer definitions, which must contain
 * an array of channel definitions with the .selection
 * property, but may be missing the .domain, .color, .visible,
 * or .slider properties.
 * @param {object} loaders Mapping from layer index to loader
 * instance.
 * @returns {Promise<array>} A tuple of [newLayerDefs, didInitialize],
 * where newLayerDefs is an array of the layers which contains
 * initialized channel properties,
 * and didInitialize is a boolean value indicating whether any
 * channels were initialized.
 */function _initializeLayerChannels(){_initializeLayerChannels=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(/*#__PURE__*/_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(loader){var result,loaderDimensions,defaultSelection,stats,domains,colors,sliders;return _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:result=[];loaderDimensions=loader.dimensions;// Add channel automatically as the first avaialable value for each dimension.
defaultSelection=buildDefaultSelection(loaderDimensions);// Get stats because initial value is Min/Max for domainType.
_context2.next=5;return Object(_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_7__["getChannelStats"])({loader:loader,loaderSelection:defaultSelection});case 5:stats=_context2.sent;domains=loader.isRgb?[[0,255],[0,255],[0,255]]:stats.map(function(stat){return stat.domain;});colors=loader.isRgb?[[255,0,0],[0,255,0],[0,0,255]]:null;sliders=loader.isRgb?[[0,255],[0,255],[0,255]]:stats.map(function(stat){return stat.autoSliders;});defaultSelection.forEach(function(selection,i){var domain=domains[i];var slider=sliders[i];var channel={selection:selection,color:colors?colors[i]:_utils__WEBPACK_IMPORTED_MODULE_12__[/* VIEWER_PALETTE */ "e"][i],visible:true,slider:slider||domain};result.push(channel);});return _context2.abrupt("return",result);case 11:case"end":return _context2.stop();}}},_callee2);}));return _initializeLayerChannels.apply(this,arguments);}function initializeLayerChannelsIfMissing(_x5,_x6){return _initializeLayerChannelsIfMissing.apply(this,arguments);}function _initializeLayerChannelsIfMissing(){_initializeLayerChannelsIfMissing=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(/*#__PURE__*/_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(layerDefsOrig,loaders){var layerDefs,newLayerDefPromises,didInitialize,_loop,layerIndex,newLayerDefs;return _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:layerDefs=Object(lodash__WEBPACK_IMPORTED_MODULE_6__["cloneDeep"])(layerDefsOrig);newLayerDefPromises=[];didInitialize=false;_loop=function _loop(layerIndex){var layerDef=layerDefs[layerIndex];var loader=loaders[layerDef.index];var newLayerDefPromise=Promise.resolve(layerDef);if(layerDef.channels){var newChannelDefPromises=[];var _loop2=function _loop2(channelIndex){var channelDef=layerDef.channels[channelIndex];var newChannelDefPromise=Promise.resolve(channelDef);// Only auto-initialize if domains, colors, or sliders is missing.
if(channelDef.selection&&!(channelDef.color&&channelDef.slider)){newChannelDefPromise=initializeChannelForSelection(loader,channelDef.selection,channelIndex).then(function(autoChannelDef){return Promise.resolve(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({},autoChannelDef,{},channelDef));});didInitialize=true;}newChannelDefPromises.push(newChannelDefPromise);};for(var channelIndex=0;channelIndex<layerDef.channels.length;channelIndex++){_loop2(channelIndex);}newLayerDefPromise=Promise.all(newChannelDefPromises).then(function(newChannelDefs){return Promise.resolve(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({},layerDef,{channels:newChannelDefs}));});}newLayerDefPromises.push(newLayerDefPromise);};for(layerIndex=0;layerIndex<layerDefs.length;layerIndex++){_loop(layerIndex);}_context3.next=7;return Promise.all(newLayerDefPromises);case 7:newLayerDefs=_context3.sent;return _context3.abrupt("return",[newLayerDefs,didInitialize]);case 9:case"end":return _context3.stop();}}},_callee3);}));return _initializeLayerChannelsIfMissing.apply(this,arguments);}function getMetaWithTransformMatrices(imageMeta,imageLoaders){// Do not fill in transformation matrices if any of the layers specify one.
if(imageMeta.map(function(meta){var _meta$metadata,_meta$metadata$transf,_meta$metadata2,_meta$metadata2$trans,_meta$metadata3,_meta$metadata3$trans;return(meta===null||meta===void 0?void 0:(_meta$metadata=meta.metadata)===null||_meta$metadata===void 0?void 0:(_meta$metadata$transf=_meta$metadata.transform)===null||_meta$metadata$transf===void 0?void 0:_meta$metadata$transf.matrix)||(meta===null||meta===void 0?void 0:(_meta$metadata2=meta.metadata)===null||_meta$metadata2===void 0?void 0:(_meta$metadata2$trans=_meta$metadata2.transform)===null||_meta$metadata2$trans===void 0?void 0:_meta$metadata2$trans.scale)||(meta===null||meta===void 0?void 0:(_meta$metadata3=meta.metadata)===null||_meta$metadata3===void 0?void 0:(_meta$metadata3$trans=_meta$metadata3.transform)===null||_meta$metadata3$trans===void 0?void 0:_meta$metadata3$trans.translate);}).some(Boolean)||imageLoaders.every(function(loader){var _loader$physicalSizes,_loader$physicalSizes2;return!(loader===null||loader===void 0?void 0:(_loader$physicalSizes=loader.physicalSizes)===null||_loader$physicalSizes===void 0?void 0:_loader$physicalSizes.x)||!(loader===null||loader===void 0?void 0:(_loader$physicalSizes2=loader.physicalSizes)===null||_loader$physicalSizes2===void 0?void 0:_loader$physicalSizes2.y);})){return imageMeta;}// Get the minimum physical among all the current images.
var minPhysicalSize=imageLoaders.reduce(function(acc,loader){var sizes=[Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["unit"])("".concat(loader.physicalSizes.x.value," ").concat(loader.physicalSizes.x.unit).replace('µ','u')),Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["unit"])("".concat(loader.physicalSizes.y.value," ").concat(loader.physicalSizes.y.unit).replace('µ','u'))];acc[0]=acc[0]===undefined||Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["compare"])(sizes[0],acc[0])===-1?sizes[0]:acc[0];acc[1]=acc[1]===undefined||Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["compare"])(sizes[1],acc[1])===-1?sizes[1]:acc[1];return acc;},[]);var imageMetaWithTransform=imageMeta.map(function(meta,j){var loader=imageLoaders[j];var sizes=[Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["unit"])("".concat(loader.physicalSizes.x.value," ").concat(loader.physicalSizes.x.unit).replace('µ','u')),Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["unit"])("".concat(loader.physicalSizes.y.value," ").concat(loader.physicalSizes.y.unit).replace('µ','u'))];// Find the ratio of the sizes to get the scaling factor.
var scale=sizes.map(function(i,k){return Object(mathjs__WEBPACK_IMPORTED_MODULE_10__["divide"])(i,minPhysicalSize[k]);});// no need to store/use identity scaling
if(Object(lodash__WEBPACK_IMPORTED_MODULE_6__["isEqual"])(scale,[1,1])){return meta;}// Make sure to scale the z direction by one.
var matrix=new math_gl__WEBPACK_IMPORTED_MODULE_9__["Matrix4"]().scale([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(scale),[1]));var newMeta=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({},meta);newMeta.metadata=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({},newMeta.metadata,{// We don't want to store matrix objects in the view config.
transform:{matrix:matrix.toArray()}});return newMeta;});return imageMetaWithTransform;}/**
 * Given a set of image layer loader creator functions,
 * create loader objects for an initial layer or set of layers,
 * which will be selected based on default values predefined in
 * the image data file or otherwise by a heuristic
 * (the midpoint of the layers array).
 * @param {object[]} rasterLayers A list of layer metadata objects with
 * shape { name, type, url, createLoader }.
 * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.
 */function initializeRasterLayersAndChannels(_x7,_x8,_x9){return _initializeRasterLayersAndChannels.apply(this,arguments);}/**
 * Make a subtitle for the spatial component.
 * @param {object} params
 * @param {number} params.observationsCount
 * @param {string} params.observationsLabel
 * @param {string} params.observationsPluralLabel
 * @param {number} params.subobservationsCount
 * @param {string} params.subobservationsLabel
 * @param {string} params.subobservationsPluralLabel
 * @param {number} params.locationsCount
 * @returns {string} The subtitle string,
 * with info about items with zero counts omitted.
 */function _initializeRasterLayersAndChannels(){_initializeRasterLayersAndChannels=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(/*#__PURE__*/_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(rasterLayers,rasterRenderLayers,usePhysicalSizeScaling){var nextImageLoaders,nextImageMeta,autoImageLayerDefPromises,loaders,i,layer,loader,layerIndex,_loader,autoImageLayerDefPromise,globalIndicesOfRenderLayers,_loop3,_i,autoImageLayerDefs;return _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:nextImageLoaders=[];nextImageMeta=[];autoImageLayerDefPromises=[];// Start all loader creators immediately.
// Reference: https://eslint.org/docs/rules/no-await-in-loop
_context4.next=5;return Promise.all(rasterLayers.map(function(layer){return layer.loaderCreator();}));case 5:loaders=_context4.sent;for(i=0;i<rasterLayers.length;i++){layer=rasterLayers[i];loader=loaders[i];nextImageLoaders[i]=loader;nextImageMeta[i]=layer;}if(usePhysicalSizeScaling){nextImageMeta=getMetaWithTransformMatrices(nextImageMeta,nextImageLoaders);}// No layers were pre-defined so set up the default image layers.
if(!rasterRenderLayers){// Midpoint of images list as default image to show.
layerIndex=Math.floor(rasterLayers.length/2);_loader=nextImageLoaders[layerIndex];autoImageLayerDefPromise=initializeLayerChannels(_loader).then(function(channels){var _nextImageMeta$layerI,_nextImageMeta$layerI2,_nextImageMeta$layerI3;return Promise.resolve(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({type:'raster',index:layerIndex},_constants__WEBPACK_IMPORTED_MODULE_13__[/* DEFAULT_RASTER_LAYER_PROPS */ "f"],{channels:channels,modelMatrix:(_nextImageMeta$layerI=nextImageMeta[layerIndex])===null||_nextImageMeta$layerI===void 0?void 0:(_nextImageMeta$layerI2=_nextImageMeta$layerI.metadata)===null||_nextImageMeta$layerI2===void 0?void 0:(_nextImageMeta$layerI3=_nextImageMeta$layerI2.transform)===null||_nextImageMeta$layerI3===void 0?void 0:_nextImageMeta$layerI3.matrix,transparentColor:layerIndex>0?[0,0,0]:null}));});autoImageLayerDefPromises.push(autoImageLayerDefPromise);}else{// The renderLayers parameter is a list of layer names to show by default.
globalIndicesOfRenderLayers=rasterRenderLayers.map(function(imageName){return rasterLayers.findIndex(function(image){return image.name===imageName;});});_loop3=function _loop3(_i){var layerIndex=globalIndicesOfRenderLayers[_i];var loader=nextImageLoaders[layerIndex];var autoImageLayerDefPromise=initializeLayerChannels(loader)// eslint-disable-next-line no-loop-func
.then(function(channels){var _nextImageMeta$layerI4,_nextImageMeta$layerI5,_nextImageMeta$layerI6;return Promise.resolve(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({type:'raster',index:layerIndex},_constants__WEBPACK_IMPORTED_MODULE_13__[/* DEFAULT_RASTER_LAYER_PROPS */ "f"],{channels:channels,domainType:'Min/Max',modelMatrix:(_nextImageMeta$layerI4=nextImageMeta[layerIndex])===null||_nextImageMeta$layerI4===void 0?void 0:(_nextImageMeta$layerI5=_nextImageMeta$layerI4.metadata)===null||_nextImageMeta$layerI5===void 0?void 0:(_nextImageMeta$layerI6=_nextImageMeta$layerI5.transform)===null||_nextImageMeta$layerI6===void 0?void 0:_nextImageMeta$layerI6.matrix,transparentColor:_i>0?[0,0,0]:null}));});autoImageLayerDefPromises.push(autoImageLayerDefPromise);};for(_i=0;_i<globalIndicesOfRenderLayers.length;_i++){_loop3(_i);}}_context4.next=11;return Promise.all(autoImageLayerDefPromises);case 11:autoImageLayerDefs=_context4.sent;return _context4.abrupt("return",[autoImageLayerDefs,nextImageLoaders,nextImageMeta]);case 13:case"end":return _context4.stop();}}},_callee4);}));return _initializeRasterLayersAndChannels.apply(this,arguments);}function makeSpatialSubtitle(_ref){var observationsCount=_ref.observationsCount,observationsLabel=_ref.observationsLabel,observationsPluralLabel=_ref.observationsPluralLabel,subobservationsCount=_ref.subobservationsCount,subobservationsLabel=_ref.subobservationsLabel,subobservationsPluralLabel=_ref.subobservationsPluralLabel,locationsCount=_ref.locationsCount;var parts=[];if(subobservationsCount>0){var part="".concat(subobservationsCount," ").concat(Object(_utils__WEBPACK_IMPORTED_MODULE_11__[/* pluralize */ "d"])(subobservationsLabel,subobservationsPluralLabel,subobservationsCount));if(locationsCount>0){part+=" at ".concat(short_number__WEBPACK_IMPORTED_MODULE_5___default()(locationsCount)," locations");}parts.push(part);}if(observationsCount>0){parts.push("".concat(observationsCount," ").concat(Object(_utils__WEBPACK_IMPORTED_MODULE_11__[/* pluralize */ "d"])(observationsLabel,observationsPluralLabel,observationsCount)));}return parts.join(', ');}function getInitialSpatialTargets(_ref2){var width=_ref2.width,height=_ref2.height,cells=_ref2.cells,imageLayerLoaders=_ref2.imageLayerLoaders;var initialTargetX=-Infinity;var initialTargetY=-Infinity;var initialZoom=-Infinity;// Some backoff from completely filling the screen.
var zoomBackoff=0.1;var cellValues=Object.values(cells);if(imageLayerLoaders.length>0){for(var i=0;i<imageLayerLoaders.length;i+=1){var viewSize={height:height,width:width};var _getDefaultInitialVie=Object(_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_7__["getDefaultInitialViewState"])(imageLayerLoaders[i],viewSize,zoomBackoff),target=_getDefaultInitialVie.target,newViewStateZoom=_getDefaultInitialVie.zoom;if(target[0]>initialTargetX){// eslint-disable-next-line prefer-destructuring
initialTargetX=target[0];initialZoom=newViewStateZoom;}if(target[1]>initialTargetY){// eslint-disable-next-line prefer-destructuring
initialTargetY=target[1];initialZoom=newViewStateZoom;}}}else if(cellValues.length>0){var cellCoordinates=cellValues.map(function(c){return c.xy;});var xExtent=Object(d3_array__WEBPACK_IMPORTED_MODULE_8__["extent"])(cellCoordinates,function(c){return c[0];});var yExtent=Object(d3_array__WEBPACK_IMPORTED_MODULE_8__["extent"])(cellCoordinates,function(c){return c[1];});var xRange=xExtent[1]-xExtent[0];var yRange=yExtent[1]-yExtent[0];initialTargetX=xExtent[0]+xRange/2;initialTargetY=yExtent[0]+yRange/2;initialZoom=Math.log2(Math.min(width/xRange,height/yRange))-zoomBackoff;}return{initialTargetX:initialTargetX,initialTargetY:initialTargetY,initialZoom:initialZoom};}

/***/ }),
/* 45 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/MenuItem");

/***/ }),
/* 46 */
/***/ (function(module, exports) {

module.exports = require("lodash/clamp");

/***/ }),
/* 47 */
/***/ (function(module, exports) {

module.exports = require("lodash/range");

/***/ }),
/* 48 */
/***/ (function(module, exports) {

module.exports = require("nebula.gl");

/***/ }),
/* 49 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ArrowDropDown");

/***/ }),
/* 50 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ArrowDropUp");

/***/ }),
/* 51 */
/***/ (function(module, exports) {

module.exports = require("lodash/debounce");

/***/ }),
/* 52 */
/***/ (function(module, exports) {

module.exports = require("@turf/helpers");

/***/ }),
/* 53 */
/***/ (function(module, exports) {

module.exports = require("uuid/v4");

/***/ }),
/* 54 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/TableCell");

/***/ }),
/* 55 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#cell-sets\",\"title\":\"Vitessce cell sets data\",\"type\":\"object\",\"definitions\":{\"stringArray\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"stringProbabilityTupleArray\":{\"type\":\"array\",\"items\":{\"type\":\"array\",\"additionalItems\":false,\"items\":[{\"type\":\"string\"},{\"oneOf\":[{\"type\":\"number\",\"minimum\":0,\"maximum\":1},{\"type\":\"null\"}]}]}},\"colorArray\":{\"type\":\"array\",\"items\":{\"type\":\"integer\",\"minimum\":0,\"maximum\":255},\"minItems\":3,\"maxItems\":3},\"treeNodeLeaf\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"name\"],\"properties\":{\"name\":{\"type\":\"string\"},\"color\":{\"$ref\":\"#/definitions/colorArray\"},\"set\":{\"$ref\":\"#/definitions/stringArray\"}}},\"treeNodeNonLeaf\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"name\"],\"properties\":{\"name\":{\"type\":\"string\"},\"color\":{\"$ref\":\"#/definitions/colorArray\"},\"children\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/treeNode\"}}}},\"treeNode\":{\"oneOf\":[{\"$ref\":\"#/definitions/treeNodeNonLeaf\"},{\"$ref\":\"#/definitions/treeNodeLeaf\"}]},\"version0.1.2\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"version\",\"datatype\",\"tree\"],\"properties\":{\"dataset\":{\"type\":\"string\"},\"version\":{\"type\":\"string\",\"enum\":[\"0.1.2\"]},\"datatype\":{\"type\":\"string\",\"enum\":[\"cell\"]},\"tree\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/treeNodeNonLeaf\"}}}},\"treeNodeLeafProbabilistic\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"name\"],\"properties\":{\"name\":{\"type\":\"string\"},\"color\":{\"$ref\":\"#/definitions/colorArray\"},\"set\":{\"$ref\":\"#/definitions/stringProbabilityTupleArray\"}}},\"treeNodeNonLeafProbabilistic\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"name\"],\"properties\":{\"name\":{\"type\":\"string\"},\"color\":{\"$ref\":\"#/definitions/colorArray\"},\"children\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/treeNodeProbabilistic\"}}}},\"treeNodeProbabilistic\":{\"oneOf\":[{\"$ref\":\"#/definitions/treeNodeNonLeafProbabilistic\"},{\"$ref\":\"#/definitions/treeNodeLeafProbabilistic\"}]},\"version0.1.3\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"version\",\"datatype\",\"tree\"],\"properties\":{\"dataset\":{\"type\":\"string\"},\"version\":{\"type\":\"string\",\"enum\":[\"0.1.3\"]},\"datatype\":{\"type\":\"string\",\"enum\":[\"cell\"]},\"tree\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/treeNodeNonLeafProbabilistic\"}}}}},\"oneOf\":[{\"$ref\":\"#/definitions/version0.1.2\"},{\"$ref\":\"#/definitions/version0.1.3\"}]}");

/***/ }),
/* 56 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Paper");

/***/ }),
/* 57 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(30);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = Object(getPrototypeOf["a" /* default */])(object);
    if (object === null) break;
  }

  return object;
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return get_get; });

function get_get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    get_get = Reflect.get;
  } else {
    get_get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return get_get(target, property, receiver || target);
}

/***/ }),
/* 58 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 59 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Slider");

/***/ }),
/* 60 */
/***/ (function(module, exports) {

module.exports = require("math.gl");

/***/ }),
/* 61 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return tryUpgradeTreeToLatestSchema; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return handleImportJSON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return handleImportTabular; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return handleExportJSON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return handleExportTabular; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return downloadForUser; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4);
/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90);
/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var d3_dsv__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(140);
/* harmony import */ var d3_dsv__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(d3_dsv__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var json2csv__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(141);
/* harmony import */ var json2csv__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(json2csv__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16);
/* harmony import */ var _cell_set_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(19);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(14);
/**
 * Check if an imported tree has an old schema version that we know how to
 * "upgrade" to the latest schema version.  Validate against the schema.
 * @param {object} currTree A hierarchical tree object with a .version property,
 * which has already passed schema validation, but may not have the latest schema version.
 * @param {string} datatype The data type of the items in the schema.
 */function tryUpgradeTreeToLatestSchema(currTree,datatype){var validate=new ajv__WEBPACK_IMPORTED_MODULE_2___default.a().compile(_constants__WEBPACK_IMPORTED_MODULE_9__[/* HIERARCHICAL_SCHEMAS */ "c"][datatype].schema);var valid=validate(currTree);if(!valid){var failureReason=JSON.stringify(validate.errors,null,2);throw new Error("Tree validation failed: ".concat(failureReason));}else if(currTree.datatype!==datatype){throw new Error("The data type does not match the expected data type of '".concat(datatype,"'."));}if(currTree.version==='0.1.2'){// To upgrade from cell-sets schema 0.1.2 to 0.1.3,
// add a confidence value of null for each cell ID.
return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},currTree,{version:_constants__WEBPACK_IMPORTED_MODULE_9__[/* HIERARCHICAL_SCHEMAS */ "c"][datatype].latestVersion,tree:currTree.tree.map(function(levelZeroNode){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_7__[/* nodeTransform */ "i"])(levelZeroNode,function(n){return!n.children&&Array.isArray(n.set);},function(n){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},n,{set:n.set.map(function(itemId){return[itemId,null];})});},[]);})});}return currTree;}/**
 * Handler for JSON imports. Validates and upgrades against the hierarchical sets schema.
 * @param {string} result The data passed from the FileReader as a string.
 * @param {string} datatype The data type to validate against.
 * @returns {object} The imported tree object.
 * @throws {Error} Throws error if validation fails or if the datatype does not match.
 */function handleImportJSON(result,datatype){var importData=JSON.parse(result);// Validate the imported file.
importData=tryUpgradeTreeToLatestSchema(importData,datatype);return importData;}/**
 * Handler for tabular imports. Validates against the tabular sets schema.
 * @param {string} result The data passed from the FileReader as a string.
 * @param {string} datatype The data type to validate against.
 * @returns {object} The imported tree object.
 * @throws {Error} Throws error if validation fails or if the datatype does not match.
 */function handleImportTabular(result,datatype){var dsvParser=Object(d3_dsv__WEBPACK_IMPORTED_MODULE_4__["dsvFormat"])(_constants__WEBPACK_IMPORTED_MODULE_9__[/* SEPARATOR_TABULAR */ "g"]);var importData=dsvParser.parse(result,function(row){return{groupName:row.groupName,setName:row.setName,setColor:row.setColor?Object(_utils__WEBPACK_IMPORTED_MODULE_6__[/* colorStringToArray */ "d"])(row.setColor):_utils__WEBPACK_IMPORTED_MODULE_8__[/* DEFAULT_COLOR */ "b"],obsId:row.obsId,predictionScore:lodash_isNil__WEBPACK_IMPORTED_MODULE_3___default()(row.predictionScore)||row.predictionScore===_constants__WEBPACK_IMPORTED_MODULE_9__[/* NA_VALUE_TABULAR */ "f"]?null:+row.predictionScore};});// Validate the imported file.
var validate=new ajv__WEBPACK_IMPORTED_MODULE_2___default.a().compile(_constants__WEBPACK_IMPORTED_MODULE_9__[/* TABULAR_SCHEMAS */ "i"][datatype].schema);var valid=validate(importData);if(!valid){var failureReason=JSON.stringify(validate.errors,null,2);throw new Error("Import validation failed: ".concat(failureReason));}else{// Convert the validated array to a tree representation.
var treeToImport={version:_constants__WEBPACK_IMPORTED_MODULE_9__[/* HIERARCHICAL_SCHEMAS */ "c"][datatype].latestVersion,datatype:datatype,tree:[]};var uniqueGroupNames=Array.from(new Set(importData.map(function(d){return d.groupName;})));uniqueGroupNames.forEach(function(groupName){var levelZeroNode={name:groupName,children:[]};var groupRows=importData.filter(function(d){return d.groupName===groupName;});var uniqueSetNames=Array.from(new Set(groupRows.map(function(d){return d.setName;})));uniqueSetNames.forEach(function(setName){var setRows=groupRows.filter(function(d){return d.setName===setName;});var setColor=setRows[0].setColor;var levelOneNode={name:setName,color:setColor,set:setRows.map(function(d){return[d.obsId,d.predictionScore];})};levelZeroNode.children.push(levelOneNode);});treeToImport.tree.push(levelZeroNode);});return treeToImport;}}/**
 * Convert a tree object to a JSON representation.
 * @param {object} result The object to export.
 * @returns {string} The data in a string representation.
 */function handleExportJSON(result){var jsonString=JSON.stringify(result);var dataString="data:".concat(_constants__WEBPACK_IMPORTED_MODULE_9__[/* MIME_TYPE_JSON */ "d"],";charset=utf-8,").concat(encodeURIComponent(jsonString));return dataString;}/**
 * Convert a tree object with one level (height === 1) to a tabular representation.
 * @param {object} result The object to export.
 * @returns {string} The data in a string representation.
 */function handleExportTabular(result){// Convert a tree object to an array of JSON objects.
var exportData=[];result.tree.forEach(function(levelZeroNode){levelZeroNode.children.forEach(function(levelOneNode){if(levelOneNode.set){levelOneNode.set.forEach(function(_ref){var _ref2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref,2),obsId=_ref2[0],prob=_ref2[1];exportData.push({groupName:levelZeroNode.name,setName:levelOneNode.name,setColor:Object(_utils__WEBPACK_IMPORTED_MODULE_6__[/* colorArrayToString */ "c"])(levelOneNode.color),obsId:obsId,predictionScore:lodash_isNil__WEBPACK_IMPORTED_MODULE_3___default()(prob)?_constants__WEBPACK_IMPORTED_MODULE_9__[/* NA_VALUE_TABULAR */ "f"]:prob});});}});});var csvString=Object(json2csv__WEBPACK_IMPORTED_MODULE_5__["parse"])(exportData,{fields:['groupName','setName','setColor','obsId','predictionScore'],delimiter:_constants__WEBPACK_IMPORTED_MODULE_9__[/* SEPARATOR_TABULAR */ "g"]});var dataString="data:".concat(_constants__WEBPACK_IMPORTED_MODULE_9__[/* MIME_TYPE_TABULAR */ "e"],";charset=utf-8,").concat(encodeURIComponent(csvString));return dataString;}/**
 * Download a file. Appends and removes an anchor node in the DOM.
 * @param {string} dataString The function that converts the data to a string.
 * @param {string} fileName The name of the file to be downloaded.
 */function downloadForUser(dataString,fileName){var downloadAnchorNode=document.createElement('a');downloadAnchorNode.setAttribute('href',dataString);downloadAnchorNode.setAttribute('download',fileName);document.body.appendChild(downloadAnchorNode);// required for firefox
downloadAnchorNode.click();downloadAnchorNode.remove();}

/***/ }),
/* 62 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/CloudDownload");

/***/ }),
/* 63 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Link");

/***/ }),
/* 64 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Settings");

/***/ }),
/* 65 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Close");

/***/ }),
/* 66 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/CircularProgress");

/***/ }),
/* 67 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Popper");

/***/ }),
/* 68 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/MenuList");

/***/ }),
/* 69 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/ClickAwayListener");

/***/ }),
/* 70 */
/***/ (function(module, exports) {

module.exports = require("zustand/shallow");

/***/ }),
/* 71 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _setPrototypeOf; });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

/***/ }),
/* 72 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _isNativeReflectConstruct; });
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

/***/ }),
/* 73 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#cell-sets-tabular\",\"title\":\"Vitessce cell sets data, tabular format\",\"definitions\":{\"colorArray\":{\"type\":\"array\",\"items\":{\"type\":\"integer\",\"minimum\":0,\"maximum\":255},\"minItems\":3,\"maxItems\":3}},\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"groupName\",\"setName\",\"obsId\"],\"properties\":{\"groupName\":{\"type\":\"string\"},\"setName\":{\"type\":\"string\"},\"setColor\":{\"$ref\":\"#/definitions/colorArray\"},\"obsId\":{\"type\":\"string\"},\"predictionScore\":{\"oneOf\":[{\"type\":\"number\",\"minimum\":0,\"maximum\":1},{\"type\":\"null\"}]}}}}");

/***/ }),
/* 74 */
/***/ (function(module, exports) {

module.exports = require("short-number");

/***/ }),
/* 75 */
/***/ (function(module, exports) {

module.exports = require("lodash/isNil");

/***/ }),
/* 76 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Checkbox");

/***/ }),
/* 77 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Select");

/***/ }),
/* 78 */
/***/ (function(module, exports) {

module.exports = require("tinycolor2");

/***/ }),
/* 79 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Tooltip2D; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Tooltip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(83);
/**
 * A tooltip component that also incorporates a crosshair element.
 * @param {object} props
 * @param {string} props.parentUuid A unique identifier corresponding to the plot
 * with which this scatterplot is associated.
 * @param {string} props.sourceUuid A unique identifier corresponding to the plot
 * from which this tooltip originated.
 * @param {number} props.x The x coordinate for the tooltip.
 * @param {number} props.y The y coordinate for the tooltip.
 * @param {number} props.parentWidth The width of the parent plot container element.
 * @param {number} props.parentHeight The height of the parent plot container element.
 * @param {React.Component} props.children The tooltip contents as a react component.
 */function Tooltip2D(props){var parentUuid=props.parentUuid,sourceUuid=props.sourceUuid,x=props.x,y=props.y,parentWidth=props.parentWidth,parentHeight=props.parentHeight,children=props.children;// Check if out of bounds.
if(x<0||x>parentWidth||y<0||y>parentHeight){return null;}// Show tooltip or crosshair?
var isTooltipVisible=parentUuid===sourceUuid;var crosshairWidth=1;return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,isTooltipVisible?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Tooltip__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"],{x:x,y:y,parentWidth:parentWidth,parentHeight:parentHeight},children):/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,x!==null?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"cell-emphasis-crosshair",style:{left:"".concat(x-crosshairWidth/2,"px"),top:0,width:"".concat(crosshairWidth,"px"),height:"".concat(parentHeight,"px")}}):null,y!==null?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"cell-emphasis-crosshair",style:{left:0,top:"".concat(y-crosshairWidth/2,"px"),width:"".concat(parentWidth,"px"),height:"".concat(crosshairWidth,"px")}}):null));}

/***/ }),
/* 80 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TooltipContent; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
function TooltipContent(props){var info=props.info;return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("table",null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tbody",null,Object.entries(info).map(function(_ref){var _ref2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref,2),key=_ref2[0],value=_ref2[1];return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr",{key:key},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th",null,key),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td",null,value));})));}

/***/ }),
/* 81 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return useStyles; });
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__);
var useStyles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["makeStyles"])(function(theme){return{box:{boxSizing:'border-box'},checkbox:{padding:'3px',color:theme.palette.primaryForeground,'&:checked':{color:theme.palette.primaryForeground},'& input':{height:'100%'}},slider:{color:theme.palette.primaryForeground,minWidth:'60px',padding:'10px 0 6px 0'},sliderValueLabel:{'& span':{'& span':{color:theme.palette.primaryBackground}}},tableContainer:{overflow:'hidden'},labelCell:{padding:'2px 8px 2px 16px'},inputCell:{padding:'2px 16px 2px 8px',overflow:'visible'},select:{'& select':{fontSize:'.875rem'}}};});

/***/ }),
/* 82 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/TableRow");

/***/ }),
/* 83 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Tooltip; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
function Tooltip(props){var x=props.x,y=props.y,parentWidth=props.parentWidth,parentHeight=props.parentHeight,children=props.children;var ref=Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);var isNarrow=parentWidth<500;// Do collision detection based on the bounds of the tooltip ancestor element.
Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function(){var el=ref.current;var offsetPercentage=isNarrow?-5:10;var translateX=x>parentWidth/2?-(100+offsetPercentage):offsetPercentage;var translateY=y>parentHeight/2?-(100+offsetPercentage):offsetPercentage;var scale=isNarrow?0.75:1.0;el.style.transform="translateX(".concat(translateX,"%) translateY(").concat(translateY,"%) scale(").concat(scale,")");el.style.whiteSpace=isNarrow?'normal':'nowrap';});return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{ref:ref,className:"cell-tooltip bg-primary",style:{left:"".concat(x,"px"),top:"".concat(y,"px")}},children);}

/***/ }),
/* 84 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "vega-tooltip"
var external_vega_tooltip_ = __webpack_require__(156);

// EXTERNAL MODULE: external "react-vega"
var external_react_vega_ = __webpack_require__(132);

// CONCATENATED MODULE: ./src/components/vega/ReactVega.js
// See https://reactjs.org/docs/code-splitting.html#named-exports

// CONCATENATED MODULE: ./src/components/vega/VegaPlot.js
// TODO: React.lazy is not working with Vitessce in the portal-ui.
// For now, we can work around this by not using React.lazy,
// but for performance benefits that come with lazy-loading
// we should eventually try to resolve this issue.
// const ReactVega = React.lazy(() => import('./ReactVega'));
var DATASET_NAME='table';function isVega(spec){return spec.$schema==='https://vega.github.io/schema/vega/v5.json';}/**
 * A wrapper around the react-vega Vega component.
 * @param {object} props
 * @param {object} spec A vega or vega-lite spec.
 * @param {object[]} data The plot data as an array of objects.
 * @param {object} signalListeners Vega signal listeners. Optional.
 */function VegaPlot(props){var partialSpec=props.spec,data=props.data,signalListeners=props.signalListeners;var spec=Object(objectSpread2["a" /* default */])({},partialSpec,{data:isVega(partialSpec)?[{name:DATASET_NAME}].concat(Object(toConsumableArray["a" /* default */])(partialSpec.data)):{name:DATASET_NAME}});var vegaComponent=Object(external_react_["useMemo"])(function(){return/*#__PURE__*/external_react_default.a.createElement(external_react_vega_["Vega"],{spec:spec,data:Object(defineProperty["a" /* default */])({},DATASET_NAME,data),signalListeners:signalListeners,tooltip:new external_vega_tooltip_["Handler"]().call,renderer:"canvas",scaleFactor:3});},[spec,data,signalListeners]);return spec&&data&&data.length>0?/*#__PURE__*/external_react_default.a.createElement(external_react_["Suspense"],{fallback:/*#__PURE__*/external_react_default.a.createElement("div",null,"Loading...")},vegaComponent):null;}
// CONCATENATED MODULE: ./src/components/vega/utils.js
/**
 * Vega-Lite themes that can be passed to the `config` property
 * of the vega-lite spec.
 */var VEGA_THEMES={dark:{// The vega-themes dark theme.
// Reference: https://github.com/vega/vega-themes/blob/master/src/theme-dark.ts
background:null,title:{color:'#fff'},style:{'guide-label':{fill:'#fff'},'guide-title':{fill:'#fff'}},axis:{domainColor:'#fff',gridColor:'#888',tickColor:'#fff'}},light:{// The default vega theme.
background:null}};
// CONCATENATED MODULE: ./src/components/vega/index.js
/* concated harmony reexport VegaPlot */__webpack_require__.d(__webpack_exports__, "c", function() { return VegaPlot; });
/* concated harmony reexport DATASET_NAME */__webpack_require__.d(__webpack_exports__, "a", function() { return DATASET_NAME; });
/* concated harmony reexport VEGA_THEMES */__webpack_require__.d(__webpack_exports__, "b", function() { return VEGA_THEMES; });


/***/ }),
/* 85 */
/***/ (function(module, exports) {

module.exports = require("zarr");

/***/ }),
/* 86 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export interpolateRdBu */
/* unused harmony export interpolatePlasma */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return getCellColors; });
/* harmony import */ var _sets_cell_set_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19);
/* eslint-disable no-nested-ternary */ /* eslint-disable no-param-reassign */// The functions defined here have been adapted from d3-interpolate,
// d3-color, and d3-scale-chromatic.
// Color string "rgb(r,g,b)" representations are replaced by color array [r, g, b]
// representations, to allow them to work nicely with deck.gl,
// without the need to converting back and forth between string and array formats.
// Reference: https://github.com/d3/d3-scale-chromatic/blob/431d21da776f97c632f53a855bd822edfbbcd56e/src/diverging/RdBu.js
// eslint-disable-next-line max-len
var schemeRdBu=[[103,0,31],[178,24,43],[214,96,77],[244,165,130],[253,219,199],[247,247,247],[209,229,240],[146,197,222],[67,147,195],[33,102,172],[5,48,97]];// eslint-disable-next-line max-len
var schemePlasma=[[13,8,135],[16,7,136],[19,7,137],[22,7,138],[25,6,140],[27,6,141],[29,6,142],[32,6,143],[34,6,144],[36,6,145],[38,5,145],[40,5,146],[42,5,147],[44,5,148],[46,5,149],[47,5,150],[49,5,151],[51,5,151],[53,4,152],[55,4,153],[56,4,154],[58,4,154],[60,4,155],[62,4,156],[63,4,156],[65,4,157],[67,3,158],[68,3,158],[70,3,159],[72,3,159],[73,3,160],[75,3,161],[76,2,161],[78,2,162],[80,2,162],[81,2,163],[83,2,163],[85,2,164],[86,1,164],[88,1,164],[89,1,165],[91,1,165],[92,1,166],[94,1,166],[96,1,166],[97,0,167],[99,0,167],[100,0,167],[102,0,167],[103,0,168],[105,0,168],[106,0,168],[108,0,168],[110,0,168],[111,0,168],[113,0,168],[114,1,168],[116,1,168],[117,1,168],[119,1,168],[120,1,168],[122,2,168],[123,2,168],[125,3,168],[126,3,168],[128,4,168],[129,4,167],[131,5,167],[132,5,167],[134,6,166],[135,7,166],[136,8,166],[138,9,165],[139,10,165],[141,11,165],[142,12,164],[143,13,164],[145,14,163],[146,15,163],[148,16,162],[149,17,161],[150,19,161],[152,20,160],[153,21,159],[154,22,159],[156,23,158],[157,24,157],[158,25,157],[160,26,156],[161,27,155],[162,29,154],[163,30,154],[165,31,153],[166,32,152],[167,33,151],[168,34,150],[170,35,149],[171,36,148],[172,38,148],[173,39,147],[174,40,146],[176,41,145],[177,42,144],[178,43,143],[179,44,142],[180,46,141],[181,47,140],[182,48,139],[183,49,138],[184,50,137],[186,51,136],[187,52,136],[188,53,135],[189,55,134],[190,56,133],[191,57,132],[192,58,131],[193,59,130],[194,60,129],[195,61,128],[196,62,127],[197,64,126],[198,65,125],[199,66,124],[200,67,123],[201,68,122],[202,69,122],[203,70,121],[204,71,120],[204,73,119],[205,74,118],[206,75,117],[207,76,116],[208,77,115],[209,78,114],[210,79,113],[211,81,113],[212,82,112],[213,83,111],[213,84,110],[214,85,109],[215,86,108],[216,87,107],[217,88,106],[218,90,106],[218,91,105],[219,92,104],[220,93,103],[221,94,102],[222,95,101],[222,97,100],[223,98,99],[224,99,99],[225,100,98],[226,101,97],[226,102,96],[227,104,95],[228,105,94],[229,106,93],[229,107,93],[230,108,92],[231,110,91],[231,111,90],[232,112,89],[233,113,88],[233,114,87],[234,116,87],[235,117,86],[235,118,85],[236,119,84],[237,121,83],[237,122,82],[238,123,81],[239,124,81],[239,126,80],[240,127,79],[240,128,78],[241,129,77],[241,131,76],[242,132,75],[243,133,75],[243,135,74],[244,136,73],[244,137,72],[245,139,71],[245,140,70],[246,141,69],[246,143,68],[247,144,68],[247,145,67],[247,147,66],[248,148,65],[248,149,64],[249,151,63],[249,152,62],[249,154,62],[250,155,61],[250,156,60],[250,158,59],[251,159,58],[251,161,57],[251,162,56],[252,163,56],[252,165,55],[252,166,54],[252,168,53],[252,169,52],[253,171,51],[253,172,51],[253,174,50],[253,175,49],[253,177,48],[253,178,47],[253,180,47],[253,181,46],[254,183,45],[254,184,44],[254,186,44],[254,187,43],[254,189,42],[254,190,42],[254,192,41],[253,194,41],[253,195,40],[253,197,39],[253,198,39],[253,200,39],[253,202,38],[253,203,38],[252,205,37],[252,206,37],[252,208,37],[252,210,37],[251,211,36],[251,213,36],[251,215,36],[250,216,36],[250,218,36],[249,220,36],[249,221,37],[248,223,37],[248,225,37],[247,226,37],[247,228,37],[246,230,38],[246,232,38],[245,233,38],[245,235,39],[244,237,39],[243,238,39],[243,240,39],[242,242,39],[241,244,38],[241,245,37],[240,247,36],[240,249,33]];// Reference: https://github.com/d3/d3-interpolate/blob/96d54051d1c2fec55f240edd0ec5401715b10390/src/rgb.js
function rgbSpline(spline){return function(colors){var n=colors.length;var r=new Array(n);var g=new Array(n);var b=new Array(n);var i;var color;// eslint-disable-next-line no-plusplus
for(i=0;i<n;++i){color=[colors[i][0],colors[i][1],colors[i][2]];r[i]=color[0]||0;g[i]=color[1]||0;b[i]=color[2]||0;}r=spline(r);g=spline(g);b=spline(b);return function(t){return[r(t),g(t),b(t)];};};}// Reference: https://github.com/d3/d3-interpolate/blob/594a32af1fe1118812b439012c2cb742e907c0c0/src/basis.js
function basis(values){function innerBasis(t1,v0,v1,v2,v3){var t2=t1*t1;var t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6;}var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n);var v1=values[i];var v2=values[i+1];var v0=i>0?values[i-1]:2*v1-v2;var v3=i<n-1?values[i+2]:2*v2-v1;return innerBasis((t-i/n)*n,v0,v1,v2,v3);};}// Reference: https://github.com/d3/d3-scale-chromatic/blob/ade54c13e8dfdb9807801a794eaec1a37f926b8a/src/ramp.js
var interpolateRgbBasis=rgbSpline(basis);function interpolateSequentialMulti(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))];};}var interpolateRdBu=interpolateRgbBasis(schemeRdBu);var interpolatePlasma=interpolateSequentialMulti(schemePlasma);/**
 * Get a mapping of cell IDs to cell colors based on
 * gene / cell set selection coordination state.
 * @param {object} params
 * @param {object} params.expressionMatrix { rows, cols, matrix }
 * @param {array} params.geneSelection Array of selected gene IDs.
 * @param {object} params.cellSets The cell sets tree.
 * @param {object} params.cellSetSelection Selected cell sets.
 * @param {string} params.cellColorEncoding Which to use for
 * coloring: gene expression or cell sets?
 * @returns {Map} Mapping from cell IDs to [r, g, b] color arrays.
 */function getCellColors(params){var cellColorEncoding=params.cellColorEncoding,expressionMatrix=params.expressionMatrix,geneSelection=params.geneSelection,cellSets=params.cellSets,cellSetSelection=params.cellSetSelection,cellSetColor=params.cellSetColor;if(cellColorEncoding==='geneSelection'&&geneSelection&&geneSelection.length>=1&&expressionMatrix){var firstGeneSelected=geneSelection[0];// TODO: allow other color maps.
var geneExpColormap=interpolatePlasma;var geneIndex=expressionMatrix.cols.indexOf(firstGeneSelected);if(geneIndex!==-1){var numGenes=expressionMatrix.cols.length;// Create new cellColors map based on the selected gene.
return new Map(expressionMatrix.rows.map(function(cellId,cellIndex){var value=expressionMatrix.matrix[cellIndex*numGenes+geneIndex];var cellColor=geneExpColormap(value/255);return[cellId,cellColor];}));}}else if(cellColorEncoding==='cellSetSelection'&&cellSetSelection&&cellSets){// Cell sets can potentially lack set colors since the color property
// is not a required part of the schema.
// The `initializeSets` function fills in any empty colors
// with defaults and returns the processed tree object.
return Object(_sets_cell_set_utils__WEBPACK_IMPORTED_MODULE_0__[/* treeToCellColorsBySetNames */ "n"])(cellSets,cellSetSelection,cellSetColor);}return new Map();}

/***/ }),
/* 87 */
/***/ (function(module, exports) {

module.exports = require("@luma.gl/core");

/***/ }),
/* 88 */
/***/ (function(module, exports) {

module.exports = require("@turf/concave");

/***/ }),
/* 89 */
/***/ (function(module, exports) {

module.exports = require("@turf/centroid");

/***/ }),
/* 90 */
/***/ (function(module, exports) {

module.exports = require("ajv");

/***/ }),
/* 91 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// EXTERNAL MODULE: external "deck.gl"
var external_deck_gl_ = __webpack_require__(22);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules
var objectWithoutProperties = __webpack_require__(99);

// EXTERNAL MODULE: external "@deck.gl/extensions"
var extensions_ = __webpack_require__(113);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: external "@turf/helpers"
var helpers_ = __webpack_require__(52);

// EXTERNAL MODULE: external "@turf/boolean-within"
var boolean_within_ = __webpack_require__(114);
var boolean_within_default = /*#__PURE__*/__webpack_require__.n(boolean_within_);

// EXTERNAL MODULE: external "@turf/boolean-contains"
var boolean_contains_ = __webpack_require__(115);
var boolean_contains_default = /*#__PURE__*/__webpack_require__.n(boolean_contains_);

// EXTERNAL MODULE: external "@turf/boolean-overlap"
var boolean_overlap_ = __webpack_require__(116);
var boolean_overlap_default = /*#__PURE__*/__webpack_require__.n(boolean_overlap_);

// EXTERNAL MODULE: external "@turf/boolean-point-in-polygon"
var boolean_point_in_polygon_ = __webpack_require__(117);
var boolean_point_in_polygon_default = /*#__PURE__*/__webpack_require__.n(boolean_point_in_polygon_);

// EXTERNAL MODULE: external "nebula.gl"
var external_nebula_gl_ = __webpack_require__(48);

// EXTERNAL MODULE: external "@nebula.gl/edit-modes"
var edit_modes_ = __webpack_require__(92);

// CONCATENATED MODULE: ./src/layers/SelectionLayer.js
var _MODE_MAP;/* eslint-disable import/no-extraneous-dependencies */ /* eslint-disable no-underscore-dangle */ // File adopted from nebula.gl's SelectionLayer
// https://github.com/uber/nebula.gl/blob/8e9c2ec8d7cf4ca7050909ed826eb847d5e2cd9c/modules/layers/src/layers/selection-layer.js
var EDIT_TYPE_ADD='addFeature';var EDIT_TYPE_CLEAR='clearFeatures';// Customize the click handlers for the rectangle and polygon tools,
// so that clicking triggers the `onEdit` callback.
var SelectionLayer_ClickableDrawRectangleMode=/*#__PURE__*/function(_DrawRectangleMode){Object(inherits["a" /* default */])(ClickableDrawRectangleMode,_DrawRectangleMode);var _super=Object(createSuper["a" /* default */])(ClickableDrawRectangleMode);function ClickableDrawRectangleMode(){Object(classCallCheck["a" /* default */])(this,ClickableDrawRectangleMode);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(ClickableDrawRectangleMode,[{key:"handleClick",// eslint-disable-next-line class-methods-use-this
value:function handleClick(event,props){props.onEdit({editType:EDIT_TYPE_CLEAR});}}]);return ClickableDrawRectangleMode;}(edit_modes_["DrawRectangleMode"]);var SelectionLayer_ClickableDrawPolygonByDraggingMode=/*#__PURE__*/function(_DrawPolygonByDraggin){Object(inherits["a" /* default */])(ClickableDrawPolygonByDraggingMode,_DrawPolygonByDraggin);var _super2=Object(createSuper["a" /* default */])(ClickableDrawPolygonByDraggingMode);function ClickableDrawPolygonByDraggingMode(){Object(classCallCheck["a" /* default */])(this,ClickableDrawPolygonByDraggingMode);return _super2.apply(this,arguments);}Object(createClass["a" /* default */])(ClickableDrawPolygonByDraggingMode,[{key:"handleClick",// eslint-disable-next-line class-methods-use-this
value:function handleClick(event,props){props.onEdit({editType:EDIT_TYPE_CLEAR});}}]);return ClickableDrawPolygonByDraggingMode;}(edit_modes_["DrawPolygonByDraggingMode"]);var MODE_MAP=(_MODE_MAP={},Object(defineProperty["a" /* default */])(_MODE_MAP,external_nebula_gl_["SELECTION_TYPE"].RECTANGLE,SelectionLayer_ClickableDrawRectangleMode),Object(defineProperty["a" /* default */])(_MODE_MAP,external_nebula_gl_["SELECTION_TYPE"].POLYGON,SelectionLayer_ClickableDrawPolygonByDraggingMode),_MODE_MAP);var defaultProps={selectionType:external_nebula_gl_["SELECTION_TYPE"].RECTANGLE,layerIds:[],onSelect:function onSelect(){}};var EMPTY_DATA={type:'FeatureCollection',features:[]};var LAYER_ID_GEOJSON='selection-geojson';var PASS_THROUGH_PROPS=['lineWidthScale','lineWidthMinPixels','lineWidthMaxPixels','lineWidthUnits','lineJointRounded','lineMiterLimit','pointRadiusScale','pointRadiusMinPixels','pointRadiusMaxPixels','lineDashJustified','getLineColor','getFillColor','getRadius','getLineWidth','getLineDashArray','getTentativeLineDashArray','getTentativeLineColor','getTentativeFillColor','getTentativeLineWidth','editHandlePointRadiusScale','editHandlePointRadiusMinPixels','editHandlePointRadiusMaxPixels','getEditHandlePointColor','getEditHandlePointRadius','modeHandlers'];var SelectionLayer_SelectionLayer=/*#__PURE__*/function(_CompositeLayer){Object(inherits["a" /* default */])(SelectionLayer,_CompositeLayer);var _super3=Object(createSuper["a" /* default */])(SelectionLayer);function SelectionLayer(){Object(classCallCheck["a" /* default */])(this,SelectionLayer);return _super3.apply(this,arguments);}Object(createClass["a" /* default */])(SelectionLayer,[{key:"_selectPolygonObjects",value:function _selectPolygonObjects(coordinates){var _this$props=this.props,onSelect=_this$props.onSelect,getCellCoords=_this$props.getCellCoords,cellsQuadTree=_this$props.cellsQuadTree,flipY=_this$props.flipY;var flippedCoordinates=flipY?coordinates.map(function(poly){return poly.map(function(p){return[p[0],-p[1]];});}):coordinates;// Convert the selection to a turf polygon object.
var selectedPolygon=Object(helpers_["polygon"])(flippedCoordinates);// Create an array to store the results.
var pickingInfos=[];// quadtree.visit() takes a callback that returns a boolean:
// If true returned, then the children of the node are _not_ visited.
// If false returned, then the children of the node are visited.
// Reference: https://github.com/d3/d3-quadtree#quadtree_visit
cellsQuadTree.visit(function(node,x0,y0,x1,y1){var nodePoints=[[[x0,y0],[x1,y0],[x1,y1],[x0,y1],[x0,y0]]];var nodePolygon=Object(helpers_["polygon"])(nodePoints);var nodePolygonContainsSelectedPolygon=boolean_contains_default()(nodePolygon,selectedPolygon);var nodePolygonWithinSelectedPolygon=boolean_within_default()(nodePolygon,selectedPolygon);var nodePolygonOverlapsSelectedPolgyon=boolean_overlap_default()(nodePolygon,selectedPolygon);if(!nodePolygonContainsSelectedPolygon&&!nodePolygonWithinSelectedPolygon&&!nodePolygonOverlapsSelectedPolgyon){// We are not interested in anything below this node,
// so return true because we are done with this node.
return true;}// This node made it past the above return statement, so it must either
// contain, be within, or overlap with the selected polygon.
// Check if this is a leaf node.
if(node.data&&boolean_point_in_polygon_default()(Object(helpers_["point"])(getCellCoords(node.data[1])),selectedPolygon)){// This node has data, so it is a leaf node representing one data point,
// and we have verified that the point is in the selected polygon.
pickingInfos.push(node.data);}// Return false because we are not done.
// We want to visit the children of this node.
return false;});onSelect({pickingInfos:pickingInfos});}},{key:"renderLayers",value:function renderLayers(){var _this=this;var onSelect=this.props.onSelect;var mode=MODE_MAP[this.props.selectionType]||edit_modes_["ViewMode"];var inheritedProps={};PASS_THROUGH_PROPS.forEach(function(p){if(_this.props[p]!==undefined)inheritedProps[p]=_this.props[p];});var layers=[new external_nebula_gl_["EditableGeoJsonLayer"](this.getSubLayerProps(Object(objectSpread2["a" /* default */])({id:LAYER_ID_GEOJSON,pickable:true,mode:mode,modeConfig:{dragToDraw:true},selectedFeatureIndexes:[],data:EMPTY_DATA,onEdit:function onEdit(_ref){var updatedData=_ref.updatedData,editType=_ref.editType;if(editType===EDIT_TYPE_ADD){var coordinates=updatedData.features[0].geometry.coordinates;_this._selectPolygonObjects(coordinates);}else if(editType===EDIT_TYPE_CLEAR){// We want to select an empty array to clear any previous selection.
onSelect({pickingInfos:[]});}}},inheritedProps)))];return layers;}}]);return SelectionLayer;}(external_deck_gl_["CompositeLayer"]);SelectionLayer_SelectionLayer.layerName='SelectionLayer';SelectionLayer_SelectionLayer.defaultProps=defaultProps;
// CONCATENATED MODULE: ./src/layers/selection-utils.js
/**
 * Convert a DeckGL layer ID to a "base" layer ID for selection.
 * @param {string} layerId The layer ID to convert.
 * @returns {string} The base layer ID.
 */function getBaseLayerId(layerId){return"base-".concat(layerId);}/**
 * Convert a DeckGL layer ID to a "selected" layer ID for selection.
 * @param {string} layerId The layer ID to convert.
 * @returns {string} The base layer ID.
 */function getSelectedLayerId(layerId){return"selected-".concat(layerId);}/**
 * Construct DeckGL selection layers.
 * @param {string} tool
 * @param {number} zoom
 * @param {string} cellBaseLayerId
 * @param {function} getCellCoords
 * @param {function} updateCellsSelection
 * @returns {object[]} The array of DeckGL selection layers.
 */function getSelectionLayers(tool,zoom,layerId,getCellCoords,updateCellsSelection,cellsQuadTree){var flipY=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;if(!tool){return[];}var cellBaseLayerId=getBaseLayerId(layerId);var editHandlePointRadius=5/(zoom+16);return[new SelectionLayer_SelectionLayer({id:'selection',flipY:flipY,cellsQuadTree:cellsQuadTree,getCellCoords:getCellCoords,coordinateSystem:external_deck_gl_["COORDINATE_SYSTEM"].CARTESIAN,selectionType:tool,onSelect:function onSelect(_ref){var pickingInfos=_ref.pickingInfos;var cellIds=pickingInfos.map(function(cellObj){return cellObj[0];});if(updateCellsSelection){updateCellsSelection(cellIds);}},layerIds:[cellBaseLayerId],getTentativeFillColor:function getTentativeFillColor(){return[255,255,255,95];},getTentativeLineColor:function getTentativeLineColor(){return[143,143,143,255];},getTentativeLineDashArray:function getTentativeLineDashArray(){return[7,4];},lineWidthMinPixels:2,lineWidthMaxPixels:2,getEditHandlePointColor:function getEditHandlePointColor(){return[0xff,0xff,0xff,0xff];},getEditHandlePointRadius:function getEditHandlePointRadius(){return editHandlePointRadius;},editHandlePointRadiusScale:1,editHandlePointRadiusMinPixels:editHandlePointRadius,editHandlePointRadiusMaxPixels:2*editHandlePointRadius})];}/**
 * Get deck.gl layer props for selection overlays.
 * @param {object} props
 * @returns {object} Object with two properties,
 * overlay: overlayProps, base: baseProps,
 * where the values are deck.gl layer props.
 */function overlayBaseProps(props){var id=props.id,getColor=props.getColor,data=props.data,isSelected=props.isSelected,rest=Object(objectWithoutProperties["a" /* default */])(props,["id","getColor","data","isSelected"]);return{overlay:Object(objectSpread2["a" /* default */])({id:getSelectedLayerId(id),getFillColor:getColor,getLineColor:getColor,data:data,getFilterValue:isSelected,extensions:[new extensions_["DataFilterExtension"]({filterSize:1})],filterRange:[1,1]},rest),base:Object(objectSpread2["a" /* default */])({id:getBaseLayerId(id),getLineColor:getColor,getFillColor:getColor,// Alternatively: contrast outlines with solids:
// getLineColor: getColor,
// getFillColor: [255, 255, 255],
data:data.slice()},rest)};}
// CONCATENATED MODULE: ./src/layers/SelectablePolygonLayer.js
var SelectablePolygonLayer_SelectablePolygonLayer=/*#__PURE__*/function(_CompositeLayer){Object(inherits["a" /* default */])(SelectablePolygonLayer,_CompositeLayer);var _super=Object(createSuper["a" /* default */])(SelectablePolygonLayer);function SelectablePolygonLayer(){Object(classCallCheck["a" /* default */])(this,SelectablePolygonLayer);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(SelectablePolygonLayer,[{key:"renderLayers",value:function renderLayers(){var props=overlayBaseProps(this.props);var base=new external_deck_gl_["PolygonLayer"](props.base);var overlay=new external_deck_gl_["PolygonLayer"](props.overlay);return[base,overlay];}}]);return SelectablePolygonLayer;}(external_deck_gl_["CompositeLayer"]);SelectablePolygonLayer_SelectablePolygonLayer.layerName='SelectablePolygonLayer';
// CONCATENATED MODULE: ./src/layers/SelectableScatterplotLayer.js
var SelectableScatterplotLayer_SelectableScatterplotLayer=/*#__PURE__*/function(_CompositeLayer){Object(inherits["a" /* default */])(SelectableScatterplotLayer,_CompositeLayer);var _super=Object(createSuper["a" /* default */])(SelectableScatterplotLayer);function SelectableScatterplotLayer(){Object(classCallCheck["a" /* default */])(this,SelectableScatterplotLayer);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(SelectableScatterplotLayer,[{key:"renderLayers",value:function renderLayers(){var props=overlayBaseProps(this.props);var base=new external_deck_gl_["ScatterplotLayer"](props.base);var overlay=new external_deck_gl_["ScatterplotLayer"](props.overlay);return[base,overlay];}}]);return SelectableScatterplotLayer;}(external_deck_gl_["CompositeLayer"]);SelectableScatterplotLayer_SelectableScatterplotLayer.layerName='SelectableScatterplotLayer';
// EXTERNAL MODULE: ./src/layers/HeatmapBitmapLayer.js + 1 modules
var HeatmapBitmapLayer = __webpack_require__(97);

// EXTERNAL MODULE: ./src/layers/PixelatedBitmapLayer.js
var PixelatedBitmapLayer = __webpack_require__(96);

// EXTERNAL MODULE: ./src/layers/HeatmapCompositeTextLayer.js
var HeatmapCompositeTextLayer = __webpack_require__(95);

// CONCATENATED MODULE: ./src/layers/index.js
/* concated harmony reexport SelectablePolygonLayer */__webpack_require__.d(__webpack_exports__, "a", function() { return SelectablePolygonLayer_SelectablePolygonLayer; });
/* concated harmony reexport SelectableScatterplotLayer */__webpack_require__.d(__webpack_exports__, "b", function() { return SelectableScatterplotLayer_SelectableScatterplotLayer; });
/* concated harmony reexport getSelectionLayers */__webpack_require__.d(__webpack_exports__, "c", function() { return getSelectionLayers; });
/* unused concated harmony import HeatmapBitmapLayer */
/* unused concated harmony import PixelatedBitmapLayer */
/* unused concated harmony import HeatmapCompositeTextLayer */
// Selection Layers
// Heatmap Layers


/***/ }),
/* 92 */
/***/ (function(module, exports) {

module.exports = require("@nebula.gl/edit-modes");

/***/ }),
/* 93 */
/***/ (function(module) {

module.exports = JSON.parse("{\"name\":\"vitessce\",\"version\":\"1.1.6\",\"description\":\"Vitessce app and React component library\",\"author\":\"C McCallum\",\"homepage\":\"http://vitessce.io/\",\"license\":\"MIT\",\"repository\":\"https://github.com/hubmapconsortium/vitessce/\",\"keywords\":[\"react-component\"],\"files\":[\"dist\",\"src\"],\"main\":\"dist/umd/production/index.min.js\",\"module\":\"dist/es/production/index.min.js\",\"peerDependencies\":{\"react\":\"^16.8.6\",\"react-dom\":\"^16.8.6\"},\"dependencies\":{\"@deck.gl/core\":\"8.4.0-alpha.4\",\"@deck.gl/extensions\":\"8.4.0-alpha.4\",\"@deck.gl/layers\":\"8.4.0-alpha.4\",\"@hms-dbmi/viv\":\"^0.8.3\",\"@loaders.gl/3d-tiles\":\"^2.3.0\",\"@loaders.gl/core\":\"^2.3.0\",\"@loaders.gl/images\":\"^2.3.0\",\"@loaders.gl/loader-utils\":\"^2.3.0\",\"@luma.gl/constants\":\"^8.3.1\",\"@luma.gl/core\":\"^8.3.1\",\"@luma.gl/shadertools\":\"^8.3.1\",\"@luma.gl/webgl\":\"^8.3.1\",\"@material-ui/core\":\"^4.8.3\",\"@material-ui/icons\":\"^4.9.1\",\"@turf/boolean-contains\":\"^6.0.1\",\"@turf/boolean-overlap\":\"^6.0.1\",\"@turf/boolean-point-in-polygon\":\"^6.0.1\",\"@turf/boolean-within\":\"^6.0.1\",\"@turf/centroid\":\"^6.0.2\",\"@turf/concave\":\"^6.0.5\",\"@turf/helpers\":\"^6.1.4\",\"ajv\":\"^6.10.0\",\"bowser\":\"^2.11.0\",\"classnames\":\"^2.2.6\",\"clsx\":\"^1.1.1\",\"d3-array\":\"^2.4.0\",\"d3-dsv\":\"^1.1.1\",\"d3-force\":\"^2.1.1\",\"d3-quadtree\":\"^1.0.7\",\"d3-scale-chromatic\":\"^1.3.3\",\"deck.gl\":\"8.4.0-alpha.4\",\"dynamic-import-polyfill\":\"^0.1.1\",\"glslify\":\"^7.0.0\",\"higlass\":\"1.11.4\",\"higlass-register\":\"^0.3.0\",\"higlass-zarr-datafetchers\":\"^0.2.0\",\"json2csv\":\"^4.5.2\",\"lodash\":\"^4.17.15\",\"lz-string\":\"^1.4.4\",\"math.gl\":\"^3.1.3\",\"mathjs\":\"^9.2.0\",\"nebula.gl\":\"^0.21.1\",\"prop-types\":\"^15.7.2\",\"rc-tooltip\":\"^4.0.3\",\"rc-tree\":\"2.1.0\",\"react-color\":\"^2.18.0\",\"react-grid-layout\":\"^1.1.1\",\"react-vega\":\"^7.3.0\",\"react-virtualized\":\"^9.22.2\",\"short-number\":\"^1.0.6\",\"store\":\"^2.0.12\",\"tinycolor2\":\"^1.4.1\",\"uuid\":\"^3.3.2\",\"vega\":\"^5.13.0\",\"vega-lite\":\"^4.13.0\",\"vega-tooltip\":\"^0.23.0\",\"whatwg-fetch\":\"^3.0.0\",\"window-pixi\":\"5.3.3\",\"zarr\":\"^0.3.0\",\"zustand\":\"^3.0.2\"},\"devDependencies\":{\"@babel/core\":\"7.9.0\",\"@svgr/webpack\":\"5.3.1\",\"@typescript-eslint/eslint-plugin\":\"^2.10.0\",\"@typescript-eslint/parser\":\"^2.10.0\",\"babel-eslint\":\"10.0.3\",\"babel-loader\":\"8.1.0\",\"babel-plugin-glsl\":\"^1.0.0\",\"babel-plugin-named-asset-import\":\"^0.3.6\",\"babel-preset-react-app\":\"^9.1.2\",\"camelcase\":\"^5.3.1\",\"case-sensitive-paths-webpack-plugin\":\"2.3.0\",\"css-loader\":\"3.4.2\",\"cypress\":\"^3.6.1\",\"dotenv\":\"8.2.0\",\"dotenv-expand\":\"5.1.0\",\"enzyme\":\"^3.9.0\",\"enzyme-adapter-react-16\":\"^1.11.2\",\"eslint\":\"^6.6.0\",\"eslint-config-airbnb\":\"^17.1.0\",\"eslint-config-react-app\":\"^5.2.0\",\"eslint-loader\":\"3.0.3\",\"eslint-plugin-cypress\":\"^2.2.1\",\"eslint-plugin-flowtype\":\"4.6.0\",\"eslint-plugin-import\":\"2.20.0\",\"eslint-plugin-jsx-a11y\":\"6.2.3\",\"eslint-plugin-react\":\"7.18.0\",\"eslint-plugin-react-hooks\":\"^1.6.1\",\"eslint-plugin-vitessce-rules\":\"file:eslint\",\"expect\":\"^24.5.0\",\"file-loader\":\"4.3.0\",\"fs-extra\":\"^8.1.0\",\"glsl-colormap\":\"^1.0.1\",\"html-webpack-plugin\":\"4.0.0-beta.11\",\"identity-obj-proxy\":\"3.0.0\",\"js-yaml\":\"^3.13.1\",\"karma\":\"4.4.1\",\"karma-chrome-launcher\":\"3.1.0\",\"karma-mocha\":\"1.3.0\",\"karma-mocha-reporter\":\"2.2.5\",\"karma-sourcemap-loader\":\"0.3.7\",\"karma-webpack\":\"4.0.2\",\"mini-css-extract-plugin\":\"0.9.0\",\"mocha\":\"7.1.0\",\"node-sass\":\"^5.0.0\",\"object.fromentries\":\"^2.0.2\",\"optimize-css-assets-webpack-plugin\":\"5.0.3\",\"pnp-webpack-plugin\":\"1.6.0\",\"postcss-flexbugs-fixes\":\"4.1.0\",\"postcss-loader\":\"3.0.0\",\"postcss-normalize\":\"8.0.1\",\"postcss-preset-env\":\"6.7.0\",\"postcss-safe-parser\":\"4.0.1\",\"react\":\"^16.8.6\",\"react-app-polyfill\":\"^1.0.6\",\"react-dev-utils\":\"^10.2.0\",\"react-dom\":\"^16.8.6\",\"resolve\":\"1.15.0\",\"resolve-url-loader\":\"3.1.1\",\"sass-loader\":\"^10.0.1\",\"semver\":\"6.3.0\",\"style-loader\":\"0.23.1\",\"terser-webpack-plugin\":\"2.3.4\",\"url-loader\":\"2.3.0\",\"wait-on\":\"^3.2.0\",\"webpack\":\"4.41.5\",\"webpack-dev-server\":\"3.10.2\",\"webpack-node-externals\":\"^2.5.2\",\"workbox-webpack-plugin\":\"4.3.1\",\"worker-loader\":\"^2.0.0\"},\"resolutions\":{\"@turf/difference\":\"6.0.1\"},\"scripts\":{\"build-demo:prod\":\"node scripts/build-demo.js production\",\"build-lib:prod\":\"node scripts/build-lib.js production\",\"build-demo:dev\":\"node scripts/build-demo.js development\",\"build-lib:dev\":\"node scripts/build-lib.js development\",\"build:prod\":\"npm run build-demo:prod && npm run build-lib:prod\",\"build:dev\":\"npm run build-demo:dev && npm run build-lib:dev\",\"prepublishOnly\":\"npm run build-lib:prod\",\"clean\":\"rm -r dist-demo dist\",\"start\":\"node scripts/start-demo.js\",\"test\":\"karma start scripts/karma.config.js --single-run\",\"test:watch\":\"karma start scripts/karma.config.js --auto-watch\",\"cypress:open\":\"cypress open\",\"cypress:run\":\"cypress run\",\"lint-fix\":\"eslint -c .eslintrc.yml --ext .js --fix src/\"},\"browserslist\":{\"production\":[\">0.2%\",\"not dead\",\"not op_mini all\"],\"development\":[\"last 1 chrome version\",\"last 1 firefox version\",\"last 1 safari version\"]},\"babel\":{\"presets\":[\"react-app\"],\"plugins\":[\"glsl\"]}}");

/***/ }),
/* 94 */
/***/ (function(module, exports) {

module.exports = require("regenerator-runtime");

/***/ }),
/* 95 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HeatmapCompositeTextLayer; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12);
/* harmony import */ var _deck_gl_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(26);
/* harmony import */ var _deck_gl_core__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_deck_gl_core__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(36);
/* harmony import */ var _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _heatmap_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6);
/* eslint-disable no-underscore-dangle */var HeatmapCompositeTextLayer=/*#__PURE__*/function(_CompositeLayer){Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(HeatmapCompositeTextLayer,_CompositeLayer);var _super=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(HeatmapCompositeTextLayer);function HeatmapCompositeTextLayer(){Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(this,HeatmapCompositeTextLayer);return _super.apply(this,arguments);}Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(HeatmapCompositeTextLayer,[{key:"_renderAxisTopLayers",value:function _renderAxisTopLayers(){var _this$props=this.props,axisTopLabelData=_this$props.axisTopLabelData,matrixLeft=_this$props.matrixLeft,width=_this$props.width,matrixWidth=_this$props.matrixWidth,viewWidth=_this$props.viewWidth,theme=_this$props.theme,targetX=_this$props.targetX,targetY=_this$props.targetY,axisTopTitle=_this$props.axisTopTitle,cellWidth=_this$props.cellWidth,axisOffsetTop=_this$props.axisOffsetTop,scaleFactor=_this$props.scaleFactor;var showAxisTopLabels=cellWidth>=_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_LABEL_TEXT_SIZE */ "b"];var axisLabelTop=targetY+(axisOffsetTop-_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_MARGIN */ "c"])/2/scaleFactor;return[new _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__["TextLayer"]({id:'axisTopLabels',coordinateSystem:_deck_gl_core__WEBPACK_IMPORTED_MODULE_4__["COORDINATE_SYSTEM"].CARTESIAN,data:axisTopLabelData,getText:function getText(d){return d[1];},getPosition:function getPosition(d){return[matrixLeft+(d[0]+0.5)/width*matrixWidth,axisLabelTop];},getTextAnchor:'start',getColor:function getColor(){return _heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* THEME_TO_TEXT_COLOR */ "k"][theme];},getSize:showAxisTopLabels?_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_LABEL_TEXT_SIZE */ "b"]:0,getAngle:75,fontFamily:_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_FONT_FAMILY */ "a"],updateTriggers:{getPosition:[axisLabelTop,matrixLeft,matrixWidth,viewWidth],getSize:[showAxisTopLabels],getColor:[theme]}}),new _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__["TextLayer"]({id:'axisTopTitle',coordinateSystem:_deck_gl_core__WEBPACK_IMPORTED_MODULE_4__["COORDINATE_SYSTEM"].CARTESIAN,data:[{title:axisTopTitle}],getText:function getText(d){return d.title;},getPosition:[targetX,targetY],getTextAnchor:'middle',getColor:function getColor(){return _heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* THEME_TO_TEXT_COLOR */ "k"][theme];},getSize:!showAxisTopLabels?_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_TITLE_TEXT_SIZE */ "f"]:0,getAngle:0,fontFamily:_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_FONT_FAMILY */ "a"],updateTriggers:{getSize:[showAxisTopLabels],getColor:[theme]}})];}},{key:"_renderAxisLeftLayers",value:function _renderAxisLeftLayers(){var _this$props2=this.props,axisLeftLabelData=_this$props2.axisLeftLabelData,matrixTop=_this$props2.matrixTop,height=_this$props2.height,matrixHeight=_this$props2.matrixHeight,viewHeight=_this$props2.viewHeight,theme=_this$props2.theme,axisLeftTitle=_this$props2.axisLeftTitle,targetX=_this$props2.targetX,targetY=_this$props2.targetY,cellHeight=_this$props2.cellHeight,axisOffsetLeft=_this$props2.axisOffsetLeft,scaleFactor=_this$props2.scaleFactor;var showAxisLeftLabels=cellHeight>=_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_LABEL_TEXT_SIZE */ "b"];var axisLabelLeft=targetX+(axisOffsetLeft-_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_MARGIN */ "c"])/2/scaleFactor;return[new _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__["TextLayer"]({id:'axisLeftLabels',coordinateSystem:_deck_gl_core__WEBPACK_IMPORTED_MODULE_4__["COORDINATE_SYSTEM"].CARTESIAN,data:axisLeftLabelData,getText:function getText(d){return d[1];},getPosition:function getPosition(d){return[axisLabelLeft,matrixTop+(d[0]+0.5)/height*matrixHeight];},getTextAnchor:'end',getColor:function getColor(){return _heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* THEME_TO_TEXT_COLOR */ "k"][theme];},getSize:showAxisLeftLabels?_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_LABEL_TEXT_SIZE */ "b"]:0,getAngle:0,fontFamily:_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_FONT_FAMILY */ "a"],updateTriggers:{getPosition:[axisLabelLeft,matrixTop,matrixHeight,viewHeight],getSize:[showAxisLeftLabels],getColor:[theme]}}),new _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__["TextLayer"]({id:'axisLeftTitle',coordinateSystem:_deck_gl_core__WEBPACK_IMPORTED_MODULE_4__["COORDINATE_SYSTEM"].CARTESIAN,data:[{title:axisLeftTitle}],getText:function getText(d){return d.title;},getPosition:[targetX,targetY],getTextAnchor:'middle',getColor:function getColor(){return _heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* THEME_TO_TEXT_COLOR */ "k"][theme];},getSize:!showAxisLeftLabels?_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_TITLE_TEXT_SIZE */ "f"]:0,getAngle:90,fontFamily:_heatmap_constants__WEBPACK_IMPORTED_MODULE_6__[/* AXIS_FONT_FAMILY */ "a"],updateTriggers:{getSize:[showAxisLeftLabels],getColor:[theme]}})];}},{key:"renderLayers",value:function renderLayers(){return[this._renderAxisTopLayers(),this._renderAxisLeftLayers()];}}]);return HeatmapCompositeTextLayer;}(_deck_gl_core__WEBPACK_IMPORTED_MODULE_4__["CompositeLayer"]);HeatmapCompositeTextLayer.layerName='HeatmapCompositeTextLayer';

/***/ }),
/* 96 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PixelatedBitmapLayer; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4);
/* harmony import */ var _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(36);
/* harmony import */ var _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _deck_gl_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(26);
/* harmony import */ var _deck_gl_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_deck_gl_core__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _heatmap_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(6);
// These are the same defaultProps as for BitmapLayer.
var defaultProps=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])({},_deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__["BitmapLayer"].defaultProps,{image:{type:'object',value:null,async:true},bounds:{type:'array',value:[1,0,0,1],compare:true},desaturate:{type:'number',min:0,max:1,value:0},transparentColor:{type:'color',value:[0,0,0,0]},tintColor:{type:'color',value:[255,255,255]}});var PixelatedBitmapLayer=/*#__PURE__*/function(_CompositeLayer){Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(PixelatedBitmapLayer,_CompositeLayer);var _super=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(PixelatedBitmapLayer);function PixelatedBitmapLayer(){Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(this,PixelatedBitmapLayer);return _super.apply(this,arguments);}Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(PixelatedBitmapLayer,[{key:"renderLayers",value:function renderLayers(){var image=this.props.image;return new _deck_gl_layers__WEBPACK_IMPORTED_MODULE_5__["BitmapLayer"](this.props,{id:"".concat(this.props.id,"-wrapped"),image:image,textureParameters:_heatmap_constants__WEBPACK_IMPORTED_MODULE_7__[/* PIXELATED_TEXTURE_PARAMETERS */ "j"]});}}]);return PixelatedBitmapLayer;}(_deck_gl_core__WEBPACK_IMPORTED_MODULE_6__["CompositeLayer"]);PixelatedBitmapLayer.layerName='PixelatedBitmapLayer';PixelatedBitmapLayer.defaultProps=defaultProps;

/***/ }),
/* 97 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(30);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js + 1 modules
var get = __webpack_require__(57);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// EXTERNAL MODULE: external "@luma.gl/constants"
var constants_ = __webpack_require__(33);
var constants_default = /*#__PURE__*/__webpack_require__.n(constants_);

// EXTERNAL MODULE: external "@deck.gl/core"
var core_ = __webpack_require__(26);

// EXTERNAL MODULE: external "@deck.gl/layers"
var layers_ = __webpack_require__(36);

// EXTERNAL MODULE: external "@luma.gl/core"
var external_luma_gl_core_ = __webpack_require__(87);

// EXTERNAL MODULE: ./src/layers/heatmap-constants.js
var heatmap_constants = __webpack_require__(6);

// CONCATENATED MODULE: ./src/layers/heatmap-bitmap-layer-shaders.js
/**
 * No change to the vertex shader from the base BitmapLayer.
 * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-vertex.js
 */var vertexShader="\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n";/**
 * Fragment shader adapted to perform aggregation and
 * take color scale functions + sliders into account.
 * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-fragment.js
 * Reference: https://github.com/hubmapconsortium/vitessce-image-viewer/blob/06231ae02cac1ff57ba458c71e9bc59ed2fc4f8b/src/layers/XRLayer/xr-layer-fragment-colormap.webgl1.glsl
 */var fragmentShader="\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvec4 rdbu (float x_354677415) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);\n  const float e1 = 0.35;\n  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);\n  const float e2 = 0.5;\n  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);\n  const float e3 = 0.6;\n  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);\n  const float e4 = 0.7;\n  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);\n  const float e5 = 1.0;\n  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);\n  float a0 = smoothstep(e0,e1,x_354677415);\n  float a1 = smoothstep(e1,e2,x_354677415);\n  float a2 = smoothstep(e2,e3,x_354677415);\n  float a3 = smoothstep(e3,e4,x_354677415);\n  float a4 = smoothstep(e4,e5,x_354677415);\n  return max(mix(v0,v1,a0)*step(e0,x_354677415)*step(x_354677415,e1),\n    max(mix(v1,v2,a1)*step(e1,x_354677415)*step(x_354677415,e2),\n    max(mix(v2,v3,a2)*step(e2,x_354677415)*step(x_354677415,e3),\n    max(mix(v3,v4,a3)*step(e3,x_354677415)*step(x_354677415,e4),mix(v4,v5,a4)*step(e4,x_354677415)*step(x_354677415,e5)\n  ))));\n}\n\nvec4 jet (float x_3419531890) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\n  const float e1 = 0.125;\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\n  const float e2 = 0.375;\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\n  const float e3 = 0.625;\n  const vec4 v3 = vec4(1,1,0,1);\n  const float e4 = 0.875;\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\n  const float e5 = 1.0;\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\n  float a0 = smoothstep(e0,e1,x_3419531890);\n  float a1 = smoothstep(e1,e2,x_3419531890);\n  float a2 = smoothstep(e2,e3,x_3419531890);\n  float a3 = smoothstep(e3,e4,x_3419531890);\n  float a4 = smoothstep(e4,e5,x_3419531890);\n  return max(mix(v0,v1,a0)*step(e0,x_3419531890)*step(x_3419531890,e1),\n    max(mix(v1,v2,a1)*step(e1,x_3419531890)*step(x_3419531890,e2),\n    max(mix(v2,v3,a2)*step(e2,x_3419531890)*step(x_3419531890,e3),\n    max(mix(v3,v4,a3)*step(e3,x_3419531890)*step(x_3419531890,e4),mix(v4,v5,a4)*step(e4,x_3419531890)*step(x_3419531890,e5)\n  ))));\n}\n\nvec4 viridis (float x_98747489) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\n  float a0 = smoothstep(e0,e1,x_98747489);\n  float a1 = smoothstep(e1,e2,x_98747489);\n  float a2 = smoothstep(e2,e3,x_98747489);\n  float a3 = smoothstep(e3,e4,x_98747489);\n  float a4 = smoothstep(e4,e5,x_98747489);\n  float a5 = smoothstep(e5,e6,x_98747489);\n  float a6 = smoothstep(e6,e7,x_98747489);\n  float a7 = smoothstep(e7,e8,x_98747489);\n  return max(mix(v0,v1,a0)*step(e0,x_98747489)*step(x_98747489,e1),\n    max(mix(v1,v2,a1)*step(e1,x_98747489)*step(x_98747489,e2),\n    max(mix(v2,v3,a2)*step(e2,x_98747489)*step(x_98747489,e3),\n    max(mix(v3,v4,a3)*step(e3,x_98747489)*step(x_98747489,e4),\n    max(mix(v4,v5,a4)*step(e4,x_98747489)*step(x_98747489,e5),\n    max(mix(v5,v6,a5)*step(e5,x_98747489)*step(x_98747489,e6),\n    max(mix(v6,v7,a6)*step(e6,x_98747489)*step(x_98747489,e7),mix(v7,v8,a7)*step(e7,x_98747489)*step(x_98747489,e8)\n  )))))));\n}\n\nvec4 inferno (float x_2396186301) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\n  float a0 = smoothstep(e0,e1,x_2396186301);\n  float a1 = smoothstep(e1,e2,x_2396186301);\n  float a2 = smoothstep(e2,e3,x_2396186301);\n  float a3 = smoothstep(e3,e4,x_2396186301);\n  float a4 = smoothstep(e4,e5,x_2396186301);\n  float a5 = smoothstep(e5,e6,x_2396186301);\n  float a6 = smoothstep(e6,e7,x_2396186301);\n  float a7 = smoothstep(e7,e8,x_2396186301);\n  return max(mix(v0,v1,a0)*step(e0,x_2396186301)*step(x_2396186301,e1),\n    max(mix(v1,v2,a1)*step(e1,x_2396186301)*step(x_2396186301,e2),\n    max(mix(v2,v3,a2)*step(e2,x_2396186301)*step(x_2396186301,e3),\n    max(mix(v3,v4,a3)*step(e3,x_2396186301)*step(x_2396186301,e4),\n    max(mix(v4,v5,a4)*step(e4,x_2396186301)*step(x_2396186301,e5),\n    max(mix(v5,v6,a5)*step(e5,x_2396186301)*step(x_2396186301,e6),\n    max(mix(v6,v7,a6)*step(e6,x_2396186301)*step(x_2396186301,e7),mix(v7,v8,a7)*step(e7,x_2396186301)*step(x_2396186301,e8)\n  )))))));\n}\n\nvec4 magma (float x_4140671788) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\n  float a0 = smoothstep(e0,e1,x_4140671788);\n  float a1 = smoothstep(e1,e2,x_4140671788);\n  float a2 = smoothstep(e2,e3,x_4140671788);\n  float a3 = smoothstep(e3,e4,x_4140671788);\n  float a4 = smoothstep(e4,e5,x_4140671788);\n  float a5 = smoothstep(e5,e6,x_4140671788);\n  float a6 = smoothstep(e6,e7,x_4140671788);\n  float a7 = smoothstep(e7,e8,x_4140671788);\n  return max(mix(v0,v1,a0)*step(e0,x_4140671788)*step(x_4140671788,e1),\n    max(mix(v1,v2,a1)*step(e1,x_4140671788)*step(x_4140671788,e2),\n    max(mix(v2,v3,a2)*step(e2,x_4140671788)*step(x_4140671788,e3),\n    max(mix(v3,v4,a3)*step(e3,x_4140671788)*step(x_4140671788,e4),\n    max(mix(v4,v5,a4)*step(e4,x_4140671788)*step(x_4140671788,e5),\n    max(mix(v5,v6,a5)*step(e5,x_4140671788)*step(x_4140671788,e6),\n    max(mix(v6,v7,a6)*step(e6,x_4140671788)*step(x_4140671788,e7),mix(v7,v8,a7)*step(e7,x_4140671788)*step(x_4140671788,e8)\n  )))))));\n}\n\nvec4 plasma (float x_1580529385) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\n  float a0 = smoothstep(e0,e1,x_1580529385);\n  float a1 = smoothstep(e1,e2,x_1580529385);\n  float a2 = smoothstep(e2,e3,x_1580529385);\n  float a3 = smoothstep(e3,e4,x_1580529385);\n  float a4 = smoothstep(e4,e5,x_1580529385);\n  float a5 = smoothstep(e5,e6,x_1580529385);\n  float a6 = smoothstep(e6,e7,x_1580529385);\n  float a7 = smoothstep(e7,e8,x_1580529385);\n  return max(mix(v0,v1,a0)*step(e0,x_1580529385)*step(x_1580529385,e1),\n    max(mix(v1,v2,a1)*step(e1,x_1580529385)*step(x_1580529385,e2),\n    max(mix(v2,v3,a2)*step(e2,x_1580529385)*step(x_1580529385,e3),\n    max(mix(v3,v4,a3)*step(e3,x_1580529385)*step(x_1580529385,e4),\n    max(mix(v4,v5,a4)*step(e4,x_1580529385)*step(x_1580529385,e5),\n    max(mix(v5,v6,a5)*step(e5,x_1580529385)*step(x_1580529385,e6),\n    max(mix(v6,v7,a6)*step(e6,x_1580529385)*step(x_1580529385,e7),mix(v7,v8,a7)*step(e7,x_1580529385)*step(x_1580529385,e8)\n  )))))));\n}\n\n// The texture (GL.LUMINANCE & Uint8Array).\nuniform sampler2D uBitmapTexture;\n\n// What are the dimensions of the texture (width, height)?\nuniform vec2 uTextureSize;\n\n// How many consecutive pixels should be aggregated together along each axis?\nuniform vec2 uAggSize;\n\n// What are the values of the color scale sliders?\nuniform vec2 uColorScaleRange;\n\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  // Compute 1 pixel in texture coordinates\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\n  \n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\n\n  // Compute (x % aggSizeX, y % aggSizeY).\n  // These values will be the number of values to the left / above the current position to consider.\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\n\n  // Take the sum of values along each axis.\n  float intensitySum = 0.0;\n  vec2 offsetPixels = vec2(0.0, 0.0);\n\n  for(int i = 0; i < 16; i++) {\n    // Check to break outer loop early.\n    // Uniforms cannot be used as conditions in GLSL for loops.\n    if(float(i) >= uAggSize.y) {\n      // Done in the y direction.\n      break;\n    }\n\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\n\n    for(int j = 0; j < 16; j++) {\n      // Check to break inner loop early.\n      // Uniforms cannot be used as conditions in GLSL for loops.\n      if(float(j) >= uAggSize.x) {\n        // Done in the x direction.\n        break;\n      }\n\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\n    }\n  }\n  \n  // Compute the mean value.\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\n  \n  // Re-scale using the color scale slider values.\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n\n  gl_FragColor = __colormap(clamp(scaledIntensityMean, 0.0, 1.0));\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";
// CONCATENATED MODULE: ./src/layers/HeatmapBitmapLayer.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HeatmapBitmapLayer_HeatmapBitmapLayer; });
var defaultProps={image:{type:'object',value:null,async:true},colormap:{type:'string',value:'plasma',compare:true},bounds:{type:'array',value:[1,0,0,1],compare:true},aggSizeX:{type:'number',value:8.0,compare:true},aggSizeY:{type:'number',value:8.0,compare:true},colorScaleLo:{type:'number',value:0.0,compare:true},colorScaleHi:{type:'number',value:1.0,compare:true}};/**
 * A BitmapLayer that performs aggregation in the fragment shader,
 * and renders its texture from a Uint8Array rather than an ImageData.
 */var HeatmapBitmapLayer_HeatmapBitmapLayer=/*#__PURE__*/function(_BitmapLayer){Object(inherits["a" /* default */])(HeatmapBitmapLayer,_BitmapLayer);var _super=Object(createSuper["a" /* default */])(HeatmapBitmapLayer);function HeatmapBitmapLayer(){Object(classCallCheck["a" /* default */])(this,HeatmapBitmapLayer);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(HeatmapBitmapLayer,[{key:"_getShaders",/**
   * Copy of getShaders from Layer (grandparent, parent of BitmapLayer).
   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/core/src/lib/layer.js#L302
   * @param {object} shaders
   * @returns {object} Merged shaders.
   */ // eslint-disable-next-line no-underscore-dangle
value:function _getShaders(shaders){var _this=this;this.props.extensions.forEach(function(extension){// eslint-disable-next-line no-param-reassign
shaders=Object(core_["_mergeShaders"])(shaders,extension.getShaders.call(_this,extension));});return shaders;}},{key:"updateState",value:function updateState(args){Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(HeatmapBitmapLayer.prototype),"updateState",this).call(this,args);this.loadTexture(this.props.image);}/**
   * Need to override to provide custom shaders.
   */},{key:"getShaders",value:function getShaders(){var colormap=this.props.colormap;// eslint-disable-next-line no-underscore-dangle
return this._getShaders({vs:vertexShader,fs:fragmentShader.replace('__colormap',colormap),modules:[core_["project32"],core_["picking"]]});}/**
   * Need to override to provide additional uniform values.
   * Simplified by removing video-related code.
   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L173
   * @param {*} opts
   */},{key:"draw",value:function draw(opts){var uniforms=opts.uniforms;var _this$state=this.state,bitmapTexture=_this$state.bitmapTexture,model=_this$state.model;var _this$props=this.props,aggSizeX=_this$props.aggSizeX,aggSizeY=_this$props.aggSizeY,colorScaleLo=_this$props.colorScaleLo,colorScaleHi=_this$props.colorScaleHi;// Render the image
if(bitmapTexture&&model){model.setUniforms(Object.assign({},uniforms,{uBitmapTexture:bitmapTexture,uTextureSize:[heatmap_constants["l" /* TILE_SIZE */],heatmap_constants["l" /* TILE_SIZE */]],uAggSize:[aggSizeX,aggSizeY],uColorScaleRange:[colorScaleLo,colorScaleHi]})).draw();}}/**
   * Need to override to provide the custom DEFAULT_TEXTURE_PARAMETERS
   * object.
   * Simplified by removing video-related code.
   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L218
   * @param {Uint8Array} image
   */},{key:"loadTexture",value:function loadTexture(image){var gl=this.context.gl;if(this.state.bitmapTexture){this.state.bitmapTexture.delete();}if(image instanceof external_luma_gl_core_["Texture2D"]){this.setState({bitmapTexture:image});}else if(image){this.setState({bitmapTexture:new external_luma_gl_core_["Texture2D"](gl,{data:image,mipmaps:false,parameters:heatmap_constants["j" /* PIXELATED_TEXTURE_PARAMETERS */],// Each color contains a single luminance value.
// When sampled, rgb are all set to this luminance, alpha is 1.0.
// Reference: https://luma.gl/docs/api-reference/webgl/texture#texture-formats
format:constants_default.a.LUMINANCE,dataFormat:constants_default.a.LUMINANCE,type:constants_default.a.UNSIGNED_BYTE,width:heatmap_constants["l" /* TILE_SIZE */],height:heatmap_constants["l" /* TILE_SIZE */]})});}}}]);return HeatmapBitmapLayer;}(layers_["BitmapLayer"]);HeatmapBitmapLayer_HeatmapBitmapLayer.layerName='HeatmapBitmapLayer';HeatmapBitmapLayer_HeatmapBitmapLayer.defaultProps=defaultProps;

/***/ }),
/* 98 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Box");

/***/ }),
/* 99 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}
// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _objectWithoutProperties; });

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

/***/ }),
/* 100 */
/***/ (function(module, exports) {

module.exports = require("classnames");

/***/ }),
/* 101 */
/***/ (function(module, exports) {

module.exports = require("d3-quadtree");

/***/ }),
/* 102 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export useOptionStyles */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return useExpansionPanelStyles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return useExpansionPanelSummaryStyles; });
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__);
var useOptionStyles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["makeStyles"])(function(theme){return{paper:{backgroundColor:theme.palette.background.paper},span:{width:'70px',textAlign:'center',paddingLeft:'2px',paddingRight:'2px'},colors:{'&:hover':{backgroundColor:'transparent'},paddingLeft:'2px',paddingRight:'2px'},popper:{zIndex:4}};});var useExpansionPanelStyles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["makeStyles"])(function(theme){return{root:{paddingLeft:theme.spacing(1),paddingRight:theme.spacing(1),width:'100%',flexDirection:'column'}};});var useExpansionPanelSummaryStyles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__["makeStyles"])(function(theme){return{root:{marginBottom:theme.spacing(-2),top:theme.spacing(-1),paddingLeft:theme.spacing(1),paddingRight:theme.spacing(1),textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap'},expanded:{marginBottom:theme.spacing(-3),top:theme.spacing(-1),textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap'},expandIcon:{'&$expanded':{top:theme.spacing(-1.3)}}};});

/***/ }),
/* 103 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createCellsQuadTree; });
/* harmony import */ var d3_quadtree__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(101);
/* harmony import */ var d3_quadtree__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(d3_quadtree__WEBPACK_IMPORTED_MODULE_0__);
/**
 * Create a d3-quadtree object for cells data points.
 * @param {array} cellsEntries Array of [cellId, cell] tuples,
 * resulting from running Object.entries on the cells object.
 * @param {function} getCellCoords Given a cell object, return the
 * spatial/scatterplot coordinates [x, y].
 * @returns {object} Quadtree instance.
 */function createCellsQuadTree(cellsEntries,getCellCoords){// Use the cellsEntries variable since it is already
// an array, converted by Object.entries().
if(!cellsEntries){// Abort if the cells data is not yet available.
return null;}var tree=Object(d3_quadtree__WEBPACK_IMPORTED_MODULE_0__["quadtree"])().x(function(d){return getCellCoords(d[1])[0];}).y(function(d){return getCellCoords(d[1])[1];}).addAll(cellsEntries);return tree;}

/***/ }),
/* 104 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptionsContainer; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_Box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var _material_ui_core_Box__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Box__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_Table__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(118);
/* harmony import */ var _material_ui_core_Table__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Table__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(119);
/* harmony import */ var _material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_TableContainer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(120);
/* harmony import */ var _material_ui_core_TableContainer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_TableContainer__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(81);
function OptionsContainer(props){var children=props.children;var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_5__[/* useStyles */ "a"])();return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Box__WEBPACK_IMPORTED_MODULE_1___default.a,{className:classes.box},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_TableContainer__WEBPACK_IMPORTED_MODULE_4___default.a,{className:classes.tableContainer},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Table__WEBPACK_IMPORTED_MODULE_2___default.a,{className:classes.table,size:"small"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_3___default.a,null,children))));}

/***/ }),
/* 105 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CellColorEncodingOption; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_Select__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(77);
/* harmony import */ var _material_ui_core_Select__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(54);
/* harmony import */ var _material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82);
/* harmony import */ var _material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15);
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(81);
function CellColorEncodingOption(props){var observationsLabel=props.observationsLabel,cellColorEncoding=props.cellColorEncoding,setCellColorEncoding=props.setCellColorEncoding;var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_5__[/* useStyles */ "a"])();var observationsLabelNice=Object(_utils__WEBPACK_IMPORTED_MODULE_4__[/* capitalize */ "a"])(observationsLabel);function handleColorEncodingChange(event){setCellColorEncoding(event.target.value);}return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_3___default.a,null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_2___default.a,{className:classes.labelCell,htmlFor:"cell-color-encoding-select"},observationsLabelNice," Color Encoding"),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_2___default.a,{className:classes.inputCell},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_1___default.a,{native:true,className:classes.select,value:cellColorEncoding,onChange:handleColorEncodingChange,inputProps:{id:'cell-color-encoding-select'}},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option",{value:"cellSetSelection"},"Cell Sets"),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option",{value:"geneSelection"},"Gene Expression"))));}

/***/ }),
/* 106 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(40);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "deck.gl"
var external_deck_gl_ = __webpack_require__(22);
var external_deck_gl_default = /*#__PURE__*/__webpack_require__.n(external_deck_gl_);

// EXTERNAL MODULE: external "nebula.gl"
var external_nebula_gl_ = __webpack_require__(48);

// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/tools/near_me.svg
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



var _ref2 = /*#__PURE__*/external_react_["createElement"]("path", {
  fill: "none",
  d: "M0 0h24v24H0V0z"
});

var _ref3 = /*#__PURE__*/external_react_["createElement"]("path", {
  d: "M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z"
});

function SvgNearMe(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = _objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", _extends({
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, _ref2, _ref3);
}

var ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgNearMe, _extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var near_me = (__webpack_require__.p + "static/media/near_me.2a308adc.svg");

// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/tools/selection_rectangle.svg
function selection_rectangle_extends() { selection_rectangle_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return selection_rectangle_extends.apply(this, arguments); }

function selection_rectangle_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = selection_rectangle_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function selection_rectangle_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



var selection_rectangle_ref2 = /*#__PURE__*/external_react_["createElement"]("path", {
  d: "       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     "
});

function SvgSelectionRectangle(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = selection_rectangle_objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", selection_rectangle_extends({
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, selection_rectangle_ref2);
}

var selection_rectangle_ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgSelectionRectangle, selection_rectangle_extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var selection_rectangle = (__webpack_require__.p + "static/media/selection_rectangle.aa477261.svg");

// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/tools/selection_lasso.svg
function selection_lasso_extends() { selection_lasso_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return selection_lasso_extends.apply(this, arguments); }

function selection_lasso_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = selection_lasso_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function selection_lasso_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



function SvgSelectionLasso(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = selection_lasso_objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", selection_lasso_extends({
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, /*#__PURE__*/external_react_["createElement"]("g", {
    transform: "translate(0,3)"
  }, /*#__PURE__*/external_react_["createElement"]("path", {
    style: {
      strokeWidth: 0.343565
    },
    d: "M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z",
    id: "path10"
  })));
}

var selection_lasso_ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgSelectionLasso, selection_lasso_extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var selection_lasso = (__webpack_require__.p + "static/media/selection_lasso.00e80a33.svg");

// CONCATENATED MODULE: ./src/components/shared-spatial-scatterplot/ToolMenu.js
function IconButton(props){var alt=props.alt,onClick=props.onClick,isActive=props.isActive,children=props.children;var inactive='btn btn-outline-secondary mr-2 icon';var active="".concat(inactive," active");return/*#__PURE__*/external_react_default.a.createElement("button",{className:isActive?active:inactive,onClick:onClick,type:"button",title:alt},children);}function ToolMenu(props){var setActiveTool=props.setActiveTool,activeTool=props.activeTool,_props$visibleTools=props.visibleTools,visibleTools=_props$visibleTools===void 0?{pan:true,selectRectangle:true,selectLasso:true}:_props$visibleTools;return/*#__PURE__*/external_react_default.a.createElement("div",{className:"tool"},visibleTools.pan&&/*#__PURE__*/external_react_default.a.createElement(IconButton,{alt:"pointer tool",onClick:function onClick(){return setActiveTool(null);},isActive:activeTool===null},/*#__PURE__*/external_react_default.a.createElement(ForwardRef,null)),visibleTools.selectRectangle&&/*#__PURE__*/external_react_default.a.createElement(IconButton,{alt:"select rectangle",onClick:function onClick(){return setActiveTool(external_nebula_gl_["SELECTION_TYPE"].RECTANGLE);},isActive:activeTool===external_nebula_gl_["SELECTION_TYPE"].RECTANGLE},/*#__PURE__*/external_react_default.a.createElement(selection_rectangle_ForwardRef,null)),visibleTools.selectLasso&&/*#__PURE__*/external_react_default.a.createElement(IconButton,{alt:"select lasso",onClick:function onClick(){return setActiveTool(external_nebula_gl_["SELECTION_TYPE"].POLYGON);},isActive:activeTool===external_nebula_gl_["SELECTION_TYPE"].POLYGON},/*#__PURE__*/external_react_default.a.createElement(selection_lasso_ForwardRef,null)));}
// EXTERNAL MODULE: ./src/components/utils.js
var utils = __webpack_require__(8);

// CONCATENATED MODULE: ./src/components/shared-spatial-scatterplot/cursor.js
var getCursorWithTool=function getCursorWithTool(){return'crosshair';};var getCursor=function getCursor(interactionState){return interactionState.isDragging?'grabbing':'default';};
// CONCATENATED MODULE: ./src/components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AbstractSpatialOrScatterplot_AbstractSpatialOrScatterplot; });
/**
 * Abstract class component intended to be inherited by
 * the Spatial and Scatterplot class components.
 * Contains a common constructor, common DeckGL callbacks,
 * and common render function.
 */var AbstractSpatialOrScatterplot_AbstractSpatialOrScatterplot=/*#__PURE__*/function(_PureComponent){Object(inherits["a" /* default */])(AbstractSpatialOrScatterplot,_PureComponent);var _super=Object(createSuper["a" /* default */])(AbstractSpatialOrScatterplot);function AbstractSpatialOrScatterplot(props){var _this;Object(classCallCheck["a" /* default */])(this,AbstractSpatialOrScatterplot);_this=_super.call(this,props);_this.state={gl:null,tool:null};_this.viewport=null;_this.onViewStateChange=_this.onViewStateChange.bind(Object(assertThisInitialized["a" /* default */])(_this));_this.onInitializeViewInfo=_this.onInitializeViewInfo.bind(Object(assertThisInitialized["a" /* default */])(_this));_this.onWebGLInitialized=_this.onWebGLInitialized.bind(Object(assertThisInitialized["a" /* default */])(_this));_this.onToolChange=_this.onToolChange.bind(Object(assertThisInitialized["a" /* default */])(_this));return _this;}/**
   * Called by DeckGL upon a viewState change,
   * for example zoom or pan interaction.
   * Emit the new viewState to the `setViewState`
   * handler prop.
   * @param {object} params
   * @param {object} params.viewState The next deck.gl viewState.
   */Object(createClass["a" /* default */])(AbstractSpatialOrScatterplot,[{key:"onViewStateChange",value:function onViewStateChange(_ref){var nextViewState=_ref.viewState;var setViewState=this.props.setViewState;setViewState(nextViewState);}/**
   * Called by DeckGL upon viewport
   * initialization.
   * @param {object} viewState
   * @param {object} viewState.viewport
   */},{key:"onInitializeViewInfo",value:function onInitializeViewInfo(_ref2){var viewport=_ref2.viewport;this.viewport=viewport;}/**
   * Called by DeckGL upon initialization,
   * helps to understand when to pass layers
   * to the DeckGL component.
   * @param {object} gl The WebGL context object.
   */},{key:"onWebGLInitialized",value:function onWebGLInitialized(gl){this.setState({gl:gl});}/**
   * Called by the ToolMenu buttons.
   * Emits the new tool value to the
   * `onToolChange` prop.
   * @param {string} tool Name of tool.
   */},{key:"onToolChange",value:function onToolChange(tool){var onToolChangeProp=this.props.onToolChange;this.setState({tool:tool});if(onToolChangeProp){onToolChangeProp(tool);}}/**
   * Create the DeckGL layers.
   * @returns {object[]} Array of
   * DeckGL layer objects.
   * Intended to be overriden by descendants.
   */ // eslint-disable-next-line class-methods-use-this
},{key:"getLayers",value:function getLayers(){return[];}/**
   * Emits a function to project from the
   * cell ID space to the scatterplot or
   * spatial coordinate space, via the
   * `updateViewInfo` prop.
   */},{key:"viewInfoDidUpdate",value:function viewInfoDidUpdate(getCellCoords){var _this$props=this.props,updateViewInfo=_this$props.updateViewInfo,cells=_this$props.cells,uuid=_this$props.uuid;var viewport=this.viewport;if(updateViewInfo&&viewport){updateViewInfo({uuid:uuid,project:function project(cellId){var cell=cells[cellId];try{var _getCellCoords=getCellCoords(cell),_getCellCoords2=Object(slicedToArray["a" /* default */])(_getCellCoords,2),positionX=_getCellCoords2[0],positionY=_getCellCoords2[1];return viewport.project([positionX,positionY]);}catch(e){return[null,null];}}});}}/**
   * Intended to be overriden by descendants.
   */},{key:"componentDidUpdate",value:function componentDidUpdate(){}/**
   * A common render function for both Spatial
   * and Scatterplot components.
   */},{key:"render",value:function render(){var _this$props2=this.props,deckRef=_this$props2.deckRef,viewState=_this$props2.viewState,uuid=_this$props2.uuid;var _this$state=this.state,gl=_this$state.gl,tool=_this$state.tool;var layers=this.getLayers();var showCellSelectionTools=this.cellsLayer!==null;var showPanTool=this.cellsLayer!==null;return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement(ToolMenu,{activeTool:tool,setActiveTool:this.onToolChange,visibleTools:{pan:showPanTool,selectRectangle:showCellSelectionTools,selectLasso:showCellSelectionTools}}),/*#__PURE__*/external_react_default.a.createElement(external_deck_gl_default.a,{id:"deckgl-overlay-".concat(uuid),ref:deckRef,views:[new external_deck_gl_["OrthographicView"]({id:'ortho'})]// id is a fix for https://github.com/uber/deck.gl/issues/3259
,layers:gl&&viewState.target.every(function(i){return typeof i==='number';})?layers:[],glOptions:utils["c" /* DEFAULT_GL_OPTIONS */],onWebGLInitialized:this.onWebGLInitialized,onViewStateChange:this.onViewStateChange,viewState:viewState,controller:tool?{dragPan:false}:true,getCursor:tool?getCursorWithTool:getCursor},this.onInitializeViewInfo));}}]);return AbstractSpatialOrScatterplot;}(external_react_["PureComponent"]);

/***/ }),
/* 107 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(30);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var deck_gl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(22);
/* harmony import */ var deck_gl__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(deck_gl__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var math_gl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(60);
/* harmony import */ var math_gl__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(math_gl__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(27);
/* harmony import */ var _hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _layers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(91);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(8);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(44);
/* harmony import */ var _shared_spatial_scatterplot_AbstractSpatialOrScatterplot__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(106);
/* harmony import */ var _shared_spatial_scatterplot_quadtree__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(103);
var CELLS_LAYER_ID='cells-layer';var MOLECULES_LAYER_ID='molecules-layer';var NEIGHBORHOODS_LAYER_ID='neighborhoods-layer';// Default getter function props.
var defaultGetCellCoords=function defaultGetCellCoords(cell){return cell.xy;};var makeDefaultGetCellPolygon=function makeDefaultGetCellPolygon(radius){return function(cellEntry){var _cell$poly;var cell=cellEntry[1];return((_cell$poly=cell.poly)===null||_cell$poly===void 0?void 0:_cell$poly.length)?cell.poly:Object(_utils__WEBPACK_IMPORTED_MODULE_16__[/* square */ "g"])(cell.xy[0],cell.xy[1],radius);};};var makeDefaultGetCellColors=function makeDefaultGetCellColors(cellColors){return function(cellEntry){return cellColors&&cellColors.get(cellEntry[0])||_utils__WEBPACK_IMPORTED_MODULE_15__[/* DEFAULT_COLOR */ "b"];};};var makeDefaultGetCellIsSelected=function makeDefaultGetCellIsSelected(cellSelection){return function(cellEntry){return cellSelection?cellSelection.includes(cellEntry[0]):true// If nothing is selected, everything is selected.
;};};/**
 * React component which expresses the spatial relationships between cells and molecules.
 * @param {object} props
 * @param {string} props.uuid A unique identifier for this component,
 * used to determine when to show tooltips vs. crosshairs.
 * @param {number} props.height Height of the DeckGL canvas, used when
 * rendering the scale bar layer.
 * @param {number} props.width Width of the DeckGL canvas, used when
 * rendering the scale bar layer.
 * @param {object} props.viewState The DeckGL viewState object.
 * @param {function} props.setViewState A handler for updating the DeckGL
 * viewState object.
 * @param {object} props.molecules Molecules data.
 * @param {object} props.cells Cells data.
 * @param {object} props.neighborhoods Neighborhoods data.
 * @param {number} props.lineWidthScale Width of cell border in view space (deck.gl).
 * @param {number} props.lineWidthMaxPixels Max width of the cell border in pixels (deck.gl).
 * @param {object} props.imageLayerLoaders An object mapping raster layer index to Viv loader
 * instances.
 * @param {object} props.cellColors Map from cell IDs to colors [r, g, b].
 * @param {function} props.getCellCoords Getter function for cell coordinates
 * (used by the selection layer).
 * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.
 * @param {function} props.getCellPolygon Getter function for cell polygons.
 * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.
 * @param {function} props.getMoleculeColor
 * @param {function} props.getMoleculePosition
 * @param {function} props.getNeighborhoodPolygon
 * @param {function} props.updateViewInfo Handler for DeckGL viewport updates,
 * used when rendering tooltips and crosshairs.
 * @param {function} props.onCellClick Getter function for cell layer onClick.
 */var Spatial=/*#__PURE__*/function(_AbstractSpatialOrSca){Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"])(Spatial,_AbstractSpatialOrSca);var _super=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"])(Spatial);function Spatial(props){var _this;Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(this,Spatial);_this=_super.call(this,props);// To avoid storing large arrays/objects
// in React state, this component
// uses instance variables.
// All instance variables used in this class:
_this.cellsEntries=[];_this.moleculesEntries=[];_this.cellsQuadTree=null;_this.cellsLayer=null;_this.moleculesLayer=null;_this.neighborhoodsLayer=null;_this.imageLayers=[];_this.layerLoaderSelections={};// Initialize data and layers.
_this.onUpdateCellsData();_this.onUpdateCellsLayer();_this.onUpdateMoleculesData();_this.onUpdateMoleculesLayer();_this.onUpdateNeighborhoodsData();_this.onUpdateNeighborhoodsLayer();_this.onUpdateImages();return _this;}Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"])(Spatial,[{key:"createCellsLayer",value:function createCellsLayer(layerDef){var radius=layerDef.radius,stroked=layerDef.stroked,visible=layerDef.visible,opacity=layerDef.opacity;var _this$props=this.props,cellFilter=_this$props.cellFilter,cellSelection=_this$props.cellSelection,setCellHighlight=_this$props.setCellHighlight,setComponentHover=_this$props.setComponentHover,_this$props$getCellIs=_this$props.getCellIsSelected,getCellIsSelected=_this$props$getCellIs===void 0?makeDefaultGetCellIsSelected(cellSelection):_this$props$getCellIs,cellColors=_this$props.cellColors,_this$props$getCellCo=_this$props.getCellColor,getCellColor=_this$props$getCellCo===void 0?makeDefaultGetCellColors(cellColors):_this$props$getCellCo,_this$props$getCellPo=_this$props.getCellPolygon,getCellPolygon=_this$props$getCellPo===void 0?makeDefaultGetCellPolygon(radius):_this$props$getCellPo,onCellClick=_this$props.onCellClick,_this$props$lineWidth=_this$props.lineWidthScale,lineWidthScale=_this$props$lineWidth===void 0?10:_this$props$lineWidth,_this$props$lineWidth2=_this$props.lineWidthMaxPixels,lineWidthMaxPixels=_this$props$lineWidth2===void 0?2:_this$props$lineWidth2;var cellsEntries=this.cellsEntries;var filteredCellsEntries=cellFilter?cellsEntries.filter(function(cellEntry){return cellFilter.includes(cellEntry[0]);}):cellsEntries;// Graphics rendering has the y-axis positive going south,
// so we need to flip it for rendering tooltips.
var flipYTooltip=true;return new _layers__WEBPACK_IMPORTED_MODULE_14__[/* SelectablePolygonLayer */ "a"](Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({id:CELLS_LAYER_ID,backgroundColor:[0,0,0],isSelected:getCellIsSelected,getPolygon:getCellPolygon,updateTriggers:{getFillColor:[opacity],getLineWidth:[stroked]},getFillColor:function getFillColor(cellEntry){var color=getCellColor(cellEntry);color[3]=opacity*255;return color;},getLineColor:function getLineColor(cellEntry){var color=getCellColor(cellEntry);color[3]=255;return color;},onClick:function onClick(info){if(onCellClick){onCellClick(info);}},visible:visible,getLineWidth:stroked?1:0,lineWidthScale:lineWidthScale,lineWidthMaxPixels:lineWidthMaxPixels},Object(_utils__WEBPACK_IMPORTED_MODULE_15__[/* cellLayerDefaultProps */ "g"])(filteredCellsEntries,undefined,setCellHighlight,setComponentHover,flipYTooltip)));}},{key:"createMoleculesLayer",value:function createMoleculesLayer(layerDef){var _this$props2=this.props,setMoleculeHighlight=_this$props2.setMoleculeHighlight,_this$props2$getMolec=_this$props2.getMoleculeColor,getMoleculeColor=_this$props2$getMolec===void 0?function(d){return _utils__WEBPACK_IMPORTED_MODULE_15__[/* PALETTE */ "d"][d[2]%_utils__WEBPACK_IMPORTED_MODULE_15__[/* PALETTE */ "d"].length];}:_this$props2$getMolec,_this$props2$getMolec2=_this$props2.getMoleculePosition,getMoleculePosition=_this$props2$getMolec2===void 0?function(d){return[d[0],d[1],0];}:_this$props2$getMolec2;var moleculesEntries=this.moleculesEntries;return new deck_gl__WEBPACK_IMPORTED_MODULE_11__["ScatterplotLayer"]({id:MOLECULES_LAYER_ID,coordinateSystem:deck_gl__WEBPACK_IMPORTED_MODULE_11__["COORDINATE_SYSTEM"].CARTESIAN,data:moleculesEntries,pickable:true,autoHighlight:true,radiusMaxPixels:3,opacity:layerDef.opacity,visible:layerDef.visible,getRadius:layerDef.radius,getPosition:getMoleculePosition,getLineColor:getMoleculeColor,getFillColor:getMoleculeColor,onHover:function onHover(info){if(setMoleculeHighlight){if(info.object){setMoleculeHighlight(info.object[3]);}else{setMoleculeHighlight(null);}}}});}},{key:"createNeighborhoodsLayer",value:function createNeighborhoodsLayer(layerDef){var _this$props$getNeighb=this.props.getNeighborhoodPolygon,getNeighborhoodPolygon=_this$props$getNeighb===void 0?function(neighborhoodsEntry){var neighborhood=neighborhoodsEntry[1];return neighborhood.poly;}:_this$props$getNeighb;var neighborhoodsEntries=this.neighborhoodsEntries;return new deck_gl__WEBPACK_IMPORTED_MODULE_11__["PolygonLayer"]({id:NEIGHBORHOODS_LAYER_ID,getPolygon:getNeighborhoodPolygon,coordinateSystem:deck_gl__WEBPACK_IMPORTED_MODULE_11__["COORDINATE_SYSTEM"].CARTESIAN,data:neighborhoodsEntries,pickable:true,autoHighlight:true,stroked:true,filled:false,getElevation:0,getLineWidth:10,visible:layerDef.visible});}},{key:"createSelectionLayers",value:function createSelectionLayers(){var _this$props3=this.props,viewState=_this$props3.viewState,_this$props3$getCellC=_this$props3.getCellCoords,getCellCoords=_this$props3$getCellC===void 0?defaultGetCellCoords:_this$props3$getCellC,setCellSelection=_this$props3.setCellSelection;var tool=this.state.tool;var cellsQuadTree=this.cellsQuadTree;return Object(_layers__WEBPACK_IMPORTED_MODULE_14__[/* getSelectionLayers */ "c"])(tool,viewState.zoom,CELLS_LAYER_ID,getCellCoords,setCellSelection,cellsQuadTree);}},{key:"createScaleBarLayer",value:function createScaleBarLayer(){var _this$props4=this.props,viewState=_this$props4.viewState,width=_this$props4.width,height=_this$props4.height,_this$props4$imageLay=_this$props4.imageLayerLoaders,imageLayerLoaders=_this$props4$imageLay===void 0?{}:_this$props4$imageLay;// Just get the first layer/loader since they should all be spatially
// resolved and therefore have the same unit size scale.
var loaders=Object.values(imageLayerLoaders);if(!viewState||!width||!height||loaders.length<1)return null;var loader=loaders[0];if(!loader)return null;var physicalSizes=loader.physicalSizes;if(physicalSizes){var x=physicalSizes.x;var unit=x.unit,value=x.value;if(unit&&value){return new _hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_13__["ScaleBarLayer"]({id:'scalebar-layer',loader:loader,unit:unit,size:value,viewState:Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},viewState,{width:width,height:height})});}return null;}return null;}},{key:"createImageLayer",value:function createImageLayer(rawLayerDef,loader,i){var layerDef=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])({},rawLayerDef,{channels:rawLayerDef.channels.filter(function(channel){return channel.selection&&channel.color&&channel.slider;})});// We need to keep the same loaderSelection array reference,
// otherwise the Viv layer will not be re-used as we want it to,
// since loaderSelection is one of its `updateTriggers`.
// Reference: https://github.com/hms-dbmi/viv/blob/ad86d0f/src/layers/MultiscaleImageLayer/MultiscaleImageLayer.js#L127
var loaderSelection;var nextLoaderSelection=layerDef.channels.map(function(c){return c.selection;});var prevLoaderSelection=this.layerLoaderSelections[layerDef.index];if(lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(prevLoaderSelection,nextLoaderSelection)){loaderSelection=prevLoaderSelection;}else{loaderSelection=nextLoaderSelection;this.layerLoaderSelections[layerDef.index]=nextLoaderSelection;}var layerProps={colormap:layerDef.colormap,opacity:layerDef.opacity,transparentColor:layerDef.transparentColor,colors:layerDef.channels.map(function(c){return c.color;}),sliders:layerDef.channels.map(function(c){return c.slider;}),visibilities:layerDef.channels.map(function(c){return c.visible;})};if(!loader||!layerProps)return null;var scale=loader.scale,translate=loader.translate,isPyramid=loader.isPyramid;var modelMatrix;if(scale&&translate){modelMatrix=new math_gl__WEBPACK_IMPORTED_MODULE_12__["Matrix4"]().translate([translate.x,translate.y,0]).scale(scale);}else if(layerDef.modelMatrix){// eslint-disable-next-line prefer-destructuring
modelMatrix=new math_gl__WEBPACK_IMPORTED_MODULE_12__["Matrix4"](layerDef.modelMatrix);}var Layer=isPyramid?_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_13__["MultiscaleImageLayer"]:_hms_dbmi_viv__WEBPACK_IMPORTED_MODULE_13__["ImageLayer"];return new Layer({loader:loader,id:"image-layer-".concat(layerDef.index,"-").concat(i),colorValues:layerProps.colors,sliderValues:layerProps.sliders,loaderSelection:loaderSelection,channelIsOn:layerProps.visibilities,opacity:layerProps.opacity,colormap:layerProps.colormap?layerProps.colormap:'',modelMatrix:modelMatrix,transparentColor:layerProps.transparentColor});}},{key:"createImageLayers",value:function createImageLayers(){var _this2=this;var _this$props5=this.props,layers=_this$props5.layers,_this$props5$imageLay=_this$props5.imageLayerLoaders,imageLayerLoaders=_this$props5$imageLay===void 0?{}:_this$props5$imageLay;return(layers||[]).filter(function(layer){return layer.type==='raster';}).map(function(layer,i){return _this2.createImageLayer(layer,imageLayerLoaders[layer.index],i);});}},{key:"getLayers",value:function getLayers(){var imageLayers=this.imageLayers,cellsLayer=this.cellsLayer,neighborhoodsLayer=this.neighborhoodsLayer,moleculesLayer=this.moleculesLayer;return[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(imageLayers),[cellsLayer,neighborhoodsLayer,moleculesLayer,this.createScaleBarLayer()],Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(this.createSelectionLayers()));}},{key:"onUpdateCellsData",value:function onUpdateCellsData(){var _this$props6=this.props,_this$props6$cells=_this$props6.cells,cells=_this$props6$cells===void 0?{}:_this$props6$cells,_this$props6$getCellC=_this$props6.getCellCoords,getCellCoords=_this$props6$getCellC===void 0?defaultGetCellCoords:_this$props6$getCellC;var cellsEntries=Object.entries(cells);this.cellsEntries=cellsEntries;this.cellsQuadTree=Object(_shared_spatial_scatterplot_quadtree__WEBPACK_IMPORTED_MODULE_18__[/* createCellsQuadTree */ "a"])(cellsEntries,getCellCoords);}},{key:"onUpdateCellsLayer",value:function onUpdateCellsLayer(){var layers=this.props.layers;var layerDef=(layers||[]).find(function(layer){return layer.type==='cells';});if(layerDef){this.cellsLayer=this.createCellsLayer(layerDef);}else{this.cellsLayer=null;}}},{key:"onUpdateMoleculesData",value:function onUpdateMoleculesData(){var _this$props$molecules=this.props.molecules,molecules=_this$props$molecules===void 0?{}:_this$props$molecules;var moleculesEntries=Object.entries(molecules).flatMap(function(_ref,index){var _ref2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref,2),molecule=_ref2[0],coords=_ref2[1];return coords.map(function(_ref3){var _ref4=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_ref3,2),x=_ref4[0],y=_ref4[1];return[x,y,index,molecule];});});this.moleculesEntries=moleculesEntries;}},{key:"onUpdateMoleculesLayer",value:function onUpdateMoleculesLayer(){var layers=this.props.layers;var layerDef=(layers||[]).find(function(layer){return layer.type==='molecules';});if(layerDef){this.moleculesLayer=this.createMoleculesLayer(layerDef);}else{this.moleculesLayer=null;}}},{key:"onUpdateNeighborhoodsData",value:function onUpdateNeighborhoodsData(){var _this$props$neighborh=this.props.neighborhoods,neighborhoods=_this$props$neighborh===void 0?{}:_this$props$neighborh;var neighborhoodsEntries=Object.entries(neighborhoods);this.neighborhoodsEntries=neighborhoodsEntries;}},{key:"onUpdateNeighborhoodsLayer",value:function onUpdateNeighborhoodsLayer(){var layers=this.props.layers;var layerDef=(layers||[]).find(function(layer){return layer.type==='neighborhoods';});if(layerDef){this.neighborhoodsLayer=this.createNeighborhoodsLayer(layerDef);}else{this.neighborhoodsLayer=null;}}},{key:"onUpdateImages",value:function onUpdateImages(){this.imageLayers=this.createImageLayers();}},{key:"viewInfoDidUpdate",value:function viewInfoDidUpdate(){var _this$props$getCellCo2=this.props.getCellCoords,getCellCoords=_this$props$getCellCo2===void 0?defaultGetCellCoords:_this$props$getCellCo2;Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"])(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"])(Spatial.prototype),"viewInfoDidUpdate",this).call(this,getCellCoords);}/**
   * Here, asynchronously check whether props have
   * updated which require re-computing memoized variables,
   * followed by a re-render.
   * This function does not follow React conventions or paradigms,
   * it is only implemented this way to try to squeeze out
   * performance.
   * @param {object} prevProps The previous props to diff against.
   */},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this3=this;this.viewInfoDidUpdate();var shallowDiff=function shallowDiff(propName){return prevProps[propName]!==_this3.props[propName];};if(['cells'].some(shallowDiff)){// Cells data changed.
this.onUpdateCellsData();this.forceUpdate();}if(['layers','cells','cellFilter','cellSelection','cellColors'].some(shallowDiff)){// Cells layer props changed.
this.onUpdateCellsLayer();this.forceUpdate();}if(['molecules'].some(shallowDiff)){// Molecules data changed.
this.onUpdateMoleculesData();this.forceUpdate();}if(['layers','molecules'].some(shallowDiff)){// Molecules layer props changed.
this.onUpdateMoleculesLayer();this.forceUpdate();}if(['neighborhoods'].some(shallowDiff)){// Neighborhoods data changed.
this.onUpdateNeighborhoodsData();this.forceUpdate();}if(['layers','neighborhoods'].some(shallowDiff)){// Neighborhoods layer props changed.
this.onUpdateNeighborhoodsLayer();this.forceUpdate();}if(['layers','imageLayerLoaders'].some(shallowDiff)){// Image layers changed.
this.onUpdateImages();this.forceUpdate();}}// render() is implemented in the abstract parent class.
}]);return Spatial;}(_shared_spatial_scatterplot_AbstractSpatialOrScatterplot__WEBPACK_IMPORTED_MODULE_17__[/* default */ "a"]);/**
 * Need this wrapper function here,
 * since we want to pass a forwardRef
 * so that outer components can
 * access the grandchild DeckGL ref,
 * but we are using a class component.
 */var SpatialWrapper=Object(react__WEBPACK_IMPORTED_MODULE_9__["forwardRef"])(function(props,deckRef){return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(Spatial,Object.assign({},props,{deckRef:deckRef}));});/* harmony default export */ __webpack_exports__["a"] = (SpatialWrapper);

/***/ }),
/* 108 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "uuid/v4"
var v4_ = __webpack_require__(53);
var v4_default = /*#__PURE__*/__webpack_require__.n(v4_);

// EXTERNAL MODULE: external "deck.gl"
var external_deck_gl_ = __webpack_require__(22);
var external_deck_gl_default = /*#__PURE__*/__webpack_require__.n(external_deck_gl_);

// EXTERNAL MODULE: external "@deck.gl/core"
var core_ = __webpack_require__(26);

// EXTERNAL MODULE: external "lodash/range"
var range_ = __webpack_require__(47);
var range_default = /*#__PURE__*/__webpack_require__.n(range_);

// EXTERNAL MODULE: external "lodash/clamp"
var clamp_ = __webpack_require__(46);
var clamp_default = /*#__PURE__*/__webpack_require__.n(clamp_);

// EXTERNAL MODULE: external "lodash/isEqual"
var isEqual_ = __webpack_require__(13);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual_);

// EXTERNAL MODULE: external "d3-array"
var external_d3_array_ = __webpack_require__(38);

// EXTERNAL MODULE: external "@material-ui/core/Box"
var Box_ = __webpack_require__(98);
var Box_default = /*#__PURE__*/__webpack_require__.n(Box_);

// EXTERNAL MODULE: external "@material-ui/core/Slider"
var Slider_ = __webpack_require__(59);
var Slider_default = /*#__PURE__*/__webpack_require__.n(Slider_);

// EXTERNAL MODULE: external "@material-ui/core/styles"
var styles_ = __webpack_require__(17);

// CONCATENATED MODULE: ./src/components/heatmap/HeatmapControls.js
var useStyles=Object(styles_["makeStyles"])(function(){return{box:{opacity:0.5,height:'80px',bottom:0,right:0,backgroundColor:'transparent',position:'absolute',padding:'10px 0',transition:'opacity 0.1s','&:hover':{opacity:1.0}}};});function HeatmapControls(props){var colorScaleLo=props.colorScaleLo,colorScaleHi=props.colorScaleHi,onColorScaleChange=props.onColorScaleChange;var classes=useStyles();return/*#__PURE__*/external_react_default.a.createElement(Box_default.a,{component:"div",m:1,className:classes.box},/*#__PURE__*/external_react_default.a.createElement(Slider_default.a,{orientation:"vertical",value:[colorScaleLo,colorScaleHi],onChange:onColorScaleChange,"aria-labelledby":"colorscale-slider",min:0.0,max:1.0,step:0.005}));}
// EXTERNAL MODULE: ./src/layers/HeatmapCompositeTextLayer.js
var HeatmapCompositeTextLayer = __webpack_require__(95);

// EXTERNAL MODULE: ./src/layers/PixelatedBitmapLayer.js
var PixelatedBitmapLayer = __webpack_require__(96);

// EXTERNAL MODULE: ./src/layers/HeatmapBitmapLayer.js + 1 modules
var HeatmapBitmapLayer = __webpack_require__(97);

// EXTERNAL MODULE: ./src/components/utils.js
var utils = __webpack_require__(8);

// EXTERNAL MODULE: ./src/components/heatmap/heatmap.worker.js
var heatmap_worker = __webpack_require__(138);
var heatmap_worker_default = /*#__PURE__*/__webpack_require__.n(heatmap_worker);

// EXTERNAL MODULE: ./src/layers/heatmap-constants.js
var heatmap_constants = __webpack_require__(6);

// CONCATENATED MODULE: ./src/components/heatmap/utils.js
function getGeneByCellTile(view,_ref){var tileSize=_ref.tileSize,tileI=_ref.tileI,tileJ=_ref.tileJ,numCells=_ref.numCells,numGenes=_ref.numGenes,cellOrdering=_ref.cellOrdering,cells=_ref.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(j){// Need to iterate over cells in the outer loop.
cellI=tileJ*tileSize+j;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(i){geneI=tileI*tileSize+i;value=view[sortedCellI*numGenes+geneI];offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}function getCellByGeneTile(view,_ref2){var tileSize=_ref2.tileSize,tileI=_ref2.tileI,tileJ=_ref2.tileJ,numCells=_ref2.numCells,numGenes=_ref2.numGenes,cellOrdering=_ref2.cellOrdering,cells=_ref2.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(i){// Need to iterate over cells in the outer loop.
cellI=tileI*tileSize+i;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(j){geneI=tileJ*tileSize+j;if(geneI<numGenes){value=view[sortedCellI*numGenes+geneI];}else{value=0;}offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}/**
 * Called before a layer is drawn to determine whether it should be rendered.
 * Reference: https://deck.gl/docs/api-reference/core/deck#layerfilter
 * @param {object} params A viewport, layer pair.
 * @param {object} params.layer The layer to check.
 * @param {object} params.viewport The viewport to check.
 * @returns {boolean} Should this layer be rendered in this viewport?
 */function layerFilter(_ref3){var layer=_ref3.layer,viewport=_ref3.viewport;if(viewport.id==='axisLeft'){return layer.id.startsWith('axisLeft');}if(viewport.id==='axisTop'){return layer.id.startsWith('axisTop');}if(viewport.id==='heatmap'){return layer.id.startsWith('heatmap');}if(viewport.id==='colorsLeft'){return layer.id.startsWith('colorsLeft');}if(viewport.id==='colorsTop'){return layer.id.startsWith('colorsTop');}return false;}/**
 * Get the size of the left and top heatmap axes,
 * taking into account the maximum label string lengths.
 * @param {boolean} transpose Is the heatmap transposed?
 * @param {number} geneLabelMaxLength What is the maximum length gene label?
 * @param {number} cellLabelMaxLength What is the maximum length cell label?
 * @returns {number[]} [axisOffsetLeft, axisOffsetTop]
 */function getAxisSizes(transpose,geneLabelMaxLength,cellLabelMaxLength){var axisOffsetLeft=clamp_default()((transpose?geneLabelMaxLength:cellLabelMaxLength)*heatmap_constants["b" /* AXIS_LABEL_TEXT_SIZE */],heatmap_constants["e" /* AXIS_MIN_SIZE */],heatmap_constants["d" /* AXIS_MAX_SIZE */]);var axisOffsetTop=clamp_default()((transpose?cellLabelMaxLength:geneLabelMaxLength)*heatmap_constants["b" /* AXIS_LABEL_TEXT_SIZE */],heatmap_constants["e" /* AXIS_MIN_SIZE */],heatmap_constants["d" /* AXIS_MAX_SIZE */]);return[axisOffsetLeft,axisOffsetTop];}/**
 * Convert a mouse coordinate (x, y) to a heatmap coordinate (col index, row index).
 * @param {number} mouseX The mouse X of interest.
 * @param {number} mouseY The mouse Y of interest.
 * @param {object} param2 An object containing current sizes and scale factors.
 * @returns {number[]} [colI, rowI]
 */function mouseToHeatmapPosition(mouseX,mouseY,_ref4){var offsetLeft=_ref4.offsetLeft,offsetTop=_ref4.offsetTop,targetX=_ref4.targetX,targetY=_ref4.targetY,scaleFactor=_ref4.scaleFactor,matrixWidth=_ref4.matrixWidth,matrixHeight=_ref4.matrixHeight,numRows=_ref4.numRows,numCols=_ref4.numCols;// TODO: use linear algebra
var viewMouseX=mouseX-offsetLeft;var viewMouseY=mouseY-offsetTop;if(viewMouseX<0||viewMouseY<0){// The mouse is outside the heatmap.
return[null,null];}// Determine the rowI and colI values based on the current viewState.
var bboxTargetX=targetX*scaleFactor+matrixWidth*scaleFactor/2;var bboxTargetY=targetY*scaleFactor+matrixHeight*scaleFactor/2;var bboxLeft=bboxTargetX-matrixWidth/2;var bboxTop=bboxTargetY-matrixHeight/2;var zoomedOffsetLeft=bboxLeft/(matrixWidth*scaleFactor);var zoomedOffsetTop=bboxTop/(matrixHeight*scaleFactor);var zoomedViewMouseX=viewMouseX/(matrixWidth*scaleFactor);var zoomedViewMouseY=viewMouseY/(matrixHeight*scaleFactor);var zoomedMouseX=zoomedOffsetLeft+zoomedViewMouseX;var zoomedMouseY=zoomedOffsetTop+zoomedViewMouseY;var rowI=Math.floor(zoomedMouseY*numRows);var colI=Math.floor(zoomedMouseX*numCols);return[colI,rowI];}/**
 * Convert a heatmap coordinate (col index, row index) to a mouse coordinate (x, y).
 * @param {number} colI The column index of interest.
 * @param {number} rowI The row index of interest.
 * @param {object} param2 An object containing current sizes and scale factors.
 * @returns {number[]} [x, y]
 */function heatmapToMousePosition(colI,rowI,_ref5){var offsetLeft=_ref5.offsetLeft,offsetTop=_ref5.offsetTop,targetX=_ref5.targetX,targetY=_ref5.targetY,scaleFactor=_ref5.scaleFactor,matrixWidth=_ref5.matrixWidth,matrixHeight=_ref5.matrixHeight,numRows=_ref5.numRows,numCols=_ref5.numCols;// TODO: use linear algebra
var zoomedMouseY=null;var zoomedMouseX=null;if(rowI!==null){var minY=-matrixHeight*scaleFactor/2;var maxY=matrixHeight*scaleFactor/2;var totalHeight=maxY-minY;var minInViewY=targetY*scaleFactor-matrixHeight/2;var maxInViewY=targetY*scaleFactor+matrixHeight/2;var inViewHeight=maxInViewY-minInViewY;var normalizedRowY=(rowI+0.5)/numRows;var globalRowY=minY+normalizedRowY*totalHeight;if(minInViewY<=globalRowY&&globalRowY<=maxInViewY){zoomedMouseY=offsetTop+(globalRowY-minInViewY)/inViewHeight*matrixHeight;}}if(colI!==null){var minX=-matrixWidth*scaleFactor/2;var maxX=matrixWidth*scaleFactor/2;var totalWidth=maxX-minX;var minInViewX=targetX*scaleFactor-matrixWidth/2;var maxInViewX=targetX*scaleFactor+matrixWidth/2;var inViewWidth=maxInViewX-minInViewX;var normalizedRowX=(colI+0.5)/numCols;var globalRowX=minX+normalizedRowX*totalWidth;if(minInViewX<=globalRowX&&globalRowX<=maxInViewX){zoomedMouseX=offsetLeft+(globalRowX-minInViewX)/inViewWidth*matrixWidth;}}return[zoomedMouseX,zoomedMouseY];}
// CONCATENATED MODULE: ./src/components/heatmap/Heatmap.js
/**
 * A heatmap component for cell x gene matrices.
 * @param {object} props
 * @param {string} props.uuid The uuid of this component,
 * used by tooltips to determine whether to render a tooltip or
 * a crosshair.
 * @param {string} props.theme The current theme name.
 * @param {object} props.initialViewState The initial viewState for
 * DeckGL.
 * @param {number} props.width The width of the canvas.
 * @param {number} props.height The height of the canvas.
 * @param {object} props.expressionMatrix An object { rows, cols, matrix },
 * where matrix is a flat Uint8Array, rows is a list of cell ID strings,
 * and cols is a list of gene ID strings.
 * @param {Map} props.cellColors Map of cell ID to color. Optional.
 * If defined, the key ordering is used to order the cell axis of the heatmap.
 * @param {function} props.clearPleaseWait The clear please wait callback,
 * called when the expression matrix has loaded (is not null).
 * @param {function} props.setCellHighlight Callback function called on
 * hover with the cell ID. Optional.
 * @param {function} props.setGeneHighlight Callback function called on
 * hover with the gene ID. Optional.
 * @param {function} props.updateViewInfo Callback function that gets called with an
 * object { uuid, project() } where project is a function that maps (cellId, geneId)
 * to canvas (x,y) coordinates. Used to show tooltips. Optional.
 * @param {boolean} props.transpose By default, false.
 * @param {string} props.variablesTitle By default, 'Genes'.
 * @param {string} props.observationsTitle By default, 'Cells'.
 */var Heatmap=Object(external_react_["forwardRef"])(function(props,deckRef){var uuid=props.uuid,theme=props.theme,rawViewState=props.viewState,setViewState=props.setViewState,setHeatmapControls=props.setHeatmapControls,_props$heatmapControl=props.heatmapControls,heatmapControls=_props$heatmapControl===void 0?[0,1]:_props$heatmapControl,viewWidth=props.width,viewHeight=props.height,expression=props.expressionMatrix,cellColors=props.cellColors,clearPleaseWait=props.clearPleaseWait,setComponentHover=props.setComponentHover,_props$setCellHighlig=props.setCellHighlight,setCellHighlight=_props$setCellHighlig===void 0?Object(utils["i" /* createDefaultUpdateCellsHover */])('Heatmap'):_props$setCellHighlig,_props$setGeneHighlig=props.setGeneHighlight,setGeneHighlight=_props$setGeneHighlig===void 0?Object(utils["j" /* createDefaultUpdateGenesHover */])('Heatmap'):_props$setGeneHighlig,_props$updateViewInfo=props.updateViewInfo,updateViewInfo=_props$updateViewInfo===void 0?Object(utils["k" /* createDefaultUpdateViewInfo */])('Heatmap'):_props$updateViewInfo,_props$setIsRendering=props.setIsRendering,setIsRendering=_props$setIsRendering===void 0?function(){}:_props$setIsRendering,_props$transpose=props.transpose,transpose=_props$transpose===void 0?false:_props$transpose,_props$variablesTitle=props.variablesTitle,variablesTitle=_props$variablesTitle===void 0?'Genes':_props$variablesTitle,_props$observationsTi=props.observationsTitle,observationsTitle=_props$observationsTi===void 0?'Cells':_props$observationsTi;var viewState=Object(objectSpread2["a" /* default */])({},rawViewState,{target:transpose?[rawViewState.target[1],rawViewState.target[0]]:rawViewState.target,minZoom:0});var axisLeftTitle=transpose?variablesTitle:observationsTitle;var axisTopTitle=transpose?observationsTitle:variablesTitle;Object(external_react_["useEffect"])(function(){if(clearPleaseWait&&expression){clearPleaseWait('expression-matrix');}},[clearPleaseWait,expression]);var workerRef=Object(external_react_["useRef"])(new heatmap_worker_default.a());var tilesRef=Object(external_react_["useRef"])();var dataRef=Object(external_react_["useRef"])();var _useState=Object(external_react_["useState"])([]),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),axisLeftLabels=_useState2[0],setAxisLeftLabels=_useState2[1];var _useState3=Object(external_react_["useState"])([]),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),axisTopLabels=_useState4[0],setAxisTopLabels=_useState4[1];var _useState5=Object(external_react_["useState"])(heatmapControls[0]),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),colorScaleLo=_useState6[0],setColorScaleLo=_useState6[1];var _useState7=Object(external_react_["useState"])(heatmapControls[1]),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),colorScaleHi=_useState8[0],setColorScaleHi=_useState8[1];// Callback function for the color scale slider change event.
var onColorScaleChange=Object(external_react_["useCallback"])(function(event,newValue){setColorScaleLo(newValue[0]);setColorScaleHi(newValue[1]);setHeatmapControls(newValue);},[setHeatmapControls]);// Since we are storing the tile data in a ref,
// and updating it asynchronously when the worker finishes,
// we need to tie it to a piece of state through this iteration value.
var _useReducer=Object(external_react_["useReducer"])(function(i){return i+1;},0),_useReducer2=Object(slicedToArray["a" /* default */])(_useReducer,2),tileIteration=_useReducer2[0],incTileIteration=_useReducer2[1];// We need to keep a backlog of the tasks for the worker thread,
// since the array buffer can only be held by one thread at a time.
var _useState9=Object(external_react_["useState"])([]),_useState10=Object(slicedToArray["a" /* default */])(_useState9,2),backlog=_useState10[0],setBacklog=_useState10[1];// Use an effect to listen for the worker to send the array of tiles.
Object(external_react_["useEffect"])(function(){workerRef.current.addEventListener('message',function(event){// The tiles have been generated.
tilesRef.current=event.data.tiles;// The buffer has been transferred back to the main thread.
dataRef.current=new Uint8Array(event.data.buffer);// Increment the counter to notify the downstream useEffects and useMemos.
incTileIteration();// Remove this task and everything prior from the backlog.
var curr=event.data.curr;setBacklog(function(prev){var currIndex=prev.indexOf(curr);return prev.slice(currIndex+1,prev.length);});});},[workerRef,tilesRef]);// Store a reference to the matrix Uint8Array in the dataRef,
// since we need to access its array buffer to transfer
// it back and forth from the worker thread.
Object(external_react_["useEffect"])(function(){// Store the expression matrix Uint8Array in the dataRef.
if(expression&&expression.matrix){dataRef.current=Object(utils["h" /* copyUint8Array */])(expression.matrix);}},[dataRef,expression]);// Check if the ordering of axis labels needs to be changed,
// for example if the cells "selected" (technically just colored)
// have changed.
Object(external_react_["useEffect"])(function(){if(!expression){return;}var newCellOrdering=!cellColors||cellColors.size===0?expression.rows:Array.from(cellColors.keys());var oldCellOrdering=transpose?axisTopLabels:axisLeftLabels;if(!isEqual_default()(oldCellOrdering,newCellOrdering)){if(transpose){setAxisTopLabels(newCellOrdering);}else{setAxisLeftLabels(newCellOrdering);}}},[expression,cellColors,axisTopLabels,axisLeftLabels,transpose]);// Set the genes ordering.
Object(external_react_["useEffect"])(function(){if(!expression){return;}if(transpose){setAxisLeftLabels(expression.cols);}else{setAxisTopLabels(expression.cols);}},[expression,transpose]);var _useMemo=Object(external_react_["useMemo"])(function(){if(!expression){return[0,0];}return[Object(external_d3_array_["max"])(expression.rows.map(function(cellId){return cellId.length;})),Object(external_d3_array_["max"])(expression.cols.map(function(geneId){return geneId.length;}))];},[expression]),_useMemo2=Object(slicedToArray["a" /* default */])(_useMemo,2),cellLabelMaxLength=_useMemo2[0],geneLabelMaxLength=_useMemo2[1];var width=axisTopLabels.length;var height=axisLeftLabels.length;var _getAxisSizes=getAxisSizes(transpose,geneLabelMaxLength,cellLabelMaxLength),_getAxisSizes2=Object(slicedToArray["a" /* default */])(_getAxisSizes,2),axisOffsetLeft=_getAxisSizes2[0],axisOffsetTop=_getAxisSizes2[1];var offsetTop=axisOffsetTop+heatmap_constants["g" /* COLOR_BAR_SIZE */];var offsetLeft=axisOffsetLeft+heatmap_constants["g" /* COLOR_BAR_SIZE */];var matrixWidth=viewWidth-offsetLeft;var matrixHeight=viewHeight-offsetTop;var matrixLeft=-matrixWidth/2;var matrixRight=matrixWidth/2;var matrixTop=-matrixHeight/2;var matrixBottom=matrixHeight/2;var xTiles=Math.ceil(width/heatmap_constants["l" /* TILE_SIZE */]);var yTiles=Math.ceil(height/heatmap_constants["l" /* TILE_SIZE */]);var widthRatio=1-(heatmap_constants["l" /* TILE_SIZE */]-width%heatmap_constants["l" /* TILE_SIZE */])/(xTiles*heatmap_constants["l" /* TILE_SIZE */]);var heightRatio=1-(heatmap_constants["l" /* TILE_SIZE */]-height%heatmap_constants["l" /* TILE_SIZE */])/(yTiles*heatmap_constants["l" /* TILE_SIZE */]);var tileWidth=matrixWidth/widthRatio/xTiles;var tileHeight=matrixHeight/heightRatio/yTiles;var scaleFactor=Math.pow(2,viewState.zoom);var cellHeight=matrixHeight*scaleFactor/height;var cellWidth=matrixWidth*scaleFactor/width;// Get power of 2 between 1 and 16,
// for number of cells to aggregate together in each direction.
var aggSizeX=clamp_default()(Math.pow(2,Math.ceil(Math.log2(1/cellWidth))),heatmap_constants["i" /* MIN_ROW_AGG */],heatmap_constants["h" /* MAX_ROW_AGG */]);var aggSizeY=clamp_default()(Math.pow(2,Math.ceil(Math.log2(1/cellHeight))),heatmap_constants["i" /* MIN_ROW_AGG */],heatmap_constants["h" /* MAX_ROW_AGG */]);var _viewState$target=Object(slicedToArray["a" /* default */])(viewState.target,2),targetX=_viewState$target[0],targetY=_viewState$target[1];// Emit the viewInfo object on viewState updates
// (used by tooltips / crosshair elements).
Object(external_react_["useEffect"])(function(){updateViewInfo({uuid:uuid,project:function project(cellId,geneId){var colI=transpose?axisTopLabels.indexOf(cellId):axisTopLabels.indexOf(geneId);var rowI=transpose?axisLeftLabels.indexOf(geneId):axisLeftLabels.indexOf(cellId);return heatmapToMousePosition(colI,rowI,{offsetLeft:offsetLeft,offsetTop:offsetTop,targetX:viewState.target[0],targetY:viewState.target[1],scaleFactor:scaleFactor,matrixWidth:matrixWidth,matrixHeight:matrixHeight,numRows:height,numCols:width});}});},[uuid,updateViewInfo,transpose,axisTopLabels,axisLeftLabels,offsetLeft,offsetTop,viewState,scaleFactor,matrixWidth,matrixHeight,height,width]);// Listen for viewState changes.
// Do not allow the user to zoom and pan outside of the initial window.
var onViewStateChange=Object(external_react_["useCallback"])(function(_ref){var nextViewState=_ref.viewState;var nextZoom=nextViewState.zoom;var nextScaleFactor=Math.pow(2,nextZoom);var minTargetX=nextZoom===0?0:-(matrixRight-matrixRight/nextScaleFactor);var maxTargetX=-1*minTargetX;var minTargetY=nextZoom===0?0:-(matrixBottom-matrixBottom/nextScaleFactor);var maxTargetY=-1*minTargetY;// Manipulate view state if necessary to keep the user in the window.
var nextTarget=[clamp_default()(nextViewState.target[0],minTargetX,maxTargetX),clamp_default()(nextViewState.target[1],minTargetY,maxTargetY)];setViewState({zoom:nextZoom,target:transpose?[nextTarget[1],nextTarget[0]]:nextTarget});},[matrixRight,matrixBottom,transpose,setViewState]);// If `expression` or `cellOrdering` have changed,
// then new tiles need to be generated,
// so add a new task to the backlog.
Object(external_react_["useEffect"])(function(){if(!expression){return;}// Use a uuid to give the task a unique ID,
// to help identify where in the list it is located
// after the worker thread asynchronously sends the data back
// to this thread.
setBacklog(function(prev){return[].concat(Object(toConsumableArray["a" /* default */])(prev),[v4_default()()]);});},[dataRef,expression,axisTopLabels,axisLeftLabels,xTiles,yTiles]);// When the backlog has updated, a new worker job can be submitted if:
// - the backlog has length >= 1 (at least one job is waiting), and
// - buffer.byteLength is not zero, so the worker does not currently "own" the buffer.
Object(external_react_["useEffect"])(function(){if(backlog.length<1){return;}var curr=backlog[backlog.length-1];if(dataRef.current&&dataRef.current.buffer.byteLength){var rows=expression.rows,cols=expression.cols;workerRef.current.postMessage(['getTiles',{curr:curr,xTiles:xTiles,yTiles:yTiles,tileSize:heatmap_constants["l" /* TILE_SIZE */],cellOrdering:transpose?axisTopLabels:axisLeftLabels,rows:rows,cols:cols,transpose:transpose,data:dataRef.current.buffer}],[dataRef.current.buffer]);}},[axisLeftLabels,axisTopLabels,backlog,expression,transpose,xTiles,yTiles]);Object(external_react_["useEffect"])(function(){setIsRendering(backlog.length>0);},[backlog,setIsRendering]);// Update the heatmap tiles if:
// - new tiles are available (`tileIteration` has changed), or
// - the matrix bounds have changed, or
// - the `aggSizeX` or `aggSizeY` have changed, or
// - the cell ordering has changed.
var heatmapLayers=Object(external_react_["useMemo"])(function(){if(!tilesRef.current||backlog.length){return[];}function getLayer(i,j,tile){return new HeatmapBitmapLayer["a" /* default */]({id:"heatmapLayer-".concat(tileIteration,"-").concat(i,"-").concat(j),image:tile,bounds:[matrixLeft+j*tileWidth,matrixTop+i*tileHeight,matrixLeft+(j+1)*tileWidth,matrixTop+(i+1)*tileHeight],aggSizeX:aggSizeX,aggSizeY:aggSizeY,colorScaleLo:colorScaleLo,colorScaleHi:colorScaleHi,updateTriggers:{image:[axisLeftLabels,axisTopLabels],bounds:[tileHeight,tileWidth]}});}return tilesRef.current.flatMap(function(tileRow,i){return tileRow.map(function(tile,j){return getLayer(i,j,tile);});});},[backlog,tileIteration,matrixLeft,tileWidth,matrixTop,tileHeight,aggSizeX,aggSizeY,colorScaleLo,colorScaleHi,axisLeftLabels,axisTopLabels]);// Map cell and gene names to arrays with indices,
// to prepare to render the names in TextLayers.
var axisTopLabelData=Object(external_react_["useMemo"])(function(){return axisTopLabels.map(function(d,i){return[i,d];});},[axisTopLabels]);var axisLeftLabelData=Object(external_react_["useMemo"])(function(){return axisLeftLabels.map(function(d,i){return[i,d];});},[axisLeftLabels]);// Generate the axis label, axis title, and loading indicator text layers.
var textLayers=[new HeatmapCompositeTextLayer["a" /* default */]({targetX:targetX,targetY:targetY,scaleFactor:scaleFactor,axisLeftLabelData:axisLeftLabelData,matrixTop:matrixTop,height:height,matrixHeight:matrixHeight,cellHeight:cellHeight,cellWidth:cellWidth,axisTopLabelData:axisTopLabelData,matrixLeft:matrixLeft,width:width,matrixWidth:matrixWidth,viewHeight:viewHeight,viewWidth:viewWidth,theme:theme,axisLeftTitle:axisLeftTitle,axisTopTitle:axisTopTitle,axisOffsetLeft:axisOffsetLeft,axisOffsetTop:axisOffsetTop})];// Create the left color bar with a BitmapLayer.
// TODO: find a way to do aggregation for this as well.
var cellColorsTiles=Object(external_react_["useMemo"])(function(){if(!cellColors){return null;}var cellId;var offset;var color;var rowI;var cellOrdering=transpose?axisTopLabels:axisLeftLabels;var colorBarTileWidthPx=transpose?heatmap_constants["l" /* TILE_SIZE */]:1;var colorBarTileHeightPx=transpose?1:heatmap_constants["l" /* TILE_SIZE */];var result=range_default()(transpose?xTiles:yTiles).map(function(i){var tileData=new Uint8ClampedArray(heatmap_constants["l" /* TILE_SIZE */]*1*4);range_default()(heatmap_constants["l" /* TILE_SIZE */]).forEach(function(tileY){rowI=i*heatmap_constants["l" /* TILE_SIZE */]+tileY;// the row / cell index
if(rowI<cellOrdering.length){cellId=cellOrdering[rowI];color=cellColors.get(cellId);offset=(transpose?tileY:heatmap_constants["l" /* TILE_SIZE */]-tileY-1)*4;if(color){var _color=color,_color2=Object(slicedToArray["a" /* default */])(_color,3),rValue=_color2[0],gValue=_color2[1],bValue=_color2[2];tileData[offset+0]=rValue;tileData[offset+1]=gValue;tileData[offset+2]=bValue;tileData[offset+3]=255;}}});return new ImageData(tileData,colorBarTileWidthPx,colorBarTileHeightPx);});return result;},[cellColors,transpose,axisTopLabels,axisLeftLabels,xTiles,yTiles]);var cellColorsLayers=Object(external_react_["useMemo"])(function(){return cellColorsTiles?cellColorsTiles.map(function(tile,i){return new PixelatedBitmapLayer["a" /* default */]({id:"".concat(transpose?'colorsTopLayer':'colorsLeftLayer',"-").concat(i,"-").concat(v4_default()()),image:tile,bounds:transpose?[matrixLeft+i*tileWidth,-matrixHeight/2,matrixLeft+(i+1)*tileWidth,matrixHeight/2]:[-matrixWidth/2,matrixTop+i*tileHeight,matrixWidth/2,matrixTop+(i+1)*tileHeight]});}):[];},[cellColorsTiles,matrixTop,matrixLeft,matrixHeight,matrixWidth,tileWidth,tileHeight,transpose]);var layers=heatmapLayers.concat(textLayers).concat(cellColorsLayers);// Set up the onHover function.
function onHover(info,event){if(!expression){return;}var _event$offsetCenter=event.offsetCenter,mouseX=_event$offsetCenter.x,mouseY=_event$offsetCenter.y;var _mouseToHeatmapPositi=mouseToHeatmapPosition(mouseX,mouseY,{offsetLeft:offsetLeft,offsetTop:offsetTop,targetX:targetX,targetY:targetY,scaleFactor:scaleFactor,matrixWidth:matrixWidth,matrixHeight:matrixHeight,numRows:height,numCols:width}),_mouseToHeatmapPositi2=Object(slicedToArray["a" /* default */])(_mouseToHeatmapPositi,2),colI=_mouseToHeatmapPositi2[0],rowI=_mouseToHeatmapPositi2[1];if(colI===null){if(transpose){setCellHighlight(null);}else{setGeneHighlight(null);}}if(rowI===null){if(transpose){setGeneHighlight(null);}else{setCellHighlight(null);}}var obsI=expression.rows.indexOf(transpose?axisTopLabels[colI]:axisLeftLabels[rowI]);var varI=expression.cols.indexOf(transpose?axisLeftLabels[rowI]:axisTopLabels[colI]);var obsId=expression.rows[obsI];var varId=expression.cols[varI];if(setComponentHover){setComponentHover();}setCellHighlight(obsId||null);setGeneHighlight(varId||null);}return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement(external_deck_gl_default.a,{id:"deckgl-overlay-".concat(uuid),ref:deckRef,views:[// Note that there are multiple views here,
// but only one viewState.
new core_["OrthographicView"]({id:'heatmap',controller:true,x:offsetLeft,y:offsetTop,width:matrixWidth,height:matrixHeight}),new core_["OrthographicView"]({id:'axisLeft',controller:false,x:transpose?heatmap_constants["g" /* COLOR_BAR_SIZE */]:0,y:offsetTop,width:axisOffsetLeft,height:matrixHeight}),new core_["OrthographicView"]({id:'axisTop',controller:false,x:offsetLeft,y:transpose?0:heatmap_constants["g" /* COLOR_BAR_SIZE */],width:matrixWidth,height:axisOffsetTop}),new core_["OrthographicView"]({id:'colorsLeft',controller:false,x:axisOffsetLeft,y:offsetTop,width:heatmap_constants["g" /* COLOR_BAR_SIZE */]-heatmap_constants["c" /* AXIS_MARGIN */],height:matrixHeight}),new core_["OrthographicView"]({id:'colorsTop',controller:false,x:offsetLeft,y:axisOffsetTop,width:matrixWidth,height:heatmap_constants["g" /* COLOR_BAR_SIZE */]-heatmap_constants["c" /* AXIS_MARGIN */]})],layers:layers,layerFilter:layerFilter,getCursor:function getCursor(interactionState){return interactionState.isDragging?'grabbing':'default';},glOptions:utils["c" /* DEFAULT_GL_OPTIONS */],onViewStateChange:onViewStateChange,viewState:viewState,onHover:onHover}),/*#__PURE__*/external_react_default.a.createElement(HeatmapControls,{colorScaleLo:colorScaleLo,colorScaleHi:colorScaleHi,onColorScaleChange:onColorScaleChange}));});/* harmony default export */ var heatmap_Heatmap = __webpack_exports__["a"] = (Heatmap);

/***/ }),
/* 109 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(30);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js + 1 modules
var get = __webpack_require__(57);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "@deck.gl/layers"
var layers_ = __webpack_require__(36);

// EXTERNAL MODULE: external "d3-force"
var external_d3_force_ = __webpack_require__(139);

// EXTERNAL MODULE: ./src/layers/index.js + 4 modules
var src_layers = __webpack_require__(91);

// EXTERNAL MODULE: ./src/components/utils.js
var utils = __webpack_require__(8);

// EXTERNAL MODULE: ./src/components/shared-spatial-scatterplot/quadtree.js
var quadtree = __webpack_require__(103);

// EXTERNAL MODULE: ./src/components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js + 5 modules
var AbstractSpatialOrScatterplot = __webpack_require__(106);

// EXTERNAL MODULE: external "d3-quadtree"
var external_d3_quadtree_ = __webpack_require__(101);

// CONCATENATED MODULE: ./src/components/shared-spatial-scatterplot/force-collide-rects.js
/* eslint-disable no-plusplus */ /* eslint-disable no-param-reassign *//**
 * Returns a closure that returns a constant value.
 */function constant(v){return function(){return v;};}/**
 * Adds a tiny bit of randomness to a number.
 */function jiggle(v){return v+(Math.random()-0.5)*1e-6;}/**
 * A force function to be used with d3.forceSimulation.
 * This has been adapted for use here, with comments explaining each part.
 * Reference: https://bl.ocks.org/cmgiven/547658968d365bcc324f3e62e175709b
 */function forceCollideRects(){// D3 implements things with function prototypes rather than classes.
// Pretend these variables are the "instance members" of a class.
// Note that this function actually returns the internal force() function,
// but that the force() function is a closure with access to these instance members.
var nodes;var masses;var strength=1;var iterations=1;var sizes;var size=constant([0,0]);// Given a node, return the center point along the x-axis.
function xCenter(d){return d.x+d.vx+sizes[d.index][0]/2;}// Given a node, return the center point along the y-axis.
function yCenter(d){return d.y+d.vy+sizes[d.index][1]/2;}// Given a quadtree node, initialize its .size property.
function prepare(quad){if(quad.data){// This is a leaf node, so we set quad.size to the node's size.
// (No need to compute the max of internal nodes,
// since leaf nodes do not have any internal nodes).
quad.size=sizes[quad.data.index];}else{quad.size=[0,0];// Internal nodes of the quadtree are represented
// as four-element arrays in left-to-right, top-to-bottom order.
// Here, we are setting quad.size to [maxWidth, maxHeight]
// among the internal nodes of this current `quad` node.
for(var i=0;i<4;i++){if(quad[i]&&quad[i].size){quad.size[0]=Math.max(quad.size[0],quad[i].size[0]);quad.size[1]=Math.max(quad.size[1],quad[i].size[1]);}}}}function force(){var node;var nodeSize;var nodeMass;var xi;var yi;// Create a quadtree based on node center points.
// Initialize each quadtree node's .size property by calling
// the prepare() function on each quadtree node.
var tree=Object(external_d3_quadtree_["quadtree"])(nodes,xCenter,yCenter).visitAfter(prepare);// Update the .vx and .vy properties of both `node` and `data`
// (the current node pair).
function apply(quad,x0,y0,x1,y1){// `quad` is a quadtree node.
var data=quad.data;var xSize=(nodeSize[0]+quad.size[0])/2;var ySize=(nodeSize[1]+quad.size[1])/2;if(data&&data.index>node.index){// This is a leaf node because `data` is defined.
// `x` is the difference in x centers between `node` and `data`.
// `y` is the difference in y centers between `node` and `data`.
var x=jiggle(xi-xCenter(data));var y=jiggle(yi-yCenter(data));var xd=Math.abs(x)-xSize;var yd=Math.abs(y)-ySize;// If `xd` and `yd` is less than zero,
// then there is an overlap between the two nodes.
if(xd<0&&yd<0){var l=Math.sqrt(x*x+y*y);var m=masses[data.index]/(nodeMass+masses[data.index]);// We move the nodes either in the x or y direction.
// Nodes are moved proportionally to:
// their distance apart (`l`), their amount of overlap (`xd` or `yd`), their masses (`m`),
// and the strength parameter (`strength`).
if(Math.abs(xd)<Math.abs(yd)){node.vx-=(x*=xd/l*strength)*m;data.vx+=x*(1-m);}else{node.vy-=(y*=yd/l*strength)*m;data.vy+=y*(1-m);}}// When the quadtree.visit callback returns _true_ for a node,
// then the node's children will _not_ be visited.
return x0>xi+xSize||x1<xi-xSize||y0>yi+ySize||y1<yi-ySize;}return false;}function iterate(){// On every iteration, use the `apply` function to visit every node
// which has an index greater than the current node's index,
// (visiting every node pair).
for(var j=0;j<nodes.length;j++){node=nodes[j];nodeSize=sizes[j];nodeMass=masses[j];xi=xCenter(node);yi=yCenter(node);tree.visit(apply);}}// Do the specified number of iterations.
for(var i=0;i<iterations;i++){iterate();}}// The "constructor".
// Takes a list of nodes as input.
force.initialize=function(v){nodes=v;// Get the size [w, h] of each node using the size getter function.
sizes=nodes.map(size);// Get the mass of each node,
// which is the sum of its horizontal and vertical edge lengths.
masses=sizes.map(function(d){return d[0]+d[1];});};// Set the number of iterations.
// If no value is provided as a parameter, this acts as a getter function.
force.iterations=function(){if(arguments.length){iterations=+(arguments.length<=0?undefined:arguments[0]);return force;}return iterations;};// Set the strength value.
// If no value is provided as a parameter, this acts as a getter function.
force.strength=function(){if(arguments.length){strength=+(arguments.length<=0?undefined:arguments[0]);return force;}return strength;};// Set the size function.
// The size function takes a node as a parameter and returns its size.
// If no size function is provided as a parameter, this acts as a getter function.
force.size=function(){if(arguments.length){size=typeof(arguments.length<=0?undefined:arguments[0])==='function'?arguments.length<=0?undefined:arguments[0]:constant(arguments.length<=0?undefined:arguments[0]);return force;}return size;};// Returns the force closure.
return force;}
// CONCATENATED MODULE: ./src/components/scatterplot/Scatterplot.js
var CELLS_LAYER_ID='scatterplot';var LABEL_FONT_FAMILY="-apple-system, 'Helvetica Neue', Arial, sans-serif";var NUM_FORCE_SIMULATION_TICKS=100;var LABEL_UPDATE_ZOOM_DELTA=0.25;// Default getter function props.
var makeDefaultGetCellPosition=function makeDefaultGetCellPosition(mapping){return function(cellEntry){var mappings=cellEntry[1].mappings;if(!(mapping in mappings)){var available=Object.keys(mappings).map(function(s){return"\"".concat(s,"\"");}).join(', ');throw new Error("Expected to find \"".concat(mapping,"\", but available mappings are: ").concat(available));}var mappedCell=mappings[mapping];// The negative applied to the y-axis is because
// graphics rendering has the y-axis positive going south.
return[mappedCell[0],-mappedCell[1],0];};};var makeDefaultGetCellCoords=function makeDefaultGetCellCoords(mapping){return function(cell){return cell.mappings[mapping];};};var Scatterplot_makeDefaultGetCellColors=function makeDefaultGetCellColors(cellColors){return function(cellEntry){return cellColors&&cellColors.get(cellEntry[0])||utils["b" /* DEFAULT_COLOR */];};};var makeDefaultGetCellIsSelected=function makeDefaultGetCellIsSelected(cellSelection){return function(cellEntry){return cellSelection?cellSelection.includes(cellEntry[0]):true// If nothing is selected, everything is selected.
;};};/**
 * React component which renders a scatterplot from cell data, typically tSNE or PCA.
 * @param {object} props
 * @param {string} props.uuid A unique identifier for this component.
 * @param {string} props.theme The current vitessce theme.
 * @param {object} props.viewState The deck.gl view state.
 * @param {function} props.setViewState Function to call to update the deck.gl view state.
 * @param {object} props.cells
 * @param {string} props.mapping The name of the coordinate mapping field,
 * for each cell, for example "PCA" or "t-SNE".
 * @param {Map} props.cellColors Mapping of cell IDs to colors.
 * @param {array} props.cellSelection Array of selected cell IDs.
 * @param {array} props.cellFilter Array of filtered cell IDs. By default, null.
 * @param {number} props.cellRadiusScale The value for `radiusScale` to pass
 * to the deck.gl cells ScatterplotLayer.
 * @param {number} props.cellOpacity The value for `opacity` to pass
 * to the deck.gl cells ScatterplotLayer.
 * @param {function} props.getCellCoords Getter function for cell coordinates
 * (used by the selection layer).
 * @param {function} props.getCellPosition Getter function for cell [x, y, z] position.
 * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.
 * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.
 * @param {function} props.setCellSelection
 * @param {function} props.setCellHighlight
 * @param {function} props.updateViewInfo
 * @param {function} props.onToolChange Callback for tool changes
 * (lasso/pan/rectangle selection tools).
 * @param {function} props.onCellClick Getter function for cell layer onClick.
 */var Scatterplot_Scatterplot=/*#__PURE__*/function(_AbstractSpatialOrSca){Object(inherits["a" /* default */])(Scatterplot,_AbstractSpatialOrSca);var _super=Object(createSuper["a" /* default */])(Scatterplot);function Scatterplot(props){var _this;Object(classCallCheck["a" /* default */])(this,Scatterplot);_this=_super.call(this,props);// To avoid storing large arrays/objects
// in React state, this component
// uses instance variables.
// All instance variables used in this class:
_this.cellsEntries=[];_this.cellsQuadTree=null;_this.cellsLayer=null;_this.cellSetsForceSimulation=forceCollideRects();_this.cellSetsLabelPrevZoom=null;_this.cellSetsLayers=[];// Initialize data and layers.
_this.onUpdateCellsData();_this.onUpdateCellsLayer();_this.onUpdateCellSetsLayers();return _this;}Object(createClass["a" /* default */])(Scatterplot,[{key:"createCellsLayer",value:function createCellsLayer(){var _this$props=this.props,theme=_this$props.theme,mapping=_this$props.mapping,_this$props$getCellPo=_this$props.getCellPosition,getCellPosition=_this$props$getCellPo===void 0?makeDefaultGetCellPosition(mapping):_this$props$getCellPo,_this$props$cellRadiu=_this$props.cellRadiusScale,cellRadiusScale=_this$props$cellRadiu===void 0?0.2:_this$props$cellRadiu,_this$props$cellOpaci=_this$props.cellOpacity,cellOpacity=_this$props$cellOpaci===void 0?1.0:_this$props$cellOpaci,cellFilter=_this$props.cellFilter,cellSelection=_this$props.cellSelection,setCellHighlight=_this$props.setCellHighlight,setComponentHover=_this$props.setComponentHover,_this$props$getCellIs=_this$props.getCellIsSelected,getCellIsSelected=_this$props$getCellIs===void 0?makeDefaultGetCellIsSelected(cellSelection):_this$props$getCellIs,cellColors=_this$props.cellColors,_this$props$getCellCo=_this$props.getCellColor,getCellColor=_this$props$getCellCo===void 0?Scatterplot_makeDefaultGetCellColors(cellColors):_this$props$getCellCo,onCellClick=_this$props.onCellClick;var cellsEntries=this.cellsEntries;var filteredCellsEntries=cellFilter?cellsEntries.filter(function(cellEntry){return cellFilter.includes(cellEntry[0]);}):cellsEntries;return new src_layers["b" /* SelectableScatterplotLayer */](Object(objectSpread2["a" /* default */])({id:CELLS_LAYER_ID,backgroundColor:theme==='dark'?[0,0,0]:[241,241,241],isSelected:getCellIsSelected,opacity:cellOpacity,radiusScale:cellRadiusScale,radiusMinPixels:1,radiusMaxPixels:10,getPosition:getCellPosition,getColor:getCellColor,getLineWidth:0,onClick:function onClick(info){if(onCellClick){onCellClick(info);}}},Object(utils["g" /* cellLayerDefaultProps */])(filteredCellsEntries,undefined,setCellHighlight,setComponentHover)));}},{key:"createCellSetsLayers",value:function createCellSetsLayers(){var _this$props2=this.props,theme=_this$props2.theme,cellSetPolygons=_this$props2.cellSetPolygons,viewState=_this$props2.viewState,cellSetPolygonsVisible=_this$props2.cellSetPolygonsVisible,cellSetLabelsVisible=_this$props2.cellSetLabelsVisible,cellSetLabelSize=_this$props2.cellSetLabelSize;var result=[];if(cellSetPolygonsVisible){result.push(new layers_["PolygonLayer"]({id:'cell-sets-polygon-layer',data:cellSetPolygons,stroked:true,filled:false,wireframe:true,lineWidthMaxPixels:1,getPolygon:function getPolygon(d){return d.hull;},getLineColor:function getLineColor(d){return d.color;},getLineWidth:1}));}if(cellSetLabelsVisible){var zoom=viewState.zoom;var nodes=cellSetPolygons.map(function(p){return{x:p.centroid[0],y:p.centroid[1],label:p.name};});var collisionForce=this.cellSetsForceSimulation.size(function(d){return[cellSetLabelSize*1/Math.pow(2,zoom)*4*d.label.length,cellSetLabelSize*1/Math.pow(2,zoom)*1.5];});Object(external_d3_force_["forceSimulation"])().nodes(nodes).force('collision',collisionForce).tick(NUM_FORCE_SIMULATION_TICKS);result.push(new layers_["TextLayer"]({id:'cell-sets-text-layer',data:nodes,getPosition:function getPosition(d){return[d.x,d.y];},getText:function getText(d){return d.label;},getColor:theme==='dark'?[255,255,255]:[0,0,0],getSize:cellSetLabelSize,getAngle:0,getTextAnchor:'middle',getAlignmentBaseline:'center',fontFamily:LABEL_FONT_FAMILY,fontWeight:'normal'}));}return result;}},{key:"createSelectionLayers",value:function createSelectionLayers(){var _this$props3=this.props,viewState=_this$props3.viewState,mapping=_this$props3.mapping,_this$props3$getCellC=_this$props3.getCellCoords,getCellCoords=_this$props3$getCellC===void 0?makeDefaultGetCellCoords(mapping):_this$props3$getCellC,setCellSelection=_this$props3.setCellSelection;var tool=this.state.tool;var cellsQuadTree=this.cellsQuadTree;var flipYTooltip=true;return Object(src_layers["c" /* getSelectionLayers */])(tool,viewState.zoom,CELLS_LAYER_ID,getCellCoords,setCellSelection,cellsQuadTree,flipYTooltip);}},{key:"getLayers",value:function getLayers(){var cellsLayer=this.cellsLayer,cellSetsLayers=this.cellSetsLayers;return[cellsLayer].concat(Object(toConsumableArray["a" /* default */])(cellSetsLayers),Object(toConsumableArray["a" /* default */])(this.createSelectionLayers()));}},{key:"onUpdateCellsData",value:function onUpdateCellsData(){var _this$props4=this.props,_this$props4$cells=_this$props4.cells,cells=_this$props4$cells===void 0?{}:_this$props4$cells,mapping=_this$props4.mapping,_this$props4$getCellC=_this$props4.getCellCoords,getCellCoords=_this$props4$getCellC===void 0?makeDefaultGetCellCoords(mapping):_this$props4$getCellC;var cellsEntries=Object.entries(cells);this.cellsEntries=cellsEntries;this.cellsQuadTree=Object(quadtree["a" /* createCellsQuadTree */])(cellsEntries,getCellCoords);}},{key:"onUpdateCellsLayer",value:function onUpdateCellsLayer(){this.cellsLayer=this.createCellsLayer();}},{key:"onUpdateCellSetsLayers",value:function onUpdateCellSetsLayers(onlyViewStateChange){// Because the label sizes for the force simulation depend on the zoom level,
// we _could_ run the simulation every time the zoom level changes.
// However, this has a performance impact in firefox.
if(onlyViewStateChange){var _this$props5=this.props,viewState=_this$props5.viewState,cellSetLabelsVisible=_this$props5.cellSetLabelsVisible;var zoom=viewState.zoom;var cellSetsLabelPrevZoom=this.cellSetsLabelPrevZoom;// Instead, we can just check if the zoom level has changed
// by some relatively large delta, to be more conservative
// about re-running the force simulation.
if(cellSetLabelsVisible&&(cellSetsLabelPrevZoom===null||Math.abs(cellSetsLabelPrevZoom-zoom)>LABEL_UPDATE_ZOOM_DELTA)){this.cellSetsLayers=this.createCellSetsLayers();this.cellSetsLabelPrevZoom=zoom;}}else{// Otherwise, something more substantial than just
// the viewState has changed, such as the label array
// itself, so we always want to update the layer
// in this case.
this.cellSetsLayers=this.createCellSetsLayers();}}},{key:"viewInfoDidUpdate",value:function viewInfoDidUpdate(){var _this$props6=this.props,mapping=_this$props6.mapping,_this$props6$getCellP=_this$props6.getCellPosition,getCellPosition=_this$props6$getCellP===void 0?makeDefaultGetCellPosition(mapping):_this$props6$getCellP;Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(Scatterplot.prototype),"viewInfoDidUpdate",this).call(this,function(cell){return getCellPosition([null,cell]);});}/**
   * Here, asynchronously check whether props have
   * updated which require re-computing memoized variables,
   * followed by a re-render.
   * This function does not follow React conventions or paradigms,
   * it is only implemented this way to try to squeeze out
   * performance.
   * @param {object} prevProps The previous props to diff against.
   */},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this2=this;this.viewInfoDidUpdate();var shallowDiff=function shallowDiff(propName){return prevProps[propName]!==_this2.props[propName];};if(['cells'].some(shallowDiff)){// Cells data changed.
this.onUpdateCellsData();this.forceUpdate();}if(['cells','cellFilter','cellSelection','cellColors','cellRadiusScale'].some(shallowDiff)){// Cells layer props changed.
this.onUpdateCellsLayer();this.forceUpdate();}if(['cellSetPolygons','cellSetPolygonsVisible','cellSetLabelsVisible','cellSetLabelSize'].some(shallowDiff)){// Cell sets layer props changed.
this.onUpdateCellSetsLayers(false);this.forceUpdate();}if(shallowDiff('viewState')){// The viewState prop has changed (due to zoom or pan).
this.onUpdateCellSetsLayers(true);this.forceUpdate();}}// render() is implemented in the abstract parent class.
}]);return Scatterplot;}(AbstractSpatialOrScatterplot["a" /* default */]);/**
 * Need this wrapper function here,
 * since we want to pass a forwardRef
 * so that outer components can
 * access the grandchild DeckGL ref,
 * but we are using a class component.
 */var ScatterplotWrapper=Object(external_react_["forwardRef"])(function(props,deckRef){return/*#__PURE__*/external_react_default.a.createElement(Scatterplot_Scatterplot,Object.assign({},props,{deckRef:deckRef}));});/* harmony default export */ var scatterplot_Scatterplot = __webpack_exports__["a"] = (ScatterplotWrapper);

/***/ }),
/* 110 */
/***/ (function(module, exports) {

module.exports = require("rc-tree");

/***/ }),
/* 111 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Add");

/***/ }),
/* 112 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VectorLayerController; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29);
/* harmony import */ var _material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(76);
/* harmony import */ var _material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56);
/* harmony import */ var _material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(155);
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core_Slider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59);
/* harmony import */ var _material_ui_core_Slider__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Slider__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(102);
function VectorLayerController(props){var label=props.label,layer=props.layer,handleLayerChange=props.handleLayerChange;var slider=layer.opacity;var isOn=layer.visible;function handleSliderChange(v){if(layer.type==='cells'){var stroked=v<0.7;handleLayerChange(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},layer,{opacity:v,stroked:stroked}));}else{handleLayerChange(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},layer,{opacity:v}));}}function handleCheckBoxChange(v){handleLayerChange(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},layer,{visible:v}));}var classes=Object(_styles__WEBPACK_IMPORTED_MODULE_7__[/* useExpansionPanelStyles */ "a"])();return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2___default.a,{item:true,style:{marginTop:'10px'}},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_4___default.a,{className:classes.root},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_5___default.a,{style:{paddingTop:'15px',paddingLeft:'10px',marginBottom:'-5px'}},label),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2___default.a,{container:true,direction:"row",justify:"space-between"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2___default.a,{item:true,xs:2},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_3___default.a,{color:"primary",checked:isOn,onChange:function onChange(e,v){return handleCheckBoxChange(v);}})),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_2___default.a,{item:true,xs:9,style:{paddingRight:'8px'}},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Slider__WEBPACK_IMPORTED_MODULE_6___default.a,{value:slider,min:0,max:1,step:0.001,onChange:function onChange(e,v){return handleSliderChange(v);},style:{marginTop:'7px'},orientation:"horizontal"})))));}

/***/ }),
/* 113 */
/***/ (function(module, exports) {

module.exports = require("@deck.gl/extensions");

/***/ }),
/* 114 */
/***/ (function(module, exports) {

module.exports = require("@turf/boolean-within");

/***/ }),
/* 115 */
/***/ (function(module, exports) {

module.exports = require("@turf/boolean-contains");

/***/ }),
/* 116 */
/***/ (function(module, exports) {

module.exports = require("@turf/boolean-overlap");

/***/ }),
/* 117 */
/***/ (function(module, exports) {

module.exports = require("@turf/boolean-point-in-polygon");

/***/ }),
/* 118 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Table");

/***/ }),
/* 119 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/TableBody");

/***/ }),
/* 120 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/TableContainer");

/***/ }),
/* 121 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#raster\",\"title\":\"Vitessce image data\",\"type\":\"object\",\"definitions\":{\"transform\":{\"type\":\"object\",\"additionalProperties\":false,\"oneOf\":[{\"required\":[\"scale\",\"translate\"]},{\"required\":[\"matrix\"]}],\"properties\":{\"scale\":{\"type\":\"number\"},\"translate\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"y\",\"x\"],\"properties\":{\"y\":{\"type\":\"number\"},\"x\":{\"type\":\"number\"}}},\"matrix\":{\"type\":\"array\",\"items\":{\"type\":\"number\"},\"minItems\":16,\"maxItems\":16}}},\"dimensions\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"field\",\"type\",\"values\"],\"properties\":{\"field\":{\"type\":\"string\"},\"type\":{\"type\":\"string\",\"enum\":[\"quantitative\",\"nominal\",\"ordinal\",\"temporal\"]},\"values\":{\"type\":[\"array\",\"null\"],\"items\":{\"type\":\"string\"}}}}},\"metadata\":{\"type\":\"object\",\"additionalProperties\":false,\"anyOf\":[{\"required\":[\"dimensions\",\"isPyramid\"]},{\"required\":[\"transform\"]},{\"required\":[\"omeTiffOffsetsUrl\"]}],\"properties\":{\"dimensions\":{\"$ref\":\"#/definitions/dimensions\"},\"isPyramid\":{\"type\":\"boolean\"},\"transform\":{\"$ref\":\"#/definitions/transform\"},\"omeTiffOffsetsUrl\":{\"type\":\"string\",\"format\":\"uri\"}}},\"requestInit\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[],\"properties\":{\"method\":{\"type\":\"string\"},\"headers\":{\"type\":\"object\"},\"body\":{\"type\":\"string\"},\"mode\":{\"type\":\"string\"},\"credentials\":{\"type\":\"string\"},\"cache\":{\"type\":\"string\"},\"redirect\":{\"type\":\"string\"},\"referrer\":{\"type\":\"string\"},\"integrity\":{\"type\":\"string\"}}},\"image\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"name\",\"url\",\"type\"],\"properties\":{\"name\":{\"type\":\"string\"},\"url\":{\"type\":\"string\",\"format\":\"uri\"},\"type\":{\"type\":\"string\"},\"metadata\":{\"$ref\":\"#/definitions/metadata\"},\"requestInit\":{\"$ref\":\"#/definitions/requestInit\"}}}},\"additionalProperties\":false,\"required\":[\"schemaVersion\",\"images\"],\"properties\":{\"schemaVersion\":{\"type\":\"string\"},\"usePhysicalSizeScaling\":{\"type\":\"boolean\",\"description\":\"Default is false: passing true in will infer scaling from the reported physcial size\"},\"renderLayers\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"images\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/image\"}}}}");

/***/ }),
/* 122 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: ./src/components/TitleInfo.js + 1 modules
var TitleInfo = __webpack_require__(35);

// EXTERNAL MODULE: ./src/utils.js
var utils = __webpack_require__(15);

// EXTERNAL MODULE: ./src/components/hooks.js
var hooks = __webpack_require__(23);

// EXTERNAL MODULE: ./src/components/utils.js
var components_utils = __webpack_require__(8);

// EXTERNAL MODULE: ./src/components/data-hooks.js
var data_hooks = __webpack_require__(24);

// EXTERNAL MODULE: ./src/components/interpolate-colors.js
var interpolate_colors = __webpack_require__(86);

// EXTERNAL MODULE: ./src/components/spatial/Spatial.js
var Spatial = __webpack_require__(107);

// EXTERNAL MODULE: ./src/components/shared-plot-options/OptionsContainer.js
var OptionsContainer = __webpack_require__(104);

// EXTERNAL MODULE: ./src/components/shared-plot-options/CellColorEncodingOption.js
var CellColorEncodingOption = __webpack_require__(105);

// CONCATENATED MODULE: ./src/components/spatial/SpatialOptions.js
function SpatialOptions(props){var observationsLabel=props.observationsLabel,cellColorEncoding=props.cellColorEncoding,setCellColorEncoding=props.setCellColorEncoding;return/*#__PURE__*/external_react_default.a.createElement(OptionsContainer["a" /* default */],null,/*#__PURE__*/external_react_default.a.createElement(CellColorEncodingOption["a" /* default */],{observationsLabel:observationsLabel,cellColorEncoding:cellColorEncoding,setCellColorEncoding:setCellColorEncoding}));}
// EXTERNAL MODULE: ./src/components/tooltip/Tooltip2D.js
var Tooltip2D = __webpack_require__(79);

// EXTERNAL MODULE: ./src/components/tooltip/TooltipContent.js
var TooltipContent = __webpack_require__(80);

// EXTERNAL MODULE: ./src/app/state/hooks.js
var state_hooks = __webpack_require__(5);

// CONCATENATED MODULE: ./src/components/spatial/SpatialTooltipSubscriber.js
function SpatialTooltipSubscriber(props){var parentUuid=props.parentUuid,cellHighlight=props.cellHighlight,width=props.width,height=props.height,getCellInfo=props.getCellInfo;var sourceUuid=Object(state_hooks["b" /* useComponentHover */])();var viewInfo=Object(state_hooks["c" /* useComponentViewInfo */])(parentUuid);var _ref=cellHighlight&&getCellInfo?[getCellInfo(cellHighlight)].concat(Object(toConsumableArray["a" /* default */])(viewInfo&&viewInfo.project?viewInfo.project(cellHighlight):[null,null])):[null,null,null],_ref2=Object(slicedToArray["a" /* default */])(_ref,3),cellInfo=_ref2[0],x=_ref2[1],y=_ref2[2];return cellInfo?/*#__PURE__*/external_react_default.a.createElement(Tooltip2D["a" /* default */],{x:x,y:y,parentUuid:parentUuid,sourceUuid:sourceUuid,parentWidth:width,parentHeight:height},/*#__PURE__*/external_react_default.a.createElement(TooltipContent["a" /* default */],{info:cellInfo})):null;}
// EXTERNAL MODULE: ./src/components/spatial/utils.js
var spatial_utils = __webpack_require__(44);

// EXTERNAL MODULE: ./src/components/spatial/constants.js
var constants = __webpack_require__(18);

// EXTERNAL MODULE: ./src/app/state/coordination.js
var coordination = __webpack_require__(25);

// CONCATENATED MODULE: ./src/components/spatial/SpatialSubscriber.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SpatialSubscriber; });
var SPATIAL_DATA_TYPES=['cells','molecules','raster','cell-sets','expression-matrix'];var SPATIAL_LAYER_TYPES=['cells','molecules','raster','neighborhoods'];function SpatialSubscriber(props){var _loaders$dataset$load,_loaders$dataset$load2,_loaders$dataset$load3;var uuid=props.uuid,coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,_props$initializeLaye=props.initializeLayers,initializeLayers=_props$initializeLaye===void 0?true:_props$initializeLaye,_props$observationsLa=props.observationsLabelOverride,observationsLabel=_props$observationsLa===void 0?'cell':_props$observationsLa,_props$observationsPl=props.observationsPluralLabelOverride,observationsPluralLabel=_props$observationsPl===void 0?"".concat(observationsLabel,"s"):_props$observationsPl,_props$subobservation=props.subobservationsLabelOverride,subobservationsLabel=_props$subobservation===void 0?'molecule':_props$subobservation,_props$subobservation2=props.subobservationsPluralLabelOverride,subobservationsPluralLabel=_props$subobservation2===void 0?"".concat(subobservationsLabel,"s"):_props$subobservation2,theme=props.theme,_props$disableTooltip=props.disableTooltip,disableTooltip=_props$disableTooltip===void 0?false:_props$disableTooltip;var loaders=Object(state_hooks["h" /* useLoaders */])();var _setComponentHover=Object(state_hooks["j" /* useSetComponentHover */])();var setComponentViewInfo=Object(state_hooks["k" /* useSetComponentViewInfo */])(uuid);// Get "props" from the coordination space.
var _useCoordination=Object(state_hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].spatial,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,zoom=_useCoordination2$.spatialZoom,targetX=_useCoordination2$.spatialTargetX,targetY=_useCoordination2$.spatialTargetY,targetZ=_useCoordination2$.spatialTargetZ,layers=_useCoordination2$.spatialLayers,cellFilter=_useCoordination2$.cellFilter,cellHighlight=_useCoordination2$.cellHighlight,geneSelection=_useCoordination2$.geneSelection,cellSetSelection=_useCoordination2$.cellSetSelection,cellSetColor=_useCoordination2$.cellSetColor,cellColorEncoding=_useCoordination2$.cellColorEncoding,additionalCellSets=_useCoordination2$.additionalCellSets,_useCoordination2$2=_useCoordination2[1],setZoom=_useCoordination2$2.setSpatialZoom,setTargetX=_useCoordination2$2.setSpatialTargetX,setTargetY=_useCoordination2$2.setSpatialTargetY,setTargetZ=_useCoordination2$2.setSpatialTargetZ,setLayers=_useCoordination2$2.setSpatialLayers,setCellFilter=_useCoordination2$2.setCellFilter,setCellSetSelection=_useCoordination2$2.setCellSetSelection,setCellHighlight=_useCoordination2$2.setCellHighlight,setCellSetColor=_useCoordination2$2.setCellSetColor,setCellColorEncoding=_useCoordination2$2.setCellColorEncoding,setAdditionalCellSets=_useCoordination2$2.setAdditionalCellSets,setMoleculeHighlight=_useCoordination2$2.setMoleculeHighlight;var _useState=Object(external_react_["useState"])(Object(defineProperty["a" /* default */])({},dataset,[((_loaders$dataset$load=loaders[dataset].loaders.cells)===null||_loaders$dataset$load===void 0?void 0:_loaders$dataset$load.url)?constants["a" /* DEFAULT_CELLS_LAYER */]:null,((_loaders$dataset$load2=loaders[dataset].loaders.molecules)===null||_loaders$dataset$load2===void 0?void 0:_loaders$dataset$load2.url)?constants["c" /* DEFAULT_MOLECULES_LAYER */]:null,((_loaders$dataset$load3=loaders[dataset].loaders.neighborhoods)===null||_loaders$dataset$load3===void 0?void 0:_loaders$dataset$load3.url)?constants["d" /* DEFAULT_NEIGHBORHOODS_LAYER */]:null].filter(Boolean))),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),autoLayers=_useState2[0],setAutoLayers=_useState2[1];var _useUrls=Object(hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useReady=Object(hooks["c" /* useReady */])(SPATIAL_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];var _useDeckCanvasSize=Object(hooks["a" /* useDeckCanvasSize */])(),_useDeckCanvasSize2=Object(slicedToArray["a" /* default */])(_useDeckCanvasSize,3),width=_useDeckCanvasSize2[0],height=_useDeckCanvasSize2[1],deckRef=_useDeckCanvasSize2[2];// Reset file URLs and loader progress when the dataset has changed.
// Also clear the array of automatically-initialized layers.
Object(external_react_["useEffect"])(function(){var _loaders$dataset$load4,_loaders$dataset$load5,_loaders$dataset$load6;resetUrls();resetReadyItems();setAutoLayers(Object(defineProperty["a" /* default */])({},dataset,[((_loaders$dataset$load4=loaders[dataset].loaders.cells)===null||_loaders$dataset$load4===void 0?void 0:_loaders$dataset$load4.url)?constants["a" /* DEFAULT_CELLS_LAYER */]:null,((_loaders$dataset$load5=loaders[dataset].loaders.molecules)===null||_loaders$dataset$load5===void 0?void 0:_loaders$dataset$load5.url)?constants["c" /* DEFAULT_MOLECULES_LAYER */]:null,((_loaders$dataset$load6=loaders[dataset].loaders.neighborhoods)===null||_loaders$dataset$load6===void 0?void 0:_loaders$dataset$load6.url)?constants["d" /* DEFAULT_NEIGHBORHOODS_LAYER */]:null].filter(Boolean)));// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useCellsData=Object(data_hooks["b" /* useCellsData */])(loaders,dataset,setItemIsReady,addUrl,false,function(){}),_useCellsData2=Object(slicedToArray["a" /* default */])(_useCellsData,2),cells=_useCellsData2[0],cellsCount=_useCellsData2[1];var _useMoleculesData=Object(data_hooks["f" /* useMoleculesData */])(loaders,dataset,setItemIsReady,addUrl,false,function(){}),_useMoleculesData2=Object(slicedToArray["a" /* default */])(_useMoleculesData,3),molecules=_useMoleculesData2[0],moleculesCount=_useMoleculesData2[1],locationsCount=_useMoleculesData2[2];var _useNeighborhoodsData=Object(data_hooks["g" /* useNeighborhoodsData */])(loaders,dataset,setItemIsReady,addUrl,false,function(){}),_useNeighborhoodsData2=Object(slicedToArray["a" /* default */])(_useNeighborhoodsData,1),neighborhoods=_useNeighborhoodsData2[0];var _useCellSetsData=Object(data_hooks["a" /* useCellSetsData */])(loaders,dataset,setItemIsReady,addUrl,false),_useCellSetsData2=Object(slicedToArray["a" /* default */])(_useCellSetsData,1),cellSets=_useCellSetsData2[0];var _useExpressionMatrixD=Object(data_hooks["d" /* useExpressionMatrixData */])(loaders,dataset,setItemIsReady,addUrl,false),_useExpressionMatrixD2=Object(slicedToArray["a" /* default */])(_useExpressionMatrixD,1),expressionMatrix=_useExpressionMatrixD2[0];// eslint-disable-next-line no-unused-vars
var _useRasterData=Object(data_hooks["h" /* useRasterData */])(loaders,dataset,setItemIsReady,addUrl,false,function(autoImageLayers){return setAutoLayers(function(prev){return(// This prevents old updates from overriding the current dataset.
// The previous state must be for this dataset, otherwise it's an old update.
Object.keys(prev).includes(dataset)?Object(defineProperty["a" /* default */])({},dataset,[].concat(Object(toConsumableArray["a" /* default */])(prev[dataset]||[]),Object(toConsumableArray["a" /* default */])(autoImageLayers))):prev);});}),_useRasterData2=Object(slicedToArray["a" /* default */])(_useRasterData,2),raster=_useRasterData2[0],imageLayerLoaders=_useRasterData2[1];// Try to set up the layers array automatically if null or undefined.
Object(external_react_["useEffect"])(function(){var _Object$keys;// Check if the autoLayers have a layer for each spatial layer loader type.
var areAutoLayersComplete=(_Object$keys=Object.keys(loaders[dataset].loaders))===null||_Object$keys===void 0?void 0:_Object$keys.every(function(loaderType){return!SPATIAL_LAYER_TYPES.includes(loaderType)||autoLayers[dataset]&&autoLayers[dataset].filter(function(layer){return layer.type===loaderType;}).length>0;});if(isReady&&initializeLayers){if(!layers&&autoLayers[dataset]&&areAutoLayersComplete){setLayers(Object(spatial_utils["f" /* sortLayers */])(autoLayers[dataset]));}else if(layers){// Layers were defined, but check whether channels for each layer were also defined.
// If channel / slider / domain definitions are missing, initialize in automatically.
Object(spatial_utils["c" /* initializeLayerChannelsIfMissing */])(layers,imageLayerLoaders).then(function(_ref2){var _ref3=Object(slicedToArray["a" /* default */])(_ref2,2),newLayers=_ref3[0],didInitialize=_ref3[1];if(didInitialize){// Channels were only partially defined.
setLayers(newLayers);}});}if(typeof targetX!=='number'||typeof targetY!=='number'){var _getInitialSpatialTar=Object(spatial_utils["a" /* getInitialSpatialTargets */])({width:width,height:height,cells:cells,imageLayerLoaders:imageLayerLoaders}),initialTargetX=_getInitialSpatialTar.initialTargetX,initialTargetY=_getInitialSpatialTar.initialTargetY,initialZoom=_getInitialSpatialTar.initialZoom;setTargetX(initialTargetX);setTargetY(initialTargetY);setZoom(initialZoom);}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[dataset,loaders,autoLayers,imageLayerLoaders,isReady,layers,setLayers,initializeLayers,cells]);var mergedCellSets=Object(external_react_["useMemo"])(function(){return Object(components_utils["n" /* mergeCellSets */])(cellSets,additionalCellSets);},[cellSets,additionalCellSets]);var setCellSelectionProp=Object(external_react_["useCallback"])(function(v){Object(components_utils["o" /* setCellSelection */])(v,additionalCellSets,cellSetColor,setCellSetSelection,setAdditionalCellSets,setCellSetColor,setCellColorEncoding);},[additionalCellSets,cellSetColor,setCellColorEncoding,setAdditionalCellSets,setCellSetColor,setCellSetSelection]);var cellColors=Object(external_react_["useMemo"])(function(){return Object(interpolate_colors["a" /* getCellColors */])({cellColorEncoding:cellColorEncoding,expressionMatrix:expressionMatrix,geneSelection:geneSelection,cellSets:mergedCellSets,cellSetSelection:cellSetSelection,cellSetColor:cellSetColor});},[cellColorEncoding,geneSelection,mergedCellSets,cellSetColor,cellSetSelection,expressionMatrix]);var cellSelection=Object(external_react_["useMemo"])(function(){return Array.from(cellColors.keys());},[cellColors]);var getCellInfo=function getCellInfo(cellId){var cell=cells[cellId];if(cell){return Object(objectSpread2["a" /* default */])(Object(defineProperty["a" /* default */])({},"".concat(Object(utils["a" /* capitalize */])(observationsLabel)," ID"),cellId),cell.factors);}return null;};var subtitle=Object(spatial_utils["e" /* makeSpatialSubtitle */])({observationsCount:cellsCount,observationsLabel:observationsLabel,observationsPluralLabel:observationsPluralLabel,subobservationsCount:moleculesCount,subobservationsLabel:subobservationsLabel,subobservationsPluralLabel:subobservationsPluralLabel,locationsCount:locationsCount});return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Spatial",info:subtitle,isSpatial:true,urls:urls,theme:theme,removeGridComponent:removeGridComponent,isReady:isReady,options:/*#__PURE__*/external_react_default.a.createElement(SpatialOptions,{observationsLabel:observationsLabel,cellColorEncoding:cellColorEncoding,setCellColorEncoding:setCellColorEncoding})},/*#__PURE__*/external_react_default.a.createElement(Spatial["a" /* default */],{ref:deckRef,uuid:uuid,width:width,height:height,viewState:{zoom:zoom,target:[targetX,targetY,targetZ]},setViewState:function setViewState(_ref4){var newZoom=_ref4.zoom,target=_ref4.target;setZoom(newZoom);setTargetX(target[0]);setTargetY(target[1]);setTargetZ(target[2]);},layers:layers,cells:cells,cellFilter:cellFilter,cellSelection:cellSelection,cellHighlight:cellHighlight,cellColors:cellColors,molecules:molecules,neighborhoods:neighborhoods,imageLayerLoaders:imageLayerLoaders,setCellFilter:setCellFilter,setCellSelection:setCellSelectionProp,setCellHighlight:setCellHighlight,setMoleculeHighlight:setMoleculeHighlight,setComponentHover:function setComponentHover(){_setComponentHover(uuid);},updateViewInfo:setComponentViewInfo}),!disableTooltip&&/*#__PURE__*/external_react_default.a.createElement(SpatialTooltipSubscriber,{parentUuid:uuid,cellHighlight:cellHighlight,width:width,height:height,getCellInfo:getCellInfo}));}

/***/ }),
/* 123 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "d3-array"
var external_d3_array_ = __webpack_require__(38);

// EXTERNAL MODULE: external "lodash/clamp"
var clamp_ = __webpack_require__(46);
var clamp_default = /*#__PURE__*/__webpack_require__.n(clamp_);

// EXTERNAL MODULE: ./src/components/TitleInfo.js + 1 modules
var TitleInfo = __webpack_require__(35);

// EXTERNAL MODULE: ./src/utils.js
var utils = __webpack_require__(15);

// EXTERNAL MODULE: ./src/components/hooks.js
var hooks = __webpack_require__(23);

// EXTERNAL MODULE: ./src/components/utils.js
var components_utils = __webpack_require__(8);

// EXTERNAL MODULE: ./src/components/sets/cell-set-utils.js
var cell_set_utils = __webpack_require__(19);

// EXTERNAL MODULE: ./src/components/data-hooks.js
var data_hooks = __webpack_require__(24);

// EXTERNAL MODULE: ./src/components/interpolate-colors.js
var interpolate_colors = __webpack_require__(86);

// EXTERNAL MODULE: ./src/components/scatterplot/Scatterplot.js + 1 modules
var Scatterplot = __webpack_require__(109);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./src/components/tooltip/Tooltip2D.js
var Tooltip2D = __webpack_require__(79);

// EXTERNAL MODULE: ./src/components/tooltip/TooltipContent.js
var TooltipContent = __webpack_require__(80);

// EXTERNAL MODULE: ./src/app/state/hooks.js
var state_hooks = __webpack_require__(5);

// CONCATENATED MODULE: ./src/components/scatterplot/ScatterplotTooltipSubscriber.js
function ScatterplotTooltipSubscriber(props){var parentUuid=props.parentUuid,cellHighlight=props.cellHighlight,width=props.width,height=props.height,getCellInfo=props.getCellInfo;var sourceUuid=Object(state_hooks["b" /* useComponentHover */])();var viewInfo=Object(state_hooks["c" /* useComponentViewInfo */])(parentUuid);var _ref=cellHighlight&&getCellInfo?[getCellInfo(cellHighlight)].concat(Object(toConsumableArray["a" /* default */])(viewInfo&&viewInfo.project?viewInfo.project(cellHighlight):[null,null])):[null,null,null],_ref2=Object(slicedToArray["a" /* default */])(_ref,3),cellInfo=_ref2[0],x=_ref2[1],y=_ref2[2];return cellInfo?/*#__PURE__*/external_react_default.a.createElement(Tooltip2D["a" /* default */],{x:x,y:y,parentUuid:parentUuid,sourceUuid:sourceUuid,parentWidth:width,parentHeight:height},/*#__PURE__*/external_react_default.a.createElement(TooltipContent["a" /* default */],{info:cellInfo})):null;}
// EXTERNAL MODULE: external "@material-ui/core/Checkbox"
var Checkbox_ = __webpack_require__(76);
var Checkbox_default = /*#__PURE__*/__webpack_require__.n(Checkbox_);

// EXTERNAL MODULE: external "@material-ui/core/Slider"
var Slider_ = __webpack_require__(59);
var Slider_default = /*#__PURE__*/__webpack_require__.n(Slider_);

// EXTERNAL MODULE: external "@material-ui/core/TableCell"
var TableCell_ = __webpack_require__(54);
var TableCell_default = /*#__PURE__*/__webpack_require__.n(TableCell_);

// EXTERNAL MODULE: external "@material-ui/core/TableRow"
var TableRow_ = __webpack_require__(82);
var TableRow_default = /*#__PURE__*/__webpack_require__.n(TableRow_);

// EXTERNAL MODULE: ./src/components/shared-plot-options/styles.js
var styles = __webpack_require__(81);

// EXTERNAL MODULE: ./src/components/shared-plot-options/OptionsContainer.js
var OptionsContainer = __webpack_require__(104);

// EXTERNAL MODULE: ./src/components/shared-plot-options/CellColorEncodingOption.js
var CellColorEncodingOption = __webpack_require__(105);

// CONCATENATED MODULE: ./src/components/scatterplot/ScatterplotOptions.js
function ScatterplotOptions(props){var observationsLabel=props.observationsLabel,cellRadius=props.cellRadius,setCellRadius=props.setCellRadius,cellSetLabelsVisible=props.cellSetLabelsVisible,setCellSetLabelsVisible=props.setCellSetLabelsVisible,cellSetLabelSize=props.cellSetLabelSize,setCellSetLabelSize=props.setCellSetLabelSize,cellSetPolygonsVisible=props.cellSetPolygonsVisible,setCellSetPolygonsVisible=props.setCellSetPolygonsVisible,cellColorEncoding=props.cellColorEncoding,setCellColorEncoding=props.setCellColorEncoding;var observationsLabelNice=Object(utils["a" /* capitalize */])(observationsLabel);var classes=Object(styles["a" /* useStyles */])();function handleRadiusChange(event,value){setCellRadius(value);}function handleLabelVisibilityChange(event){setCellSetLabelsVisible(event.target.checked);}function handleLabelSizeChange(event,value){setCellSetLabelSize(value);}function handlePolygonVisibilityChange(event){setCellSetPolygonsVisible(event.target.checked);}return/*#__PURE__*/external_react_default.a.createElement(OptionsContainer["a" /* default */],null,/*#__PURE__*/external_react_default.a.createElement(TableRow_default.a,null,/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.labelCell},observationsLabelNice," Set Labels Visible"),/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.inputCell},/*#__PURE__*/external_react_default.a.createElement(Checkbox_default.a,{className:classes.checkbox,checked:cellSetLabelsVisible,onChange:handleLabelVisibilityChange,name:"scatterplot-option-cell-set-labels",color:"default"}))),/*#__PURE__*/external_react_default.a.createElement(TableRow_default.a,null,/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.labelCell},observationsLabelNice," Set Label Size"),/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.inputCell},/*#__PURE__*/external_react_default.a.createElement(Slider_default.a,{disabled:!cellSetLabelsVisible,classes:{root:classes.slider,valueLabel:classes.sliderValueLabel},value:cellSetLabelSize,onChange:handleLabelSizeChange,"aria-labelledby":"cell-set-label-size-slider",valueLabelDisplay:"auto",step:1,min:8,max:36}))),/*#__PURE__*/external_react_default.a.createElement(TableRow_default.a,null,/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.labelCell},observationsLabelNice," Set Polygons Visible"),/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.inputCell},/*#__PURE__*/external_react_default.a.createElement(Checkbox_default.a,{className:classes.checkbox,checked:cellSetPolygonsVisible,onChange:handlePolygonVisibilityChange,name:"scatterplot-option-cell-set-polygons",color:"default"}))),/*#__PURE__*/external_react_default.a.createElement(TableRow_default.a,null,/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.labelCell},observationsLabelNice," Radius"),/*#__PURE__*/external_react_default.a.createElement(TableCell_default.a,{className:classes.inputCell},/*#__PURE__*/external_react_default.a.createElement(Slider_default.a,{classes:{root:classes.slider,valueLabel:classes.sliderValueLabel},value:cellRadius,onChange:handleRadiusChange,"aria-labelledby":"cell-radius-slider",valueLabelDisplay:"auto",step:0.25,min:0.25,max:8}))),/*#__PURE__*/external_react_default.a.createElement(CellColorEncodingOption["a" /* default */],{observationsLabel:observationsLabel,cellColorEncoding:cellColorEncoding,setCellColorEncoding:setCellColorEncoding}));}
// EXTERNAL MODULE: ./src/app/state/coordination.js
var coordination = __webpack_require__(25);

// CONCATENATED MODULE: ./src/components/scatterplot/ScatterplotSubscriber.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ScatterplotSubscriber; });
var SCATTERPLOT_DATA_TYPES=['cells','expression-matrix','cell-sets'];function ScatterplotSubscriber(props){var uuid=props.uuid,coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme,_props$disableTooltip=props.disableTooltip,disableTooltip=_props$disableTooltip===void 0?false:_props$disableTooltip,_props$observationsLa=props.observationsLabelOverride,observationsLabel=_props$observationsLa===void 0?'cell':_props$observationsLa,_props$observationsPl=props.observationsPluralLabelOverride,observationsPluralLabel=_props$observationsPl===void 0?"".concat(observationsLabel,"s"):_props$observationsPl;var loaders=Object(state_hooks["h" /* useLoaders */])();var _setComponentHover=Object(state_hooks["j" /* useSetComponentHover */])();var setComponentViewInfo=Object(state_hooks["k" /* useSetComponentViewInfo */])(uuid);// Get "props" from the coordination space.
var _useCoordination=Object(state_hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].scatterplot,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,zoom=_useCoordination2$.embeddingZoom,targetX=_useCoordination2$.embeddingTargetX,targetY=_useCoordination2$.embeddingTargetY,targetZ=_useCoordination2$.embeddingTargetZ,mapping=_useCoordination2$.embeddingType,cellFilter=_useCoordination2$.cellFilter,cellHighlight=_useCoordination2$.cellHighlight,geneSelection=_useCoordination2$.geneSelection,cellSetSelection=_useCoordination2$.cellSetSelection,cellSetColor=_useCoordination2$.cellSetColor,cellColorEncoding=_useCoordination2$.cellColorEncoding,additionalCellSets=_useCoordination2$.additionalCellSets,cellSetPolygonsVisible=_useCoordination2$.embeddingCellSetPolygonsVisible,cellSetLabelsVisible=_useCoordination2$.embeddingCellSetLabelsVisible,cellSetLabelSize=_useCoordination2$.embeddingCellSetLabelSize,cellRadius=_useCoordination2$.embeddingCellRadius,_useCoordination2$2=_useCoordination2[1],setZoom=_useCoordination2$2.setEmbeddingZoom,setTargetX=_useCoordination2$2.setEmbeddingTargetX,setTargetY=_useCoordination2$2.setEmbeddingTargetY,setTargetZ=_useCoordination2$2.setEmbeddingTargetZ,setCellFilter=_useCoordination2$2.setCellFilter,setCellSetSelection=_useCoordination2$2.setCellSetSelection,setCellHighlight=_useCoordination2$2.setCellHighlight,setCellSetColor=_useCoordination2$2.setCellSetColor,setCellColorEncoding=_useCoordination2$2.setCellColorEncoding,setAdditionalCellSets=_useCoordination2$2.setAdditionalCellSets,setCellSetPolygonsVisible=_useCoordination2$2.setEmbeddingCellSetPolygonsVisible,setCellSetLabelsVisible=_useCoordination2$2.setEmbeddingCellSetLabelsVisible,setCellSetLabelSize=_useCoordination2$2.setEmbeddingCellSetLabelSize,setCellRadius=_useCoordination2$2.setEmbeddingCellRadius;var _useUrls=Object(hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useDeckCanvasSize=Object(hooks["a" /* useDeckCanvasSize */])(),_useDeckCanvasSize2=Object(slicedToArray["a" /* default */])(_useDeckCanvasSize,3),width=_useDeckCanvasSize2[0],height=_useDeckCanvasSize2[1],deckRef=_useDeckCanvasSize2[2];var _useReady=Object(hooks["c" /* useReady */])(SCATTERPLOT_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset file URLs and loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useCellsData=Object(data_hooks["b" /* useCellsData */])(loaders,dataset,setItemIsReady,addUrl,true),_useCellsData2=Object(slicedToArray["a" /* default */])(_useCellsData,2),cells=_useCellsData2[0],cellsCount=_useCellsData2[1];var _useCellSetsData=Object(data_hooks["a" /* useCellSetsData */])(loaders,dataset,setItemIsReady,addUrl,false),_useCellSetsData2=Object(slicedToArray["a" /* default */])(_useCellSetsData,1),cellSets=_useCellSetsData2[0];var _useExpressionMatrixD=Object(data_hooks["d" /* useExpressionMatrixData */])(loaders,dataset,setItemIsReady,addUrl,false),_useExpressionMatrixD2=Object(slicedToArray["a" /* default */])(_useExpressionMatrixD,1),expressionMatrix=_useExpressionMatrixD2[0];var _useState=Object(external_react_["useState"])(0.2),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),cellRadiusScale=_useState2[0],setCellRadiusScale=_useState2[1];var mergedCellSets=Object(external_react_["useMemo"])(function(){return Object(components_utils["n" /* mergeCellSets */])(cellSets,additionalCellSets);},[cellSets,additionalCellSets]);var setCellSelectionProp=Object(external_react_["useCallback"])(function(v){Object(components_utils["o" /* setCellSelection */])(v,additionalCellSets,cellSetColor,setCellSetSelection,setAdditionalCellSets,setCellSetColor,setCellColorEncoding);},[additionalCellSets,cellSetColor,setCellColorEncoding,setAdditionalCellSets,setCellSetColor,setCellSetSelection]);var cellColors=Object(external_react_["useMemo"])(function(){return Object(interpolate_colors["a" /* getCellColors */])({cellColorEncoding:cellColorEncoding,expressionMatrix:expressionMatrix,geneSelection:geneSelection,cellSets:mergedCellSets,cellSetSelection:cellSetSelection,cellSetColor:cellSetColor});},[cellColorEncoding,geneSelection,mergedCellSets,cellSetSelection,cellSetColor,expressionMatrix]);var cellSetPolygons=Object(external_react_["useMemo"])(function(){return Object(cell_set_utils["b" /* getCellSetPolygons */])({cells:cells,mapping:mapping,cellSets:mergedCellSets,cellSetSelection:cellSetSelection,cellSetColor:cellSetColor});},[cells,mapping,mergedCellSets,cellSetSelection,cellSetColor]);var cellSelection=Object(external_react_["useMemo"])(function(){return Array.from(cellColors.keys());},[cellColors]);// After cells have loaded or changed,
// compute the cell radius scale based on the
// extents of the cell coordinates on the x/y axes.
Object(external_react_["useEffect"])(function(){var cellValues=cells&&Object.values(cells);if(cellValues===null||cellValues===void 0?void 0:cellValues.length){var cellCoordinates=Object.values(cells).map(function(c){return c.mappings[mapping];});var xExtent=Object(external_d3_array_["extent"])(cellCoordinates,function(c){return c[0];});var yExtent=Object(external_d3_array_["extent"])(cellCoordinates,function(c){return c[1];});var xRange=xExtent[1]-xExtent[0];var yRange=yExtent[1]-yExtent[0];var diagonalLength=Math.sqrt(Math.pow(xRange,2)+Math.pow(yRange,2));// The 300 value here is a heuristic.
var newScale=clamp_default()(diagonalLength/300,0,0.2);if(newScale){setCellRadiusScale(newScale);}if(typeof targetX!=='number'||typeof targetY!=='number'){var newTargetX=xExtent[0]+xRange/2;var newTargetY=yExtent[0]+yRange/2;var newZoom=Math.log2(Math.min(width/xRange,height/yRange));setTargetX(newTargetX);// Graphics rendering has the y-axis going south so we need to multiply by negative one.
setTargetY(-newTargetY);setZoom(newZoom);}}// eslint-disable-next-line react-hooks/exhaustive-deps
},[cells,mapping]);var getCellInfo=Object(external_react_["useCallback"])(function(cellId){var cellInfo=cells[cellId];return Object(objectSpread2["a" /* default */])(Object(defineProperty["a" /* default */])({},"".concat(Object(utils["a" /* capitalize */])(observationsLabel)," ID"),cellId),cellInfo?cellInfo.factors:{});},[cells,observationsLabel]);return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Scatterplot (".concat(mapping,")"),info:"".concat(cellsCount," ").concat(Object(utils["d" /* pluralize */])(observationsLabel,observationsPluralLabel,cellsCount)),removeGridComponent:removeGridComponent,urls:urls,theme:theme,isReady:isReady,options:/*#__PURE__*/external_react_default.a.createElement(ScatterplotOptions,{observationsLabel:observationsLabel,cellRadius:cellRadius,setCellRadius:setCellRadius,cellSetLabelsVisible:cellSetLabelsVisible,setCellSetLabelsVisible:setCellSetLabelsVisible,cellSetLabelSize:cellSetLabelSize,setCellSetLabelSize:setCellSetLabelSize,cellSetPolygonsVisible:cellSetPolygonsVisible,setCellSetPolygonsVisible:setCellSetPolygonsVisible,cellColorEncoding:cellColorEncoding,setCellColorEncoding:setCellColorEncoding})},/*#__PURE__*/external_react_default.a.createElement(Scatterplot["a" /* default */],{ref:deckRef,uuid:uuid,theme:theme,viewState:{zoom:zoom,target:[targetX,targetY,targetZ]},setViewState:function setViewState(_ref){var newZoom=_ref.zoom,target=_ref.target;setZoom(newZoom);setTargetX(target[0]);setTargetY(target[1]);setTargetZ(target[2]);},cells:cells,mapping:mapping,cellFilter:cellFilter,cellSelection:cellSelection,cellHighlight:cellHighlight,cellColors:cellColors,cellSetPolygons:cellSetPolygons,cellSetLabelSize:cellSetLabelSize,cellSetLabelsVisible:cellSetLabelsVisible,cellSetPolygonsVisible:cellSetPolygonsVisible,setCellFilter:setCellFilter,setCellSelection:setCellSelectionProp,setCellHighlight:setCellHighlight,cellRadiusScale:cellRadiusScale*cellRadius,setComponentHover:function setComponentHover(){_setComponentHover(uuid);},updateViewInfo:setComponentViewInfo}),!disableTooltip&&/*#__PURE__*/external_react_default.a.createElement(ScatterplotTooltipSubscriber,{parentUuid:uuid,cellHighlight:cellHighlight,width:width,height:height,getCellInfo:getCellInfo}));}

/***/ }),
/* 124 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: ./src/components/TitleInfo.js + 1 modules
var TitleInfo = __webpack_require__(35);

// EXTERNAL MODULE: ./src/utils.js
var utils = __webpack_require__(15);

// EXTERNAL MODULE: ./src/components/hooks.js
var hooks = __webpack_require__(23);

// EXTERNAL MODULE: ./src/components/utils.js
var components_utils = __webpack_require__(8);

// EXTERNAL MODULE: ./src/components/data-hooks.js
var data_hooks = __webpack_require__(24);

// EXTERNAL MODULE: ./src/components/interpolate-colors.js
var interpolate_colors = __webpack_require__(86);

// EXTERNAL MODULE: ./src/app/state/hooks.js
var state_hooks = __webpack_require__(5);

// EXTERNAL MODULE: ./src/app/state/coordination.js
var coordination = __webpack_require__(25);

// EXTERNAL MODULE: ./src/components/heatmap/Heatmap.js + 2 modules
var Heatmap = __webpack_require__(108);

// EXTERNAL MODULE: ./src/components/tooltip/Tooltip2D.js
var Tooltip2D = __webpack_require__(79);

// EXTERNAL MODULE: ./src/components/tooltip/TooltipContent.js
var TooltipContent = __webpack_require__(80);

// CONCATENATED MODULE: ./src/components/heatmap/HeatmapTooltipSubscriber.js
function HeatmapTooltipSubscriber(props){var parentUuid=props.parentUuid,width=props.width,height=props.height,transpose=props.transpose,getCellInfo=props.getCellInfo,getGeneInfo=props.getGeneInfo,cellHighlight=props.cellHighlight,geneHighlight=props.geneHighlight;var sourceUuid=Object(state_hooks["b" /* useComponentHover */])();var viewInfo=Object(state_hooks["c" /* useComponentViewInfo */])(parentUuid);var _ref=cellHighlight&&getCellInfo?[getCellInfo(cellHighlight),viewInfo&&viewInfo.project?viewInfo.project(cellHighlight,null)[transpose?0:1]:null]:[null,null],_ref2=Object(slicedToArray["a" /* default */])(_ref,2),cellInfo=_ref2[0],cellCoord=_ref2[1];var _ref3=geneHighlight&&getGeneInfo?[getGeneInfo(geneHighlight),viewInfo&&viewInfo.project?viewInfo.project(null,geneHighlight)[transpose?1:0]:null]:[null,null],_ref4=Object(slicedToArray["a" /* default */])(_ref3,2),geneInfo=_ref4[0],geneCoord=_ref4[1];var x=transpose?cellCoord:geneCoord;var y=transpose?geneCoord:cellCoord;return cellInfo||geneInfo?/*#__PURE__*/external_react_default.a.createElement(Tooltip2D["a" /* default */],{x:x,y:y,parentUuid:parentUuid,parentWidth:width,parentHeight:height,sourceUuid:sourceUuid},/*#__PURE__*/external_react_default.a.createElement(TooltipContent["a" /* default */],{info:Object(objectSpread2["a" /* default */])({},geneInfo,{},cellInfo)})):null;}
// CONCATENATED MODULE: ./src/components/heatmap/HeatmapSubscriber.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HeatmapSubscriber; });
var HEATMAP_DATA_TYPES=['cells','cell-sets','expression-matrix'];function HeatmapSubscriber(props){var uuid=props.uuid,coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme,transpose=props.transpose,_props$observationsLa=props.observationsLabelOverride,observationsLabel=_props$observationsLa===void 0?'cell':_props$observationsLa,_props$observationsPl=props.observationsPluralLabelOverride,observationsPluralLabel=_props$observationsPl===void 0?"".concat(observationsLabel,"s"):_props$observationsPl,_props$variablesLabel=props.variablesLabelOverride,variablesLabel=_props$variablesLabel===void 0?'gene':_props$variablesLabel,_props$variablesPlura=props.variablesPluralLabelOverride,variablesPluralLabel=_props$variablesPlura===void 0?"".concat(variablesLabel,"s"):_props$variablesPlura,_props$disableTooltip=props.disableTooltip,disableTooltip=_props$disableTooltip===void 0?false:_props$disableTooltip;var loaders=Object(state_hooks["h" /* useLoaders */])();var _setComponentHover=Object(state_hooks["j" /* useSetComponentHover */])();var setComponentViewInfo=Object(state_hooks["k" /* useSetComponentViewInfo */])(uuid);// Get "props" from the coordination space.
var _useCoordination=Object(state_hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].heatmap,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,zoomX=_useCoordination2$.heatmapZoomX,targetX=_useCoordination2$.heatmapTargetX,targetY=_useCoordination2$.heatmapTargetY,geneSelection=_useCoordination2$.geneSelection,cellHighlight=_useCoordination2$.cellHighlight,geneHighlight=_useCoordination2$.geneHighlight,cellSetSelection=_useCoordination2$.cellSetSelection,cellSetColor=_useCoordination2$.cellSetColor,cellColorEncoding=_useCoordination2$.cellColorEncoding,additionalCellSets=_useCoordination2$.additionalCellSets,heatmapControls=_useCoordination2$.geneExpressionColormapRange,_useCoordination2$2=_useCoordination2[1],setZoomX=_useCoordination2$2.setHeatmapZoomX,setZoomY=_useCoordination2$2.setHeatmapZoomY,setTargetX=_useCoordination2$2.setHeatmapTargetX,setTargetY=_useCoordination2$2.setHeatmapTargetY,setCellHighlight=_useCoordination2$2.setCellHighlight,setGeneHighlight=_useCoordination2$2.setGeneHighlight,setHeatmapControls=_useCoordination2$2.setGeneExpressionColormapRange;var observationsTitle=Object(utils["a" /* capitalize */])(observationsPluralLabel);var variablesTitle=Object(utils["a" /* capitalize */])(variablesPluralLabel);var _useState=Object(external_react_["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isRendering=_useState2[0],setIsRendering=_useState2[1];var _useReady=Object(hooks["c" /* useReady */])(HEATMAP_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];var _useUrls=Object(hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useDeckCanvasSize=Object(hooks["a" /* useDeckCanvasSize */])(),_useDeckCanvasSize2=Object(slicedToArray["a" /* default */])(_useDeckCanvasSize,3),width=_useDeckCanvasSize2[0],height=_useDeckCanvasSize2[1],deckRef=_useDeckCanvasSize2[2];// Reset file URLs and loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useCellsData=Object(data_hooks["b" /* useCellsData */])(loaders,dataset,setItemIsReady,addUrl,true),_useCellsData2=Object(slicedToArray["a" /* default */])(_useCellsData,1),cells=_useCellsData2[0];var _useExpressionMatrixD=Object(data_hooks["d" /* useExpressionMatrixData */])(loaders,dataset,setItemIsReady,addUrl,true),_useExpressionMatrixD2=Object(slicedToArray["a" /* default */])(_useExpressionMatrixD,1),expressionMatrix=_useExpressionMatrixD2[0];var _useCellSetsData=Object(data_hooks["a" /* useCellSetsData */])(loaders,dataset,setItemIsReady,addUrl,false),_useCellSetsData2=Object(slicedToArray["a" /* default */])(_useCellSetsData,1),cellSets=_useCellSetsData2[0];var mergedCellSets=Object(external_react_["useMemo"])(function(){return Object(components_utils["n" /* mergeCellSets */])(cellSets,additionalCellSets);},[cellSets,additionalCellSets]);var cellColors=Object(external_react_["useMemo"])(function(){return Object(interpolate_colors["a" /* getCellColors */])({cellColorEncoding:cellColorEncoding,expressionMatrix:expressionMatrix,geneSelection:geneSelection,cellSets:mergedCellSets,cellSetSelection:cellSetSelection,cellSetColor:cellSetColor});},[cellColorEncoding,geneSelection,mergedCellSets,cellSetColor,cellSetSelection,expressionMatrix]);var getCellInfo=Object(external_react_["useCallback"])(function(cellId){if(cellId){var cellInfo=cells[cellId];return Object(objectSpread2["a" /* default */])(Object(defineProperty["a" /* default */])({},"".concat(Object(utils["a" /* capitalize */])(observationsLabel)," ID"),cellId),cellInfo?cellInfo.factors:{});}return null;},[cells,observationsLabel]);var getGeneInfo=Object(external_react_["useCallback"])(function(geneId){if(geneId){return Object(defineProperty["a" /* default */])({},"".concat(Object(utils["a" /* capitalize */])(variablesLabel)," ID"),geneId);}return null;},[variablesLabel]);var cellsCount=expressionMatrix&&expressionMatrix.rows?expressionMatrix.rows.length:0;var genesCount=expressionMatrix&&expressionMatrix.cols?expressionMatrix.cols.length:0;var selectedCount=cellColors.size;return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Heatmap",info:"".concat(cellsCount," ").concat(Object(utils["d" /* pluralize */])(observationsLabel,observationsPluralLabel,cellsCount)," \xD7 ").concat(genesCount," ").concat(Object(utils["d" /* pluralize */])(variablesLabel,variablesPluralLabel,genesCount),",\n             with ").concat(selectedCount," ").concat(Object(utils["d" /* pluralize */])(observationsLabel,observationsPluralLabel,selectedCount)," selected"),urls:urls,theme:theme,removeGridComponent:removeGridComponent,isReady:isReady&&!isRendering},/*#__PURE__*/external_react_default.a.createElement(Heatmap["a" /* default */],{ref:deckRef,transpose:transpose,viewState:{zoom:zoomX,target:[targetX,targetY]},setViewState:function setViewState(_ref2){var zoom=_ref2.zoom,target=_ref2.target;setZoomX(zoom);setZoomY(zoom);setTargetX(target[0]);setTargetY(target[1]);},heatmapControls:heatmapControls,setHeatmapControls:setHeatmapControls,height:height,width:width,theme:theme,uuid:uuid,expressionMatrix:expressionMatrix,cellColors:cellColors,setIsRendering:setIsRendering,setCellHighlight:setCellHighlight,setGeneHighlight:setGeneHighlight,setComponentHover:function setComponentHover(){_setComponentHover(uuid);},updateViewInfo:setComponentViewInfo,observationsTitle:observationsTitle,variablesTitle:variablesTitle}),!disableTooltip&&/*#__PURE__*/external_react_default.a.createElement(HeatmapTooltipSubscriber,{parentUuid:uuid,width:width,height:height,transpose:transpose,getCellInfo:getCellInfo,getGeneInfo:getGeneInfo,cellHighlight:cellHighlight,geneHighlight:geneHighlight}));}

/***/ }),
/* 125 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Status; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
function Status(props){var warnClass='alert alert-warning my-0 details';var info=props.info,warn=props.warn;var messages=[];if(info){messages.push(/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",{className:"details",key:"info"},info));}if(warn){messages.push(/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",{className:warnClass,key:"warn"},warn));}return messages;}

/***/ }),
/* 126 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CellSetSizesPlot; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_clamp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46);
/* harmony import */ var lodash_clamp__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _vega__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16);
/**
 * Cell set sizes displayed as a bar chart,
 * implemented with the VegaPlot component.
 * @param {object} props
 * @param {object[]} props.data The set size data, an array
 * of objects with properties `name`, `key`, `color`, and `size`.
 * @param {string} props.theme The name of the current Vitessce theme.
 * @param {number} props.width The container width.
 * @param {number} props.height The container height.
 * @param {number} props.marginRight The size of the margin
 * on the right side of the plot, to account for the vega menu button.
 * By default, 90.
 * @param {number} props.marginBottom The size of the margin
 * on the bottom of the plot, to account for long x-axis labels.
 * By default, 120.
 * @param {number} props.keyLength The length of the `key` property of
 * each data point. Assumes all key strings have the same length.
 * By default, 36.
 */function CellSetSizesPlot(props){var rawData=props.data,theme=props.theme,width=props.width,height=props.height,_props$marginRight=props.marginRight,marginRight=_props$marginRight===void 0?90:_props$marginRight,_props$marginBottom=props.marginBottom,marginBottom=_props$marginBottom===void 0?120:_props$marginBottom,_props$keyLength=props.keyLength,keyLength=_props$keyLength===void 0?36:_props$keyLength;// Add a property `keyName` which concatenates the key and the name,
// which is both unique and can easily be converted
// back to the name by taking a substring.
// Add a property `colorString` which contains the `[r, g, b]` color
// after converting to a color hex string.
var data=rawData.map(function(d){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},d,{keyName:d.key+d.name,colorString:Object(_utils__WEBPACK_IMPORTED_MODULE_4__[/* colorArrayToString */ "c"])(d.color)});});// Manually set the color scale so that Vega-Lite does
// not choose the colors automatically.
var colors={domain:data.map(function(d){return d.key;}),range:data.map(function(d){return d.colorString;})};// Get an array of keys for sorting purposes.
var keys=data.map(function(d){return d.keyName;});var spec={mark:{type:'bar'},encoding:{x:{field:'keyName',type:'nominal',axis:{labelExpr:"substring(datum.label, ".concat(keyLength,")")},title:'Cell Set',sort:keys},y:{field:'size',type:'quantitative',title:'Cell Set Size'},color:{field:'key',type:'nominal',scale:colors,legend:null},tooltip:{field:'size',type:'quantitative'}},width:lodash_clamp__WEBPACK_IMPORTED_MODULE_2___default()(width-marginRight,10,Infinity),height:lodash_clamp__WEBPACK_IMPORTED_MODULE_2___default()(height-marginBottom,10,Infinity),config:_vega__WEBPACK_IMPORTED_MODULE_3__[/* VEGA_THEMES */ "b"][theme]};return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_vega__WEBPACK_IMPORTED_MODULE_3__[/* VegaPlot */ "c"],{data:data,spec:spec});}

/***/ }),
/* 127 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "lodash/isEqual"
var isEqual_ = __webpack_require__(13);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual_);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: external "rc-tree"
var external_rc_tree_ = __webpack_require__(110);
var external_rc_tree_default = /*#__PURE__*/__webpack_require__.n(external_rc_tree_);

// EXTERNAL MODULE: external "classnames"
var external_classnames_ = __webpack_require__(100);
var external_classnames_default = /*#__PURE__*/__webpack_require__.n(external_classnames_);

// CONCATENATED MODULE: ./src/components/sets/Tree.js
/**
 * A helper component around the rc-tree
 * library's tree component, to set
 * default props.
 */var Tree=external_react_default.a.forwardRef(function(props,ref){var _classNames;var prefixCls=props.prefixCls,className=props.className,showIcon=props.showIcon,blockNode=props.blockNode,children=props.children,checkable=props.checkable;return/*#__PURE__*/external_react_default.a.createElement(external_rc_tree_default.a,Object.assign({itemHeight:32,ref:ref},props,{className:external_classnames_default()(className,(_classNames={},Object(defineProperty["a" /* default */])(_classNames,"".concat(prefixCls,"-icon-hide"),!showIcon),Object(defineProperty["a" /* default */])(_classNames,"".concat(prefixCls,"-block-node"),blockNode),_classNames)),checkable:checkable?/*#__PURE__*/external_react_default.a.createElement("span",{className:"".concat(prefixCls,"-checkbox-inner")}):checkable}),children);});Tree.defaultProps={virtual:false,checkable:false,showIcon:false,blockNode:true,prefixCls:'rc-tree'};/* harmony default export */ var sets_Tree = (Tree);
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules
var objectWithoutProperties = __webpack_require__(99);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(40);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// EXTERNAL MODULE: external "clsx"
var external_clsx_ = __webpack_require__(144);
var external_clsx_default = /*#__PURE__*/__webpack_require__.n(external_clsx_);

// EXTERNAL MODULE: external "rc-tree/es/util"
var util_ = __webpack_require__(145);

// EXTERNAL MODULE: external "lodash/range"
var range_ = __webpack_require__(47);
var range_default = /*#__PURE__*/__webpack_require__.n(range_);

// EXTERNAL MODULE: external "react-color"
var external_react_color_ = __webpack_require__(146);

// EXTERNAL MODULE: ./src/components/sets/utils.js
var utils = __webpack_require__(16);

// EXTERNAL MODULE: ./src/components/utils.js
var components_utils = __webpack_require__(8);

// EXTERNAL MODULE: external "rc-tooltip"
var external_rc_tooltip_ = __webpack_require__(147);
var external_rc_tooltip_default = /*#__PURE__*/__webpack_require__.n(external_rc_tooltip_);

// CONCATENATED MODULE: ./src/components/sets/HelpTooltip.js
/**
 * This is a small wrapper around the Tooltip component from the rc-tooltip library,
 * which is required to be able to apply theme styles to the tooltip.
 * The default `getTooltipContainer` function used by rc-tooltip
 * just returns `document.body` (see https://github.com/react-component/tooltip#props),
 * We want theme styles to be applied relative to the closest `.vitessce-container`
 * ancestor element.
 * https://github.com/hubmapconsortium/vitessce/pull/494#discussion_r395957914
 * @param {object} props Props are passed through to the <RcTooltip/> from the library.
 */function HelpTooltip(props){var title=props.title,content=props.content,overlayClassName=props.overlayClassName;var spanRef=Object(external_react_["useRef"])();var getTooltipContainer=Object(external_react_["useCallback"])(function(){if(spanRef.current){return spanRef.current.closest('.vitessce-container');}return null;},[spanRef]);var overlay=title||content;return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement("span",{ref:spanRef}),/*#__PURE__*/external_react_default.a.createElement(external_rc_tooltip_default.a,Object.assign({getTooltipContainer:getTooltipContainer,overlayClassName:overlayClassName,overlay:overlay},props)));}HelpTooltip.defaultProps={overlayClassName:'help-tooltip',placement:'top',trigger:'hover',mouseEnterDelay:0.2,mouseLeaveDelay:0};
// CONCATENATED MODULE: ./src/components/sets/Popover.js
/**
 * This is a wrapper around the HelpTooltip component, to style it as a popover,
 * and change the trigger to "click" rather than "hover".
 * @param {*} props Props are passed through to the HelpTooltip component.
 */function Popover(props){return/*#__PURE__*/external_react_default.a.createElement(HelpTooltip,props);}Popover.defaultProps={overlayClassName:'popover',placement:'top',trigger:'click',mouseEnterDelay:0,mouseLeaveDelay:0};
// CONCATENATED MODULE: ./src/components/sets/PopoverMenu.js
/**
 * Wrapper around a button element that supports asking for confirmation.
 * @param {object} props
 * @param {string} props.title The main button text.
 * @param {string} props.subtitle Smaller text on a line beneath the main text. Optional.
 * @param {function} props.onClick A "clean up" handler passed from the parent,
 * to alert the parent Popover component that it should close the popover after the button has
 * fired its handler.
 * @param {function} props.handler A function to call on button click (or after confirmation).
 * @param {string} props.handlerKey A key associated with the button, to support accessibility.
 * @param {boolean} props.confirm Does the user need to press the button again to confirm?
 * By default, false.
 * @param {boolean} props.visible The visibility state from the parent popover,
 * so that on visibility change, the button can clear its confirmation state.
 */function PopoverMenuListButton(props){var title=props.title,subtitle=props.subtitle,onClick=props.onClick,handler=props.handler,handlerKey=props.handlerKey,confirm=props.confirm,visible=props.visible;var _useState=Object(external_react_["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isConfirming=_useState2[0],setIsConfirming=_useState2[1];Object(external_react_["useEffect"])(function(){// Want to clear the "confirming",
// state if the user hides the popover.
setIsConfirming(false);},[visible]);function handleOrRequireConfirm(){if(!confirm||isConfirming){onClick();handler();}else{setIsConfirming(true);}}var titleWithConfirm="".concat(isConfirming?'Confirm ':'').concat(title);return/*#__PURE__*/external_react_default.a.createElement("button",{title:titleWithConfirm,type:"button",onClick:handleOrRequireConfirm,onKeyPress:function onKeyPress(e){return Object(utils["b" /* callbackOnKeyPress */])(e,handlerKey,handleOrRequireConfirm);}},titleWithConfirm,subtitle&&/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement("br",null),/*#__PURE__*/external_react_default.a.createElement("span",{className:"small"},subtitle)));}/**
 * Helper component to create a list of buttons for the body of a popover.
 * If the color, setColor, and palette props are provided then a color picker
 * will be rendered at the top of the button list.
 * @param {object} props
 * @param {object[]} props.menuConfig The list of button definition objects.
 * `{ title, subtitle, confirm, handler, handlerKey }`
 * @param {function} props.onClick A "clean up" handler passed from the parent,
 * to alert the parent Popover component that it should close the popover after the button has
 * fired its handler.
 * @param {number[]} props.color The current color. Optional.
 * @param {string} props.palette The color palette for the color picker. Optional.
 * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.
 * @param {boolean} props.visible The visibility state from the parent popover,
 * so that on visibility change, buttons can clear confirmation states.
 */function PopoverMenuList(props){var menuConfig=props.menuConfig,onClick=props.onClick,_props$color=props.color,color=_props$color===void 0?null:_props$color,_props$palette=props.palette,palette=_props$palette===void 0?null:_props$palette,_props$setColor=props.setColor,setColor=_props$setColor===void 0?null:_props$setColor,visible=props.visible;function handleColorChange(_ref){var rgb=_ref.rgb;if(rgb&&setColor){setColor([rgb.r,rgb.g,rgb.b]);}}var defaultPalette=palette?palette.map(utils["c" /* colorArrayToString */]):components_utils["d" /* PALETTE */].concat([[255,255,255],[128,128,128],[0,0,0]]).map(utils["c" /* colorArrayToString */]);return/*#__PURE__*/external_react_default.a.createElement("div",null,color&&setColor&&defaultPalette&&/*#__PURE__*/external_react_default.a.createElement(external_react_color_["TwitterPicker"],{className:"popover-menu-color",disableAlpha:true,width:108,triangle:"hide",colors:defaultPalette,color:Object(utils["c" /* colorArrayToString */])(color),onChangeComplete:handleColorChange}),/*#__PURE__*/external_react_default.a.createElement("ul",{className:"popover-menu-list"},menuConfig.map(function(item){return/*#__PURE__*/external_react_default.a.createElement("li",{key:item.title+item.subtitle},/*#__PURE__*/external_react_default.a.createElement(PopoverMenuListButton,Object.assign({},item,{onClick:onClick,visible:visible})));})));}/**
 * Helper component to create a popover component with a list of buttons.
 * If the color, setColor, and palette props are provided then a color picker
 * will be rendered at the top of the button list.
 * @param {object} props
 * @param {object[]} props.menuConfig The list of button definition objects.
 * `{ title, subtitle, confirm, handler, handlerKey }`
 * @param {string} placement Where to place the popover (top, bottom, left, right).
 * @param {number[]} props.color The current color. Optional.
 * @param {string} props.palette The color palette for the color picker. Optional.
 * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.
 * @param {Element|React.Component} props.children Children to render,
 * which will trigger the popover on click.
 */function PopoverMenu(props){var menuConfig=props.menuConfig,placement=props.placement,children=props.children,_props$color2=props.color,color=_props$color2===void 0?null:_props$color2,_props$setColor2=props.setColor,setColor=_props$setColor2===void 0?null:_props$setColor2,_props$palette2=props.palette,palette=_props$palette2===void 0?null:_props$palette2;var _useState3=Object(external_react_["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];return/*#__PURE__*/external_react_default.a.createElement(Popover,{content:/*#__PURE__*/external_react_default.a.createElement(PopoverMenuList,{menuConfig:menuConfig,onClick:function onClick(){return setVisible(false);},color:color,setColor:setColor,palette:palette,visible:visible}),placement:placement,visible:visible,onVisibleChange:setVisible},children);}
// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/menu.svg
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



var _ref2 = /*#__PURE__*/external_react_["createElement"]("path", {
  d: "M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z"
});

function SvgMenu(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = _objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", _extends({
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, _ref2);
}

var ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgMenu, _extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var menu = (__webpack_require__.p + "static/media/menu.bc56e94a.svg");

// CONCATENATED MODULE: ./src/components/sets/TreeNode.js
/**
 * Construct a `menuConfig` array for the PopoverMenu component.
 * @param {object} props The props for the TreeNode component.
 * @returns {object[]} An array of menu items to pass to PopoverMenu.
 */function makeNodeViewMenuConfig(props){var path=props.path,level=props.level,height=props.height,onCheckNode=props.onCheckNode,onNodeRemove=props.onNodeRemove,onNodeSetIsEditing=props.onNodeSetIsEditing,onExportLevelZeroNodeJSON=props.onExportLevelZeroNodeJSON,onExportLevelZeroNodeTabular=props.onExportLevelZeroNodeTabular,onExportSetJSON=props.onExportSetJSON,checkable=props.checkable,editable=props.editable,exportable=props.exportable,checked=props.checked;return[].concat(Object(toConsumableArray["a" /* default */])(editable?[{title:'Rename',handler:function handler(){onNodeSetIsEditing(path,true);},handlerKey:'r'},{title:'Delete',confirm:true,handler:function handler(){onNodeRemove(path);},handlerKey:'d'}]:[]),Object(toConsumableArray["a" /* default */])(level===0&&exportable?[{title:'Export hierarchy',subtitle:'(to JSON file)',handler:function handler(){onExportLevelZeroNodeJSON(path);},handlerKey:'j'}].concat(Object(toConsumableArray["a" /* default */])(height<=1?[{title:'Export hierarchy',subtitle:'(to CSV file)',handler:function handler(){onExportLevelZeroNodeTabular(path);},handlerKey:'t'}]:[])):[]),Object(toConsumableArray["a" /* default */])(level>0?[].concat(Object(toConsumableArray["a" /* default */])(checkable?[{title:checked?'Uncheck':'Check',handler:function handler(){onCheckNode(path,!checked);},handlerKey:'s'}]:[]),Object(toConsumableArray["a" /* default */])(exportable?[{title:'Export set',subtitle:'(to JSON file)',handler:function handler(){onExportSetJSON(path);},handlerKey:'e'}]:[])):[]));}/**
 * The "static" node component to render when the user is not renaming.
 * @param {object} props The props for the TreeNode component.
 */function NamedSetNodeStatic(props){var title=props.title,path=props.path,nodeKey=props.nodeKey,level=props.level,height=props.height,color=props.color,checkbox=props.checkbox,isChecking=props.isChecking,isLeaf=props.isLeaf,onNodeSetColor=props.onNodeSetColor,onNodeView=props.onNodeView,expanded=props.expanded,onCheckLevel=props.onCheckLevel,checkedLevelPath=props.checkedLevelPath,checkedLevelIndex=props.checkedLevelIndex,disableTooltip=props.disableTooltip,size=props.size,datatype=props.datatype,editable=props.editable;var shouldCheckNextLevel=level===0&&!expanded;var nextLevelToCheck=checkedLevelIndex&&isEqual_default()(path,checkedLevelPath)&&checkedLevelIndex<height?checkedLevelIndex+1:1;var numberFormatter=new Intl.NumberFormat('en-US');var niceSize=numberFormatter.format(size);var tooltipText;if(shouldCheckNextLevel){tooltipText=Object(utils["e" /* getLevelTooltipText */])(nextLevelToCheck);}else if(isLeaf||!expanded){tooltipText="Color individual set (".concat(niceSize," ").concat(datatype).concat(size===1?'':'s',")");}else{tooltipText='Color by expanded descendants';}// If this is a level zero node and is _not_ expanded, then upon click,
// the behavior should be to color by the first or next cluster level.
// If this is a level zero node and _is_ expanded, or if any other node,
// click should trigger onNodeView.
var onClick=level===0&&!expanded?function(){return onCheckLevel(nodeKey,nextLevelToCheck);}:function(){return onNodeView(path);};var tooltipProps=disableTooltip?{visible:false}:{};var popoverMenuConfig=makeNodeViewMenuConfig(props);return/*#__PURE__*/external_react_default.a.createElement("span",null,/*#__PURE__*/external_react_default.a.createElement(HelpTooltip,Object.assign({title:tooltipText},tooltipProps),/*#__PURE__*/external_react_default.a.createElement("button",{type:"button",onClick:onClick,onKeyPress:function onKeyPress(e){return Object(utils["b" /* callbackOnKeyPress */])(e,'v',function(){return onNodeView(path);});},className:"title-button"},title)),popoverMenuConfig.length>0?/*#__PURE__*/external_react_default.a.createElement(PopoverMenu,{menuConfig:makeNodeViewMenuConfig(props),color:level>0&&editable?color||components_utils["b" /* DEFAULT_COLOR */]:null,setColor:function setColor(c){return onNodeSetColor(path,c);}},/*#__PURE__*/external_react_default.a.createElement(ForwardRef,{className:"node-menu-icon"})):null,level>0&&isChecking?checkbox:null,level>0&&/*#__PURE__*/external_react_default.a.createElement("span",{className:"node-size-label"},niceSize));}/**
 * The "editing" node component to render when the user is renaming,
 * containing a text input field and a save button.
 * @param {object} props The props for the TreeNode component.
 */function NamedSetNodeEditing(props){var title=props.title,path=props.path,onNodeSetName=props.onNodeSetName,onNodeCheckNewName=props.onNodeCheckNewName;var _useState=Object(external_react_["useState"])(title),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),currentTitle=_useState2[0],setCurrentTitle=_useState2[1];// Do not allow the user to save a potential name if it conflicts with
// another name in the hierarchy.
var hasConflicts=onNodeCheckNewName(path,currentTitle);function trySetName(){if(!hasConflicts){onNodeSetName(path,currentTitle,true);}}return/*#__PURE__*/external_react_default.a.createElement("span",{className:"title-button-with-input"},/*#__PURE__*/external_react_default.a.createElement("input",{// eslint-disable-next-line jsx-a11y/no-autofocus
autoFocus:true,className:"title-input",type:"text",value:currentTitle,onChange:function onChange(e){setCurrentTitle(e.target.value);},onKeyPress:function onKeyPress(e){return Object(utils["b" /* callbackOnKeyPress */])(e,'Enter',trySetName);},onFocus:function onFocus(e){return e.target.select();}}),!hasConflicts&&/*#__PURE__*/external_react_default.a.createElement("button",{type:"button",className:"title-save-button",onClick:trySetName},"Save"));}/**
 * A "delegation" component, to decide whether to render
 * an "editing" vs. "static" node component.
 * @param {object} props The props for the TreeNode component.
 */function NamedSetNode(props){var isEditing=props.isEditing,isCurrentSet=props.isCurrentSet;return isEditing||isCurrentSet?/*#__PURE__*/external_react_default.a.createElement(NamedSetNodeEditing,props):/*#__PURE__*/external_react_default.a.createElement(NamedSetNodeStatic,props);}/**
 * Buttons for viewing each hierarchy level,
 * rendered below collapsed level zero nodes.
 * @param {object} props The props for the (level zero) TreeNode component.
 */function LevelsButtons(props){var nodeKey=props.nodeKey,path=props.path,height=props.height,onCheckLevel=props.onCheckLevel,checkedLevelPath=props.checkedLevelPath,checkedLevelIndex=props.checkedLevelIndex,hasColorEncoding=props.hasColorEncoding;function onCheck(event){if(event.target.checked){var newLevel=parseInt(event.target.value,10);onCheckLevel(nodeKey,newLevel);}}return/*#__PURE__*/external_react_default.a.createElement("div",{className:"level-buttons-container"},range_default()(1,height+1).map(function(i){var isChecked=isEqual_default()(path,checkedLevelPath)&&i===checkedLevelIndex;return/*#__PURE__*/external_react_default.a.createElement("div",{className:"level-buttons",key:i},/*#__PURE__*/external_react_default.a.createElement(HelpTooltip,{title:Object(utils["e" /* getLevelTooltipText */])(i)},/*#__PURE__*/external_react_default.a.createElement("input",{className:external_clsx_default()('level-radio-button',{checked:isChecked&&!hasColorEncoding}),type:"checkbox",value:i,checked:isChecked&&hasColorEncoding,onChange:onCheck})));}));}/**
 * Render the "switcher" icon.
 * Arrow for collapsed/expanded non-leaf nodes,
 * or square for leaf nodes.
 * @param {object} props The props for the TreeNode component.
 */function SwitcherIcon(props){var isLeaf=props.isLeaf,isOpen=props.isOpen,color=props.color;var hexColor=color?Object(utils["c" /* colorArrayToString */])(color):undefined;if(isLeaf){return/*#__PURE__*/external_react_default.a.createElement("i",{className:"anticon anticon-circle rc-tree-switcher-icon"},/*#__PURE__*/external_react_default.a.createElement("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em","aria-hidden":"true"},/*#__PURE__*/external_react_default.a.createElement("rect",{fill:hexColor,x:600/2,y:600/2,width:1024-600,height:1024-600})));}return/*#__PURE__*/external_react_default.a.createElement("i",{className:"anticon anticon-caret-down rc-tree-switcher-icon"},/*#__PURE__*/external_react_default.a.createElement("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em","aria-hidden":"true"},/*#__PURE__*/external_react_default.a.createElement("path",{fill:isOpen?'#444':hexColor,d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"})));}/**
 * A custom TreeNode component.
 * @extends {RcTreeNode} TreeNode from the rc-tree library.
 */var TreeNode_TreeNode=/*#__PURE__*/function(_RcTreeNode){Object(inherits["a" /* default */])(TreeNode,_RcTreeNode);var _super=Object(createSuper["a" /* default */])(TreeNode);function TreeNode(){var _this;Object(classCallCheck["a" /* default */])(this,TreeNode);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderSelector=function(){var _this$props=_this.props,title=_this$props.title,isCurrentSet=_this$props.isCurrentSet,isSelected=_this$props.isSelected,isEditing=_this$props.isEditing,onDragStartProp=_this$props.onDragStart;var _this$context$rcTree=_this.context.rcTree,prefixClass=_this$context$rcTree.prefixCls,draggable=_this$context$rcTree.draggable;var onDragStart=function onDragStart(e){onDragStartProp();_this.onDragStart(e);};var wrapClass="".concat(prefixClass,"-node-content-wrapper");var isDraggable=!isCurrentSet&&!isEditing&&draggable;return/*#__PURE__*/external_react_default.a.createElement("span",{ref:_this.setSelectHandle,title:title,className:external_classnames_default()(wrapClass,"".concat(wrapClass,"-").concat(_this.getNodeState()||'normal'),isSelected&&"".concat(prefixClass,"-node-selected"),isDraggable&&'draggable'),draggable:isDraggable,"aria-grabbed":isDraggable,onDragStart:isDraggable?onDragStart:undefined},/*#__PURE__*/external_react_default.a.createElement(NamedSetNode,Object.assign({},_this.props,{prefixClass:prefixClass,checkbox:_this.renderCheckbox()})),_this.renderLevels());};_this.renderLevels=function(){var _this$props2=_this.props,level=_this$props2.level,expanded=_this$props2.expanded;if(level!==0||expanded){return null;}return/*#__PURE__*/external_react_default.a.createElement(LevelsButtons,_this.props);};_this.renderSwitcher=function(){var _this$props3=_this.props,expanded=_this$props3.expanded,isLeaf=_this$props3.isLeaf,color=_this$props3.color;var _this$context$rcTree2=_this.context.rcTree,prefixClass=_this$context$rcTree2.prefixCls,onNodeExpand=_this$context$rcTree2.onNodeExpand;var onNodeExpandWrapper=function onNodeExpandWrapper(e){// Do not call onNodeExpand if the node is a leaf node.
if(!isLeaf){onNodeExpand(e,Object(assertThisInitialized["a" /* default */])(_this));}};var switcherClass=external_classnames_default()("".concat(prefixClass,"-switcher"),Object(defineProperty["a" /* default */])({},"".concat(prefixClass,"-switcher_").concat(expanded?'open':'close'),!isLeaf));return/*#__PURE__*/external_react_default.a.createElement("span",{className:switcherClass,onClick:onNodeExpandWrapper,onKeyPress:function onKeyPress(e){return Object(utils["b" /* callbackOnKeyPress */])(e,'d',onNodeExpandWrapper);},role:"button",tabIndex:"0"},/*#__PURE__*/external_react_default.a.createElement(SwitcherIcon,{isLeaf:isLeaf,isOpen:expanded,color:color}));};return _this;}Object(createClass["a" /* default */])(TreeNode,[{key:"render",/**
   * Override main render function,
   * to enable overriding the sub-render functions
   * for switcher, selector, etc.
   */value:function render(){var _this2=this,_classNames2;var _this$props4=this.props,style=_this$props4.style,loading=_this$props4.loading,level=_this$props4.level,dragOver=_this$props4.dragOver,dragOverGapTop=_this$props4.dragOverGapTop,dragOverGapBottom=_this$props4.dragOverGapBottom,isLeaf=_this$props4.isLeaf,expanded=_this$props4.expanded,selected=_this$props4.selected,checked=_this$props4.checked,halfChecked=_this$props4.halfChecked,onDragEndProp=_this$props4.onDragEnd,expandable=_this$props4.expandable,otherProps=Object(objectWithoutProperties["a" /* default */])(_this$props4,["style","loading","level","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","expanded","selected","checked","halfChecked","onDragEnd","expandable"]);var _this$context$rcTree3=this.context.rcTree,prefixClass=_this$context$rcTree3.prefixCls,filterTreeNode=_this$context$rcTree3.filterTreeNode,draggable=_this$context$rcTree3.draggable;var disabled=this.isDisabled();var dataAndAriaAttributeProps=Object(util_["getDataAndAria"])(otherProps);var onDragEnd=function onDragEnd(e){onDragEndProp();_this2.onDragEnd(e);};return/*#__PURE__*/external_react_default.a.createElement("li",Object.assign({className:external_classnames_default()('rc-tree-treenode',"level-".concat(level,"-treenode"),(_classNames2={},Object(defineProperty["a" /* default */])(_classNames2,"".concat(prefixClass,"-treenode-disabled"),disabled),Object(defineProperty["a" /* default */])(_classNames2,"".concat(prefixClass,"-treenode-switcher-").concat(expanded?'open':'close'),!isLeaf),Object(defineProperty["a" /* default */])(_classNames2,"".concat(prefixClass,"-treenode-checkbox-checked"),checked),Object(defineProperty["a" /* default */])(_classNames2,"".concat(prefixClass,"-treenode-checkbox-indeterminate"),halfChecked),Object(defineProperty["a" /* default */])(_classNames2,"".concat(prefixClass,"-treenode-selected"),selected),Object(defineProperty["a" /* default */])(_classNames2,"".concat(prefixClass,"-treenode-loading"),loading),Object(defineProperty["a" /* default */])(_classNames2,'drag-over',!disabled&&dragOver),Object(defineProperty["a" /* default */])(_classNames2,'drag-over-gap-top',!disabled&&dragOverGapTop),Object(defineProperty["a" /* default */])(_classNames2,'drag-over-gap-bottom',!disabled&&dragOverGapBottom),Object(defineProperty["a" /* default */])(_classNames2,'filter-node',filterTreeNode&&filterTreeNode(this)),_classNames2)),style:style,role:"treeitem",onDragEnter:draggable?this.onDragEnter:undefined,onDragOver:draggable?this.onDragOver:undefined,onDragLeave:draggable?this.onDragLeave:undefined,onDrop:draggable?this.onDrop.bind(this):undefined,onDragEnd:draggable?onDragEnd:undefined},dataAndAriaAttributeProps),expandable?this.renderSwitcher():null,this.renderSelector(),this.renderChildren());}}]);return TreeNode;}(external_rc_tree_["TreeNode"]);
// EXTERNAL MODULE: ./src/components/sets/io.js
var io = __webpack_require__(61);

// EXTERNAL MODULE: ./src/components/sets/constants.js
var constants = __webpack_require__(14);

// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/sets/union.svg
function union_extends() { union_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return union_extends.apply(this, arguments); }

function union_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = union_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function union_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



function SvgUnion(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = union_objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", union_extends({
    viewBox: "0 0 16.433999 10.234",
    height: 12,
    width: 18,
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, /*#__PURE__*/external_react_["createElement"]("g", {
    transform: "translate(0.117,-2.883)"
  }, /*#__PURE__*/external_react_["createElement"]("path", {
    d: "m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z",
    style: {
      strokeWidth: 0.234,
      strokeMiterlimit: 4,
      strokeDasharray: "none",
      strokeOpacity: 1
    }
  })));
}

var union_ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgUnion, union_extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var union = (__webpack_require__.p + "static/media/union.de5168c6.svg");

// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/sets/intersection.svg
function intersection_extends() { intersection_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return intersection_extends.apply(this, arguments); }

function intersection_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = intersection_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function intersection_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



function SvgIntersection(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = intersection_objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", intersection_extends({
    width: 18,
    height: 12,
    viewBox: "0 0 16 10",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, /*#__PURE__*/external_react_["createElement"]("g", {
    transform: "translate(0,-3)"
  }, /*#__PURE__*/external_react_["createElement"]("path", {
    d: "M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z",
    style: {
      strokeWidth: 0.234,
      strokeMiterlimit: 4,
      strokeDasharray: "none",
      strokeOpacity: 1
    }
  })));
}

var intersection_ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgIntersection, intersection_extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var intersection = (__webpack_require__.p + "static/media/intersection.b0003109.svg");

// CONCATENATED MODULE: ./node_modules/@svgr/webpack/lib?-svgo,+titleProp,+ref!./src/assets/sets/complement.svg
function complement_extends() { complement_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return complement_extends.apply(this, arguments); }

function complement_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = complement_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function complement_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



var complement_ref2 = /*#__PURE__*/external_react_["createElement"]("rect", {
  x: "5%",
  width: "90%",
  height: "100%",
  fill: "white"
});

var _ref3 = /*#__PURE__*/external_react_["createElement"]("g", null, /*#__PURE__*/external_react_["createElement"]("rect", {
  x: 0,
  y: 0,
  width: 25.3804963846,
  height: 16,
  mask: "url(#union-mask)"
}));

function SvgComplement(_ref) {
  var svgRef = _ref.svgRef,
      title = _ref.title,
      titleId = _ref.titleId,
      props = complement_objectWithoutProperties(_ref, ["svgRef", "title", "titleId"]);

  return /*#__PURE__*/external_react_["createElement"]("svg", complement_extends({
    id: "svg14",
    viewBox: "0 0 25.3804963846 16",
    height: 16,
    width: 25.3804963846,
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/external_react_["createElement"]("title", {
    id: titleId
  }, title) : null, /*#__PURE__*/external_react_["createElement"]("defs", null, /*#__PURE__*/external_react_["createElement"]("mask", {
    id: "union-mask",
    x: 0,
    y: 0,
    width: 25.3804963846,
    height: 16
  }, complement_ref2, /*#__PURE__*/external_react_["createElement"]("g", {
    transform: "translate(4.69,0)"
  }, /*#__PURE__*/external_react_["createElement"]("path", {
    d: "m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z",
    style: {
      strokeWidth: 0.234,
      strokeMiterlimit: 4,
      strokeDasharray: "none",
      strokeOpacity: 1
    },
    fill: "black"
  })))), _ref3);
}

var complement_ForwardRef = external_react_["forwardRef"](function (props, ref) {
  return /*#__PURE__*/external_react_["createElement"](SvgComplement, complement_extends({
    svgRef: ref
  }, props));
});
/* harmony default export */ var complement = (__webpack_require__.p + "static/media/complement.c220ca8c.svg");

// CONCATENATED MODULE: ./src/components/sets/SetsManagerButtons.js
/**
 * A plus button for creating or importing set hierarchies.
 * @param {object} props
 * @param {string} props.datatype The data type to validate imported hierarchies against.
 * @param {function} props.onError A callback to pass error message strings.
 * @param {function} props.onImportTree A callback to pass successfully-validated tree objects.
 * @param {function} props.onCreateLevelZeroNode A callback to create a new empty
 * level zero node.
 * @param {boolean} props.importable Is importing allowed?
 * If not, the import button will not be rendered.
 * @param {boolean} props.editable Is editing allowed?
 * If not, the create button will not be rendered.
 */function PlusButton(props){var datatype=props.datatype,onError=props.onError,onImportTree=props.onImportTree,onCreateLevelZeroNode=props.onCreateLevelZeroNode,importable=props.importable,editable=props.editable;/**
   * Import a file, then process the imported data via the supplied handler function.
   * @param {Function} importHandler The function to process the imported data.
   * @param {string} mimeType The accepted mime type for the file upload input.
   * @returns {Function} An import function corresponding to the supplied parameters.
   */var onImport=Object(external_react_["useCallback"])(function(importHandler,mimeType){return function(){var uploadInputNode=document.createElement('input');uploadInputNode.setAttribute('type','file');uploadInputNode.setAttribute('accept',mimeType);document.body.appendChild(uploadInputNode);// required for firefox
uploadInputNode.click();uploadInputNode.addEventListener('change',function(event){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob)){onError('Local file reading APIs are not fully supported in this browser.');return;}var files=event.target.files;if(!files||files.length!==1){onError('Incorrect number of files selected.');return;}var reader=new FileReader();reader.addEventListener('load',function(){var result=reader.result;try{var treeToImport=importHandler(result,datatype);onError(false);// Clear any previous import error.
onImportTree(treeToImport);}catch(e){onError(e.message);}},false);reader.readAsText(files[0]);});uploadInputNode.remove();};},[datatype,onError,onImportTree]);var menuConfig=[].concat(Object(toConsumableArray["a" /* default */])(editable?[{title:'Create hierarchy',handler:onCreateLevelZeroNode,handlerKey:'n'}]:[]),Object(toConsumableArray["a" /* default */])(importable?[{title:'Import hierarchy',subtitle:'(from CSV file)',handler:onImport(io["e" /* handleImportTabular */],constants["e" /* MIME_TYPE_TABULAR */]),handlerKey:'c'},{title:'Import hierarchy',subtitle:'(from JSON file)',handler:onImport(io["d" /* handleImportJSON */],constants["d" /* MIME_TYPE_JSON */]),handlerKey:'j'}]:[]));return menuConfig.length>0?/*#__PURE__*/external_react_default.a.createElement(PopoverMenu,{menuConfig:menuConfig},/*#__PURE__*/external_react_default.a.createElement("button",{className:"plus-button",type:"submit"},"+")):null;}/**
 * Set operations buttons (union, intersection, complement)
 * and a view checked sets button.
 * @param {object} props
 * @param {function} props.onUnion A callback for the union button.
 * @param {function} props.onIntersection A callback for the intersection button.
 * @param {function} props.onComplement A callback for the complement button.
 * @param {boolean} props.operatable Are set operations allowed?
 * If not, the union, intersection, and complement buttons will not be rendered.
 */function SetOperationButtons(props){var onUnion=props.onUnion,onIntersection=props.onIntersection,onComplement=props.onComplement,operatable=props.operatable,hasCheckedSetsToUnion=props.hasCheckedSetsToUnion,hasCheckedSetsToIntersect=props.hasCheckedSetsToIntersect,hasCheckedSetsToComplement=props.hasCheckedSetsToComplement;return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,operatable&&/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement("button",{onClick:onUnion,title:"New set from union of checked sets",type:"submit",disabled:!hasCheckedSetsToUnion},/*#__PURE__*/external_react_default.a.createElement(union_ForwardRef,null)),/*#__PURE__*/external_react_default.a.createElement("button",{onClick:onIntersection,title:"New set from intersection of checked sets",type:"submit",disabled:!hasCheckedSetsToIntersect},/*#__PURE__*/external_react_default.a.createElement(intersection_ForwardRef,null)),/*#__PURE__*/external_react_default.a.createElement("button",{onClick:onComplement,title:"New set from complement of checked sets",type:"submit",disabled:!hasCheckedSetsToComplement},/*#__PURE__*/external_react_default.a.createElement(complement_ForwardRef,null))));}
// EXTERNAL MODULE: ./src/components/sets/cell-set-utils.js
var cell_set_utils = __webpack_require__(19);

// CONCATENATED MODULE: ./src/components/sets/SetsManager.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SetsManager; });
/* eslint-disable no-underscore-dangle */function processNode(node,prevPath,setColor){var _setColor$find;var nodePath=[].concat(Object(toConsumableArray["a" /* default */])(prevPath),[node.name]);return Object(objectSpread2["a" /* default */])({},node,{},node.children?{children:node.children.map(function(c){return processNode(c,nodePath,setColor);})}:{},{color:(setColor===null||setColor===void 0?void 0:(_setColor$find=setColor.find(function(d){return isEqual_default()(d.path,nodePath);}))===null||_setColor$find===void 0?void 0:_setColor$find.color)||components_utils["b" /* DEFAULT_COLOR */]});}function processSets(sets,setColor){return Object(objectSpread2["a" /* default */])({},sets,{tree:sets?sets.tree.map(function(lzn){return processNode(lzn,[],setColor);}):[]});}function getAllKeys(node){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(!node){return null;}var newPath=[].concat(Object(toConsumableArray["a" /* default */])(path),[node.name]);if(node.children){return[Object(utils["g" /* pathToKey */])(newPath)].concat(Object(toConsumableArray["a" /* default */])(node.children.flatMap(function(v){return getAllKeys(v,newPath);})));}return Object(utils["g" /* pathToKey */])(newPath);}/**
 * A generic hierarchical set manager component.
 * @prop {object} tree An object representing set hierarchies.
 * @prop {string} datatype The data type for sets (e.g. "cell")
 * @prop {function} clearPleaseWait A callback to signal that loading is complete.
 * @prop {boolean} draggable Whether tree nodes can be rearranged via drag-and-drop.
 * By default, true.
 * @prop {boolean} checkable Whether to show the "Check" menu button
 * and checkboxes for selecting multiple sets. By default, true.
 * @prop {boolean} editable Whether to show rename, delete, color, or create options.
 * By default, true.
 * @prop {boolean} expandable Whether to allow hierarchies to be expanded
 * to show the list or tree of sets contained. By default, true.
 * @prop {boolean} operatable Whether to enable union, intersection,
 * and complement operations on checked sets. By default, true.
 * @prop {boolean} exportable Whether to enable exporting hierarchies and sets to files.
 * By default, true.
 * @prop {boolean} importable Whether to enable importing hierarchies from files.
 * By default, true.
 * @prop {function} onError Function to call with error messages (failed import validation, etc).
 * @prop {function} onCheckNode Function to call when a single node has been checked or un-checked.
 * @prop {function} onExpandNode Function to call when a node has been expanded.
 * @prop {function} onDropNode Function to call when a node has been dragged-and-dropped.
 * @prop {function} onCheckLevel Function to call when an entire hierarchy level has been selected,
 * via the "Color by cluster" and "Color by subcluster" buttons below collapsed level zero nodes.
 * @prop {function} onNodeSetColor Function to call when a new node color has been selected.
 * @prop {function} onNodeSetName Function to call when a node has been renamed.
 * @prop {function} onNodeRemove Function to call when the user clicks the "Delete" menu button
 * to remove a node.
 * @prop {function} onNodeView Function to call when the user wants to view the set associated
 * with a particular node.
 * @prop {function} onImportTree Function to call when a tree has been imported
 * using the "plus" button.
 * @prop {function} onCreateLevelZeroNode Function to call when a user clicks the "Create hierarchy"
 * menu option using the "plus" button.
 * @prop {function} onExportLevelZeroNode Function to call when a user wants to
 * export an entire hierarchy via the "Export hierarchy" menu button for a
 * particular level zero node.
 * @prop {function} onExportSet Function to call when a user wants to export a set associated with
 * a particular node via the "Export set" menu button.
 * @prop {function} onUnion Function to call when a user wants to create a new set from the union
 * of the sets associated with the currently-checked nodes.
 * @prop {function} onIntersection Function to call when a user wants to create a new set from the
 * intersection of the sets associated with the currently-checked nodes.
 * @prop {function} onComplement Function to call when a user wants to create a new set from the
 * complement of the (union of the) sets associated with the currently-checked nodes.
 * @prop {function} onView Function to call when a user wants to view the sets
 * associated with the currently-checked nodes.
 */function SetsManager(props){var sets=props.sets,additionalSets=props.additionalSets,setColor=props.setColor,checkedLevel=props.levelSelection,setSelection=props.setSelection,setExpansion=props.setExpansion,hasColorEncoding=props.hasColorEncoding,datatype=props.datatype,_props$draggable=props.draggable,draggable=_props$draggable===void 0?true:_props$draggable,_props$checkable=props.checkable,checkable=_props$checkable===void 0?true:_props$checkable,_props$editable=props.editable,editable=_props$editable===void 0?true:_props$editable,_props$expandable=props.expandable,expandable=_props$expandable===void 0?true:_props$expandable,_props$operatable=props.operatable,operatable=_props$operatable===void 0?true:_props$operatable,_props$exportable=props.exportable,exportable=_props$exportable===void 0?true:_props$exportable,_props$importable=props.importable,importable=_props$importable===void 0?true:_props$importable,onError=props.onError,onCheckNode=props.onCheckNode,onExpandNode=props.onExpandNode,onDropNode=props.onDropNode,onCheckLevel=props.onCheckLevel,onNodeSetColor=props.onNodeSetColor,_onNodeSetName=props.onNodeSetName,onNodeCheckNewName=props.onNodeCheckNewName,onNodeRemove=props.onNodeRemove,onNodeView=props.onNodeView,onImportTree=props.onImportTree,onCreateLevelZeroNode=props.onCreateLevelZeroNode,onExportLevelZeroNodeJSON=props.onExportLevelZeroNodeJSON,onExportLevelZeroNodeTabular=props.onExportLevelZeroNodeTabular,onExportSetJSON=props.onExportSetJSON,onUnion=props.onUnion,onIntersection=props.onIntersection,onComplement=props.onComplement,hasCheckedSetsToUnion=props.hasCheckedSetsToUnion,hasCheckedSetsToIntersect=props.hasCheckedSetsToIntersect,hasCheckedSetsToComplement=props.hasCheckedSetsToComplement;var isChecking=true;var autoExpandParent=true;var _useState=Object(external_react_["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isDragging=_useState2[0],setIsDragging=_useState2[1];var _useState3=Object(external_react_["useState"])(null),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isEditingNodeName=_useState4[0],setIsEditingNodeName=_useState4[1];var processedSets=Object(external_react_["useMemo"])(function(){return processSets(sets,setColor);},[sets,setColor]);var processedAdditionalSets=Object(external_react_["useMemo"])(function(){return processSets(additionalSets,setColor);},[additionalSets,setColor]);var additionalSetKeys=processedAdditionalSets?processedAdditionalSets.tree.flatMap(function(v){return getAllKeys(v,[]);}):[];var allSetSelectionKeys=(setSelection||[]).map(utils["g" /* pathToKey */]);var allSetExpansionKeys=(setExpansion||[]).map(utils["g" /* pathToKey */]);var setSelectionKeys=allSetSelectionKeys.filter(function(k){return!additionalSetKeys.includes(k);});var setExpansionKeys=allSetExpansionKeys.filter(function(k){return!additionalSetKeys.includes(k);});var additionalSetSelectionKeys=allSetSelectionKeys.filter(function(k){return additionalSetKeys.includes(k);});var additionalSetExpansionKeys=allSetExpansionKeys.filter(function(k){return additionalSetKeys.includes(k);});/**
   * Recursively render TreeNode components.
   * @param {object[]} nodes An array of node objects.
   * @returns {TreeNode[]|null} Array of TreeNode components or null.
   */function renderTreeNodes(nodes,readOnly,currPath){if(!nodes){return null;}return nodes.map(function(node){var newPath=[].concat(Object(toConsumableArray["a" /* default */])(currPath),[node.name]);return/*#__PURE__*/external_react_default.a.createElement(TreeNode_TreeNode,Object.assign({key:Object(utils["g" /* pathToKey */])(newPath)},Object(cell_set_utils["h" /* nodeToRenderProps */])(node,newPath,setColor),{isEditing:isEqual_default()(isEditingNodeName,newPath),datatype:datatype,draggable:draggable&&!readOnly,editable:editable&&!readOnly,checkable:checkable,expandable:expandable,exportable:exportable,hasColorEncoding:hasColorEncoding,isChecking:isChecking,checkedLevelPath:checkedLevel?checkedLevel.levelZeroPath:null,checkedLevelIndex:checkedLevel?checkedLevel.levelIndex:null,onCheckNode:onCheckNode,onCheckLevel:onCheckLevel,onNodeView:onNodeView,onNodeSetColor:onNodeSetColor,onNodeSetName:function onNodeSetName(targetPath,name){_onNodeSetName(targetPath,name);setIsEditingNodeName(null);},onNodeCheckNewName:onNodeCheckNewName,onNodeSetIsEditing:setIsEditingNodeName,onNodeRemove:onNodeRemove,onExportLevelZeroNodeJSON:onExportLevelZeroNodeJSON,onExportLevelZeroNodeTabular:onExportLevelZeroNodeTabular,onExportSetJSON:onExportSetJSON,disableTooltip:isDragging,onDragStart:function onDragStart(){return setIsDragging(true);},onDragEnd:function onDragEnd(){return setIsDragging(false);}}),renderTreeNodes(node.children,readOnly,newPath));});}return/*#__PURE__*/external_react_default.a.createElement("div",{className:"sets-manager"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"sets-manager-tree"},/*#__PURE__*/external_react_default.a.createElement(sets_Tree,{draggable:false,checkable:checkable,checkedKeys:setSelectionKeys,expandedKeys:setExpansionKeys,autoExpandParent:autoExpandParent,onCheck:function onCheck(checkedKeys,info){return onCheckNode(info.node.props.nodeKey,info.checked);},onExpand:function onExpand(expandedKeys,info){return onExpandNode(expandedKeys,info.node.props.nodeKey,info.expanded);}},renderTreeNodes(processedSets.tree,true,[])),/*#__PURE__*/external_react_default.a.createElement(sets_Tree,{draggable:true/* TODO */,checkable:checkable,checkedKeys:additionalSetSelectionKeys,expandedKeys:additionalSetExpansionKeys,autoExpandParent:autoExpandParent,onCheck:function onCheck(checkedKeys,info){return onCheckNode(info.node.props.nodeKey,info.checked);},onExpand:function onExpand(expandedKeys,info){return onExpandNode(expandedKeys,info.node.props.nodeKey,info.expanded);},onDrop:function onDrop(info){var dropKey=info.node.props.eventKey;var dragKey=info.dragNode.props.eventKey;var dropToGap=info.dropToGap,dropPosition=info.dropPosition;onDropNode(dropKey,dragKey,dropPosition,dropToGap);}},renderTreeNodes(processedAdditionalSets.tree,false,[])),/*#__PURE__*/external_react_default.a.createElement(PlusButton,{datatype:datatype,onError:onError,onImportTree:onImportTree,onCreateLevelZeroNode:onCreateLevelZeroNode,importable:importable,editable:editable})),isChecking?/*#__PURE__*/external_react_default.a.createElement("div",{className:"set-operation-buttons"},/*#__PURE__*/external_react_default.a.createElement(SetOperationButtons,{onUnion:onUnion,onIntersection:onIntersection,onComplement:onComplement,operatable:operatable,hasCheckedSetsToUnion:hasCheckedSetsToUnion,hasCheckedSetsToIntersect:hasCheckedSetsToIntersect,hasCheckedSetsToComplement:hasCheckedSetsToComplement})):null);}

/***/ }),
/* 128 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(10);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(20);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "@hms-dbmi/viv"
var viv_ = __webpack_require__(27);

// EXTERNAL MODULE: external "@material-ui/core/Grid"
var Grid_ = __webpack_require__(29);
var Grid_default = /*#__PURE__*/__webpack_require__.n(Grid_);

// EXTERNAL MODULE: external "@material-ui/core/Button"
var Button_ = __webpack_require__(131);
var Button_default = /*#__PURE__*/__webpack_require__.n(Button_);

// EXTERNAL MODULE: external "@material-ui/icons/Add"
var Add_ = __webpack_require__(111);
var Add_default = /*#__PURE__*/__webpack_require__.n(Add_);

// EXTERNAL MODULE: external "@material-ui/core/ExpansionPanel"
var ExpansionPanel_ = __webpack_require__(148);
var ExpansionPanel_default = /*#__PURE__*/__webpack_require__.n(ExpansionPanel_);

// EXTERNAL MODULE: external "@material-ui/core/ExpansionPanelSummary"
var ExpansionPanelSummary_ = __webpack_require__(149);
var ExpansionPanelSummary_default = /*#__PURE__*/__webpack_require__.n(ExpansionPanelSummary_);

// EXTERNAL MODULE: external "@material-ui/core/ExpansionPanelDetails"
var ExpansionPanelDetails_ = __webpack_require__(150);
var ExpansionPanelDetails_default = /*#__PURE__*/__webpack_require__.n(ExpansionPanelDetails_);

// EXTERNAL MODULE: external "@material-ui/icons/ExpandMore"
var ExpandMore_ = __webpack_require__(151);
var ExpandMore_default = /*#__PURE__*/__webpack_require__.n(ExpandMore_);

// EXTERNAL MODULE: external "@material-ui/core/Checkbox"
var Checkbox_ = __webpack_require__(76);
var Checkbox_default = /*#__PURE__*/__webpack_require__.n(Checkbox_);

// EXTERNAL MODULE: external "@material-ui/core/Slider"
var Slider_ = __webpack_require__(59);
var Slider_default = /*#__PURE__*/__webpack_require__.n(Slider_);

// EXTERNAL MODULE: external "@material-ui/core/Select"
var Select_ = __webpack_require__(77);
var Select_default = /*#__PURE__*/__webpack_require__.n(Select_);

// EXTERNAL MODULE: external "lodash/debounce"
var debounce_ = __webpack_require__(51);
var debounce_default = /*#__PURE__*/__webpack_require__.n(debounce_);

// EXTERNAL MODULE: external "lodash/isEqual"
var isEqual_ = __webpack_require__(13);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual_);

// EXTERNAL MODULE: external "@material-ui/core/styles"
var styles_ = __webpack_require__(17);

// EXTERNAL MODULE: external "@material-ui/icons/MoreVert"
var MoreVert_ = __webpack_require__(152);
var MoreVert_default = /*#__PURE__*/__webpack_require__.n(MoreVert_);

// EXTERNAL MODULE: external "@material-ui/core/MenuItem"
var MenuItem_ = __webpack_require__(45);
var MenuItem_default = /*#__PURE__*/__webpack_require__.n(MenuItem_);

// EXTERNAL MODULE: ./src/components/shared-mui/components.js
var components = __webpack_require__(42);

// EXTERNAL MODULE: external "@material-ui/core/IconButton"
var IconButton_ = __webpack_require__(41);
var IconButton_default = /*#__PURE__*/__webpack_require__.n(IconButton_);

// EXTERNAL MODULE: external "@material-ui/icons/Lens"
var Lens_ = __webpack_require__(153);
var Lens_default = /*#__PURE__*/__webpack_require__.n(Lens_);

// EXTERNAL MODULE: ./src/components/utils.js
var utils = __webpack_require__(8);

// CONCATENATED MODULE: ./src/components/layer-controller/ColorPalette.js
var useStyles=Object(styles_["makeStyles"])(function(theme){return{container:{width:'70px',height:'40px',display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap'},button:{padding:'3px',width:'16px'},icon:{width:'17px',height:'17px',stroke:theme.palette.action.selected,'stroke-width':'1px'}};});var ColorPalette_ColorPalette=function ColorPalette(_ref){var handleChange=_ref.handleChange;var classes=useStyles();return/*#__PURE__*/external_react_default.a.createElement("div",{className:classes.container,"aria-label":"color-swatch"},utils["e" /* VIEWER_PALETTE */].map(function(color){return/*#__PURE__*/external_react_default.a.createElement(IconButton_default.a,{className:classes.button,key:color,onClick:function onClick(){return handleChange(color);}},/*#__PURE__*/external_react_default.a.createElement(Lens_default.a,{fontSize:"small",style:{color:"rgb(".concat(color,")")},className:classes.icon}));}));};/* harmony default export */ var layer_controller_ColorPalette = (ColorPalette_ColorPalette);
// CONCATENATED MODULE: ./src/components/layer-controller/ChannelOptions.js
var ChannelOptions_useStyles=Object(styles_["makeStyles"])(function(){return{menuButton:{backgroundColor:'transparent'},colors:{'&:hover':{backgroundColor:'transparent'},paddingLeft:'2px',paddingRight:'2px'}};});/**
 * Dropdown for options for a channel on the three dots button.
 * @prop {function} handlePropertyChange Callback for changing property (color, IQR of sliders).
 * @prop {function} handleChannelRemove Callback for channel removal.
 * @prop {function} handleIQRUpdate Callback for IQR slider update.
 */function ChannelOptions(_ref){var handlePropertyChange=_ref.handlePropertyChange,handleChannelRemove=_ref.handleChannelRemove,handleIQRUpdate=_ref.handleIQRUpdate;var _useReducer=Object(external_react_["useReducer"])(function(v){return!v;},false),_useReducer2=Object(slicedToArray["a" /* default */])(_useReducer,2),open=_useReducer2[0],toggle=_useReducer2[1];var classes=ChannelOptions_useStyles();var handleColorSelect=function handleColorSelect(color){handlePropertyChange('color',color);};var handleRemove=function handleRemove(){toggle();handleChannelRemove();};return/*#__PURE__*/external_react_default.a.createElement(components["b" /* PopperMenu */],{open:open,toggle:toggle,buttonIcon:/*#__PURE__*/external_react_default.a.createElement(MoreVert_default.a,{fontSize:"small"}),buttonClassName:classes.menuButton},/*#__PURE__*/external_react_default.a.createElement(MenuItem_default.a,{dense:true,disableGutters:true,onClick:handleRemove},/*#__PURE__*/external_react_default.a.createElement(components["a" /* MuiSpan */],null,"Remove")),/*#__PURE__*/external_react_default.a.createElement(MenuItem_default.a,{dense:true,disableGutters:true,onClick:handleIQRUpdate},/*#__PURE__*/external_react_default.a.createElement(components["a" /* MuiSpan */],null,"Use IQR")),/*#__PURE__*/external_react_default.a.createElement(MenuItem_default.a,{dense:true,disableGutters:true,className:classes.colors},/*#__PURE__*/external_react_default.a.createElement(layer_controller_ColorPalette,{handleChange:handleColorSelect})));}/* harmony default export */ var layer_controller_ChannelOptions = (ChannelOptions);
// CONCATENATED MODULE: ./src/components/layer-controller/ChannelController.js
// Returns an rgb string for display, and changes the color (arr)
// to use a grey for light theme + white color or if the colormap is on.
var toRgbUIString=function toRgbUIString(on,arr,theme){var color=on||theme==='light'&&arr.every(function(i){return i===255;})?[220,220,220]:arr;return"rgb(".concat(color,")");};function abbreviateNumber(value){// Return an abbreviated representation of value, in 5 characters or less.
var maxLength=5;var maxNaiveDigits=maxLength;/* eslint-disable no-plusplus */if(!Number.isInteger(value)){--maxNaiveDigits;}// Wasted on "."
if(value<1){--maxNaiveDigits;}// Wasted on "0."
/* eslint-disable no-plusplus */var naive=Intl.NumberFormat('en-US',{maximumSignificantDigits:maxNaiveDigits,useGrouping:false}).format(value);if(naive.length<=maxLength)return naive;// "e+9" consumes 3 characters, so if we even had two significant digits,
// it would take take us to six characters, including the decimal point.
return value.toExponential(0);}/**
 * Dropdown for selecting a channel.
 * @prop {function} handleChange Callback for each new selection.
 * @prop {boolean} disableOptions Whether or not to allow options.
 * @prop {array} channelOptions List of available selections, like ['DAPI', 'FITC', ...].
 * @prop {number} selectionIndex Current numeric index of a selection.
 */function ChannelSelectionDropdown(_ref){var handleChange=_ref.handleChange,disableOptions=_ref.disableOptions,channelOptions=_ref.channelOptions,selectionIndex=_ref.selectionIndex;return/*#__PURE__*/external_react_default.a.createElement(Select_default.a,{native:true,value:selectionIndex,onChange:function onChange(e){return handleChange(Number(e.target.value));}},channelOptions.map(function(opt,i){return/*#__PURE__*/external_react_default.a.createElement("option",{disabled:disableOptions,key:opt,value:i},opt);}));}/**
 * Slider for controlling current colormap.
 * @prop {string} color Current color for this channel.
 * @prop {arry} slider Current value of the slider.
 * @prop {function} handleChange Callback for each slider change.
 * @prop {array} domain Current max/min allowable slider values.
 */function ChannelSlider(_ref2){var color=_ref2.color,_ref2$slider=_ref2.slider,slider=_ref2$slider===void 0?[0,0]:_ref2$slider,handleChange=_ref2.handleChange,_ref2$domain=_ref2.domain,domain=_ref2$domain===void 0?[0,0]:_ref2$domain,dtype=_ref2.dtype;var _domain=Object(slicedToArray["a" /* default */])(domain,2),min=_domain[0],max=_domain[1];var handleChangeDebounced=Object(external_react_["useCallback"])(debounce_default()(handleChange,3,{trailing:true}),[handleChange]);var step=max-min<500&&dtype==='<f4'?(max-min)/500:1;return/*#__PURE__*/external_react_default.a.createElement(Slider_default.a,{value:slider,valueLabelFormat:abbreviateNumber,onChange:function onChange(e,v){return handleChangeDebounced(v);},valueLabelDisplay:"auto",getAriaLabel:function getAriaLabel(){return"".concat(color,"-").concat(slider);},min:min,max:max,step:step,orientation:"horizontal",style:{color:color,marginTop:'7px'}});}/**
 * Checkbox for toggling on/off of a channel.
 * @prop {string} color Current color for this channel.
 * @prop {boolean} checked Whether or not this channel is "on".
 * @prop {function} toggle Callback for toggling on/off.
 */function ChannelVisibilityCheckbox(_ref3){var color=_ref3.color,checked=_ref3.checked,toggle=_ref3.toggle;return/*#__PURE__*/external_react_default.a.createElement(Checkbox_default.a,{onChange:toggle,checked:checked,style:{color:color,'&$checked':{color:color}}});}/**
 * Controller for the handling the colormapping sliders.
 * @prop {boolean} visibility Whether or not this channel is "on"
 * @prop {array} slider Current slider range.
 * @prop {array} color Current color for this channel.
 * @prop {array} domain Current max/min for this channel.
 * @prop {string} dimName Name of the dimensions this slider controls (usually "channel").
 * @prop {boolean} colormapOn Whether or not the colormap (viridis, magma etc.) is on.
 * @prop {object} channelOptions All available options for this dimension (i.e channel names).
 * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.
 * @prop {function} handleChannelRemove When a channel is removed, this is called.
 * @prop {function} handleIQRUpdate When the IQR button is clicked, this is called.
 * @prop {number} selectionIndex The current numeric index of the selection.
 * @prop {boolean} disableOptions Whether or not channel options are be disabled (default: false).
 */function ChannelController(_ref4){var _ref4$visibility=_ref4.visibility,visibility=_ref4$visibility===void 0?false:_ref4$visibility,slider=_ref4.slider,color=_ref4.color,channels=_ref4.channels,channelId=_ref4.channelId,newDomainType=_ref4.domainType,dimName=_ref4.dimName,theme=_ref4.theme,loader=_ref4.loader,colormapOn=_ref4.colormapOn,channelOptions=_ref4.channelOptions,handlePropertyChange=_ref4.handlePropertyChange,handleChannelRemove=_ref4.handleChannelRemove,handleIQRUpdate=_ref4.handleIQRUpdate,selectionIndex=_ref4.selectionIndex,_ref4$disableOptions=_ref4.disableOptions,disableOptions=_ref4$disableOptions===void 0?false:_ref4$disableOptions;var dtype=loader.dtype;var _useState=Object(external_react_["useState"])(null),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),domain=_useState2[0],setDomain=_useState2[1];var _useState3=Object(external_react_["useState"])(null),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),domainType=_useState4[0],setDomainType=_useState4[1];var _useState5=Object(external_react_["useState"])([Object(objectSpread2["a" /* default */])({},channels[channelId].selection)]),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),selection=_useState6[0],setSelection=_useState6[1];var rgbColor=toRgbUIString(colormapOn,color,theme);Object(external_react_["useEffect"])(function(){var mounted=true;if(dtype&&loader&&channels){var loaderSelection=[Object(objectSpread2["a" /* default */])({},channels[channelId].selection)];var domains;var hasDomainChanged=newDomainType!==domainType;var hasSelectionChanged=!isEqual_default()(loaderSelection,selection);if(hasDomainChanged||hasSelectionChanged){if(newDomainType==='Full'){domains=[[0,viv_["DTYPE_VALUES"][dtype].max]];var _domains=domains,_domains2=Object(slicedToArray["a" /* default */])(_domains,1),newDomain=_domains2[0];if(mounted){setDomain(newDomain);setDomainType(newDomainType);if(hasSelectionChanged){setSelection(loaderSelection);}}}else{Object(viv_["getChannelStats"])({loader:loader,loaderSelection:loaderSelection}).then(function(stats){domains=stats.map(function(stat){return stat.domain;});var _domains3=domains,_domains4=Object(slicedToArray["a" /* default */])(_domains3,1),newDomain=_domains4[0];if(mounted){setDomain(newDomain);setDomainType(newDomainType);if(hasSelectionChanged){setSelection(loaderSelection);}}});}}}return function(){mounted=false;};},[domainType,channels,channelId,loader,dtype,newDomainType,selection]);/* A valid selection is defined by an object where the keys are
  *  the name of a dimension of the data, and the values are the
  *  index of the image along that particular dimension.
  *
  *  Since we currently only support making a selection along one
  *  addtional dimension (i.e. the dropdown just has channels or mz)
  *  we have a helper function to create the selection.
  *
  *  e.g { channel: 2 } // channel dimension, third channel
  */var createSelection=function createSelection(index){return Object(defineProperty["a" /* default */])({},dimName,index);};return/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{container:true,direction:"column",m:1,justify:"center"},/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{container:true,direction:"row",justify:"space-between"},/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true,xs:10},/*#__PURE__*/external_react_default.a.createElement(ChannelSelectionDropdown,{handleChange:function handleChange(v){return handlePropertyChange('selection',createSelection(v));},selectionIndex:selectionIndex,disableOptions:disableOptions,channelOptions:channelOptions})),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true,xs:1,style:{marginTop:'4px'}},/*#__PURE__*/external_react_default.a.createElement(layer_controller_ChannelOptions,{handlePropertyChange:handlePropertyChange,handleChannelRemove:handleChannelRemove,handleIQRUpdate:handleIQRUpdate}))),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{container:true,direction:"row",justify:"space-between"},/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true,xs:2},/*#__PURE__*/external_react_default.a.createElement(ChannelVisibilityCheckbox,{color:rgbColor,checked:visibility,toggle:function toggle(){return handlePropertyChange('visible',!visibility);}})),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true,xs:9},domain&&/*#__PURE__*/external_react_default.a.createElement(ChannelSlider,{color:rgbColor,slider:slider,domain:domain,dtype:dtype,handleChange:function handleChange(v){return handlePropertyChange('slider',v);}}))));}/* harmony default export */ var layer_controller_ChannelController = (ChannelController);
// EXTERNAL MODULE: external "@material-ui/core/InputLabel"
var InputLabel_ = __webpack_require__(154);
var InputLabel_default = /*#__PURE__*/__webpack_require__.n(InputLabel_);

// EXTERNAL MODULE: ./src/components/spatial/constants.js
var constants = __webpack_require__(18);

// CONCATENATED MODULE: ./src/components/layer-controller/LayerOptions.js
var DOMAIN_OPTIONS=['Full','Min/Max'];/**
 * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).
 * @prop {string} value Currently selected value for the colormap.
 * @prop {string} inputId Css id.
 * @prop {function} handleChange Callback for every change in colormap.
 */function ColormapSelect(_ref){var value=_ref.value,inputId=_ref.inputId,handleChange=_ref.handleChange;return/*#__PURE__*/external_react_default.a.createElement(Select_default.a,{native:true,onChange:function onChange(e){return handleChange(e.target.value===''?null:e.target.value);},value:value,inputProps:{name:'colormap',id:inputId},style:{width:'100%'}},/*#__PURE__*/external_react_default.a.createElement("option",{"aria-label":"None",value:""},"None"),utils["a" /* COLORMAP_OPTIONS */].map(function(name){return/*#__PURE__*/external_react_default.a.createElement("option",{key:name,value:name},name);}));}function TransparentColorCheckbox(_ref2){var value=_ref2.value,handleChange=_ref2.handleChange;return/*#__PURE__*/external_react_default.a.createElement(Checkbox_default.a,{style:{float:'left',padding:0},color:"default",onChange:function onChange(){if(value){handleChange(null);}else{handleChange([0,0,0]);}},checked:Boolean(value)});}/**
 * Wrapper for the slider that updates opacity.
 * @prop {string} value Currently selected value between 0 and 1.
 * @prop {function} handleChange Callback for every change in opacity.
 */function OpacitySlider(_ref3){var value=_ref3.value,handleChange=_ref3.handleChange;return/*#__PURE__*/external_react_default.a.createElement(Slider_default.a,{value:value,onChange:function onChange(e,v){return handleChange(v);},valueLabelDisplay:"auto",getAriaLabel:function getAriaLabel(){return'opacity slider';},min:0,max:1,step:0.01,orientation:"horizontal",style:{marginTop:'7px'}});}/**
 * Wrapper for the dropdown that chooses the domain type.
 * @prop {string} value Currently selected value (i.e 'Max/Min').
 * @prop {string} inputId Css id.
 * @prop {function} handleChange Callback for every change in domain.
 */function SliderDomainSelector(_ref4){var value=_ref4.value,inputId=_ref4.inputId,handleChange=_ref4.handleChange;return/*#__PURE__*/external_react_default.a.createElement(Select_default.a,{native:true,onChange:function onChange(e){return handleChange(e.target.value);},value:value,inputProps:{name:'domain-selector',id:inputId},style:{width:'100%'}},DOMAIN_OPTIONS.map(function(name){return/*#__PURE__*/external_react_default.a.createElement("option",{key:name,value:name},name);}));}/**
 * Wrapper for the slider that chooses global selections (z, t etc.).
 * @prop {string} field The dimension this selects for (z, t etc.).
 * @prop {number} value Currently selected index (1, 4, etc.).
 * @prop {function} handleChange Callback for every change in selection.
 * @prop {function} possibleValues All available values for the field.
 */function GlobalSelectionSlider(_ref5){var field=_ref5.field,value=_ref5.value,handleChange=_ref5.handleChange,possibleValues=_ref5.possibleValues;return/*#__PURE__*/external_react_default.a.createElement(Slider_default.a,{value:value// See https://github.com/hubmapconsortium/vitessce-image-viewer/issues/176 for why
// we have the two handlers.
,onChange:function onChange(event,newValue){handleChange({selection:Object(defineProperty["a" /* default */])({},field,newValue),event:event});},onChangeCommitted:function onChangeCommitted(event,newValue){handleChange({selection:Object(defineProperty["a" /* default */])({},field,newValue),event:event});},valueLabelDisplay:"auto",getAriaLabel:function getAriaLabel(){return"".concat(field," slider");},marks:possibleValues.map(function(val){return{value:val};}),min:Number(possibleValues[0]),max:Number(possibleValues.slice(-1)),orientation:"horizontal",style:{marginTop:'7px'},step:null});}/**
 * Wrapper for each of the options to show its name and then its UI component.
 * @prop {string} name Display name for option.
 * @prop {number} opacity Current opacity value.
 * @prop {string} inputId An id for css.
 * @prop {object} children Components to be rendered next to the name (slider, dropdown etc.).
 */function LayerOption(_ref6){var name=_ref6.name,inputId=_ref6.inputId,children=_ref6.children;return/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{container:true,direction:"row",alignItems:"center",justify:"center"},/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true,xs:6},/*#__PURE__*/external_react_default.a.createElement(InputLabel_default.a,{htmlFor:inputId},name,":")),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true,xs:6},children));}/**
 * Gloabl options for all channels (opacity, colormap, etc.).
 * @prop {string} colormap What colormap is currently selected (None, viridis etc.).
 * @prop {number} opacity Current opacity value.
 * @prop {function} handleColormapChange Callback for when colormap changes.
 * @prop {function} handleOpacityChange Callback for when opacity changes.
 * @prop {object} globalControlDimensions All available options for global control (z and t).
 * @prop {function} handleGlobalChannelsSelectionChange Callback for global selection changes.
 * @prop {function} handleDomainChange Callback for domain type changes (full or min/max).
 * @prop {array} channels Current channel object for inferring the current global selection.
 * @prop {array} dimensions Currently available dimensions (channel, z, t etc.).
 * @prop {string} domainType One of Max/Min or Full (soon presets as well).
 * @prop {boolean} isRgb Whether or not the image is rgb (so we don't need colormap controllers).
 */function LayerOptions(_ref7){var colormap=_ref7.colormap,opacity=_ref7.opacity,handleColormapChange=_ref7.handleColormapChange,handleOpacityChange=_ref7.handleOpacityChange,handleTransparentColorChange=_ref7.handleTransparentColorChange,globalControlDimensions=_ref7.globalControlDimensions,globalDimensionValues=_ref7.globalDimensionValues,handleGlobalChannelsSelectionChange=_ref7.handleGlobalChannelsSelectionChange,handleDomainChange=_ref7.handleDomainChange,transparentColor=_ref7.transparentColor,channels=_ref7.channels,dimensions=_ref7.dimensions,domainType=_ref7.domainType,isRgb=_ref7.isRgb;var hasDimensionsAndChannels=dimensions.length>0&&channels.length>0;return/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{container:true,direction:"column",style:{width:'100%'}},!isRgb?/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(LayerOption,{name:"Colormap",inputId:"colormap-select"},/*#__PURE__*/external_react_default.a.createElement(ColormapSelect,{value:colormap||'',inputId:"colormap-select",handleChange:handleColormapChange}))),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(LayerOption,{name:"Domain",inputId:"domain-selector"},/*#__PURE__*/external_react_default.a.createElement(SliderDomainSelector,{value:domainType||constants["e" /* DEFAULT_RASTER_DOMAIN_TYPE */],handleChange:function handleChange(value){handleDomainChange(value);}})))):null,/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(LayerOption,{name:"Opacity",inputId:"opacity-slider"},/*#__PURE__*/external_react_default.a.createElement(OpacitySlider,{value:opacity,handleChange:handleOpacityChange}))),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(LayerOption,{name:"Zero Transparent",inputId:"transparent-color-selector"},/*#__PURE__*/external_react_default.a.createElement(TransparentColorCheckbox,{value:transparentColor,handleChange:handleTransparentColorChange}))),hasDimensionsAndChannels&&globalControlDimensions.map(function(dimension){var field=dimension.field,values=dimension.values;// If there is only one value in the dimension, do not return a slider.
return values.length>1&&/*#__PURE__*/external_react_default.a.createElement(LayerOption,{name:field,inputId:"".concat(field,"-slider"),key:field},/*#__PURE__*/external_react_default.a.createElement(GlobalSelectionSlider,{field:field,value:globalDimensionValues[field],handleChange:handleGlobalChannelsSelectionChange,possibleValues:values}));}));}/* harmony default export */ var layer_controller_LayerOptions = (LayerOptions);
// EXTERNAL MODULE: ./src/components/layer-controller/styles.js
var styles = __webpack_require__(102);

// CONCATENATED MODULE: ./src/components/layer-controller/RasterLayerController.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RasterLayerController; });
// Set the domain of the sliders based on either a full range or min/max.
function getDomainsAndSliders(_x,_x2,_x3){return _getDomainsAndSliders.apply(this,arguments);}function _getDomainsAndSliders(){_getDomainsAndSliders=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(loader,loaderSelection,domainType){var domains,stats,sliders;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Object(viv_["getChannelStats"])({loader:loader,loaderSelection:loaderSelection});case 2:stats=_context6.sent;sliders=stats.map(function(stat){return stat.autoSliders;});if(domainType==='Min/Max'){domains=stats.map(function(stat){return stat.domain;});}if(domainType==='Full'){domains=loaderSelection.map(function(){return[0,viv_["DTYPE_VALUES"][loader.dtype].max];});}return _context6.abrupt("return",{domains:domains,sliders:sliders});case 7:case"end":return _context6.stop();}}},_callee6);}));return _getDomainsAndSliders.apply(this,arguments);}var buttonStyles={borderStyle:'dashed',marginTop:'10px',fontWeight:400};/**
 * Controller for the various imaging options (color, opactiy, sliders etc.)
 * @prop {object} imageData Image config object, one of the `images` in the raster schema.
 * @prop {object} layerId Randomly generated id for the image layer that this controller handles.
 * @prop {function} handleLayerRemove Callback for handling the removal of a layer.
 * @prop {object} loader Loader object for the current imaging layer.
 * @prop {function} handleLayerChange Callback for handling the changing of layer properties.
 */function RasterLayerController(props){var _channels$;var layer=props.layer,name=props.name,loader=props.loader,theme=props.theme,handleLayerRemove=props.handleLayerRemove,handleLayerChange=props.handleLayerChange;var colormap=layer.colormap,opacity=layer.opacity,channels=layer.channels,transparentColor=layer.transparentColor;var firstSelection=((_channels$=channels[0])===null||_channels$===void 0?void 0:_channels$.selection)||{};var dimensions=loader.dimensions;var _useState=Object(external_react_["useState"])(layer.domainType),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),domainType=_useState2[0],setDomainType=_useState2[1];var _useState3=Object(external_react_["useState"])(constants["g" /* GLOBAL_SLIDER_DIMENSION_FIELDS */].filter(function(field){return firstSelection[field];}).reduce(function(o,key){return Object(objectSpread2["a" /* default */])({},o,Object(defineProperty["a" /* default */])({},key,firstSelection[key]));},{})),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),globalDimensionValues=_useState4[0],setGlobalDimensionValues=_useState4[1];function setColormap(v){handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{colormap:v}));}function setOpacity(v){handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{opacity:v}));}function setChannels(v){handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{channels:v}));}function setTransparentColor(v){handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{transparentColor:v}));}function setChannelsAndDomainType(newChannels,newDomainType){handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{channels:newChannels,domainType:newDomainType}));}function setChannel(v,i){var newChannels=Object(toConsumableArray["a" /* default */])(channels);newChannels[i]=v;handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{channels:newChannels}));}function addChannel(v){var newChannels=[].concat(Object(toConsumableArray["a" /* default */])(channels),[v]);handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{channels:newChannels}));}function removeChannel(i){var newChannels=Object(toConsumableArray["a" /* default */])(channels);newChannels.splice(i,1);handleLayerChange(Object(objectSpread2["a" /* default */])({},layer,{channels:newChannels}));}// Handles adding a channel, creating a default selection
// for the current global settings and domain type.
var handleChannelAdd=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var selection,_yield$getDomainsAndS,domains,sliders,domain,slider,color,visible;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:selection={};dimensions.forEach(function(dimension){// Set new image to default selection for non-global selections (0)
// and use current global selection otherwise.
selection[dimension.field]=constants["g" /* GLOBAL_SLIDER_DIMENSION_FIELDS */].includes(dimension.field)?globalDimensionValues[dimension.field]:0;});_context.next=4;return getDomainsAndSliders(loader,[selection],domainType);case 4:_yield$getDomainsAndS=_context.sent;domains=_yield$getDomainsAndS.domains;sliders=_yield$getDomainsAndS.sliders;domain=domains[0];slider=sliders[0]||domain;color=[255,255,255];visible=true;addChannel({selection:selection,slider:slider,visible:visible,color:color});case 12:case"end":return _context.stop();}}},_callee);}));return function handleChannelAdd(){return _ref.apply(this,arguments);};}();var handleDomainChange=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(value){var loaderSelection,sliders,_yield$getDomainsAndS2,domains,newChannels;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setDomainType(value);loaderSelection=channels.map(function(channel){return channel.selection;});sliders=channels.map(function(channel){return channel.slider;});_context2.next=5;return getDomainsAndSliders(loader,loaderSelection,value);case 5:_yield$getDomainsAndS2=_context2.sent;domains=_yield$getDomainsAndS2.domains;// If it's the right-most slider, we take the minimum of that and the new value.
// Otherwise, we use the maximum of the left-hand side and the new value.
sliders=sliders.map(function(slider,i){var _slider=Object(slicedToArray["a" /* default */])(slider,2),left=_slider[0],right=_slider[1];return[Math.max(left,domains[i][0]),Math.min(right,domains[i][1])];});newChannels=channels.map(function(c,i){return Object(objectSpread2["a" /* default */])({},c,{slider:sliders[i]});});setChannelsAndDomainType(newChannels,value);case 10:case"end":return _context2.stop();}}},_callee2);}));return function handleDomainChange(_x4){return _ref2.apply(this,arguments);};}();// This call updates all channel selections with new global selection from the UI.
var handleGlobalChannelsSelectionChange=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(_ref3){var selection,event,loaderSelection,mouseUp,_ref5,sliders,newChannels;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:selection=_ref3.selection,event=_ref3.event;loaderSelection=channels.map(function(channel){return Object(objectSpread2["a" /* default */])({},channel.selection,{},selection);});mouseUp=event.type==='mouseup';// Only update domains on a mouseup event for the same reason as above.
if(!mouseUp){_context3.next=9;break;}_context3.next=6;return getDomainsAndSliders(loader,loaderSelection,domainType);case 6:_context3.t0=_context3.sent;_context3.next=10;break;case 9:_context3.t0={domains:[],sliders:[]};case 10:_ref5=_context3.t0;sliders=_ref5.sliders;if(mouseUp){newChannels=channels.map(function(c,i){return Object(objectSpread2["a" /* default */])({},c,{slider:sliders[i],selection:Object(objectSpread2["a" /* default */])({},c.selection,{},selection)});});setChannels(newChannels);}setGlobalDimensionValues(function(prev){return Object(objectSpread2["a" /* default */])({},prev,{},selection);});case 14:case"end":return _context3.stop();}}},_callee3);}));return function handleGlobalChannelsSelectionChange(_x5){return _ref4.apply(this,arguments);};}();var channelControllers=[];if(dimensions.length>0){var channelDimensions=loader.type==='ome-tiff'?dimensions.find(function(c){return c.field==='channel';}):dimensions[0];var channelOptions=channelDimensions.values,dimName=channelDimensions.field;// Create the channel controllers for each channel.
channelControllers=channels.map(// c is an object like { color, selection, slider, visible }.
function(c,channelId){// Change one property of a channel (for now - soon
// nested structures allowing for multiple z/t selecitons at once, for example).
var handleChannelPropertyChange=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(property,value){var update,loaderSelection,_yield$getDomainsAndS3,sliders,_sliders;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// property is something like "selection" or "slider."
// value is the actual change, like { channel: "DAPI" }.
update=Object(defineProperty["a" /* default */])({},property,value);if(!(property==='selection')){_context4.next=10;break;}update.selection=Object(objectSpread2["a" /* default */])({},globalDimensionValues,{},update.selection);loaderSelection=[Object(objectSpread2["a" /* default */])({},channels[channelId][property],{},value)];_context4.next=6;return getDomainsAndSliders(loader,loaderSelection,domainType);case 6:_yield$getDomainsAndS3=_context4.sent;sliders=_yield$getDomainsAndS3.sliders;_sliders=Object(slicedToArray["a" /* default */])(sliders,1);update.slider=_sliders[0];case 10:setChannel(Object(objectSpread2["a" /* default */])({},c,{},update),channelId);case 11:case"end":return _context4.stop();}}},_callee4);}));return function handleChannelPropertyChange(_x6,_x7){return _ref6.apply(this,arguments);};}();var handleChannelRemove=function handleChannelRemove(){removeChannel(channelId);};var handleIQRUpdate=/*#__PURE__*/function(){var _ref7=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var stats,_stats$,q1,q3;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Object(viv_["getChannelStats"])({loader:loader,loaderSelection:[channels[channelId].selection]});case 2:stats=_context5.sent;_stats$=stats[0],q1=_stats$.q1,q3=_stats$.q3;setChannel(Object(objectSpread2["a" /* default */])({},c,{slider:[q1,q3]}),channelId);case 5:case"end":return _context5.stop();}}},_callee5);}));return function handleIQRUpdate(){return _ref7.apply(this,arguments);};}();return/*#__PURE__*/external_react_default.a.createElement(Grid_default.a// eslint-disable-next-line react/no-array-index-key
,{key:"channel-controller-".concat(channelId),item:true,style:{width:'100%'}},/*#__PURE__*/external_react_default.a.createElement(layer_controller_ChannelController,{dimName:dimName,visibility:c.visible,selectionIndex:c.selection[dimName],slider:c.slider,color:c.color,channels:channels,channelId:channelId,domainType:domainType,loader:loader,globalDimensionValues:globalDimensionValues,theme:theme,channelOptions:channelOptions,colormapOn:Boolean(colormap),handlePropertyChange:handleChannelPropertyChange,handleChannelRemove:handleChannelRemove,handleIQRUpdate:handleIQRUpdate}));});}var classes=Object(styles["a" /* useExpansionPanelStyles */])();var summaryClasses=Object(styles["b" /* useExpansionPanelSummaryStyles */])();return/*#__PURE__*/external_react_default.a.createElement(ExpansionPanel_default.a,{defaultExpanded:true,className:classes.root},/*#__PURE__*/external_react_default.a.createElement(ExpansionPanelSummary_default.a,{expandIcon:/*#__PURE__*/external_react_default.a.createElement(ExpandMore_default.a,null),"aria-controls":"layer-".concat(name,"-controls"),classes:Object(objectSpread2["a" /* default */])({},summaryClasses)},name),/*#__PURE__*/external_react_default.a.createElement(ExpansionPanelDetails_default.a,{className:classes.root},/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(layer_controller_LayerOptions,{channels:channels,dimensions:dimensions,opacity:opacity,colormap:colormap,transparentColor:transparentColor,domainType:domainType// Only allow for global dimension controllers that
// exist in the `dimensions` part of the loader.
,globalControlDimensions:dimensions.filter(function(dimension){return constants["g" /* GLOBAL_SLIDER_DIMENSION_FIELDS */].includes(dimension.field);}),globalDimensionValues:globalDimensionValues,handleOpacityChange:setOpacity,handleColormapChange:setColormap,handleGlobalChannelsSelectionChange:handleGlobalChannelsSelectionChange,handleTransparentColorChange:setTransparentColor,isRgb:loader.isRgb,handleDomainChange:handleDomainChange})),!loader.isRgb?channelControllers:null,!loader.isRgb&&/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(Button_default.a,{disabled:channels.length===viv_["MAX_SLIDERS_AND_CHANNELS"],onClick:handleChannelAdd,fullWidth:true,variant:"outlined",style:buttonStyles,startIcon:/*#__PURE__*/external_react_default.a.createElement(Add_default.a,null),size:"small"},"Add Channel")),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(Button_default.a,{onClick:handleLayerRemove,fullWidth:true,variant:"outlined",style:buttonStyles,size:"small"},"Remove Image Layer"))));}

/***/ }),
/* 129 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: external "react-virtualized"
var external_react_virtualized_ = __webpack_require__(130);

// EXTERNAL MODULE: external "uuid/v4"
var v4_ = __webpack_require__(53);
var v4_default = /*#__PURE__*/__webpack_require__.n(v4_);

// EXTERNAL MODULE: external "lodash/union"
var union_ = __webpack_require__(142);
var union_default = /*#__PURE__*/__webpack_require__.n(union_);

// EXTERNAL MODULE: external "lodash/difference"
var difference_ = __webpack_require__(143);
var difference_default = /*#__PURE__*/__webpack_require__.n(difference_);

// EXTERNAL MODULE: external "lodash/isEqual"
var isEqual_ = __webpack_require__(13);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual_);

// CONCATENATED MODULE: ./src/components/selectable-table/SelectableTable.js
/* eslint-disable jsx-a11y/no-noninteractive-element-to-interactive-role */ /* eslint-disable jsx-a11y/click-events-have-key-events *//**
 * A table with "selectable" rows.
 * @prop {string[]} columns An array of column names, corresponding to data object properties.
 * @prop {object[]} data An array of data objects used to populate table rows.
 * @prop {function} onChange Callback function,
 * passed a selection object when `allowMultiple` is false (and `null` if `allowUncheck` is true),
 * or passed an array of selection objects when `allowMultiple` is true.
 * @prop {string} idKey The key for a unique identifier property of `data` objects.
 * @prop {string} valueKey If initially-selected rows are required,
 * this key specifies a boolean property of the `data` objects
 * indicating those rows that should be initially selected.
 * @prop {boolean} allowMultiple Whether to allow multiple rows to be selected. By default, false.
 * @prop {boolean} allowUncheck Whether to allow selected rows to be un-checked. By default, false.
 * @prop {boolean} showTableHead Whether to show the table header element. By default, true.
 * @prop {boolean} showTableInputs Whether to show the table input elements for each row.
 * By default, false.
 */function SelectableTable(props){var hasColorEncoding=props.hasColorEncoding,columns=props.columns,data=props.data,onChange=props.onChange,_props$idKey=props.idKey,idKey=_props$idKey===void 0?'id':_props$idKey,_props$valueKey=props.valueKey,valueKey=_props$valueKey===void 0?'value':_props$valueKey,_props$allowMultiple=props.allowMultiple,allowMultiple=_props$allowMultiple===void 0?false:_props$allowMultiple,_props$allowUncheck=props.allowUncheck,allowUncheck=_props$allowUncheck===void 0?false:_props$allowUncheck,_props$showTableHead=props.showTableHead,showTableHead=_props$showTableHead===void 0?true:_props$showTableHead,_props$showTableInput=props.showTableInputs,showTableInputs=_props$showTableInput===void 0?false:_props$showTableInput,_props$testHeight=props.testHeight,testHeight=_props$testHeight===void 0?undefined:_props$testHeight,_props$testWidth=props.testWidth,testWidth=_props$testWidth===void 0?undefined:_props$testWidth;var _useState=Object(external_react_["useState"])(null),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),selectedRows=_useState2[0],setSelectedRows=_useState2[1];// Callback function to update the `selectedRows` state.
var onSelectRow=Object(external_react_["useCallback"])(function(value,checked){if(checked||allowUncheck){if(!allowMultiple){setSelectedRows(checked?[value]:[]);}else{setSelectedRows(checked?union_default()(selectedRows||[],[value]):difference_default()(selectedRows||[],[value]));}}},[allowMultiple,allowUncheck,selectedRows]);// Handler for checkbox input elements.
var handleInputChange=Object(external_react_["useCallback"])(function(event){var target=event.target;var checked=target.checked;var value=target.value;onSelectRow(value,checked);},[onSelectRow]);// Function to map row IDs to corresponding objects
// to pass to the `onChange` callback.
var getDataFromIds=Object(external_react_["useCallback"])(function(ids){return ids.map(function(id){var _ref;return _ref={},Object(defineProperty["a" /* default */])(_ref,idKey,id),Object(defineProperty["a" /* default */])(_ref,"data",data.find(function(item){return item[idKey]===id;})),_ref;});},[data,idKey]);// Function to check if a row ID has been selected.
var isSelected=Object(external_react_["useCallback"])(function(id){return Array.isArray(selectedRows)&&selectedRows.includes(id);},[selectedRows]);/* eslint-disable react-hooks/exhaustive-deps */Object(external_react_["useEffect"])(function(){// Check whether an initial set of rows should be selected.
var initialSelectedRows=data.map(function(d){if(d[valueKey]){return d[idKey];}return null;}).filter(Boolean);if(!isEqual_default()(initialSelectedRows,selectedRows)){if(initialSelectedRows.length>0){setSelectedRows(initialSelectedRows);}else{setSelectedRows(null);}}},[data,idKey,valueKey]);/* eslint-disable react-hooks/exhaustive-deps */Object(external_react_["useEffect"])(function(){// Call the `onChange` prop function with an updated row or set of rows.
if(!onChange||!selectedRows){return;}var selectedRowData=getDataFromIds(selectedRows);if(allowMultiple){onChange(selectedRowData);}else if(selectedRows.length===1){onChange(selectedRowData[0]);}else if(selectedRows.length===0){onChange(null);}},[selectedRows]);// Generate a unique ID to use in (for, id) label-input pairs.
var inputUuid=v4_default()();// Class for first column of inputs, to hide them if desired.
var hiddenInputsClass=showTableInputs?'':'hidden-input-column';var rowRenderer=function rowRenderer(_ref2){var index=_ref2.index,style=_ref2.style;return/*#__PURE__*/ (// eslint-disable-next-line jsx-a11y/interactive-supports-focus
external_react_default.a.createElement("div",{key:data[index][idKey],className:"table-item table-row ".concat(isSelected(data[index][idKey])?'row-checked ':''),style:style,role:"button",onClick:function onClick(){return onSelectRow(data[index][idKey],!isSelected(data[index][idKey])||!hasColorEncoding);}},/*#__PURE__*/external_react_default.a.createElement("div",{className:"input-container ".concat(hiddenInputsClass," table-cell")},/*#__PURE__*/external_react_default.a.createElement("label",{htmlFor:"".concat(inputUuid,"_").concat(data[index][idKey])},/*#__PURE__*/external_react_default.a.createElement("input",{id:"".concat(inputUuid,"_").concat(data[index][idKey]),type:"checkbox",className:allowMultiple?'checkbox':'radio',name:inputUuid,value:data[index][idKey],onChange:handleInputChange,checked:isSelected(data[index][idKey])}))),columns.map(function(column){return/*#__PURE__*/external_react_default.a.createElement("div",{className:"table-cell",key:column},data[index][column]);})));};var headerRowRenderer=function headerRowRenderer(_ref3){var style=_ref3.style;return/*#__PURE__*/external_react_default.a.createElement("div",{className:"".concat(hiddenInputsClass," table-row"),style:style},columns.map(function(column){return/*#__PURE__*/external_react_default.a.createElement("div",{key:column},column);}));};return/*#__PURE__*/external_react_default.a.createElement("div",{className:"selectable-table"},/*#__PURE__*/external_react_default.a.createElement(external_react_virtualized_["AutoSizer"],null,function(_ref4){var width=_ref4.width,height=_ref4.height;return/*#__PURE__*/external_react_default.a.createElement(external_react_virtualized_["Table"],{height:testHeight||height,gridStyle:{outline:'none'},rowCount:data.length// 24 is 1 em + padding in either direction (see _selectable_table.scss).
,rowHeight:24,headerHeight:showTableHead?24:undefined,rowRenderer:rowRenderer,width:testWidth||width,headerRowRenderer:showTableHead?headerRowRenderer:undefined,rowGetter:function rowGetter(_ref5){var index=_ref5.index;return data[index];}});}));}
// CONCATENATED MODULE: ./src/components/selectable-table/index.js

// CONCATENATED MODULE: ./src/components/genes/Genes.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Genes; });
function Genes(props){var hasColorEncoding=props.hasColorEncoding,_props$geneList=props.geneList,geneList=_props$geneList===void 0?[]:_props$geneList,_props$geneSelection=props.geneSelection,geneSelection=_props$geneSelection===void 0?[]:_props$geneSelection,_props$geneFilter=props.geneFilter,geneFilter=_props$geneFilter===void 0?null:_props$geneFilter,setGeneSelection=props.setGeneSelection;var _useState=Object(external_react_["useState"])(''),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=Object(external_react_["useState"])(geneList),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];Object(external_react_["useEffect"])(function(){var results=geneList.filter(function(gene){return gene.toLowerCase().includes(searchTerm.toLowerCase());});setSearchResults(results);},[searchTerm,geneList]);function onChange(selection){if(setGeneSelection&&selection&&selection.name){setGeneSelection([selection.name]);}}var data=searchResults.filter(function(gene){return geneFilter?geneFilter.includes(gene):true;}).sort(function(a,b){return a.localeCompare(b);}).map(function(gene){return{name:gene,value:geneSelection?geneSelection.includes(gene):false};});var handleChange=function handleChange(event){setSearchTerm(event.target.value);};return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement("input",{className:"search-bar",type:"text",placeholder:"Search",value:searchTerm,onChange:handleChange}),/*#__PURE__*/external_react_default.a.createElement(SelectableTable,{columns:['name'],data:data,hasColorEncoding:hasColorEncoding,idKey:"name",valueKey:"value",onChange:onChange,allowUncheck:false,showTableHead:false}));}

/***/ }),
/* 130 */
/***/ (function(module, exports) {

module.exports = require("react-virtualized");

/***/ }),
/* 131 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Button");

/***/ }),
/* 132 */
/***/ (function(module, exports) {

module.exports = require("react-vega");

/***/ }),
/* 133 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return StatusSubscriber; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _app_state_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);
/* harmony import */ var _app_state_coordination__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25);
/* harmony import */ var _TitleInfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35);
/* harmony import */ var _Status__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(125);
function StatusSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme;// Get "props" from the coordination space.
var _useCoordination=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_3__[/* useCoordination */ "d"])(_app_state_coordination__WEBPACK_IMPORTED_MODULE_4__[/* COMPONENT_COORDINATION_TYPES */ "b"].status,coordinationScopes),_useCoordination2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])(_useCoordination,1),_useCoordination2$=_useCoordination2[0],cellHighlight=_useCoordination2$.cellHighlight,geneHighlight=_useCoordination2$.geneHighlight,moleculeHighlight=_useCoordination2$.moleculeHighlight;var warn=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_3__[/* useWarning */ "p"])();var infos=[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(cellHighlight?["Hovered cell ".concat(cellHighlight)]:[]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(geneHighlight?["Hovered gene ".concat(geneHighlight)]:[]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(moleculeHighlight?["Hovered gene ".concat(moleculeHighlight)]:[]));var info=infos.join('; ');return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_TitleInfo__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"],{title:"Status",theme:theme,removeGridComponent:removeGridComponent,isScroll:true,isReady:true},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_Status__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"],{warn:warn,info:info}));}

/***/ }),
/* 134 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GenesSubscriber; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(15);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23);
/* harmony import */ var _data_hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24);
/* harmony import */ var _app_state_hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5);
/* harmony import */ var _app_state_coordination__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(25);
/* harmony import */ var _TitleInfo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(35);
/* harmony import */ var _Genes__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(129);
var GENES_DATA_TYPES=['expression-matrix'];function GenesSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,_props$variablesLabel=props.variablesLabelOverride,variablesLabel=_props$variablesLabel===void 0?'gene':_props$variablesLabel,_props$variablesPlura=props.variablesPluralLabelOverride,variablesPluralLabel=_props$variablesPlura===void 0?"".concat(variablesLabel,"s"):_props$variablesPlura,theme=props.theme;var loaders=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_5__[/* useLoaders */ "h"])();// Get "props" from the coordination space.
var _useCoordination=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_5__[/* useCoordination */ "d"])(_app_state_coordination__WEBPACK_IMPORTED_MODULE_6__[/* COMPONENT_COORDINATION_TYPES */ "b"].genes,coordinationScopes),_useCoordination2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,geneSelection=_useCoordination2$.geneSelection,geneFilter=_useCoordination2$.geneFilter,cellColorEncoding=_useCoordination2$.cellColorEncoding,_useCoordination2$2=_useCoordination2[1],setGeneSelection=_useCoordination2$2.setGeneSelection,setGeneFilter=_useCoordination2$2.setGeneFilter,setGeneHighlight=_useCoordination2$2.setGeneHighlight,setCellColorEncoding=_useCoordination2$2.setCellColorEncoding;var _useUrls=Object(_hooks__WEBPACK_IMPORTED_MODULE_3__[/* useUrls */ "d"])(),_useUrls2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useReady=Object(_hooks__WEBPACK_IMPORTED_MODULE_3__[/* useReady */ "c"])(GENES_DATA_TYPES),_useReady2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset file URLs and loader progress when the dataset has changed.
Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useExpressionMatrixD=Object(_data_hooks__WEBPACK_IMPORTED_MODULE_4__[/* useExpressionMatrixData */ "d"])(loaders,dataset,setItemIsReady,addUrl,true),_useExpressionMatrixD2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useExpressionMatrixD,1),expressionMatrix=_useExpressionMatrixD2[0];var geneList=expressionMatrix?expressionMatrix.cols:[];var numGenes=geneList.length;function setGeneSelectionAndColorEncoding(newSelection){setGeneSelection(newSelection);setCellColorEncoding('geneSelection');}return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_TitleInfo__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"],{title:"Expression Levels",info:"".concat(numGenes," ").concat(Object(_utils__WEBPACK_IMPORTED_MODULE_2__[/* pluralize */ "d"])(variablesLabel,variablesPluralLabel,numGenes)),theme:theme// Virtual scroll is used but this allows for the same styling as a scroll component
// even though this no longer uses the TitleInfo component's
// scroll css (SelectableTable is virtual scroll).
,isScroll:true,removeGridComponent:removeGridComponent,isReady:isReady,urls:urls},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Genes__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"],{hasColorEncoding:cellColorEncoding==='geneSelection',geneList:geneList,geneSelection:geneSelection,geneFilter:geneFilter,setGeneSelection:setGeneSelectionAndColorEncoding,setGeneFilter:setGeneFilter,setGeneHighlight:setGeneHighlight}));}

/***/ }),
/* 135 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CellSetsManagerSubscriber; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _package_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(93);
var _package_json__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(93, 1);
/* harmony import */ var _app_state_hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5);
/* harmony import */ var _app_state_coordination__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(25);
/* harmony import */ var _SetsManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(127);
/* harmony import */ var _TitleInfo__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(35);
/* harmony import */ var _cell_set_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(19);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16);
/* harmony import */ var _io__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(61);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(14);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(23);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(8);
/* harmony import */ var _data_hooks__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(24);
var CELL_SETS_DATA_TYPES=['cells','cell-sets'];/**
 * A subscriber wrapper around the SetsManager component
 * for the 'cell' datatype.
 * @param {object} props
 * @param {function} removeGridComponent The callback function to pass to TitleInfo,
 * to call when the component has been removed from the grid.
 * @param {function} onReady The function to call when the component has finished
 * initializing (subscribing to relevant events, etc).
 * @param {boolean} initializeSelection Should an event be emitted upon initialization,
 * so that cells are colored by some heuristic (e.g. the first clustering in the cell_sets tree)?
 */function CellSetsManagerSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,_props$initializeSele=props.initializeSelection,initializeSelection=_props$initializeSele===void 0?true:_props$initializeSele,_props$initializeColo=props.initializeColor,initializeColor=_props$initializeColo===void 0?true:_props$initializeColo,theme=props.theme;var loaders=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_7__[/* useLoaders */ "h"])();var setWarning=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_7__[/* useSetWarning */ "n"])();// Get "props" from the coordination space.
var _useCoordination=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_7__[/* useCoordination */ "d"])(_app_state_coordination__WEBPACK_IMPORTED_MODULE_8__[/* COMPONENT_COORDINATION_TYPES */ "b"].cellSets,coordinationScopes),_useCoordination2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,cellSetSelection=_useCoordination2$.cellSetSelection,cellSetColor=_useCoordination2$.cellSetColor,additionalCellSets=_useCoordination2$.additionalCellSets,cellColorEncoding=_useCoordination2$.cellColorEncoding,_useCoordination2$2=_useCoordination2[1],setCellSetSelection=_useCoordination2$2.setCellSetSelection,setCellColorEncoding=_useCoordination2$2.setCellColorEncoding,setCellSetColor=_useCoordination2$2.setCellSetColor,setAdditionalCellSets=_useCoordination2$2.setAdditionalCellSets;var _useUrls=Object(_hooks__WEBPACK_IMPORTED_MODULE_15__[/* useUrls */ "d"])(),_useUrls2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useReady=Object(_hooks__WEBPACK_IMPORTED_MODULE_15__[/* useReady */ "c"])(CELL_SETS_DATA_TYPES),_useReady2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];var _useState=Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])({}),_useState2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useState,2),autoSetSelections=_useState2[0],setAutoSetSelections=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])({}),_useState4=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useState3,2),autoSetColors=_useState4[0],setAutoSetColors=_useState4[1];var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])([]),_useState6=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useState5,2),cellSetExpansion=_useState6[0],setCellSetExpansion=_useState6[1];// Reset file URLs and loader progress when the dataset has changed.
Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function(){resetUrls();resetReadyItems();setAutoSetSelections({});setAutoSetColors({});setCellSetExpansion([]);// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useCellsData=Object(_data_hooks__WEBPACK_IMPORTED_MODULE_17__[/* useCellsData */ "b"])(loaders,dataset,setItemIsReady,addUrl,true),_useCellsData2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useCellsData,1),cells=_useCellsData2[0];var _useCellSetsData=Object(_data_hooks__WEBPACK_IMPORTED_MODULE_17__[/* useCellSetsData */ "a"])(loaders,dataset,setItemIsReady,addUrl,true,function(data){if(data&&data.tree.length>=1){// eslint-disable-next-line no-underscore-dangle
var newAutoSetSelectionParentName=data.tree[0].name;var newAutoSetSelections=data.tree[0].children.map(function(node){return[newAutoSetSelectionParentName,node.name];});setAutoSetSelections(function(prev){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},dataset,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prev[dataset]||[]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(newAutoSetSelections)));});var newAutoSetColors=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* initializeCellSetColor */ "c"])(data,cellSetColor);setAutoSetColors(function(prev){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},dataset,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prev[dataset]||[]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(newAutoSetColors)));});}else{setAutoSetSelections(function(prev){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},dataset,prev[dataset]||[]);});setAutoSetColors(function(prev){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])({},dataset,prev[dataset]||[]);});}}),_useCellSetsData2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(_useCellSetsData,1),cellSets=_useCellSetsData2[0];// Try to set up the selected sets array automatically if undefined.
Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function(){// Only initialize cell sets if the value of `cellSetSelection` is `null`
// and the `initializeSelection` prop is `true`.
if(isReady&&initializeSelection&&autoSetSelections[dataset]&&!cellSetSelection){setCellSetSelection(autoSetSelections[dataset]);}},[dataset,autoSetSelections,isReady,cellSetSelection,setCellSetSelection,initializeSelection]);// Try to set up the colored sets array automatically if undefined.
Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function(){// Only initialize cell sets if the value of `cellSetColor` is `null`
// and the `initializeColor` prop is `true`.
if(isReady&&initializeColor&&autoSetColors[dataset]&&!cellSetColor){setCellSetColor(autoSetColors[dataset]);}},[dataset,autoSetColors,isReady,setCellSetColor,initializeColor,cellSetColor]);// Validate and upgrade the additionalCellSets.
Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function(){if(additionalCellSets){var upgradedCellSets;try{upgradedCellSets=Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* tryUpgradeTreeToLatestSchema */ "f"])(additionalCellSets,_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"]);}catch(e){setWarning(e.message);return;}setAdditionalCellSets(upgradedCellSets);}},[additionalCellSets,setAdditionalCellSets,setWarning]);// Get an array of all cell IDs to use for set complement operations.
var allCellIds=Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function(){return cells?Object.keys(cells):[];},[cells]);// A helper function for updating the encoding for cell colors,
// which may have previously been set to 'geneSelection'.
function setCellSetColorEncoding(){setCellColorEncoding('cellSetSelection');}// Merged cell sets are only to be used for convenience when reading
// (if writing: update either `cellSets` _or_ `additionalCellSets`).
var mergedCellSets=Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function(){return Object(_utils__WEBPACK_IMPORTED_MODULE_16__[/* mergeCellSets */ "n"])(cellSets,additionalCellSets);},[cellSets,additionalCellSets]);// Infer the state of the "checked level" radio button based on the selected cell sets.
var checkedLevel=Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function(){if(cellSetSelection&&cellSetSelection.length>0&&mergedCellSets&&mergedCellSets.tree.length>0){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeToExpectedCheckedLevel */ "p"])(mergedCellSets,cellSetSelection);}return null;},[cellSetSelection,mergedCellSets]);// Callback functions
// The user wants to select all nodes at a particular hierarchy level.
function onCheckLevel(levelZeroName,levelIndex){var lzn=mergedCellSets.tree.find(function(n){return n.name===levelZeroName;});if(lzn){var newCellSetSelection=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* nodeToLevelDescendantNamePaths */ "g"])(lzn,levelIndex,[],true);setCellSetSelection(newCellSetSelection);setCellSetColorEncoding();}}// The user wants to check or uncheck a cell set node.
function onCheckNode(targetKey,checked){var targetPath=Array.isArray(targetKey)?targetKey:targetKey.split(_utils__WEBPACK_IMPORTED_MODULE_12__[/* PATH_SEP */ "a"]);if(!targetKey){return;}if(checked){setCellSetSelection([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellSetSelection),[targetPath]));}else{setCellSetSelection(cellSetSelection.filter(function(d){return!lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d,targetPath);}));}setCellSetColorEncoding();}// The user wants to expand or collapse a node in the tree.
function onExpandNode(expandedKeys,targetKey,expanded){if(expanded){setCellSetExpansion(function(prev){return[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prev),[targetKey.split(_utils__WEBPACK_IMPORTED_MODULE_12__[/* PATH_SEP */ "a"])]);});}else{setCellSetExpansion(function(prev){return prev.filter(function(d){return!lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d,targetKey.split(_utils__WEBPACK_IMPORTED_MODULE_12__[/* PATH_SEP */ "a"]));});});}}// The user dragged a tree node and dropped it somewhere else in the tree
// to re-arrange or re-order the nodes.
// We need to verify that their drop target is valid, and if so, complete
// the tree re-arrangement.
function onDropNode(dropKey,dragKey,dropPosition,dropToGap){var dropPath=dropKey.split(_utils__WEBPACK_IMPORTED_MODULE_12__[/* PATH_SEP */ "a"]);var dropNode=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeFindNodeByNamePath */ "l"])(additionalCellSets,dropPath);if(!dropNode.children&&!dropToGap){// Do not allow a node with a set (i.e. leaf) to become a child of another node with a set,
// as this will result in an internal node having a set, which we do not allow.
return;}var dropNodeLevel=dropPath.length-1;var dropNodeIsLevelZero=dropNodeLevel===0;// Get drag node.
var dragPath=dragKey.split(_utils__WEBPACK_IMPORTED_MODULE_12__[/* PATH_SEP */ "a"]);var dragNode=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeFindNodeByNamePath */ "l"])(additionalCellSets,dragPath);if(dropNodeIsLevelZero&&dropToGap&&!dragNode.children){// Do not allow a leaf node to become a level zero node.
return;}var dropParentNode;var dropParentPath;var dropNodeCurrIndex;if(!dropNodeIsLevelZero){dropParentPath=dropPath.slice(0,-1);dropParentNode=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeFindNodeByNamePath */ "l"])(additionalCellSets,dropParentPath);dropNodeCurrIndex=dropParentNode.children.findIndex(function(c){return c.name===dropNode.name;});}else{dropNodeCurrIndex=additionalCellSets.tree.findIndex(function(lzn){return lzn.name===dropNode.name;});}// Further, only allow dragging if the dragged node will have a unique
// name among its new siblings.
var hasSiblingNameConflict;var dragNodeName=dragNode.name;if(!dropNodeIsLevelZero&&dropToGap){hasSiblingNameConflict=dropParentNode.children.find(function(c){return c!==dragNode&&c.name===dragNodeName;});}else if(!dropToGap){hasSiblingNameConflict=dropNode.children.find(function(c){return c!==dragNode&&c.name===dragNodeName;});}else{hasSiblingNameConflict=additionalCellSets.tree.find(function(lzn){return lzn!==dragNode&&lzn.name===dragNodeName;});}if(hasSiblingNameConflict){return;}// Remove the dragged object from its current position.
// Recursively check whether each node path
// matches the path of the node to delete.
// If so, return null, and then always use
// .filter(Boolean) to eliminate any null array elements.
var nextAdditionalCellSets=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},additionalCellSets,{tree:additionalCellSets.tree.map(function(lzn){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* filterNode */ "a"])(lzn,[],dragPath);}).filter(Boolean)});// Update index values after temporarily removing the dragged node.
// Names are unique as children of their parents.
if(!dropNodeIsLevelZero){dropNodeCurrIndex=dropParentNode.children.findIndex(function(c){return c.name===dropNode.name;});}else{dropNodeCurrIndex=nextAdditionalCellSets.tree.findIndex(function(lzn){return lzn.name===dropNode.name;});}var newDragPath=[];if(!dropToGap||!dropNodeIsLevelZero){var addChildFunction;var checkPathFunction;var newPath=[];if(!dropToGap){// Append the dragNode to dropNode's children if dropping _onto_ the dropNode.
// Set dragNode as the last child of dropNode.
addChildFunction=function addChildFunction(n){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* nodeAppendChild */ "d"])(n,dragNode);};checkPathFunction=function checkPathFunction(path){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(path,dropPath);};}else if(!dropNodeIsLevelZero){// Prepend or insert the dragNode if dropping _between_ (above or below dropNode).
// The dropNode is at a level greater than zero,
// so it has a parent.
checkPathFunction=function checkPathFunction(path){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(path,dropParentPath);};if(dropPosition===-1){// Set dragNode as first child of dropParentNode.
addChildFunction=function addChildFunction(n){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* nodePrependChild */ "f"])(n,dragNode);};}else{// Set dragNode before or after dropNode.
var insertIndex=dropNodeCurrIndex+(dropPosition>dropNodeCurrIndex?1:0);addChildFunction=function addChildFunction(n){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* nodeInsertChild */ "e"])(n,dragNode,insertIndex);};}}nextAdditionalCellSets.tree=nextAdditionalCellSets.tree.map(function(node){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* nodeTransform */ "i"])(node,function(n,path){return checkPathFunction(path);},function(n){var newNode=addChildFunction(n);return newNode;},newPath);});// Done
setAdditionalCellSets(nextAdditionalCellSets);newDragPath=[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(newPath[0]),[dragNode.name]);setCellSetSelection([newDragPath]);}else if(dropPosition===-1){// We need to drop the dragNode to level zero,
// and level zero nodes do not have parents.
// Set dragNode as first level zero node of the tree.
nextAdditionalCellSets.tree.unshift(dragNode);setAdditionalCellSets(nextAdditionalCellSets);newDragPath=[dragNode.name];setCellSetSelection([newDragPath]);}else{// Set dragNode before or after dropNode in level zero.
var _insertIndex=dropNodeCurrIndex+(dropPosition>dropNodeCurrIndex?1:0);var newLevelZero=Array.from(nextAdditionalCellSets.tree);newLevelZero.splice(_insertIndex,0,dragNode);nextAdditionalCellSets.tree=newLevelZero;setAdditionalCellSets(nextAdditionalCellSets);newDragPath=[dragNode.name];setCellSetSelection([newDragPath]);}var oldColors=cellSetColor.filter(function(i){return Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* isEqualOrPrefix */ "f"])(dragPath,i.path);});var newColors=oldColors.map(function(i){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},i,{path:!lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(i.path,dragPath)?newDragPath.concat(i.path.slice(dragPath.length)):newDragPath});});var newCellSetColor=cellSetColor.filter(function(i){return!Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* isEqualOrPrefix */ "f"])(dragPath,i.path);});newCellSetColor.push.apply(newCellSetColor,Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(newColors));setCellSetColor(newCellSetColor);}// The user wants to change the color of a cell set node.
function onNodeSetColor(targetPath,color){// Replace the color if an array element for this path already exists.
var prevNodeColor=cellSetColor===null||cellSetColor===void 0?void 0:cellSetColor.find(function(d){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,targetPath);});if(!prevNodeColor){setCellSetColor([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellSetColor||[]),[{path:targetPath,color:color}]));}else{setCellSetColor([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellSetColor.filter(function(d){return!lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(d.path,targetPath);})),[{path:targetPath,color:color}]));}}// The user wants to change the name of a cell set node.
function onNodeSetName(targetPath,name){var nextNamePath=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(targetPath);nextNamePath.pop();nextNamePath.push(name);// Recursively check whether each node path
// matches the path or a prefix of the path of the node to rename.
// If so, rename the node using the new path.
function renameNode(node,prevPath){if(lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]),targetPath)){return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},node,{name:name});}if(!node.children){return node;}return Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},node,{children:node.children.map(function(c){return renameNode(c,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(prevPath),[node.name]));})});}var nextAdditionalCellSets=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},additionalCellSets,{tree:additionalCellSets.tree.map(function(lzn){return renameNode(lzn,[]);})});// Change all paths that have this node as a prefix (i.e. descendants).
var nextCellSetColor=cellSetColor.map(function(d){return{path:Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* tryRenamePath */ "h"])(targetPath,d.path,nextNamePath),color:d.color};});var nextCellSetSelection=cellSetSelection.map(function(d){return Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* tryRenamePath */ "h"])(targetPath,d,nextNamePath);});var nextCellSetExpansion=cellSetExpansion.map(function(d){return Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* tryRenamePath */ "h"])(targetPath,d,nextNamePath);});// Need to update the node path everywhere it may be present.
setAdditionalCellSets(nextAdditionalCellSets);setCellSetColor(nextCellSetColor);setCellSetSelection(nextCellSetSelection);setCellSetExpansion(nextCellSetExpansion);}// Each time the user types while renaming a cell set node,
// we need to check whether the potential new name conflicts
// with any existing cell set node names.
// If there are conflicts, we want to disable the "Save" button.
function onNodeCheckNewName(targetPath,name){var nextNamePath=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(targetPath);nextNamePath.pop();nextNamePath.push(name);var hasConflicts=!lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(targetPath,nextNamePath)&&Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeFindNodeByNamePath */ "l"])(additionalCellSets,nextNamePath);return hasConflicts;}// The user wants to delete a cell set node, and has confirmed their choice.
function onNodeRemove(targetPath){// Recursively check whether each node path
// matches the path of the node to delete.
// If so, return null, and then always use
// .filter(Boolean) to eliminate any null array elements.
var nextAdditionalCellSets=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},additionalCellSets,{tree:additionalCellSets.tree.map(function(lzn){return Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* filterNode */ "a"])(lzn,[],targetPath);}).filter(Boolean)});// Delete state for all paths that have this node
// path as a prefix (i.e. delete all descendents).
var nextCellSetColor=cellSetColor.filter(function(d){return!Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* isEqualOrPrefix */ "f"])(targetPath,d.path);});var nextCellSetSelection=cellSetSelection.filter(function(d){return!Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* isEqualOrPrefix */ "f"])(targetPath,d);});var nextCellSetExpansion=cellSetExpansion.filter(function(d){return!Object(_utils__WEBPACK_IMPORTED_MODULE_12__[/* isEqualOrPrefix */ "f"])(targetPath,d);});setAdditionalCellSets(nextAdditionalCellSets);setCellSetColor(nextCellSetColor);setCellSetSelection(nextCellSetSelection);setCellSetExpansion(nextCellSetExpansion);}// The user wants to view (i.e. select) a particular node,
// or its expanded descendents.
function onNodeView(targetPath){// If parent node is clicked, and if it is expanded,
// then select the expanded descendent nodes.
var setsToView=[];// Recursively determine which descendent nodes are currently expanded.
function viewNode(node,nodePath){if(cellSetExpansion.find(function(expandedPath){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(nodePath,expandedPath);})){if(node.children){node.children.forEach(function(c){viewNode(c,[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(nodePath),[c.name]));});}else{setsToView.push(nodePath);}}else{setsToView.push(nodePath);}}var targetNode=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeFindNodeByNamePath */ "l"])(mergedCellSets,targetPath);viewNode(targetNode,targetPath);setCellSetSelection(setsToView);setCellSetColorEncoding();}// The user wants to create a new level zero node.
function onCreateLevelZeroNode(){var nextName=Object(_utils__WEBPACK_IMPORTED_MODULE_16__[/* getNextNumberedNodeName */ "m"])(additionalCellSets===null||additionalCellSets===void 0?void 0:additionalCellSets.tree,'My hierarchy ');setAdditionalCellSets(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},additionalCellSets||Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeInitialize */ "m"])(_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"]),{tree:[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(additionalCellSets?additionalCellSets.tree:[]),[{name:nextName,children:[]}])}));}// The user wants to create a new node corresponding to
// the union of the selected sets.
function onUnion(){var newSet=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeToUnion */ "t"])(mergedCellSets,cellSetSelection);Object(_utils__WEBPACK_IMPORTED_MODULE_16__[/* setCellSelection */ "o"])(newSet,additionalCellSets,cellSetColor,setCellSetSelection,setAdditionalCellSets,setCellSetColor,setCellColorEncoding,'Union ');}// The user wants to create a new node corresponding to
// the intersection of the selected sets.
function onIntersection(){var newSet=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeToIntersection */ "q"])(mergedCellSets,cellSetSelection);Object(_utils__WEBPACK_IMPORTED_MODULE_16__[/* setCellSelection */ "o"])(newSet,additionalCellSets,cellSetColor,setCellSetSelection,setAdditionalCellSets,setCellSetColor,setCellColorEncoding,'Intersection ');}// The user wants to create a new node corresponding to
// the complement of the selected sets.
function onComplement(){var newSet=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeToComplement */ "o"])(mergedCellSets,cellSetSelection,allCellIds);Object(_utils__WEBPACK_IMPORTED_MODULE_16__[/* setCellSelection */ "o"])(newSet,additionalCellSets,cellSetColor,setCellSetSelection,setAdditionalCellSets,setCellSetColor,setCellColorEncoding,'Complement ');}// The user wants to import a cell set hierarchy,
// probably from a CSV or JSON file.
function onImportTree(treeToImport){// Check for any naming conflicts with the current sets
// (both user-defined and dataset-defined) before importing.
var hasConflict=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treesConflict */ "u"])(mergedCellSets,treeToImport);if(!hasConflict){setAdditionalCellSets(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])({},additionalCellSets||Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeInitialize */ "m"])(_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"]),{tree:[].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(additionalCellSets?additionalCellSets.tree:[]),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(treeToImport.tree))}));// Automatically initialize set colors for the imported sets.
var importAutoSetColors=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* initializeCellSetColor */ "c"])(treeToImport,cellSetColor);setCellSetColor([].concat(Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(cellSetColor),Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(importAutoSetColors)));}}// The user wants to download a particular hierarchy to a JSON file.
function onExportLevelZeroNodeJSON(nodePath){var _treeExportLevelZeroN=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeExportLevelZeroNode */ "j"])(mergedCellSets,nodePath,_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"],cellSetColor),treeToExport=_treeExportLevelZeroN.treeToExport,nodeName=_treeExportLevelZeroN.nodeName;Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* downloadForUser */ "a"])(Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* handleExportJSON */ "b"])(treeToExport),"".concat(nodeName,"_").concat(_package_json__WEBPACK_IMPORTED_MODULE_6__.name,"-").concat(_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"],"-hierarchy.").concat(_constants__WEBPACK_IMPORTED_MODULE_14__[/* FILE_EXTENSION_JSON */ "a"]));}// The user wants to download a particular hierarchy to a CSV file.
function onExportLevelZeroNodeTabular(nodePath){var _treeExportLevelZeroN2=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeExportLevelZeroNode */ "j"])(mergedCellSets,nodePath,_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"],cellSetColor),treeToExport=_treeExportLevelZeroN2.treeToExport,nodeName=_treeExportLevelZeroN2.nodeName;Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* downloadForUser */ "a"])(Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* handleExportTabular */ "c"])(treeToExport),"".concat(nodeName,"_").concat(_package_json__WEBPACK_IMPORTED_MODULE_6__.name,"-").concat(_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"],"-hierarchy.").concat(_constants__WEBPACK_IMPORTED_MODULE_14__[/* FILE_EXTENSION_TABULAR */ "b"]));}// The user wants to download a particular set to a JSON file.
function onExportSetJSON(nodePath){var _treeExportSet=Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_11__[/* treeExportSet */ "k"])(mergedCellSets,nodePath),setToExport=_treeExportSet.setToExport,nodeName=_treeExportSet.nodeName;Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* downloadForUser */ "a"])(Object(_io__WEBPACK_IMPORTED_MODULE_13__[/* handleExportJSON */ "b"])(setToExport),"".concat(nodeName,"_").concat(_package_json__WEBPACK_IMPORTED_MODULE_6__.name,"-").concat(_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"],"-set.").concat(_constants__WEBPACK_IMPORTED_MODULE_14__[/* FILE_EXTENSION_JSON */ "a"]),_constants__WEBPACK_IMPORTED_MODULE_14__[/* FILE_EXTENSION_JSON */ "a"]);}return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_TitleInfo__WEBPACK_IMPORTED_MODULE_10__[/* default */ "a"],{title:"Cell Sets",isScroll:true,removeGridComponent:removeGridComponent,urls:urls,theme:theme,isReady:isReady},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_SetsManager__WEBPACK_IMPORTED_MODULE_9__[/* default */ "a"],{setColor:cellSetColor,sets:cellSets,additionalSets:additionalCellSets,levelSelection:checkedLevel,setSelection:cellSetSelection,setExpansion:cellSetExpansion,hasColorEncoding:cellColorEncoding==='cellSetSelection',draggable:true,datatype:_constants__WEBPACK_IMPORTED_MODULE_14__[/* SETS_DATATYPE_CELL */ "h"],onError:setWarning,onCheckNode:onCheckNode,onExpandNode:onExpandNode,onDropNode:onDropNode,onCheckLevel:onCheckLevel,onNodeSetColor:onNodeSetColor,onNodeSetName:onNodeSetName,onNodeCheckNewName:onNodeCheckNewName,onNodeRemove:onNodeRemove,onNodeView:onNodeView,onImportTree:onImportTree,onCreateLevelZeroNode:onCreateLevelZeroNode,onExportLevelZeroNodeJSON:onExportLevelZeroNodeJSON,onExportLevelZeroNodeTabular:onExportLevelZeroNodeTabular,onExportSetJSON:onExportSetJSON,onUnion:onUnion,onIntersection:onIntersection,onComplement:onComplement,hasCheckedSetsToUnion:(cellSetSelection===null||cellSetSelection===void 0?void 0:cellSetSelection.length)>1,hasCheckedSetsToIntersect:(cellSetSelection===null||cellSetSelection===void 0?void 0:cellSetSelection.length)>1,hasCheckedSetsToComplement:(cellSetSelection===null||cellSetSelection===void 0?void 0:cellSetSelection.length)>0}));}

/***/ }),
/* 136 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CellSetSizesPlotSubscriber; });
/* harmony import */ var _home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _TitleInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35);
/* harmony import */ var _app_state_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);
/* harmony import */ var _app_state_coordination__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(23);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8);
/* harmony import */ var _data_hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(24);
/* harmony import */ var _cell_set_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(19);
/* harmony import */ var _CellSetSizesPlot__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(126);
var CELL_SET_SIZES_DATA_TYPES=['cell-sets'];/**
 * A subscriber component for `CellSetSizePlot`,
 * which listens for cell sets data updates and
 * `GRID_RESIZE` events.
 * @param {object} props
 * @param {function} props.removeGridComponent The grid component removal function.
 * @param {function} props.onReady The function to call when the subscriptions
 * have been made.
 * @param {string} props.theme The name of the current Vitessce theme.
 */function CellSetSizesPlotSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme;var loaders=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_3__[/* useLoaders */ "h"])();// Get "props" from the coordination space.
var _useCoordination=Object(_app_state_hooks__WEBPACK_IMPORTED_MODULE_3__[/* useCoordination */ "d"])(_app_state_coordination__WEBPACK_IMPORTED_MODULE_4__[/* COMPONENT_COORDINATION_TYPES */ "b"].cellSetSizes,coordinationScopes),_useCoordination2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useCoordination,1),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,cellSetSelection=_useCoordination2$.cellSetSelection,cellSetColor=_useCoordination2$.cellSetColor,additionalCellSets=_useCoordination2$.additionalCellSets;var _useGridItemSize=Object(_hooks__WEBPACK_IMPORTED_MODULE_5__[/* useGridItemSize */ "b"])(),_useGridItemSize2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useGridItemSize,3),width=_useGridItemSize2[0],height=_useGridItemSize2[1],containerRef=_useGridItemSize2[2];var _useUrls=Object(_hooks__WEBPACK_IMPORTED_MODULE_5__[/* useUrls */ "d"])(),_useUrls2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useReady=Object(_hooks__WEBPACK_IMPORTED_MODULE_5__[/* useReady */ "c"])(CELL_SET_SIZES_DATA_TYPES),_useReady2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset file URLs and loader progress when the dataset has changed.
Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useCellSetsData=Object(_data_hooks__WEBPACK_IMPORTED_MODULE_7__[/* useCellSetsData */ "a"])(loaders,dataset,setItemIsReady,addUrl,true),_useCellSetsData2=Object(_home_runner_work_vitessce_vitessce_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(_useCellSetsData,1),cellSets=_useCellSetsData2[0];var mergedCellSets=Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function(){return Object(_utils__WEBPACK_IMPORTED_MODULE_6__[/* mergeCellSets */ "n"])(cellSets,additionalCellSets);},[cellSets,additionalCellSets]);// From the cell sets hierarchy and the list of selected cell sets,
// generate the array of set sizes data points for the bar plot.
var data=Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function(){return mergedCellSets&&cellSetSelection?Object(_cell_set_utils__WEBPACK_IMPORTED_MODULE_8__[/* treeToSetSizesBySetNames */ "s"])(mergedCellSets,cellSetSelection,cellSetColor):[];},[mergedCellSets,cellSetSelection,cellSetColor]);return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_TitleInfo__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"],{title:"Cell Set Sizes",removeGridComponent:removeGridComponent,urls:urls,theme:theme,isReady:isReady},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{ref:containerRef,className:"vega-container"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_CellSetSizesPlot__WEBPACK_IMPORTED_MODULE_9__[/* default */ "a"],{data:data,theme:theme,width:width,height:height})));}

/***/ }),
/* 137 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(10);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(20);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "@material-ui/core/Grid"
var Grid_ = __webpack_require__(29);
var Grid_default = /*#__PURE__*/__webpack_require__.n(Grid_);

// EXTERNAL MODULE: ./src/components/TitleInfo.js + 1 modules
var TitleInfo = __webpack_require__(35);

// EXTERNAL MODULE: ./src/components/layer-controller/RasterLayerController.js + 4 modules
var RasterLayerController = __webpack_require__(128);

// EXTERNAL MODULE: ./src/components/layer-controller/VectorLayerController.js
var VectorLayerController = __webpack_require__(112);

// EXTERNAL MODULE: external "@material-ui/core/styles"
var styles_ = __webpack_require__(17);

// EXTERNAL MODULE: external "@material-ui/icons/Add"
var Add_ = __webpack_require__(111);
var Add_default = /*#__PURE__*/__webpack_require__.n(Add_);

// EXTERNAL MODULE: external "@material-ui/core/MenuItem"
var MenuItem_ = __webpack_require__(45);
var MenuItem_default = /*#__PURE__*/__webpack_require__.n(MenuItem_);

// EXTERNAL MODULE: ./src/components/shared-mui/components.js
var components = __webpack_require__(42);

// CONCATENATED MODULE: ./src/components/layer-controller/ImageAddButton.js
var useStyles=Object(styles_["makeStyles"])(function(){return{addButton:{marginTop:'10px',marginBottom:'10px',fontWeight:400}};});function ImageAddIcon(){return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement(Add_default.a,null),"Add Image Layer");}function ImageAddButton(_ref){var imageOptions=_ref.imageOptions,handleImageAdd=_ref.handleImageAdd;var _useReducer=Object(external_react_["useReducer"])(function(v){return!v;},false),_useReducer2=Object(slicedToArray["a" /* default */])(_useReducer,2),open=_useReducer2[0],toggle=_useReducer2[1];var classes=useStyles();var handleAdd=function handleAdd(imgData){toggle();handleImageAdd(imgData);};if(!imageOptions)return null;return/*#__PURE__*/external_react_default.a.createElement(components["b" /* PopperMenu */],{open:open,toggle:toggle,buttonIcon:/*#__PURE__*/external_react_default.a.createElement(ImageAddIcon,null),buttonClassName:classes.addButton},imageOptions.map(function(imgData,i){return/*#__PURE__*/external_react_default.a.createElement(MenuItem_default.a,{dense:true,key:imgData.name,onClick:function onClick(){return handleAdd(i);}},/*#__PURE__*/external_react_default.a.createElement("span",null,imgData.name));}));}/* harmony default export */ var layer_controller_ImageAddButton = (ImageAddButton);
// EXTERNAL MODULE: ./src/components/hooks.js
var hooks = __webpack_require__(23);

// EXTERNAL MODULE: ./src/components/data-hooks.js
var data_hooks = __webpack_require__(24);

// EXTERNAL MODULE: ./src/app/state/hooks.js
var state_hooks = __webpack_require__(5);

// EXTERNAL MODULE: ./src/app/state/coordination.js
var coordination = __webpack_require__(25);

// EXTERNAL MODULE: ./src/components/spatial/utils.js
var utils = __webpack_require__(44);

// EXTERNAL MODULE: ./src/components/spatial/constants.js
var constants = __webpack_require__(18);

// CONCATENATED MODULE: ./src/components/layer-controller/LayerControllerSubscriber.js
/* eslint-disable dot-notation */var LAYER_CONTROLLER_DATA_TYPES=['raster'];function LayerControllerSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme;var loaders=Object(state_hooks["h" /* useLoaders */])();// Get "props" from the coordination space.
var _useCoordination=Object(state_hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].layerController,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,layers=_useCoordination2$.spatialLayers,setLayers=_useCoordination2[1].setSpatialLayers;var _useReady=Object(hooks["c" /* useReady */])(LAYER_CONTROLLER_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
// eslint-disable-next-line no-unused-vars
var _useRasterData=Object(data_hooks["h" /* useRasterData */])(loaders,dataset,setItemIsReady,function(){},false),_useRasterData2=Object(slicedToArray["a" /* default */])(_useRasterData,3),raster=_useRasterData2[0],imageLayerLoaders=_useRasterData2[1],imageLayerMeta=_useRasterData2[2];var handleImageAdd=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(index){var _imageLayerMeta$index,_imageLayerMeta$index2,_imageLayerMeta$index3;var loader,newChannels,newLayer,newLayers;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:loader=imageLayerLoaders[index];_context.next=3;return Object(utils["b" /* initializeLayerChannels */])(loader);case 3:newChannels=_context.sent;newLayer=Object(objectSpread2["a" /* default */])({type:'raster',index:index,modelMatrix:(_imageLayerMeta$index=imageLayerMeta[index])===null||_imageLayerMeta$index===void 0?void 0:(_imageLayerMeta$index2=_imageLayerMeta$index.metadata)===null||_imageLayerMeta$index2===void 0?void 0:(_imageLayerMeta$index3=_imageLayerMeta$index2.transform)===null||_imageLayerMeta$index3===void 0?void 0:_imageLayerMeta$index3.matrix},constants["f" /* DEFAULT_RASTER_LAYER_PROPS */],{channels:newChannels});newLayers=[].concat(Object(toConsumableArray["a" /* default */])(layers),[newLayer]);setLayers(newLayers);case 7:case"end":return _context.stop();}}},_callee);}));return function handleImageAdd(_x){return _ref.apply(this,arguments);};}();function _handleLayerChange(newLayer,i){var newLayers=Object(toConsumableArray["a" /* default */])(layers);newLayers[i]=newLayer;setLayers(newLayers);}function _handleLayerRemove(i){var newLayers=Object(toConsumableArray["a" /* default */])(layers);newLayers.splice(i,1);setLayers(newLayers);}return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Spatial Layers",isScroll:true,removeGridComponent:removeGridComponent,theme:theme,isReady:isReady},/*#__PURE__*/external_react_default.a.createElement("div",{className:"layer-controller-container"},layers&&layers.map(function(layer,i){if(layer.type==='cells'){return/*#__PURE__*/external_react_default.a.createElement(VectorLayerController["a" /* default */],{key:"".concat(dataset,"-cells"),label:"Cell Segmentations",layer:layer,handleLayerChange:function handleLayerChange(v){return _handleLayerChange(v,i);}});}if(layer.type==='molecules'){return/*#__PURE__*/external_react_default.a.createElement(VectorLayerController["a" /* default */],{key:"".concat(dataset,"-molecules"),label:"Molecules",layer:layer,handleLayerChange:function handleLayerChange(v){return _handleLayerChange(v,i);}});}if(layer.type==='raster'){var index=layer.index;var loader=imageLayerLoaders[index];var layerMeta=imageLayerMeta[index];return loader&&layerMeta?/*#__PURE__*/ // eslint-disable-next-line react/no-array-index-key
external_react_default.a.createElement(Grid_default.a,{key:"".concat(dataset,"-raster-").concat(index,"-").concat(i),item:true,style:{marginTop:'10px'}},/*#__PURE__*/external_react_default.a.createElement(RasterLayerController["a" /* default */],{name:layerMeta.name,layer:layer,loader:loader,theme:theme,handleLayerChange:function handleLayerChange(v){return _handleLayerChange(v,i);},handleLayerRemove:function handleLayerRemove(){return _handleLayerRemove(i);}})):null;}return null;}),/*#__PURE__*/external_react_default.a.createElement(Grid_default.a,{item:true},/*#__PURE__*/external_react_default.a.createElement(layer_controller_ImageAddButton,{imageOptions:imageLayerMeta,handleImageAdd:handleImageAdd}))));}/* harmony default export */ var layer_controller_LayerControllerSubscriber = __webpack_exports__["a"] = (LayerControllerSubscriber);

/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

module.exports=function(){return __webpack_require__(162)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 23);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createRange = __webpack_require__(6);\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\n\n\nvar range = createRange();\nmodule.exports = range;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseClamp = __webpack_require__(22),\n    toNumber = __webpack_require__(5);\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\n\n\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nmodule.exports = clamp;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Symbol = __webpack_require__(4),\n    getRawTag = __webpack_require__(15),\n    objectToString = __webpack_require__(16);\n/** `Object#toString` result references. */\n\n\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n/** Built-in value references. */\n\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\n\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n\n  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar root = __webpack_require__(12);\n/** Built-in value references. */\n\n\nvar Symbol = root.Symbol;\nmodule.exports = Symbol;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(1),\n    isSymbol = __webpack_require__(20);\n/** Used as references for various `Number` constants. */\n\n\nvar NAN = 0 / 0;\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nmodule.exports = toNumber;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseRange = __webpack_require__(7),\n    isIterateeCall = __webpack_require__(8),\n    toFinite = __webpack_require__(19);\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\n\n\nfunction createRange(fromRight) {\n  return function (start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    } // Ensure the sign of `-0` is preserved.\n\n\n    start = toFinite(start);\n\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n\n    step = step === undefined ? start < end ? 1 : -1 : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\n\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n\n  return result;\n}\n\nmodule.exports = baseRange;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar eq = __webpack_require__(9),\n    isArrayLike = __webpack_require__(10),\n    isIndex = __webpack_require__(18),\n    isObject = __webpack_require__(1);\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\n\n\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n\n  var type = typeof index;\n\n  if (type == 'number' ? isArrayLike(object) && isIndex(index, object.length) : type == 'string' && index in object) {\n    return eq(object[index], value);\n  }\n\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || value !== value && other !== other;\n}\n\nmodule.exports = eq;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isFunction = __webpack_require__(11),\n    isLength = __webpack_require__(17);\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\n\n\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseGetTag = __webpack_require__(3),\n    isObject = __webpack_require__(1);\n/** `Object#toString` result references. */\n\n\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\n\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  } // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n\n\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar freeGlobal = __webpack_require__(13);\n/** Detect free variable `self`. */\n\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\nmodule.exports = root;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\nmodule.exports = freeGlobal;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(14)))\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nvar g; // This works in non-strict mode\n\ng = function () {\n  return this;\n}();\n\ntry {\n  // This works if eval is allowed (see CSP)\n  g = g || new Function(\"return this\")();\n} catch (e) {\n  // This works if the window reference is available\n  if (typeof window === \"object\") g = window;\n} // g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\n\nmodule.exports = g;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Symbol = __webpack_require__(4);\n/** Used for built-in method references. */\n\n\nvar objectProto = Object.prototype;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/** Built-in value references. */\n\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\n\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\n\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\n\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/** Used to detect unsigned integer values. */\n\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\n\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toNumber = __webpack_require__(5);\n/** Used as references for various `Number` constants. */\n\n\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\n\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n\n  value = toNumber(value);\n\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = value < 0 ? -1 : 1;\n    return sign * MAX_INTEGER;\n  }\n\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseGetTag = __webpack_require__(3),\n    isObjectLike = __webpack_require__(21);\n/** `Object#toString` result references. */\n\n\nvar symbolTag = '[object Symbol]';\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;\n}\n\nmodule.exports = isSymbol;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n\n  return number;\n}\n\nmodule.exports = baseClamp;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/lodash/range.js\nvar range = __webpack_require__(0);\nvar range_default = /*#__PURE__*/__webpack_require__.n(range);\n\n// EXTERNAL MODULE: ./node_modules/lodash/clamp.js\nvar clamp = __webpack_require__(2);\nvar clamp_default = /*#__PURE__*/__webpack_require__.n(clamp);\n\n// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n// CONCATENATED MODULE: ./node_modules/@luma.gl/constants/dist/esm/index.js\n/* harmony default export */ var esm = ({\n  DEPTH_BUFFER_BIT: 0x00000100,\n  STENCIL_BUFFER_BIT: 0x00000400,\n  COLOR_BUFFER_BIT: 0x00004000,\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006,\n  ZERO: 0,\n  ONE: 1,\n  SRC_COLOR: 0x0300,\n  ONE_MINUS_SRC_COLOR: 0x0301,\n  SRC_ALPHA: 0x0302,\n  ONE_MINUS_SRC_ALPHA: 0x0303,\n  DST_ALPHA: 0x0304,\n  ONE_MINUS_DST_ALPHA: 0x0305,\n  DST_COLOR: 0x0306,\n  ONE_MINUS_DST_COLOR: 0x0307,\n  SRC_ALPHA_SATURATE: 0x0308,\n  CONSTANT_COLOR: 0x8001,\n  ONE_MINUS_CONSTANT_COLOR: 0x8002,\n  CONSTANT_ALPHA: 0x8003,\n  ONE_MINUS_CONSTANT_ALPHA: 0x8004,\n  FUNC_ADD: 0x8006,\n  FUNC_SUBTRACT: 0x800a,\n  FUNC_REVERSE_SUBTRACT: 0x800b,\n  BLEND_EQUATION: 0x8009,\n  BLEND_EQUATION_RGB: 0x8009,\n  BLEND_EQUATION_ALPHA: 0x883d,\n  BLEND_DST_RGB: 0x80c8,\n  BLEND_SRC_RGB: 0x80c9,\n  BLEND_DST_ALPHA: 0x80ca,\n  BLEND_SRC_ALPHA: 0x80cb,\n  BLEND_COLOR: 0x8005,\n  ARRAY_BUFFER_BINDING: 0x8894,\n  ELEMENT_ARRAY_BUFFER_BINDING: 0x8895,\n  LINE_WIDTH: 0x0b21,\n  ALIASED_POINT_SIZE_RANGE: 0x846d,\n  ALIASED_LINE_WIDTH_RANGE: 0x846e,\n  CULL_FACE_MODE: 0x0b45,\n  FRONT_FACE: 0x0b46,\n  DEPTH_RANGE: 0x0b70,\n  DEPTH_WRITEMASK: 0x0b72,\n  DEPTH_CLEAR_VALUE: 0x0b73,\n  DEPTH_FUNC: 0x0b74,\n  STENCIL_CLEAR_VALUE: 0x0b91,\n  STENCIL_FUNC: 0x0b92,\n  STENCIL_FAIL: 0x0b94,\n  STENCIL_PASS_DEPTH_FAIL: 0x0b95,\n  STENCIL_PASS_DEPTH_PASS: 0x0b96,\n  STENCIL_REF: 0x0b97,\n  STENCIL_VALUE_MASK: 0x0b93,\n  STENCIL_WRITEMASK: 0x0b98,\n  STENCIL_BACK_FUNC: 0x8800,\n  STENCIL_BACK_FAIL: 0x8801,\n  STENCIL_BACK_PASS_DEPTH_FAIL: 0x8802,\n  STENCIL_BACK_PASS_DEPTH_PASS: 0x8803,\n  STENCIL_BACK_REF: 0x8ca3,\n  STENCIL_BACK_VALUE_MASK: 0x8ca4,\n  STENCIL_BACK_WRITEMASK: 0x8ca5,\n  VIEWPORT: 0x0ba2,\n  SCISSOR_BOX: 0x0c10,\n  COLOR_CLEAR_VALUE: 0x0c22,\n  COLOR_WRITEMASK: 0x0c23,\n  UNPACK_ALIGNMENT: 0x0cf5,\n  PACK_ALIGNMENT: 0x0d05,\n  MAX_TEXTURE_SIZE: 0x0d33,\n  MAX_VIEWPORT_DIMS: 0x0d3a,\n  SUBPIXEL_BITS: 0x0d50,\n  RED_BITS: 0x0d52,\n  GREEN_BITS: 0x0d53,\n  BLUE_BITS: 0x0d54,\n  ALPHA_BITS: 0x0d55,\n  DEPTH_BITS: 0x0d56,\n  STENCIL_BITS: 0x0d57,\n  POLYGON_OFFSET_UNITS: 0x2a00,\n  POLYGON_OFFSET_FACTOR: 0x8038,\n  TEXTURE_BINDING_2D: 0x8069,\n  SAMPLE_BUFFERS: 0x80a8,\n  SAMPLES: 0x80a9,\n  SAMPLE_COVERAGE_VALUE: 0x80aa,\n  SAMPLE_COVERAGE_INVERT: 0x80ab,\n  COMPRESSED_TEXTURE_FORMATS: 0x86a3,\n  VENDOR: 0x1f00,\n  RENDERER: 0x1f01,\n  VERSION: 0x1f02,\n  IMPLEMENTATION_COLOR_READ_TYPE: 0x8b9a,\n  IMPLEMENTATION_COLOR_READ_FORMAT: 0x8b9b,\n  BROWSER_DEFAULT_WEBGL: 0x9244,\n  STATIC_DRAW: 0x88e4,\n  STREAM_DRAW: 0x88e0,\n  DYNAMIC_DRAW: 0x88e8,\n  ARRAY_BUFFER: 0x8892,\n  ELEMENT_ARRAY_BUFFER: 0x8893,\n  BUFFER_SIZE: 0x8764,\n  BUFFER_USAGE: 0x8765,\n  CURRENT_VERTEX_ATTRIB: 0x8626,\n  VERTEX_ATTRIB_ARRAY_ENABLED: 0x8622,\n  VERTEX_ATTRIB_ARRAY_SIZE: 0x8623,\n  VERTEX_ATTRIB_ARRAY_STRIDE: 0x8624,\n  VERTEX_ATTRIB_ARRAY_TYPE: 0x8625,\n  VERTEX_ATTRIB_ARRAY_NORMALIZED: 0x886a,\n  VERTEX_ATTRIB_ARRAY_POINTER: 0x8645,\n  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 0x889f,\n  CULL_FACE: 0x0b44,\n  FRONT: 0x0404,\n  BACK: 0x0405,\n  FRONT_AND_BACK: 0x0408,\n  BLEND: 0x0be2,\n  DEPTH_TEST: 0x0b71,\n  DITHER: 0x0bd0,\n  POLYGON_OFFSET_FILL: 0x8037,\n  SAMPLE_ALPHA_TO_COVERAGE: 0x809e,\n  SAMPLE_COVERAGE: 0x80a0,\n  SCISSOR_TEST: 0x0c11,\n  STENCIL_TEST: 0x0b90,\n  NO_ERROR: 0,\n  INVALID_ENUM: 0x0500,\n  INVALID_VALUE: 0x0501,\n  INVALID_OPERATION: 0x0502,\n  OUT_OF_MEMORY: 0x0505,\n  CONTEXT_LOST_WEBGL: 0x9242,\n  CW: 0x0900,\n  CCW: 0x0901,\n  DONT_CARE: 0x1100,\n  FASTEST: 0x1101,\n  NICEST: 0x1102,\n  GENERATE_MIPMAP_HINT: 0x8192,\n  BYTE: 0x1400,\n  UNSIGNED_BYTE: 0x1401,\n  SHORT: 0x1402,\n  UNSIGNED_SHORT: 0x1403,\n  INT: 0x1404,\n  UNSIGNED_INT: 0x1405,\n  FLOAT: 0x1406,\n  DOUBLE: 0x140a,\n  DEPTH_COMPONENT: 0x1902,\n  ALPHA: 0x1906,\n  RGB: 0x1907,\n  RGBA: 0x1908,\n  LUMINANCE: 0x1909,\n  LUMINANCE_ALPHA: 0x190a,\n  UNSIGNED_SHORT_4_4_4_4: 0x8033,\n  UNSIGNED_SHORT_5_5_5_1: 0x8034,\n  UNSIGNED_SHORT_5_6_5: 0x8363,\n  FRAGMENT_SHADER: 0x8b30,\n  VERTEX_SHADER: 0x8b31,\n  COMPILE_STATUS: 0x8b81,\n  DELETE_STATUS: 0x8b80,\n  LINK_STATUS: 0x8b82,\n  VALIDATE_STATUS: 0x8b83,\n  ATTACHED_SHADERS: 0x8b85,\n  ACTIVE_ATTRIBUTES: 0x8b89,\n  ACTIVE_UNIFORMS: 0x8b86,\n  MAX_VERTEX_ATTRIBS: 0x8869,\n  MAX_VERTEX_UNIFORM_VECTORS: 0x8dfb,\n  MAX_VARYING_VECTORS: 0x8dfc,\n  MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0x8b4d,\n  MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0x8b4c,\n  MAX_TEXTURE_IMAGE_UNITS: 0x8872,\n  MAX_FRAGMENT_UNIFORM_VECTORS: 0x8dfd,\n  SHADER_TYPE: 0x8b4f,\n  SHADING_LANGUAGE_VERSION: 0x8b8c,\n  CURRENT_PROGRAM: 0x8b8d,\n  NEVER: 0x0200,\n  ALWAYS: 0x0207,\n  LESS: 0x0201,\n  EQUAL: 0x0202,\n  LEQUAL: 0x0203,\n  GREATER: 0x0204,\n  GEQUAL: 0x0206,\n  NOTEQUAL: 0x0205,\n  KEEP: 0x1e00,\n  REPLACE: 0x1e01,\n  INCR: 0x1e02,\n  DECR: 0x1e03,\n  INVERT: 0x150a,\n  INCR_WRAP: 0x8507,\n  DECR_WRAP: 0x8508,\n  NEAREST: 0x2600,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_NEAREST: 0x2700,\n  LINEAR_MIPMAP_NEAREST: 0x2701,\n  NEAREST_MIPMAP_LINEAR: 0x2702,\n  LINEAR_MIPMAP_LINEAR: 0x2703,\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  TEXTURE_2D: 0x0de1,\n  TEXTURE: 0x1702,\n  TEXTURE_CUBE_MAP: 0x8513,\n  TEXTURE_BINDING_CUBE_MAP: 0x8514,\n  TEXTURE_CUBE_MAP_POSITIVE_X: 0x8515,\n  TEXTURE_CUBE_MAP_NEGATIVE_X: 0x8516,\n  TEXTURE_CUBE_MAP_POSITIVE_Y: 0x8517,\n  TEXTURE_CUBE_MAP_NEGATIVE_Y: 0x8518,\n  TEXTURE_CUBE_MAP_POSITIVE_Z: 0x8519,\n  TEXTURE_CUBE_MAP_NEGATIVE_Z: 0x851a,\n  MAX_CUBE_MAP_TEXTURE_SIZE: 0x851c,\n  TEXTURE0: 0x84c0,\n  ACTIVE_TEXTURE: 0x84e0,\n  REPEAT: 0x2901,\n  CLAMP_TO_EDGE: 0x812f,\n  MIRRORED_REPEAT: 0x8370,\n  TEXTURE_WIDTH: 0x1000,\n  TEXTURE_HEIGHT: 0x1001,\n  FLOAT_VEC2: 0x8b50,\n  FLOAT_VEC3: 0x8b51,\n  FLOAT_VEC4: 0x8b52,\n  INT_VEC2: 0x8b53,\n  INT_VEC3: 0x8b54,\n  INT_VEC4: 0x8b55,\n  BOOL: 0x8b56,\n  BOOL_VEC2: 0x8b57,\n  BOOL_VEC3: 0x8b58,\n  BOOL_VEC4: 0x8b59,\n  FLOAT_MAT2: 0x8b5a,\n  FLOAT_MAT3: 0x8b5b,\n  FLOAT_MAT4: 0x8b5c,\n  SAMPLER_2D: 0x8b5e,\n  SAMPLER_CUBE: 0x8b60,\n  LOW_FLOAT: 0x8df0,\n  MEDIUM_FLOAT: 0x8df1,\n  HIGH_FLOAT: 0x8df2,\n  LOW_INT: 0x8df3,\n  MEDIUM_INT: 0x8df4,\n  HIGH_INT: 0x8df5,\n  FRAMEBUFFER: 0x8d40,\n  RENDERBUFFER: 0x8d41,\n  RGBA4: 0x8056,\n  RGB5_A1: 0x8057,\n  RGB565: 0x8d62,\n  DEPTH_COMPONENT16: 0x81a5,\n  STENCIL_INDEX: 0x1901,\n  STENCIL_INDEX8: 0x8d48,\n  DEPTH_STENCIL: 0x84f9,\n  RENDERBUFFER_WIDTH: 0x8d42,\n  RENDERBUFFER_HEIGHT: 0x8d43,\n  RENDERBUFFER_INTERNAL_FORMAT: 0x8d44,\n  RENDERBUFFER_RED_SIZE: 0x8d50,\n  RENDERBUFFER_GREEN_SIZE: 0x8d51,\n  RENDERBUFFER_BLUE_SIZE: 0x8d52,\n  RENDERBUFFER_ALPHA_SIZE: 0x8d53,\n  RENDERBUFFER_DEPTH_SIZE: 0x8d54,\n  RENDERBUFFER_STENCIL_SIZE: 0x8d55,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 0x8cd0,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 0x8cd1,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 0x8cd2,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 0x8cd3,\n  COLOR_ATTACHMENT0: 0x8ce0,\n  DEPTH_ATTACHMENT: 0x8d00,\n  STENCIL_ATTACHMENT: 0x8d20,\n  DEPTH_STENCIL_ATTACHMENT: 0x821a,\n  NONE: 0,\n  FRAMEBUFFER_COMPLETE: 0x8cd5,\n  FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 0x8cd6,\n  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 0x8cd7,\n  FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 0x8cd9,\n  FRAMEBUFFER_UNSUPPORTED: 0x8cdd,\n  FRAMEBUFFER_BINDING: 0x8ca6,\n  RENDERBUFFER_BINDING: 0x8ca7,\n  READ_FRAMEBUFFER: 0x8ca8,\n  DRAW_FRAMEBUFFER: 0x8ca9,\n  MAX_RENDERBUFFER_SIZE: 0x84e8,\n  INVALID_FRAMEBUFFER_OPERATION: 0x0506,\n  UNPACK_FLIP_Y_WEBGL: 0x9240,\n  UNPACK_PREMULTIPLY_ALPHA_WEBGL: 0x9241,\n  UNPACK_COLORSPACE_CONVERSION_WEBGL: 0x9243,\n  READ_BUFFER: 0x0c02,\n  UNPACK_ROW_LENGTH: 0x0cf2,\n  UNPACK_SKIP_ROWS: 0x0cf3,\n  UNPACK_SKIP_PIXELS: 0x0cf4,\n  PACK_ROW_LENGTH: 0x0d02,\n  PACK_SKIP_ROWS: 0x0d03,\n  PACK_SKIP_PIXELS: 0x0d04,\n  TEXTURE_BINDING_3D: 0x806a,\n  UNPACK_SKIP_IMAGES: 0x806d,\n  UNPACK_IMAGE_HEIGHT: 0x806e,\n  MAX_3D_TEXTURE_SIZE: 0x8073,\n  MAX_ELEMENTS_VERTICES: 0x80e8,\n  MAX_ELEMENTS_INDICES: 0x80e9,\n  MAX_TEXTURE_LOD_BIAS: 0x84fd,\n  MAX_FRAGMENT_UNIFORM_COMPONENTS: 0x8b49,\n  MAX_VERTEX_UNIFORM_COMPONENTS: 0x8b4a,\n  MAX_ARRAY_TEXTURE_LAYERS: 0x88ff,\n  MIN_PROGRAM_TEXEL_OFFSET: 0x8904,\n  MAX_PROGRAM_TEXEL_OFFSET: 0x8905,\n  MAX_VARYING_COMPONENTS: 0x8b4b,\n  FRAGMENT_SHADER_DERIVATIVE_HINT: 0x8b8b,\n  RASTERIZER_DISCARD: 0x8c89,\n  VERTEX_ARRAY_BINDING: 0x85b5,\n  MAX_VERTEX_OUTPUT_COMPONENTS: 0x9122,\n  MAX_FRAGMENT_INPUT_COMPONENTS: 0x9125,\n  MAX_SERVER_WAIT_TIMEOUT: 0x9111,\n  MAX_ELEMENT_INDEX: 0x8d6b,\n  RED: 0x1903,\n  RGB8: 0x8051,\n  RGBA8: 0x8058,\n  RGB10_A2: 0x8059,\n  TEXTURE_3D: 0x806f,\n  TEXTURE_WRAP_R: 0x8072,\n  TEXTURE_MIN_LOD: 0x813a,\n  TEXTURE_MAX_LOD: 0x813b,\n  TEXTURE_BASE_LEVEL: 0x813c,\n  TEXTURE_MAX_LEVEL: 0x813d,\n  TEXTURE_COMPARE_MODE: 0x884c,\n  TEXTURE_COMPARE_FUNC: 0x884d,\n  SRGB: 0x8c40,\n  SRGB8: 0x8c41,\n  SRGB8_ALPHA8: 0x8c43,\n  COMPARE_REF_TO_TEXTURE: 0x884e,\n  RGBA32F: 0x8814,\n  RGB32F: 0x8815,\n  RGBA16F: 0x881a,\n  RGB16F: 0x881b,\n  TEXTURE_2D_ARRAY: 0x8c1a,\n  TEXTURE_BINDING_2D_ARRAY: 0x8c1d,\n  R11F_G11F_B10F: 0x8c3a,\n  RGB9_E5: 0x8c3d,\n  RGBA32UI: 0x8d70,\n  RGB32UI: 0x8d71,\n  RGBA16UI: 0x8d76,\n  RGB16UI: 0x8d77,\n  RGBA8UI: 0x8d7c,\n  RGB8UI: 0x8d7d,\n  RGBA32I: 0x8d82,\n  RGB32I: 0x8d83,\n  RGBA16I: 0x8d88,\n  RGB16I: 0x8d89,\n  RGBA8I: 0x8d8e,\n  RGB8I: 0x8d8f,\n  RED_INTEGER: 0x8d94,\n  RGB_INTEGER: 0x8d98,\n  RGBA_INTEGER: 0x8d99,\n  R8: 0x8229,\n  RG8: 0x822b,\n  R16F: 0x822d,\n  R32F: 0x822e,\n  RG16F: 0x822f,\n  RG32F: 0x8230,\n  R8I: 0x8231,\n  R8UI: 0x8232,\n  R16I: 0x8233,\n  R16UI: 0x8234,\n  R32I: 0x8235,\n  R32UI: 0x8236,\n  RG8I: 0x8237,\n  RG8UI: 0x8238,\n  RG16I: 0x8239,\n  RG16UI: 0x823a,\n  RG32I: 0x823b,\n  RG32UI: 0x823c,\n  R8_SNORM: 0x8f94,\n  RG8_SNORM: 0x8f95,\n  RGB8_SNORM: 0x8f96,\n  RGBA8_SNORM: 0x8f97,\n  RGB10_A2UI: 0x906f,\n  TEXTURE_IMMUTABLE_FORMAT: 0x912f,\n  TEXTURE_IMMUTABLE_LEVELS: 0x82df,\n  UNSIGNED_INT_2_10_10_10_REV: 0x8368,\n  UNSIGNED_INT_10F_11F_11F_REV: 0x8c3b,\n  UNSIGNED_INT_5_9_9_9_REV: 0x8c3e,\n  FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8dad,\n  UNSIGNED_INT_24_8: 0x84fa,\n  HALF_FLOAT: 0x140b,\n  RG: 0x8227,\n  RG_INTEGER: 0x8228,\n  INT_2_10_10_10_REV: 0x8d9f,\n  CURRENT_QUERY: 0x8865,\n  QUERY_RESULT: 0x8866,\n  QUERY_RESULT_AVAILABLE: 0x8867,\n  ANY_SAMPLES_PASSED: 0x8c2f,\n  ANY_SAMPLES_PASSED_CONSERVATIVE: 0x8d6a,\n  MAX_DRAW_BUFFERS: 0x8824,\n  DRAW_BUFFER0: 0x8825,\n  DRAW_BUFFER1: 0x8826,\n  DRAW_BUFFER2: 0x8827,\n  DRAW_BUFFER3: 0x8828,\n  DRAW_BUFFER4: 0x8829,\n  DRAW_BUFFER5: 0x882a,\n  DRAW_BUFFER6: 0x882b,\n  DRAW_BUFFER7: 0x882c,\n  DRAW_BUFFER8: 0x882d,\n  DRAW_BUFFER9: 0x882e,\n  DRAW_BUFFER10: 0x882f,\n  DRAW_BUFFER11: 0x8830,\n  DRAW_BUFFER12: 0x8831,\n  DRAW_BUFFER13: 0x8832,\n  DRAW_BUFFER14: 0x8833,\n  DRAW_BUFFER15: 0x8834,\n  MAX_COLOR_ATTACHMENTS: 0x8cdf,\n  COLOR_ATTACHMENT1: 0x8ce1,\n  COLOR_ATTACHMENT2: 0x8ce2,\n  COLOR_ATTACHMENT3: 0x8ce3,\n  COLOR_ATTACHMENT4: 0x8ce4,\n  COLOR_ATTACHMENT5: 0x8ce5,\n  COLOR_ATTACHMENT6: 0x8ce6,\n  COLOR_ATTACHMENT7: 0x8ce7,\n  COLOR_ATTACHMENT8: 0x8ce8,\n  COLOR_ATTACHMENT9: 0x8ce9,\n  COLOR_ATTACHMENT10: 0x8cea,\n  COLOR_ATTACHMENT11: 0x8ceb,\n  COLOR_ATTACHMENT12: 0x8cec,\n  COLOR_ATTACHMENT13: 0x8ced,\n  COLOR_ATTACHMENT14: 0x8cee,\n  COLOR_ATTACHMENT15: 0x8cef,\n  SAMPLER_3D: 0x8b5f,\n  SAMPLER_2D_SHADOW: 0x8b62,\n  SAMPLER_2D_ARRAY: 0x8dc1,\n  SAMPLER_2D_ARRAY_SHADOW: 0x8dc4,\n  SAMPLER_CUBE_SHADOW: 0x8dc5,\n  INT_SAMPLER_2D: 0x8dca,\n  INT_SAMPLER_3D: 0x8dcb,\n  INT_SAMPLER_CUBE: 0x8dcc,\n  INT_SAMPLER_2D_ARRAY: 0x8dcf,\n  UNSIGNED_INT_SAMPLER_2D: 0x8dd2,\n  UNSIGNED_INT_SAMPLER_3D: 0x8dd3,\n  UNSIGNED_INT_SAMPLER_CUBE: 0x8dd4,\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8dd7,\n  MAX_SAMPLES: 0x8d57,\n  SAMPLER_BINDING: 0x8919,\n  PIXEL_PACK_BUFFER: 0x88eb,\n  PIXEL_UNPACK_BUFFER: 0x88ec,\n  PIXEL_PACK_BUFFER_BINDING: 0x88ed,\n  PIXEL_UNPACK_BUFFER_BINDING: 0x88ef,\n  COPY_READ_BUFFER: 0x8f36,\n  COPY_WRITE_BUFFER: 0x8f37,\n  COPY_READ_BUFFER_BINDING: 0x8f36,\n  COPY_WRITE_BUFFER_BINDING: 0x8f37,\n  FLOAT_MAT2x3: 0x8b65,\n  FLOAT_MAT2x4: 0x8b66,\n  FLOAT_MAT3x2: 0x8b67,\n  FLOAT_MAT3x4: 0x8b68,\n  FLOAT_MAT4x2: 0x8b69,\n  FLOAT_MAT4x3: 0x8b6a,\n  UNSIGNED_INT_VEC2: 0x8dc6,\n  UNSIGNED_INT_VEC3: 0x8dc7,\n  UNSIGNED_INT_VEC4: 0x8dc8,\n  UNSIGNED_NORMALIZED: 0x8c17,\n  SIGNED_NORMALIZED: 0x8f9c,\n  VERTEX_ATTRIB_ARRAY_INTEGER: 0x88fd,\n  VERTEX_ATTRIB_ARRAY_DIVISOR: 0x88fe,\n  TRANSFORM_FEEDBACK_BUFFER_MODE: 0x8c7f,\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 0x8c80,\n  TRANSFORM_FEEDBACK_VARYINGS: 0x8c83,\n  TRANSFORM_FEEDBACK_BUFFER_START: 0x8c84,\n  TRANSFORM_FEEDBACK_BUFFER_SIZE: 0x8c85,\n  TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 0x8c88,\n  MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 0x8c8a,\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 0x8c8b,\n  INTERLEAVED_ATTRIBS: 0x8c8c,\n  SEPARATE_ATTRIBS: 0x8c8d,\n  TRANSFORM_FEEDBACK_BUFFER: 0x8c8e,\n  TRANSFORM_FEEDBACK_BUFFER_BINDING: 0x8c8f,\n  TRANSFORM_FEEDBACK: 0x8e22,\n  TRANSFORM_FEEDBACK_PAUSED: 0x8e23,\n  TRANSFORM_FEEDBACK_ACTIVE: 0x8e24,\n  TRANSFORM_FEEDBACK_BINDING: 0x8e25,\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 0x8210,\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 0x8211,\n  FRAMEBUFFER_ATTACHMENT_RED_SIZE: 0x8212,\n  FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 0x8213,\n  FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 0x8214,\n  FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 0x8215,\n  FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 0x8216,\n  FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 0x8217,\n  FRAMEBUFFER_DEFAULT: 0x8218,\n  DEPTH24_STENCIL8: 0x88f0,\n  DRAW_FRAMEBUFFER_BINDING: 0x8ca6,\n  READ_FRAMEBUFFER_BINDING: 0x8caa,\n  RENDERBUFFER_SAMPLES: 0x8cab,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 0x8cd4,\n  FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 0x8d56,\n  UNIFORM_BUFFER: 0x8a11,\n  UNIFORM_BUFFER_BINDING: 0x8a28,\n  UNIFORM_BUFFER_START: 0x8a29,\n  UNIFORM_BUFFER_SIZE: 0x8a2a,\n  MAX_VERTEX_UNIFORM_BLOCKS: 0x8a2b,\n  MAX_FRAGMENT_UNIFORM_BLOCKS: 0x8a2d,\n  MAX_COMBINED_UNIFORM_BLOCKS: 0x8a2e,\n  MAX_UNIFORM_BUFFER_BINDINGS: 0x8a2f,\n  MAX_UNIFORM_BLOCK_SIZE: 0x8a30,\n  MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 0x8a31,\n  MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 0x8a33,\n  UNIFORM_BUFFER_OFFSET_ALIGNMENT: 0x8a34,\n  ACTIVE_UNIFORM_BLOCKS: 0x8a36,\n  UNIFORM_TYPE: 0x8a37,\n  UNIFORM_SIZE: 0x8a38,\n  UNIFORM_BLOCK_INDEX: 0x8a3a,\n  UNIFORM_OFFSET: 0x8a3b,\n  UNIFORM_ARRAY_STRIDE: 0x8a3c,\n  UNIFORM_MATRIX_STRIDE: 0x8a3d,\n  UNIFORM_IS_ROW_MAJOR: 0x8a3e,\n  UNIFORM_BLOCK_BINDING: 0x8a3f,\n  UNIFORM_BLOCK_DATA_SIZE: 0x8a40,\n  UNIFORM_BLOCK_ACTIVE_UNIFORMS: 0x8a42,\n  UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 0x8a43,\n  UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 0x8a44,\n  UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 0x8a46,\n  OBJECT_TYPE: 0x9112,\n  SYNC_CONDITION: 0x9113,\n  SYNC_STATUS: 0x9114,\n  SYNC_FLAGS: 0x9115,\n  SYNC_FENCE: 0x9116,\n  SYNC_GPU_COMMANDS_COMPLETE: 0x9117,\n  UNSIGNALED: 0x9118,\n  SIGNALED: 0x9119,\n  ALREADY_SIGNALED: 0x911a,\n  TIMEOUT_EXPIRED: 0x911b,\n  CONDITION_SATISFIED: 0x911c,\n  WAIT_FAILED: 0x911d,\n  SYNC_FLUSH_COMMANDS_BIT: 0x00000001,\n  COLOR: 0x1800,\n  DEPTH: 0x1801,\n  STENCIL: 0x1802,\n  MIN: 0x8007,\n  MAX: 0x8008,\n  DEPTH_COMPONENT24: 0x81a6,\n  STREAM_READ: 0x88e1,\n  STREAM_COPY: 0x88e2,\n  STATIC_READ: 0x88e5,\n  STATIC_COPY: 0x88e6,\n  DYNAMIC_READ: 0x88e9,\n  DYNAMIC_COPY: 0x88ea,\n  DEPTH_COMPONENT32F: 0x8cac,\n  DEPTH32F_STENCIL8: 0x8cad,\n  INVALID_INDEX: 0xffffffff,\n  TIMEOUT_IGNORED: -1,\n  MAX_CLIENT_WAIT_TIMEOUT_WEBGL: 0x9247,\n  VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE: 0x88fe,\n  UNMASKED_VENDOR_WEBGL: 0x9245,\n  UNMASKED_RENDERER_WEBGL: 0x9246,\n  MAX_TEXTURE_MAX_ANISOTROPY_EXT: 0x84ff,\n  TEXTURE_MAX_ANISOTROPY_EXT: 0x84fe,\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3,\n  COMPRESSED_R11_EAC: 0x9270,\n  COMPRESSED_SIGNED_R11_EAC: 0x9271,\n  COMPRESSED_RG11_EAC: 0x9272,\n  COMPRESSED_SIGNED_RG11_EAC: 0x9273,\n  COMPRESSED_RGB8_ETC2: 0x9274,\n  COMPRESSED_RGBA8_ETC2_EAC: 0x9275,\n  COMPRESSED_SRGB8_ETC2: 0x9276,\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 0x9277,\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9278,\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9279,\n  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 0x8c00,\n  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 0x8c02,\n  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 0x8c01,\n  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 0x8c03,\n  COMPRESSED_RGB_ETC1_WEBGL: 0x8d64,\n  COMPRESSED_RGB_ATC_WEBGL: 0x8c92,\n  COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL: 0x8c92,\n  COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL: 0x87ee,\n  UNSIGNED_INT_24_8_WEBGL: 0x84fa,\n  HALF_FLOAT_OES: 0x8d61,\n  RGBA32F_EXT: 0x8814,\n  RGB32F_EXT: 0x8815,\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\n  UNSIGNED_NORMALIZED_EXT: 0x8c17,\n  MIN_EXT: 0x8007,\n  MAX_EXT: 0x8008,\n  SRGB_EXT: 0x8c40,\n  SRGB_ALPHA_EXT: 0x8c42,\n  SRGB8_ALPHA8_EXT: 0x8c43,\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT: 0x8210,\n  FRAGMENT_SHADER_DERIVATIVE_HINT_OES: 0x8b8b,\n  COLOR_ATTACHMENT0_WEBGL: 0x8ce0,\n  COLOR_ATTACHMENT1_WEBGL: 0x8ce1,\n  COLOR_ATTACHMENT2_WEBGL: 0x8ce2,\n  COLOR_ATTACHMENT3_WEBGL: 0x8ce3,\n  COLOR_ATTACHMENT4_WEBGL: 0x8ce4,\n  COLOR_ATTACHMENT5_WEBGL: 0x8ce5,\n  COLOR_ATTACHMENT6_WEBGL: 0x8ce6,\n  COLOR_ATTACHMENT7_WEBGL: 0x8ce7,\n  COLOR_ATTACHMENT8_WEBGL: 0x8ce8,\n  COLOR_ATTACHMENT9_WEBGL: 0x8ce9,\n  COLOR_ATTACHMENT10_WEBGL: 0x8cea,\n  COLOR_ATTACHMENT11_WEBGL: 0x8ceb,\n  COLOR_ATTACHMENT12_WEBGL: 0x8cec,\n  COLOR_ATTACHMENT13_WEBGL: 0x8ced,\n  COLOR_ATTACHMENT14_WEBGL: 0x8cee,\n  COLOR_ATTACHMENT15_WEBGL: 0x8cef,\n  DRAW_BUFFER0_WEBGL: 0x8825,\n  DRAW_BUFFER1_WEBGL: 0x8826,\n  DRAW_BUFFER2_WEBGL: 0x8827,\n  DRAW_BUFFER3_WEBGL: 0x8828,\n  DRAW_BUFFER4_WEBGL: 0x8829,\n  DRAW_BUFFER5_WEBGL: 0x882a,\n  DRAW_BUFFER6_WEBGL: 0x882b,\n  DRAW_BUFFER7_WEBGL: 0x882c,\n  DRAW_BUFFER8_WEBGL: 0x882d,\n  DRAW_BUFFER9_WEBGL: 0x882e,\n  DRAW_BUFFER10_WEBGL: 0x882f,\n  DRAW_BUFFER11_WEBGL: 0x8830,\n  DRAW_BUFFER12_WEBGL: 0x8831,\n  DRAW_BUFFER13_WEBGL: 0x8832,\n  DRAW_BUFFER14_WEBGL: 0x8833,\n  DRAW_BUFFER15_WEBGL: 0x8834,\n  MAX_COLOR_ATTACHMENTS_WEBGL: 0x8cdf,\n  MAX_DRAW_BUFFERS_WEBGL: 0x8824,\n  VERTEX_ARRAY_BINDING_OES: 0x85b5,\n  QUERY_COUNTER_BITS_EXT: 0x8864,\n  CURRENT_QUERY_EXT: 0x8865,\n  QUERY_RESULT_EXT: 0x8866,\n  QUERY_RESULT_AVAILABLE_EXT: 0x8867,\n  TIME_ELAPSED_EXT: 0x88bf,\n  TIMESTAMP_EXT: 0x8e28,\n  GPU_DISJOINT_EXT: 0x8fbb\n});\n// CONCATENATED MODULE: ./src/layers/heatmap-constants.js\nvar _PIXELATED_TEXTURE_PA;var TILE_SIZE=2048;var MIN_ROW_AGG=1;var MAX_ROW_AGG=16;var COLOR_BAR_SIZE=20;var AXIS_LABEL_TEXT_SIZE=9;var AXIS_TITLE_TEXT_SIZE=15;var AXIS_MIN_SIZE=10;var AXIS_MAX_SIZE=90;var AXIS_MARGIN=3;var THEME_TO_TEXT_COLOR={dark:[224,224,224],light:[64,64,64]};var AXIS_FONT_FAMILY=\"-apple-system, 'Helvetica Neue', Arial, sans-serif\";var PIXELATED_TEXTURE_PARAMETERS=(_PIXELATED_TEXTURE_PA={},_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_MIN_FILTER,esm.NEAREST),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_MAG_FILTER,esm.NEAREST),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_WRAP_S,esm.CLAMP_TO_EDGE),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_WRAP_T,esm.CLAMP_TO_EDGE),_PIXELATED_TEXTURE_PA);\n// CONCATENATED MODULE: ./src/components/heatmap/utils.js\nfunction getGeneByCellTile(view,_ref){var tileSize=_ref.tileSize,tileI=_ref.tileI,tileJ=_ref.tileJ,numCells=_ref.numCells,numGenes=_ref.numGenes,cellOrdering=_ref.cellOrdering,cells=_ref.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(j){// Need to iterate over cells in the outer loop.\ncellI=tileJ*tileSize+j;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(i){geneI=tileI*tileSize+i;value=view[sortedCellI*numGenes+geneI];offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}function getCellByGeneTile(view,_ref2){var tileSize=_ref2.tileSize,tileI=_ref2.tileI,tileJ=_ref2.tileJ,numCells=_ref2.numCells,numGenes=_ref2.numGenes,cellOrdering=_ref2.cellOrdering,cells=_ref2.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(i){// Need to iterate over cells in the outer loop.\ncellI=tileI*tileSize+i;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(j){geneI=tileJ*tileSize+j;if(geneI<numGenes){value=view[sortedCellI*numGenes+geneI];}else{value=0;}offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}/**\n * Called before a layer is drawn to determine whether it should be rendered.\n * Reference: https://deck.gl/docs/api-reference/core/deck#layerfilter\n * @param {object} params A viewport, layer pair.\n * @param {object} params.layer The layer to check.\n * @param {object} params.viewport The viewport to check.\n * @returns {boolean} Should this layer be rendered in this viewport?\n */function layerFilter(_ref3){var layer=_ref3.layer,viewport=_ref3.viewport;if(viewport.id==='axisLeft'){return layer.id.startsWith('axisLeft');}if(viewport.id==='axisTop'){return layer.id.startsWith('axisTop');}if(viewport.id==='heatmap'){return layer.id.startsWith('heatmap');}if(viewport.id==='colorsLeft'){return layer.id.startsWith('colorsLeft');}if(viewport.id==='colorsTop'){return layer.id.startsWith('colorsTop');}return false;}/**\n * Get the size of the left and top heatmap axes,\n * taking into account the maximum label string lengths.\n * @param {boolean} transpose Is the heatmap transposed?\n * @param {number} geneLabelMaxLength What is the maximum length gene label?\n * @param {number} cellLabelMaxLength What is the maximum length cell label?\n * @returns {number[]} [axisOffsetLeft, axisOffsetTop]\n */function getAxisSizes(transpose,geneLabelMaxLength,cellLabelMaxLength){var axisOffsetLeft=clamp_default()((transpose?geneLabelMaxLength:cellLabelMaxLength)*AXIS_LABEL_TEXT_SIZE,AXIS_MIN_SIZE,AXIS_MAX_SIZE);var axisOffsetTop=clamp_default()((transpose?cellLabelMaxLength:geneLabelMaxLength)*AXIS_LABEL_TEXT_SIZE,AXIS_MIN_SIZE,AXIS_MAX_SIZE);return[axisOffsetLeft,axisOffsetTop];}/**\n * Convert a mouse coordinate (x, y) to a heatmap coordinate (col index, row index).\n * @param {number} mouseX The mouse X of interest.\n * @param {number} mouseY The mouse Y of interest.\n * @param {object} param2 An object containing current sizes and scale factors.\n * @returns {number[]} [colI, rowI]\n */function mouseToHeatmapPosition(mouseX,mouseY,_ref4){var offsetLeft=_ref4.offsetLeft,offsetTop=_ref4.offsetTop,targetX=_ref4.targetX,targetY=_ref4.targetY,scaleFactor=_ref4.scaleFactor,matrixWidth=_ref4.matrixWidth,matrixHeight=_ref4.matrixHeight,numRows=_ref4.numRows,numCols=_ref4.numCols;// TODO: use linear algebra\nvar viewMouseX=mouseX-offsetLeft;var viewMouseY=mouseY-offsetTop;if(viewMouseX<0||viewMouseY<0){// The mouse is outside the heatmap.\nreturn[null,null];}// Determine the rowI and colI values based on the current viewState.\nvar bboxTargetX=targetX*scaleFactor+matrixWidth*scaleFactor/2;var bboxTargetY=targetY*scaleFactor+matrixHeight*scaleFactor/2;var bboxLeft=bboxTargetX-matrixWidth/2;var bboxTop=bboxTargetY-matrixHeight/2;var zoomedOffsetLeft=bboxLeft/(matrixWidth*scaleFactor);var zoomedOffsetTop=bboxTop/(matrixHeight*scaleFactor);var zoomedViewMouseX=viewMouseX/(matrixWidth*scaleFactor);var zoomedViewMouseY=viewMouseY/(matrixHeight*scaleFactor);var zoomedMouseX=zoomedOffsetLeft+zoomedViewMouseX;var zoomedMouseY=zoomedOffsetTop+zoomedViewMouseY;var rowI=Math.floor(zoomedMouseY*numRows);var colI=Math.floor(zoomedMouseX*numCols);return[colI,rowI];}/**\n * Convert a heatmap coordinate (col index, row index) to a mouse coordinate (x, y).\n * @param {number} colI The column index of interest.\n * @param {number} rowI The row index of interest.\n * @param {object} param2 An object containing current sizes and scale factors.\n * @returns {number[]} [x, y]\n */function heatmapToMousePosition(colI,rowI,_ref5){var offsetLeft=_ref5.offsetLeft,offsetTop=_ref5.offsetTop,targetX=_ref5.targetX,targetY=_ref5.targetY,scaleFactor=_ref5.scaleFactor,matrixWidth=_ref5.matrixWidth,matrixHeight=_ref5.matrixHeight,numRows=_ref5.numRows,numCols=_ref5.numCols;// TODO: use linear algebra\nvar zoomedMouseY=null;var zoomedMouseX=null;if(rowI!==null){var minY=-matrixHeight*scaleFactor/2;var maxY=matrixHeight*scaleFactor/2;var totalHeight=maxY-minY;var minInViewY=targetY*scaleFactor-matrixHeight/2;var maxInViewY=targetY*scaleFactor+matrixHeight/2;var inViewHeight=maxInViewY-minInViewY;var normalizedRowY=(rowI+0.5)/numRows;var globalRowY=minY+normalizedRowY*totalHeight;if(minInViewY<=globalRowY&&globalRowY<=maxInViewY){zoomedMouseY=offsetTop+(globalRowY-minInViewY)/inViewHeight*matrixHeight;}}if(colI!==null){var minX=-matrixWidth*scaleFactor/2;var maxX=matrixWidth*scaleFactor/2;var totalWidth=maxX-minX;var minInViewX=targetX*scaleFactor-matrixWidth/2;var maxInViewX=targetX*scaleFactor+matrixWidth/2;var inViewWidth=maxInViewX-minInViewX;var normalizedRowX=(colI+0.5)/numCols;var globalRowX=minX+normalizedRowX*totalWidth;if(minInViewX<=globalRowX&&globalRowX<=maxInViewX){zoomedMouseX=offsetLeft+(globalRowX-minInViewX)/inViewWidth*matrixWidth;}}return[zoomedMouseX,zoomedMouseY];}\n// CONCATENATED MODULE: ./node_modules/eslint-loader/dist/cjs.js??ref--5-0!./src/components/heatmap/heatmap.worker.js\n/* eslint-disable no-restricted-globals */\n\n\n\n/**\n * Map a gene expression matrix onto multiple square array tiles,\n * taking into account the ordering/selection of cells.\n * @param {object} params\n * @param {string} params.curr The current task uuid.\n * @param {number} params.xTiles How many tiles required in the x direction?\n * @param {number} params.yTiles How many tiles required in the y direction?\n * @param {number} params.tileSize How many entries along each tile axis?\n * @param {string[]} params.cellOrdering The current ordering of cells.\n * @param {string[]} params.rows The name of each row (cell ID).\n * Does not take transpose into account (always cells).\n * @param {string[]} params.cols The name of each column (gene ID).\n * Does not take transpose into account (always genes).\n * @param {ArrayBuffer} params.data The array buffer.\n * Need to transfer back to main thread when done.\n * @param {boolean} params.transpose Is the heatmap transposed?\n * @returns {array} [message, transfers]\n */\nfunction getTiles({\n  curr,\n  xTiles,\n  yTiles,\n  tileSize,\n  cellOrdering,\n  rows,\n  cols,\n  data,\n  transpose,\n}) {\n  const view = new Uint8Array(data);\n\n  const numGenes = cols.length;\n  const numCells = cellOrdering.length;\n\n  const getTileFunction = (transpose ? getGeneByCellTile : getCellByGeneTile);\n\n  const result = range_default()(yTiles).map(i => range_default()(xTiles).map(j => getTileFunction(\n    view,\n    {\n      tileSize,\n      tileI: i,\n      tileJ: j,\n      numCells,\n      numGenes,\n      cellOrdering,\n      cells: rows,\n    },\n  )));\n  return [{ tiles: result, buffer: data, curr }, [data]];\n}\n\n/**\n * Worker message passing logic.\n */\nif (typeof self !== 'undefined') {\n  const nameToFunction = {\n    getTiles,\n  };\n\n  self.addEventListener('message', (event) => {\n    try {\n      const [name, args] = event.data;\n      const [message, transfers] = nameToFunction[name](args);\n      self.postMessage(message, transfers);\n    } catch (e) {\n      console.warn(e);\n    }\n  });\n}\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=5da8edac85de30505a38.worker.js.map",null);};

/***/ }),
/* 139 */
/***/ (function(module, exports) {

module.exports = require("d3-force");

/***/ }),
/* 140 */
/***/ (function(module, exports) {

module.exports = require("d3-dsv");

/***/ }),
/* 141 */
/***/ (function(module, exports) {

module.exports = require("json2csv");

/***/ }),
/* 142 */
/***/ (function(module, exports) {

module.exports = require("lodash/union");

/***/ }),
/* 143 */
/***/ (function(module, exports) {

module.exports = require("lodash/difference");

/***/ }),
/* 144 */
/***/ (function(module, exports) {

module.exports = require("clsx");

/***/ }),
/* 145 */
/***/ (function(module, exports) {

module.exports = require("rc-tree/es/util");

/***/ }),
/* 146 */
/***/ (function(module, exports) {

module.exports = require("react-color");

/***/ }),
/* 147 */
/***/ (function(module, exports) {

module.exports = require("rc-tooltip");

/***/ }),
/* 148 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/ExpansionPanel");

/***/ }),
/* 149 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/ExpansionPanelSummary");

/***/ }),
/* 150 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/ExpansionPanelDetails");

/***/ }),
/* 151 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ExpandMore");

/***/ }),
/* 152 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/MoreVert");

/***/ }),
/* 153 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Lens");

/***/ }),
/* 154 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/InputLabel");

/***/ }),
/* 155 */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Typography");

/***/ }),
/* 156 */
/***/ (function(module, exports) {

module.exports = require("vega-tooltip");

/***/ }),
/* 157 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _HeatmapSubscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(124);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HeatmapSubscriber", function() { return _HeatmapSubscriber__WEBPACK_IMPORTED_MODULE_0__["a"]; });

/* harmony import */ var _Heatmap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(108);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Heatmap", function() { return _Heatmap__WEBPACK_IMPORTED_MODULE_1__["a"]; });



/***/ }),
/* 158 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _SpatialSubscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(122);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpatialSubscriber", function() { return _SpatialSubscriber__WEBPACK_IMPORTED_MODULE_0__["a"]; });

/* harmony import */ var _Spatial__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(107);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Spatial", function() { return _Spatial__WEBPACK_IMPORTED_MODULE_1__["a"]; });



/***/ }),
/* 159 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ScatterplotSubscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(123);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ScatterplotSubscriber", function() { return _ScatterplotSubscriber__WEBPACK_IMPORTED_MODULE_0__["a"]; });

/* harmony import */ var _Scatterplot__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(109);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Scatterplot", function() { return _Scatterplot__WEBPACK_IMPORTED_MODULE_1__["a"]; });



/***/ }),
/* 160 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#dataset\",\"title\":\"Vitessce data set\",\"type\":\"object\",\"definitions\":{\"components\":{\"description\":\"The layout array defines the views, or components, rendered in the grid.\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"component\",\"x\",\"y\"],\"properties\":{\"component\":{\"type\":\"string\",\"description\":\"Specify a component using a name defined in the component registry.\"},\"props\":{\"type\":\"object\",\"description\":\"Extra prop values for the component.\"},\"x\":{\"type\":\"integer\"},\"y\":{\"type\":\"integer\"},\"w\":{\"type\":\"integer\"},\"h\":{\"type\":\"integer\"},\"coordinationScopes\":{\"type\":\"object\",\"description\":\"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\"additionalProperties\":false,\"required\":[],\"properties\":{\"dataset\":{\"type\":\"string\"},\"embeddingType\":{\"type\":\"string\"},\"embeddingZoom\":{\"type\":\"string\"},\"embeddingRotation\":{\"type\":\"string\"},\"embeddingTargetX\":{\"type\":\"string\"},\"embeddingTargetY\":{\"type\":\"string\"},\"embeddingTargetZ\":{\"type\":\"string\"},\"embeddingCellSetPolygonsVisible\":{\"type\":\"string\"},\"embeddingCellSetLabelsVisible\":{\"type\":\"string\"},\"embeddingCellSetLabelSize\":{\"type\":\"string\"},\"embeddingCellRadius\":{\"type\":\"string\"},\"spatialZoom\":{\"type\":\"string\"},\"spatialRotation\":{\"type\":\"string\"},\"spatialTargetX\":{\"type\":\"string\"},\"spatialTargetY\":{\"type\":\"string\"},\"spatialTargetZ\":{\"type\":\"string\"},\"heatmapZoomX\":{\"type\":\"string\"},\"heatmapZoomY\":{\"type\":\"string\"},\"heatmapTargetX\":{\"type\":\"string\"},\"heatmapTargetY\":{\"type\":\"string\"},\"cellFilter\":{\"type\":\"string\"},\"cellHighlight\":{\"type\":\"string\"},\"cellSetSelection\":{\"type\":\"string\"},\"cellSetHighlight\":{\"type\":\"string\"},\"cellSetColor\":{\"type\":\"string\"},\"geneFilter\":{\"type\":\"string\"},\"geneHighlight\":{\"type\":\"string\"},\"geneSelection\":{\"type\":\"string\"},\"geneExpressionColormap\":{\"type\":\"string\"},\"geneExpressionColormapRange\":{\"type\":\"string\"},\"cellColorEncoding\":{\"type\":\"string\"},\"spatialLayers\":{\"type\":\"string\"},\"genomicZoomX\":{\"type\":\"string\"},\"genomicZoomY\":{\"type\":\"string\"},\"genomicTargetX\":{\"type\":\"string\"},\"genomicTargetY\":{\"type\":\"string\"},\"additionalCellSets\":{\"type\":\"string\"},\"moleculeHighlight\":{\"type\":\"string\"}}}}}},\"annDataCellSets\":{\"type\":\"array\",\"description\":\"Array of cell set configuration, following closely the conventions of the tabular schema\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"groupName\",\"setName\"],\"properties\":{\"groupName\":{\"type\":\"string\",\"description\":\"The display name for the set, like 'Cell Type' or 'Louvain.'\"},\"setName\":{\"type\":\"string\",\"description\":\"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"}}}},\"annDataCells\":{\"type\":\"object\",\"description\":\"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\"minProperties\":1,\"additionalProperties\":false,\"required\":[],\"properties\":{\"xy\":{\"type\":\"string\",\"description\":\"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"},\"poly\":{\"type\":\"string\",\"description\":\"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"},\"factors\":{\"type\":\"array\",\"description\":\"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\"items\":{\"type\":\"string\"}},\"mappings\":{\"patternProperties\":{\".\":{\"type\":\"object\",\"description\":\"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\"additionalProperties\":false,\"required\":[\"key\"],\"properties\":{\"key\":{\"type\":\"string\",\"description\":\"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"},\"dims\":{\"type\":\"array\",\"description\":\"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\"minItems\":2,\"maxItems\":2,\"items\":{\"type\":\"number\"}}}}}}}},\"annDataExpressionMatrix\":{\"type\":\"object\",\"description\":\"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\"additionalProperties\":false,\"required\":[\"matrix\"],\"properties\":{\"matrix\":{\"type\":\"string\",\"description\":\"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"},\"geneFilter\":{\"type\":\"string\",\"description\":\"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'vae.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"}}},\"requestInit\":{\"type\":\"object\",\"description\":\"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\"additionalProperties\":false,\"required\":[],\"properties\":{\"method\":{\"type\":\"string\"},\"headers\":{\"type\":\"object\"},\"body\":{\"type\":\"string\"},\"mode\":{\"type\":\"string\"},\"credentials\":{\"type\":\"string\"},\"cache\":{\"type\":\"string\"},\"redirect\":{\"type\":\"string\"},\"referrer\":{\"type\":\"string\"},\"integrity\":{\"type\":\"string\"}}},\"rasterLayer\":{\"description\":\"The properties of this object are the rendering settings for the raster layer.\",\"additionalProperties\":false,\"required\":[\"channels\",\"colormap\",\"index\",\"opacity\",\"type\"],\"properties\":{\"channels\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"selection\"],\"properties\":{\"color\":{\"type\":\"array\",\"items\":{\"type\":\"number\"},\"description\":\"The color to use when rendering this channel under the null colormap.\"},\"selection\":{\"type\":\"object\",\"description\":\"Determines the channel selection, e.g. some Z and time slice.\"},\"slider\":{\"type\":\"array\",\"items\":{\"type\":\"number\"},\"description\":\"Determines the range for color mapping.\"},\"visible\":{\"type\":\"boolean\",\"description\":\"Determines whether this channel of the layer will be rendered in the spatial component.\"}}}},\"colormap\":{\"oneOf\":[{\"type\":\"string\",\"description\":\"The name of the colormap to use for this layer.\"},{\"type\":\"null\",\"description\":\"Use the solid color definitions.\"}]},\"transparentColor\":{\"oneOf\":[{\"type\":\"array\",\"minItems\":3,\"maxItems\":3,\"items\":{\"type\":\"number\",\"description\":\"One of R G or B (0 - 255).\"},\"description\":\"Determines the color to be set to opacity 0\"},{\"type\":\"null\",\"description\":\"No selection.\"}]},\"index\":{\"type\":\"number\",\"description\":\"The index of the layer among the array of layers available in the image file.\"},\"modelMatrix\":{\"oneOf\":[{\"type\":\"array\",\"minItems\":16,\"maxItems\":16,\"description\":\"transformation matrix for this layer\"},{\"type\":\"null\",\"description\":\"Use no transformation.\"}]},\"opacity\":{\"type\":\"number\"},\"domainType\":{\"type\":\"string\",\"enum\":[\"Full\",\"Min/Max\"],\"description\":\"Determines the extent of the channel slider input element in the layer controller.\"},\"type\":{\"type\":\"string\",\"enum\":[\"raster\"]}}},\"moleculesLayer\":{\"description\":\"The properties of this object are the rendering settings for the molecules layer.\",\"additionalProperties\":false,\"required\":[\"visible\",\"radius\",\"opacity\",\"type\"],\"properties\":{\"visible\":{\"type\":\"boolean\"},\"radius\":{\"type\":\"number\"},\"opacity\":{\"type\":\"number\"},\"type\":{\"type\":\"string\",\"enum\":[\"molecules\"]}}},\"cellsLayer\":{\"description\":\"The properties of this object are the rendering settings for the cells layer.\",\"additionalProperties\":false,\"required\":[\"visible\",\"stroked\",\"radius\",\"opacity\",\"type\"],\"properties\":{\"visible\":{\"type\":\"boolean\"},\"stroked\":{\"type\":\"boolean\"},\"radius\":{\"type\":\"number\"},\"opacity\":{\"type\":\"number\"},\"type\":{\"type\":\"string\",\"enum\":[\"cells\"]}}},\"neighborhoodsLayer\":{\"description\":\"The properties of this object are the rendering settings for the neighborhoods layer.\",\"additionalProperties\":false,\"required\":[\"visible\",\"type\"],\"properties\":{\"visible\":{\"type\":\"boolean\"},\"type\":{\"type\":\"string\",\"enum\":[\"neighborhoods\"]}}},\"spatialLayers\":{\"type\":\"array\",\"description\":\"Array of Spatial Layers\",\"items\":{\"oneOf\":[{\"$ref\":\"#/definitions/rasterLayer\"},{\"$ref\":\"#/definitions/cellsLayer\"},{\"$ref\":\"#/definitions/moleculesLayer\"},{\"$ref\":\"#/definitions/neighborhoodsLayer\"}]}}},\"additionalProperties\":false,\"required\":[\"version\",\"name\",\"datasets\",\"layout\",\"initStrategy\"],\"properties\":{\"name\":{\"type\":\"string\"},\"public\":{\"type\":\"boolean\"},\"description\":{\"type\":\"string\"},\"datasets\":{\"type\":\"array\",\"description\":\"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"uid\",\"files\"],\"properties\":{\"uid\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"files\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"type\",\"fileType\"],\"properties\":{\"name\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"fileType\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"options\":{\"oneOf\":[{\"$ref\":\"#/definitions/annDataCellSets\"},{\"$ref\":\"https://github.com/hubmapconsortium/vitessce/#raster\"},{\"$ref\":\"#/definitions/annDataCells\"},{\"$ref\":\"#/definitions/annDataExpressionMatrix\"}]},\"requestInit\":{\"$ref\":\"#/definitions/requestInit\"}}}}}}},\"coordinationSpace\":{\"type\":\"object\",\"description\":\"The coordination space stores the values for each scope of each coordination object.\",\"additionalProperties\":false,\"required\":[],\"properties\":{\"dataset\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"string\"}}},\"embeddingZoom\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"embeddingRotation\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"embeddingTargetX\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"embeddingTargetY\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"embeddingTargetZ\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"embeddingType\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"string\"}}},\"embeddingCellSetPolygonsVisible\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"boolean\"}}},\"embeddingCellSetLabelsVisible\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"boolean\"}}},\"embeddingCellSetLabelSize\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"embeddingCellRadius\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"spatialZoom\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"spatialRotation\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"spatialTargetX\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"spatialTargetY\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"spatialTargetZ\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"spatialLayers\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"},{\"$ref\":\"#/definitions/spatialLayers\"}]}}},\"heatmapZoomX\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"heatmapZoomY\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"heatmapTargetX\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"heatmapTargetY\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"cellFilter\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no cells will be filtered out initially.\"},{\"type\":\"array\",\"items\":{\"type\":\"string\"}}]}}},\"cellHighlight\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no cell will be highlighted initially.\"},{\"type\":\"string\"}]}}},\"cellSetSelection\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"},{\"type\":\"array\"}]}}},\"cellSetHighlight\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no cell sets will be highlighted initially.\"},{\"type\":\"string\"}]}}},\"cellSetColor\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, cell set colors will be automatically initialized.\"},{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"path\",\"color\"],\"properties\":{\"path\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"color\":{\"type\":\"array\",\"items\":{\"type\":\"number\"}}}}}]}}},\"cellColorEncoding\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"string\"}}},\"geneFilter\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no genes will be filtered out initially.\"},{\"type\":\"array\",\"items\":{\"type\":\"string\"}}]}}},\"geneHighlight\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no genes will be highlighted initially.\"},{\"type\":\"string\"}]}}},\"geneSelection\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\"},{\"type\":\"array\",\"items\":{\"type\":\"string\"}}]}}},\"geneExpressionColormap\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"string\"}}},\"geneExpressionColormapRange\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"array\",\"items\":{\"type\":\"number\"}}}},\"genomicZoomX\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"genomicZoomY\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"genomicTargetX\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"genomicTargetY\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\"}}},\"additionalCellSets\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no cell will be highlighted initially.\"},{\"$ref\":\"https://github.com/hubmapconsortium/vitessce/#cell-sets\"}]}}},\"moleculeHighlight\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"oneOf\":[{\"type\":\"null\",\"description\":\"If null is provided, no molecule will be highlighted initially.\"},{\"type\":\"string\"}]}}}}},\"layout\":{\"$ref\":\"#/definitions/components\"},\"initStrategy\":{\"type\":\"string\",\"enum\":[\"none\",\"auto\"],\"description\":\"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"},\"version\":{\"type\":\"string\",\"enum\":[\"1.0.0\"],\"description\":\"The schema version for the view config.\"}}}");

/***/ }),
/* 161 */
/***/ (function(module) {

module.exports = JSON.parse("{\"note\":\"This file is regenerated by push-demo.sh.\",\"branch\":\"keller-mark/v1.1.6\",\"date\":\"2021-03-05\",\"hash\":\"9ae88ba\"}");

/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string

var URL = window.URL || window.webkitURL;

module.exports = function (content, url) {
  try {
    try {
      var blob;

      try {
        // BlobBuilder = Deprecated, but widely implemented
        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;

        blob = new BlobBuilder();

        blob.append(content);

        blob = blob.getBlob();
      } catch (e) {
        // The proposed API
        blob = new Blob([content]);
      }

      return new Worker(URL.createObjectURL(blob));
    } catch (e) {
      return new Worker('data:application/javascript,' + encodeURIComponent(content));
    }
  } catch (e) {
    if (!url) {
      throw Error('Inline worker is not supported');
    }

    return new Worker(url);
  }
};

/***/ }),
/* 163 */
/***/ (function(module, exports) {

module.exports = require("react-grid-layout");

/***/ }),
/* 164 */
/***/ (function(module, exports) {

module.exports = require("higlass-zarr-datafetchers");

/***/ }),
/* 165 */
/***/ (function(module, exports) {

module.exports = require("lz-string");

/***/ }),
/* 166 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#cells\",\"title\":\"Vitessce cell data\",\"type\":\"object\",\"definitions\":{\"coord\":{\"type\":\"array\",\"minItems\":2,\"maxItems\":2,\"items\":{\"type\":\"number\"}},\"positiveFloatValues\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\",\"minimum\":0}}},\"stringValues\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"string\"}}}},\"patternProperties\":{\".\":{\"additionalProperties\":false,\"required\":[],\"properties\":{\"mappings\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"$ref\":\"#/definitions/coord\"}}},\"xy\":{\"$ref\":\"#/definitions/coord\"},\"genes\":{\"$ref\":\"#/definitions/positiveFloatValues\"},\"factors\":{\"$ref\":\"#/definitions/stringValues\"},\"poly\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/coord\"}}}}}}");

/***/ }),
/* 167 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#molecules\",\"title\":\"Vitessce molecule data\",\"type\":\"object\",\"definitions\":{\"coord\":{\"type\":\"array\",\"maxItems\":2,\"minItems\":2,\"items\":{\"type\":\"number\"}}},\"patternProperties\":{\".\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/coord\"}}}}");

/***/ }),
/* 168 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#neighborhoods\",\"title\":\"Vitessce neighborhood data\",\"type\":\"object\",\"definitions\":{\"coord\":{\"type\":\"array\",\"maxItems\":2,\"minItems\":2,\"items\":{\"type\":\"number\"}}},\"patternProperties\":{\".\":{\"additionalProperties\":false,\"required\":[\"poly\"],\"properties\":{\"poly\":{\"type\":\"array\",\"maxItems\":3,\"minItems\":3,\"items\":{\"$ref\":\"#/definitions/coord\"}}}}}}");

/***/ }),
/* 169 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#genes\",\"title\":\"Vitessce gene data\",\"type\":\"object\",\"definitions\":{\"positiveFloatValues\":{\"type\":\"object\",\"patternProperties\":{\".\":{\"type\":\"number\",\"minimum\":0}}}},\"patternProperties\":{\".\":{\"additionalProperties\":false,\"required\":[\"max\",\"cells\"],\"properties\":{\"max\":{\"type\":\"number\"},\"cells\":{\"$ref\":\"#/definitions/positiveFloatValues\"}}}}}");

/***/ }),
/* 170 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#clusters\",\"title\":\"Vitessce cluster data\",\"type\":\"object\",\"definitions\":{\"stringArray\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"matrix\":{\"type\":\"array\",\"items\":{\"type\":\"array\",\"items\":{\"type\":\"number\",\"minimum\":0,\"maximum\":1}}}},\"additionalProperties\":false,\"required\":[\"rows\",\"cols\",\"matrix\"],\"properties\":{\"rows\":{\"$ref\":\"#/definitions/stringArray\"},\"cols\":{\"$ref\":\"#/definitions/stringArray\"},\"matrix\":{\"$ref\":\"#/definitions/matrix\"}}}");

/***/ }),
/* 171 */
/***/ (function(module) {

module.exports = JSON.parse("{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"$id\":\"https://github.com/hubmapconsortium/vitessce/#dataset\",\"title\":\"Vitessce data set\",\"type\":\"object\",\"definitions\":{\"components\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"component\",\"x\",\"y\"],\"properties\":{\"component\":{\"type\":\"string\"},\"props\":{\"type\":\"object\"},\"x\":{\"type\":\"integer\"},\"y\":{\"type\":\"integer\"},\"w\":{\"type\":\"integer\"},\"h\":{\"type\":\"integer\"}}}},\"requestInit\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[],\"properties\":{\"method\":{\"type\":\"string\"},\"headers\":{\"type\":\"object\"},\"body\":{\"type\":\"string\"},\"mode\":{\"type\":\"string\"},\"credentials\":{\"type\":\"string\"},\"cache\":{\"type\":\"string\"},\"redirect\":{\"type\":\"string\"},\"referrer\":{\"type\":\"string\"},\"integrity\":{\"type\":\"string\"}}}},\"additionalProperties\":false,\"required\":[\"version\",\"name\",\"layers\"],\"properties\":{\"name\":{\"type\":\"string\"},\"public\":{\"type\":\"boolean\"},\"description\":{\"type\":\"string\"},\"layers\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"name\",\"type\",\"fileType\",\"url\"],\"properties\":{\"name\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"fileType\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"requestInit\":{\"$ref\":\"#/definitions/requestInit\"}}}},\"staticLayout\":{\"$ref\":\"#/definitions/components\"},\"version\":{\"type\":\"string\",\"enum\":[\"0.1.0\"]}}}");

/***/ }),
/* 172 */
/***/ (function(module, exports) {

module.exports = require("react-dom");

/***/ }),
/* 173 */
/***/ (function(module, exports) {

module.exports = require("dynamic-import-polyfill");

/***/ }),
/* 174 */
/***/ (function(module, exports) {

module.exports = require("higlass-register");

/***/ }),
/* 175 */
/***/ (function(module, exports) {

module.exports = require("bowser");

/***/ }),
/* 176 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 179 */,
/* 180 */,
/* 181 */,
/* 182 */,
/* 183 */,
/* 184 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./src/components/heatmap/index.js
var heatmap = __webpack_require__(157);

// EXTERNAL MODULE: ./src/components/spatial/index.js
var spatial = __webpack_require__(158);

// EXTERNAL MODULE: ./src/components/scatterplot/index.js
var scatterplot = __webpack_require__(159);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(1);

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(12);

// EXTERNAL MODULE: external "react-grid-layout"
var external_react_grid_layout_ = __webpack_require__(163);

// EXTERNAL MODULE: external "lodash/isEqual"
var isEqual_ = __webpack_require__(13);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual_);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(3);

// EXTERNAL MODULE: ./src/utils.js
var utils = __webpack_require__(15);

// CONCATENATED MODULE: ./src/app/vitessce-grid-layout/layout-utils.js
var COMPONENT_ID_PREFIX='i';function sum(a){return a.reduce(function(x,y){return x+y;},0);}function makeGridLayout(colXs,colLayout){var colWs=[];for(var i=0;i<colXs.length;i++){// eslint-disable-line no-plusplus
colWs.push(colXs[i+1]-colXs[i]);}return Object.entries(colLayout).map(function(_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),id=_ref2[0],spec=_ref2[1];return{i:id,y:spec.y,h:spec.h||1,x:colXs[spec.x],w:sum(colWs.slice(spec.x,spec.x+(spec.w||1)))};});}function getMaxRows(layouts){return Math.max.apply(Math,Object(toConsumableArray["a" /* default */])(Object.values(layouts).map(function(layout){return Math.max.apply(Math,Object(toConsumableArray["a" /* default */])(layout.map(function(xywh){return xywh.y+xywh.h;})));})));}function resolveLayout(layout){var cols={};var layouts={};var breakpoints={};var components={};var positions={};('components'in layout?layout.components:layout).forEach(function(def,i){var id="".concat(COMPONENT_ID_PREFIX).concat(i);components[id]={component:def.component,props:def.props||{},coordinationScopes:def.coordinationScopes||{}};positions[id]={id:id,x:def.x,y:def.y,w:def.w,h:def.h};});if('components'in layout){Object.entries(layout.columns).forEach(function(_ref3){var _ref4=Object(slicedToArray["a" /* default */])(_ref3,2),width=_ref4[0],columnXs=_ref4[1];cols[width]=columnXs[columnXs.length-1];layouts[width]=makeGridLayout(columnXs,positions);breakpoints[width]=width;});}else{// static layout
var id='ID';var columnCount=12;cols[id]=columnCount;layouts[id]=makeGridLayout(Object(utils["e" /* range */])(columnCount+1),positions);breakpoints[id]=1000;// Default has different numbers of columns at different widths,
// so we do need to override that to ensure the same number of columns,
// regardless of window width.
}return{cols:cols,layouts:layouts,breakpoints:breakpoints,components:components};}
// CONCATENATED MODULE: ./src/app/vitessce-grid-layout/VitessceGridLayout.js
var ResponsiveGridLayout=Object(external_react_grid_layout_["WidthProvider"])(external_react_grid_layout_["Responsive"]);var VitessceGridLayout_ResponsiveHeightGridLayout=/*#__PURE__*/function(_ResponsiveGridLayout){Object(inherits["a" /* default */])(ResponsiveHeightGridLayout,_ResponsiveGridLayout);var _super=Object(createSuper["a" /* default */])(ResponsiveHeightGridLayout);function ResponsiveHeightGridLayout(){Object(classCallCheck["a" /* default */])(this,ResponsiveHeightGridLayout);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(ResponsiveHeightGridLayout,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.height!==prevProps.height){this.onWindowResize();}}}]);return ResponsiveHeightGridLayout;}(ResponsiveGridLayout);function VitessceGridLayout(props){var layout=props.layout,getComponent=props.getComponent,padding=props.padding,margin=props.margin,draggableHandle=props.draggableHandle,reactGridLayoutProps=props.reactGridLayoutProps,rowHeight=props.rowHeight,theme=props.theme,height=props.height,onRemoveComponent=props.onRemoveComponent,onLayoutChangeProp=props.onLayoutChange;// If layout changes, update grid components.
var _resolveLayout=resolveLayout(layout),gridCols=_resolveLayout.cols,gridLayouts=_resolveLayout.layouts,gridBreakpoints=_resolveLayout.breakpoints,gridComponents=_resolveLayout.components;var maxRows=getMaxRows(gridLayouts);// Inline CSS is generally avoided, but this saves the end-user a little work,
// and prevents class names from getting out of sync.
var style=/*#__PURE__*/external_react_default.a.createElement("style",null,"\n        ".concat(draggableHandle," {\n          cursor: grab;\n        }\n        ").concat(draggableHandle,":active {\n          cursor: grabbing;\n        }\n     "));var onLayoutChange=function onLayoutChange(newLayout){if(newLayout.length===Object.entries(gridComponents).length){var newComponentProps=[];newLayout.forEach(function(nextC){var id=nextC.i;var prevC=gridComponents[id];if(prevC){var i=parseInt(id.substring(id.indexOf(COMPONENT_ID_PREFIX)+1),10);var nextProps={x:nextC.x,y:nextC.y,w:nextC.w,h:nextC.h};var prevProps={x:prevC.x,y:prevC.y,w:prevC.w,h:prevC.h};if(!isEqual_default()(nextProps,prevProps)){newComponentProps.push([i,nextProps]);}}});if(newComponentProps.length>0){onLayoutChangeProp(newComponentProps);}}};var layoutChildren=Object.entries(gridComponents).map(function(_ref,i){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),k=_ref2[0],v=_ref2[1];var Component=getComponent(v.component);var removeGridComponent=function removeGridComponent(){onRemoveComponent(i);};return/*#__PURE__*/external_react_default.a.createElement("div",{key:k},/*#__PURE__*/external_react_default.a.createElement(Component,Object.assign({},v.props,{uuid:i,coordinationScopes:v.coordinationScopes,theme:theme,removeGridComponent:removeGridComponent})));});return gridLayouts&&gridComponents&&gridBreakpoints&&gridCols&&/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,style,/*#__PURE__*/external_react_default.a.createElement(VitessceGridLayout_ResponsiveHeightGridLayout,Object.assign({className:"layout",cols:gridCols,layouts:gridLayouts,breakpoints:gridBreakpoints,height:height,rowHeight:rowHeight||(window.innerHeight-2*padding-(maxRows-1)*margin)/maxRows,containerPadding:[padding,padding],margin:[margin,margin],draggableHandle:draggableHandle,onLayoutChange:onLayoutChange},reactGridLayoutProps),layoutChildren));}VitessceGridLayout.defaultProps={padding:10,margin:10};
// CONCATENATED MODULE: ./src/app/vitessce-grid-layout/index.js

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(2);

// EXTERNAL MODULE: external "ajv"
var external_ajv_ = __webpack_require__(90);
var external_ajv_default = /*#__PURE__*/__webpack_require__.n(external_ajv_);

// EXTERNAL MODULE: external "uuid/v4"
var v4_ = __webpack_require__(53);
var v4_default = /*#__PURE__*/__webpack_require__.n(v4_);

// CONCATENATED MODULE: ./src/loaders/AbstractLoader.js
/**
 * A loader ancestor class containing a default constructor
 * and a stub for the required load() method.
 */var AbstractLoader_AbstractLoader=/*#__PURE__*/function(){function AbstractLoader(_ref){var type=_ref.type,url=_ref.url,requestInit=_ref.requestInit,options=_ref.options;Object(classCallCheck["a" /* default */])(this,AbstractLoader);this.type=type;this.url=url;this.requestInit=requestInit;this.options=options;this.subscriptions={};}// eslint-disable-next-line class-methods-use-this
Object(createClass["a" /* default */])(AbstractLoader,[{key:"load",value:function load(){throw new Error('The load() method has not been implemented.');}},{key:"subscribe",value:function subscribe(subscriber){var token=v4_default()();this.subscriptions[token]=subscriber;return token;}},{key:"unsubscribe",value:function unsubscribe(token){delete this.subscriptions[token];}},{key:"publish",value:function publish(data){Object.values(this.subscriptions).forEach(function(subscriber){subscriber(data);});}}]);return AbstractLoader;}();
// EXTERNAL MODULE: ./src/loaders/errors/index.js + 4 modules
var errors = __webpack_require__(21);

// EXTERNAL MODULE: ./src/schemas/cells.schema.json
var cells_schema = __webpack_require__(166);

// EXTERNAL MODULE: ./src/schemas/molecules.schema.json
var molecules_schema = __webpack_require__(167);

// EXTERNAL MODULE: ./src/schemas/neighborhoods.schema.json
var neighborhoods_schema = __webpack_require__(168);

// EXTERNAL MODULE: ./src/schemas/raster.schema.json
var raster_schema = __webpack_require__(121);

// EXTERNAL MODULE: ./src/schemas/cell-sets.schema.json
var cell_sets_schema = __webpack_require__(55);

// CONCATENATED MODULE: ./src/loaders/JsonLoader.js
var typeToSchema={cells:cells_schema,molecules:molecules_schema,neighborhoods:neighborhoods_schema,raster:raster_schema,'cell-sets':cell_sets_schema};var JsonLoader_JsonLoader=/*#__PURE__*/function(_AbstractLoader){Object(inherits["a" /* default */])(JsonLoader,_AbstractLoader);var _super=Object(createSuper["a" /* default */])(JsonLoader);function JsonLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,JsonLoader);_this=_super.call(this,params);var type=params.type;_this.schema=typeToSchema[type];return _this;}Object(createClass["a" /* default */])(JsonLoader,[{key:"load",value:function load(){var _this2=this;var url=this.url,requestInit=this.requestInit,type=this.type,fileType=this.fileType;if(this.data){return this.data;}this.data=fetch(url,requestInit).then(function(response){if(response.ok){return response.json();}return Promise.reject(new errors["b" /* LoaderFetchError */](type,fileType,url,response.headers));}).catch(function(reason){return Promise.resolve(reason);}).then(function(data){if(data instanceof errors["a" /* AbstractLoaderError */]){return Promise.reject(data);}var _this2$validate=_this2.validate(data),_this2$validate2=Object(slicedToArray["a" /* default */])(_this2$validate,2),valid=_this2$validate2[0],reason=_this2$validate2[1];if(valid){return Promise.resolve({data:data,url:url});}return Promise.reject(new errors["d" /* LoaderValidationError */](type,fileType,url,reason));});return this.data;}},{key:"validate",value:function validate(data){var schema=this.schema,type=this.type;if(!schema){throw Error("No schema for ".concat(type));}var validate=new external_ajv_default.a().compile(schema);var valid=validate(data);var failureReason;if(!valid){failureReason=validate.errors;}return[valid,failureReason];}}]);return JsonLoader;}(AbstractLoader_AbstractLoader);
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(40);

// EXTERNAL MODULE: external "zarr"
var external_zarr_ = __webpack_require__(85);

// CONCATENATED MODULE: ./src/loaders/MatrixZarrLoader.js
var MatrixZarrLoader_MatrixZarrLoader=/*#__PURE__*/function(_AbstractLoader){Object(inherits["a" /* default */])(MatrixZarrLoader,_AbstractLoader);var _super=Object(createSuper["a" /* default */])(MatrixZarrLoader);function MatrixZarrLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,MatrixZarrLoader);_this=_super.call(this,params);// TODO: Use this.requestInit to provide headers, tokens, etc.
// eslint-disable-next-line no-unused-vars
var _assertThisInitialize=Object(assertThisInitialized["a" /* default */])(_this),url=_assertThisInitialize.url,requestInit=_assertThisInitialize.requestInit;_this.store=new external_zarr_["HTTPStore"](url);return _this;}Object(createClass["a" /* default */])(MatrixZarrLoader,[{key:"loadAttrs",value:function loadAttrs(){var store=this.store;if(this.attrs){return this.attrs;}this.attrs=store.getItem('.zattrs').then(function(bytes){var decoder=new TextDecoder('utf-8');var json=JSON.parse(decoder.decode(bytes));return json;});return this.attrs;}},{key:"loadArr",value:function loadArr(){var store=this.store;if(this.arr){return this.arr;}this.arr=Object(external_zarr_["openArray"])({store:store,path:'/',mode:'r'}).then(function(z){return new Promise(function(resolve){z.getRaw([null,null]).then(resolve);});});return this.arr;}},{key:"load",value:function load(){return Promise.all([this.loadAttrs(),this.loadArr()]).then(function(data){return Promise.resolve({data:data,url:null});});}}]);return MatrixZarrLoader;}(AbstractLoader_AbstractLoader);
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(10);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(20);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(30);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js + 1 modules
var get = __webpack_require__(57);

// EXTERNAL MODULE: ./src/schemas/genes.schema.json
var genes_schema = __webpack_require__(169);

// CONCATENATED MODULE: ./src/loaders/GenesJsonAsMatrixZarrLoader.js
var GenesJsonAsMatrixZarrLoader_GenesJsonAsMatrixZarrLoader=/*#__PURE__*/function(_JsonLoader){Object(inherits["a" /* default */])(GenesJsonAsMatrixZarrLoader,_JsonLoader);var _super=Object(createSuper["a" /* default */])(GenesJsonAsMatrixZarrLoader);function GenesJsonAsMatrixZarrLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,GenesJsonAsMatrixZarrLoader);_this=_super.call(this,params);_this.schema=genes_schema;return _this;}Object(createClass["a" /* default */])(GenesJsonAsMatrixZarrLoader,[{key:"load",value:function(){var _load=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var payload,data,url,cols,rows,attrs,normalizedFlatMatrix,arr;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(GenesJsonAsMatrixZarrLoader.prototype),"load",this).call(this).catch(function(reason){return Promise.resolve(reason);});case 2:payload=_context.sent;if(!(payload instanceof errors["a" /* AbstractLoaderError */])){_context.next=5;break;}return _context.abrupt("return",Promise.reject(payload));case 5:data=payload.data,url=payload.url;cols=Object.keys(data);rows=cols.length>0?Object.keys(data[cols[0]].cells):[];attrs={rows:rows,cols:cols};normalizedFlatMatrix=rows.flatMap(function(cellId){return cols.map(function(geneId){return data[geneId].cells[cellId]/data[geneId].max*255;});});// Need to wrap the NestedArray to mock the HTTPStore-based array
// which returns promises.
arr={data:Uint8Array.from(normalizedFlatMatrix)};return _context.abrupt("return",Promise.resolve({data:[attrs,arr],url:url}));case 12:case"end":return _context.stop();}}},_callee,this);}));function load(){return _load.apply(this,arguments);}return load;}()}]);return GenesJsonAsMatrixZarrLoader;}(JsonLoader_JsonLoader);
// EXTERNAL MODULE: external "d3-array"
var external_d3_array_ = __webpack_require__(38);

// EXTERNAL MODULE: external "lodash/range"
var range_ = __webpack_require__(47);
var range_default = /*#__PURE__*/__webpack_require__.n(range_);

// EXTERNAL MODULE: ./src/schemas/clusters.schema.json
var clusters_schema = __webpack_require__(170);

// CONCATENATED MODULE: ./src/loaders/ClustersJsonAsMatrixZarrLoader.js
var ClustersJsonAsMatrixZarrLoader_ClustersJsonAsMatrixZarrLoader=/*#__PURE__*/function(_JsonLoader){Object(inherits["a" /* default */])(ClustersJsonAsMatrixZarrLoader,_JsonLoader);var _super=Object(createSuper["a" /* default */])(ClustersJsonAsMatrixZarrLoader);function ClustersJsonAsMatrixZarrLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,ClustersJsonAsMatrixZarrLoader);_this=_super.call(this,params);_this.schema=clusters_schema;return _this;}Object(createClass["a" /* default */])(ClustersJsonAsMatrixZarrLoader,[{key:"load",value:function(){var _load=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var payload,data,url,rows,cols,matrix,attrs,shape,normalizedMatrix,tNormalizedMatrix,normalizedFlatMatrix,arr;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(ClustersJsonAsMatrixZarrLoader.prototype),"load",this).call(this).catch(function(reason){return Promise.resolve(reason);});case 2:payload=_context.sent;if(!(payload instanceof errors["a" /* AbstractLoaderError */])){_context.next=5;break;}return _context.abrupt("return",Promise.reject(payload));case 5:data=payload.data,url=payload.url;rows=data.rows,cols=data.cols,matrix=data.matrix;attrs={rows:cols,cols:rows};shape=[attrs.rows.length,attrs.cols.length];// Normalize values by converting to one-byte integers.
// Normalize for each gene (column) independently.
normalizedMatrix=matrix.map(function(col){var _extent=Object(external_d3_array_["extent"])(col),_extent2=Object(slicedToArray["a" /* default */])(_extent,2),min=_extent2[0],max=_extent2[1];var normalize=function normalize(d){return Math.floor((d-min)/(max-min)*255);};return col.map(normalize);});// Transpose the normalized matrix.
tNormalizedMatrix=range_default()(shape[0]).map(function(i){return range_default()(shape[1]).map(function(j){return normalizedMatrix[j][i];});});// Flatten the transposed matrix.
normalizedFlatMatrix=tNormalizedMatrix.flat();// Need to wrap the NestedArray to mock the HTTPStore-based array
// which returns promises.
arr={data:Uint8Array.from(normalizedFlatMatrix)};return _context.abrupt("return",Promise.resolve({data:[attrs,arr],url:url}));case 14:case"end":return _context.stop();}}},_callee,this);}));function load(){return _load.apply(this,arguments);}return load;}()}]);return ClustersJsonAsMatrixZarrLoader;}(JsonLoader_JsonLoader);
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(4);

// EXTERNAL MODULE: external "@hms-dbmi/viv"
var viv_ = __webpack_require__(27);

// CONCATENATED MODULE: ./src/loaders/RasterJsonLoader.js
function initLoader(_x){return _initLoader.apply(this,arguments);}function _initLoader(){_initLoader=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(imageData){var type,url,metadata,requestInit,_ref,dimensions,isPyramid,transform,_transform$scale,scale,_transform$translate,translate,loader,omeTiffOffsetsUrl,res,offsets,_loader2,_loader;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:type=imageData.type,url=imageData.url,metadata=imageData.metadata,requestInit=imageData.requestInit;_context3.t0=type;_context3.next=_context3.t0==='zarr'?4:_context3.t0==='ome-tiff'?10:26;break;case 4:_ref=metadata||{},dimensions=_ref.dimensions,isPyramid=_ref.isPyramid,transform=_ref.transform;_transform$scale=transform.scale,scale=_transform$scale===void 0?0:_transform$scale,_transform$translate=transform.translate,translate=_transform$translate===void 0?{x:0,y:0}:_transform$translate;_context3.next=8;return Object(viv_["createZarrLoader"])({url:url,dimensions:dimensions,isPyramid:isPyramid,scale:scale,translate:translate});case 8:loader=_context3.sent;return _context3.abrupt("return",loader);case 10:if(!(metadata&&'omeTiffOffsetsUrl'in metadata)){_context3.next=24;break;}omeTiffOffsetsUrl=metadata.omeTiffOffsetsUrl;_context3.next=14;return fetch(omeTiffOffsetsUrl,requestInit);case 14:res=_context3.sent;if(!res.ok){_context3.next=23;break;}_context3.next=18;return res.json();case 18:offsets=_context3.sent;_context3.next=21;return Object(viv_["createOMETiffLoader"])({urlOrFile:url,offsets:offsets,headers:requestInit});case 21:_loader2=_context3.sent;return _context3.abrupt("return",_loader2);case 23:throw new Error('Offsets not found but provided.');case 24:_loader=Object(viv_["createOMETiffLoader"])({urlOrFile:url,headers:requestInit});return _context3.abrupt("return",_loader);case 26:throw Error("Image type (".concat(type,") is not supported"));case 27:case"end":return _context3.stop();}}},_callee3);}));return _initLoader.apply(this,arguments);}var RasterJsonLoader_RasterLoader=/*#__PURE__*/function(_JsonLoader){Object(inherits["a" /* default */])(RasterLoader,_JsonLoader);var _super=Object(createSuper["a" /* default */])(RasterLoader);function RasterLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,RasterLoader);_this=_super.call(this,params);var url=params.url,options=params.options;if(!url&&options){_this.url=URL.createObjectURL(new Blob([JSON.stringify(options)]));_this.options=undefined;}_this.schema=raster_schema;return _this;}Object(createClass["a" /* default */])(RasterLoader,[{key:"load",value:function(){var _load=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var payload,raster,images,renderLayers,_raster$usePhysicalSi,usePhysicalSizeScaling,urls,imagesWithLoaderCreators;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(RasterLoader.prototype),"load",this).call(this).catch(function(reason){return Promise.resolve(reason);});case 2:payload=_context2.sent;if(!(payload instanceof errors["a" /* AbstractLoaderError */])){_context2.next=5;break;}return _context2.abrupt("return",Promise.reject(payload));case 5:raster=payload.data;images=raster.images,renderLayers=raster.renderLayers,_raster$usePhysicalSi=raster.usePhysicalSizeScaling,usePhysicalSizeScaling=_raster$usePhysicalSi===void 0?false:_raster$usePhysicalSi;// Get image name and URL tuples.
urls=images.filter(function(image){return!image.url.includes('zarr');}).map(function(image){return[image.url,image.name];});// Add a loaderCreator function for each image layer.
imagesWithLoaderCreators=images.map(function(image){return Object(objectSpread2["a" /* default */])({},image,{loaderCreator:function(){var _loaderCreator=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var loader;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return initLoader(image);case 2:loader=_context.sent;return _context.abrupt("return",loader);case 4:case"end":return _context.stop();}}},_callee);}));function loaderCreator(){return _loaderCreator.apply(this,arguments);}return loaderCreator;}()});});return _context2.abrupt("return",Promise.resolve({data:{layers:imagesWithLoaderCreators,renderLayers:renderLayers,usePhysicalSizeScaling:usePhysicalSizeScaling},urls:urls}));case 10:case"end":return _context2.stop();}}},_callee2,this);}));function load(){return _load.apply(this,arguments);}return load;}()}]);return RasterLoader;}(JsonLoader_JsonLoader);
// EXTERNAL MODULE: ./src/components/sets/io.js
var io = __webpack_require__(61);

// CONCATENATED MODULE: ./src/loaders/CellSetsJsonLoader.js
var CellSetsJsonLoader_CellSetsJsonLoader=/*#__PURE__*/function(_JsonLoader){Object(inherits["a" /* default */])(CellSetsJsonLoader,_JsonLoader);var _super=Object(createSuper["a" /* default */])(CellSetsJsonLoader);function CellSetsJsonLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,CellSetsJsonLoader);_this=_super.call(this,params);_this.schema=cell_sets_schema;return _this;}Object(createClass["a" /* default */])(CellSetsJsonLoader,[{key:"load",value:function(){var _load=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var payload,rawData,url,upgradedData;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(CellSetsJsonLoader.prototype),"load",this).call(this).catch(function(reason){return Promise.resolve(reason);});case 2:payload=_context.sent;if(!(payload instanceof errors["a" /* AbstractLoaderError */])){_context.next=5;break;}return _context.abrupt("return",Promise.reject(payload));case 5:rawData=payload.data,url=payload.url;upgradedData=Object(io["f" /* tryUpgradeTreeToLatestSchema */])(rawData,'cell');return _context.abrupt("return",Promise.resolve({data:upgradedData,url:url}));case 8:case"end":return _context.stop();}}},_callee,this);}));function load(){return _load.apply(this,arguments);}return load;}()}]);return CellSetsJsonLoader;}(JsonLoader_JsonLoader);
// EXTERNAL MODULE: ./src/components/sets/cell-set-utils.js
var cell_set_utils = __webpack_require__(19);

// EXTERNAL MODULE: ./src/components/sets/constants.js
var constants = __webpack_require__(14);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js
var setPrototypeOf = __webpack_require__(71);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js
var isNativeReflectConstruct = __webpack_require__(72);

// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct.js


function construct_construct(Parent, args, Class) {
  if (Object(isNativeReflectConstruct["a" /* default */])()) {
    construct_construct = Reflect.construct;
  } else {
    construct_construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) Object(setPrototypeOf["a" /* default */])(instance, Class.prototype);
      return instance;
    };
  }

  return construct_construct.apply(null, arguments);
}
// CONCATENATED MODULE: ./src/loaders/anndata-loaders/BaseAnnDataLoader.js
/**
 * A base AnnData loader which has all shared methods for more comlpex laoders,
 * like loading cell names and ids. It inherits from AbstractLoader.
 */var BaseAnnDataLoader_BaseAnnDataLoader=/*#__PURE__*/function(_AbstractLoader){Object(inherits["a" /* default */])(BaseAnnDataLoader,_AbstractLoader);var _super=Object(createSuper["a" /* default */])(BaseAnnDataLoader);function BaseAnnDataLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,BaseAnnDataLoader);_this=_super.call(this,params);// TODO: Use this.requestInit to provide headers, tokens, etc.
// eslint-disable-next-line no-unused-vars
var _assertThisInitialize=Object(assertThisInitialized["a" /* default */])(_this),url=_assertThisInitialize.url,requestInit=_assertThisInitialize.requestInit;_this.store=new external_zarr_["HTTPStore"](url);return _this;}/**
   * Class method for decoding json from the store.
   * @returns {string} An path to the item.
   */Object(createClass["a" /* default */])(BaseAnnDataLoader,[{key:"getJson",value:function(){var _getJson=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(key){var buf,text;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.store.getItem(key);case 3:buf=_context.sent;text=new TextDecoder().decode(buf);return _context.abrupt("return",JSON.parse(text));case 8:_context.prev=8;_context.t0=_context["catch"](0);if(!(_context.t0 instanceof external_zarr_["KeyError"])){_context.next=12;break;}return _context.abrupt("return",{});case 12:throw _context.t0;case 13:case"end":return _context.stop();}}},_callee,this,[[0,8]]);}));function getJson(_x){return _getJson.apply(this,arguments);}return getJson;}()/**
   * Class method for decoding text arrays from zarr.
   * @returns {string[]} An array of strings.
   */ // eslint-disable-next-line class-methods-use-this
},{key:"decodeTextArray",value:function decodeTextArray(buffer){return new TextDecoder()// Remove header: https://github.com/zarr-developers/numcodecs/blob/2c1aff98e965c3c4747d9881d8b8d4aad91adb3a/numcodecs/vlen.pyx#L34
// Should we validate? Seems unnecessary, but maybe?
.decode(buffer.slice(4))// https://stackoverflow.com/questions/11159118/incorrect-string-value-xef-xbf-xbd-for-column
// for information on the right hand side of the | in the regex.
// eslint-disable-next-line no-control-regex
.replace(/[\u0000-\u001c]|�c/g,',').split(',').filter(Boolean);}/**
   * Class method for loading cell set ids.
   * Takes the location as an argument because this is shared across objects,
   * which have different ways of specifying location.
   * @param {string} cellSetZarrLocation A string like obs.leiden or obs.bulk_labels.
   * @returns {Promise} A promise for an array of ids with one per cell.
   */},{key:"loadCellSetIds",value:function loadCellSetIds(cellSetZarrLocation){var _this2=this;var store=this.store;if(this.cellSets){return this.cellSets;}this.cellSets=Promise.all(cellSetZarrLocation.map(/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(setName){var _yield$_this2$getJson,categories,categoriesValues,cellSetsArr,cellSetsValues,data,mappedCellSetValues;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.getJson("".concat(setName,"/.zattrs"));case 2:_yield$_this2$getJson=_context2.sent;categories=_yield$_this2$getJson.categories;if(!categories){_context2.next=8;break;}_context2.next=7;return _this2.getFlatTextArr("/obs/".concat(categories));case 7:categoriesValues=_context2.sent;case 8:_context2.next=10;return Object(external_zarr_["openArray"])({store:store,path:setName,mode:'r'});case 10:cellSetsArr=_context2.sent;_context2.next=13;return cellSetsArr.get();case 13:cellSetsValues=_context2.sent;data=cellSetsValues.data;mappedCellSetValues=construct_construct(Array,Object(toConsumableArray["a" /* default */])(data)).map(function(i){return!categoriesValues?i:categoriesValues[i];});return _context2.abrupt("return",mappedCellSetValues);case 17:case"end":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref.apply(this,arguments);};}()));return this.cellSets;}/**
   * Class method for loading general numeric arrays.
   * @param {string} path A string like obsm.X_pca.
   * @returns {Promise} A promise for a zarr array containing the data.
   */},{key:"loadNumeric",value:function loadNumeric(path){var store=this.store;return Object(external_zarr_["openArray"])({store:store,path:path,mode:'r'}).then(function(arr){return arr.get();});}},{key:"getFlatArrDecompressed",value:function getFlatArrDecompressed(path){var store=this.store;return Object(external_zarr_["openArray"])({store:store,path:path,mode:'r'}).then(/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(z){var data,item,buf,dbytes,tmp;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=new Uint8Array();item=0;// eslint-disable-next-line no-constant-condition
case 2:if(false){}_context3.prev=3;_context3.next=6;return store.getItem("".concat(z.keyPrefix).concat(String(item)));case 6:buf=_context3.sent;_context3.next=9;return z.compressor.decode(buf);case 9:dbytes=_context3.sent;tmp=new Uint8Array(dbytes.buffer.byteLength+data.buffer.byteLength);tmp.set(new Uint8Array(data.buffer),0);tmp.set(dbytes,data.buffer.byteLength);data=tmp;item+=1;_context3.next=22;break;case 17:_context3.prev=17;_context3.t0=_context3["catch"](3);if(!(_context3.t0 instanceof external_zarr_["KeyError"])){_context3.next=21;break;}return _context3.abrupt("break",24);case 21:throw _context3.t0;case 22:_context3.next=2;break;case 24:return _context3.abrupt("return",data);case 25:case"end":return _context3.stop();}}},_callee3,null,[[3,17]]);}));return function(_x3){return _ref2.apply(this,arguments);};}());}},{key:"getFlatTextArr",value:function getFlatTextArr(path){var _this3=this;return this.getFlatArrDecompressed(path).then(function(data){var text=_this3.decodeTextArray(data);return text;});}/**
   * Class method for loading the cell names from obs.
   * @returns {Promise} An promise for a zarr array containing the names.
   */},{key:"loadCellNames",value:function loadCellNames(){var _this4=this;if(this.cellNames){return this.cellNames;}this.cellNames=this.getJson('obs/.zattrs').then(function(_ref3){var _index=_ref3._index;return _this4.getFlatTextArr("/obs/".concat(_index));});return this.cellNames;}}]);return BaseAnnDataLoader;}(AbstractLoader_AbstractLoader);
// CONCATENATED MODULE: ./src/loaders/anndata-loaders/CellSetsZarrLoader.js
/* eslint-disable no-control-regex *//**
 * Loader for converting zarr into the cell sets json schema.
 */var CellSetsZarrLoader_CellSetsZarrLoader=/*#__PURE__*/function(_BaseAnnDataLoader){Object(inherits["a" /* default */])(CellSetsZarrLoader,_BaseAnnDataLoader);var _super=Object(createSuper["a" /* default */])(CellSetsZarrLoader);function CellSetsZarrLoader(){Object(classCallCheck["a" /* default */])(this,CellSetsZarrLoader);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(CellSetsZarrLoader,[{key:"load",value:function load(){var options=this.options;// eslint-disable-next-line camelcase
var cellSetZarrLocation=options.map(function(_ref){var setName=_ref.setName;return setName;});return Promise.all([this.loadCellNames(),this.loadCellSetIds(cellSetZarrLocation)]).then(function(data){var _data=Object(slicedToArray["a" /* default */])(data,2),cellNames=_data[0],cellSets=_data[1];var cellSetsTree=Object(cell_set_utils["m" /* treeInitialize */])(constants["h" /* SETS_DATATYPE_CELL */]);cellSets.forEach(function(cellSetIds,j){var name=options[j].groupName;var levelZeroNode={name:name,children:[]};var uniqueCellSetIds=Array.apply(void 0,Object(toConsumableArray["a" /* default */])(new Set(cellSetIds))).sort();var clusters={};// eslint-disable-next-line no-return-assign
uniqueCellSetIds.forEach(function(id){return clusters[id]={name:id,set:[]};});cellSetIds.forEach(function(id,i){return clusters[id].set.push([cellNames[i],null]);});Object.values(clusters).forEach(// eslint-disable-next-line no-return-assign
function(cluster){return levelZeroNode=Object(cell_set_utils["d" /* nodeAppendChild */])(levelZeroNode,cluster);});cellSetsTree.tree.push(levelZeroNode);});return Promise.resolve({data:cellSetsTree,url:null});});}}]);return CellSetsZarrLoader;}(BaseAnnDataLoader_BaseAnnDataLoader);
// CONCATENATED MODULE: ./src/loaders/anndata-loaders/CellsZarrLoader.js
/**
 * Loader for converting zarr into the cell json schema.
 */var CellsZarrLoader_CellsZarrLoader=/*#__PURE__*/function(_BaseAnnDataLoader){Object(inherits["a" /* default */])(CellsZarrLoader,_BaseAnnDataLoader);var _super=Object(createSuper["a" /* default */])(CellsZarrLoader);function CellsZarrLoader(){Object(classCallCheck["a" /* default */])(this,CellsZarrLoader);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(CellsZarrLoader,[{key:"loadXy",/**
   * Class method for loading spatial cell centroids.
   * @returns {Promise} A promise for an array of tuples/triples for cell centroids.
   */value:function loadXy(){var xy=this.options.xy;if(this.xy){return this.xy;}if(!this.xy&&xy){this.xy=this.loadNumeric(xy);return this.xy;}this.xy=Promise.resolve(null);return this.xy;}/**
   * Class method for loading spatial cell polygons.
   * @returns {Promise} A promise for an array of arrays for cell polygons.
   */},{key:"loadPoly",value:function loadPoly(){var poly=this.options.poly;if(this.poly){return this.poly;}if(!this.poly&&poly){this.poly=this.loadNumeric(poly);return this.poly;}this.poly=Promise.resolve(null);return this.poly;}/**
   * Class method for loading various mappings, like UMAP or tSNE cooridnates.
   * @returns {Promise} A promise for an array of tuples of coordinates.
   */},{key:"loadMappings",value:function loadMappings(){var _this=this;var mappings=this.options.mappings;if(this.mappings){return this.mappings;}if(!this.mappings&&mappings){this.mappings=Promise.all(Object.keys(mappings).map(/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(coordinationName){var key;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:key=mappings[coordinationName].key;_context.t0=coordinationName;_context.next=4;return _this.loadNumeric(key);case 4:_context.t1=_context.sent;return _context.abrupt("return",{coordinationName:_context.t0,arr:_context.t1});case 6:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()));return this.mappings;}this.mappings=Promise.resolve(null);return this.mappings;}/**
   * Class method for loading factors, which are cell set ids.
   * @returns {Promise} A promise for an array of an array of strings of ids,
   * where subarray is a clustering/factor.
   */},{key:"loadFactors",value:function loadFactors(){var factors=this.options.factors;if(factors){return this.loadCellSetIds(factors);}return Promise.resolve(null);}},{key:"load",value:function(){var _load=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var _this2=this;var _yield$Promise$all,_yield$Promise$all2,mappings,xy,poly,cellNames,factors,cells;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all([this.loadMappings(),this.loadXy(),this.loadPoly(),this.loadCellNames(),this.loadFactors()]);case 2:_yield$Promise$all=_context2.sent;_yield$Promise$all2=Object(slicedToArray["a" /* default */])(_yield$Promise$all,5);mappings=_yield$Promise$all2[0];xy=_yield$Promise$all2[1];poly=_yield$Promise$all2[2];cellNames=_yield$Promise$all2[3];factors=_yield$Promise$all2[4];cells={};cellNames.forEach(function(name,i){cells[name]={};if(mappings){mappings.forEach(function(_ref2){var coordinationName=_ref2.coordinationName,arr=_ref2.arr;if(!cells[name].mappings){cells[name].mappings={};}var dims=_this2.options.mappings[coordinationName].dims;cells[name].mappings[coordinationName]=dims.map(function(dim){return arr.data[i][dim];});});}if(xy){cells[name].xy=xy.data[i];}if(poly){cells[name].poly=poly.data[i];}if(factors){var factorsObj={};factors.forEach(// eslint-disable-next-line no-return-assign
function(factor,j){return factorsObj[_this2.options.factors[j].split('/').slice(-1)]=factor[i];});cells[name].factors=factorsObj;}});return _context2.abrupt("return",Promise.resolve({data:cells,url:null}));case 12:case"end":return _context2.stop();}}},_callee2,this);}));function load(){return _load.apply(this,arguments);}return load;}()}]);return CellsZarrLoader;}(BaseAnnDataLoader_BaseAnnDataLoader);
// CONCATENATED MODULE: ./src/loaders/anndata-loaders/MatrixZarrLoader.js
/* eslint-disable no-underscore-dangle *//**
 * Loader for converting zarr into the a cell x gene matrix for use in Genes/Heatmap components.
 */var anndata_loaders_MatrixZarrLoader_MatrixZarrLoader=/*#__PURE__*/function(_BaseAnnDataLoader){Object(inherits["a" /* default */])(MatrixZarrLoader,_BaseAnnDataLoader);var _super=Object(createSuper["a" /* default */])(MatrixZarrLoader);function MatrixZarrLoader(){Object(classCallCheck["a" /* default */])(this,MatrixZarrLoader);return _super.apply(this,arguments);}Object(createClass["a" /* default */])(MatrixZarrLoader,[{key:"_loadCSRSparseCellXGene",/**
   * Class method for loading row oriented (CSR) sparse data from zarr.
   * @param {string} matrix Location of the matrix.
   * @param {string} shape Shape of the non-sparse output.
   * @returns {Object} A { data: Float32Array } contianing the CellXGene matrix.
   */value:function(){var _loadCSRSparseCellXGene2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(matrix,shape){var store,_yield$Promise$all,_yield$Promise$all2,rows,cols,cellXGene,cellXGeneMatrix,row;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:store=this.store;_context2.next=3;return Promise.all(['indptr','indices','data'].map(/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(name){var z,_yield$z$getRaw,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(external_zarr_["openArray"])({store:store,path:"".concat(matrix,"/").concat(name),mode:'r'});case 2:z=_context.sent;_context.next=5;return z.getRaw(null);case 5:_yield$z$getRaw=_context.sent;data=_yield$z$getRaw.data;return _context.abrupt("return",data);case 8:case"end":return _context.stop();}}},_callee);}));return function(_x3){return _ref.apply(this,arguments);};}()));case 3:_yield$Promise$all=_context2.sent;_yield$Promise$all2=Object(slicedToArray["a" /* default */])(_yield$Promise$all,3);rows=_yield$Promise$all2[0];cols=_yield$Promise$all2[1];cellXGene=_yield$Promise$all2[2];cellXGeneMatrix=new Float32Array(shape[0]*shape[1]).fill(0);row=0;rows.forEach(function(_,index){var rowStart=rows[index];var rowEnd=rows[index+1];for(var i=rowStart;i<rowEnd;i+=1){var val=cellXGene[i];var col=cols[i];cellXGeneMatrix[row*shape[1]+col]=val;}row+=1;});return _context2.abrupt("return",{data:cellXGeneMatrix});case 12:case"end":return _context2.stop();}}},_callee2,this);}));function _loadCSRSparseCellXGene(_x,_x2){return _loadCSRSparseCellXGene2.apply(this,arguments);}return _loadCSRSparseCellXGene;}()/**
   * Class method for loading column oriented (CSC) sparse data from zarr.
   * @param {string} matrix Location of the matrix.
   * @param {string} shape Shape of the non-sparse output.
   * @returns {Object} A { data: Float32Array } contianing the CellXGene matrix.
   */},{key:"_loadCSCSparseCellXGene",value:function(){var _loadCSCSparseCellXGene2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(matrix,shape){var store,_yield$Promise$all3,_yield$Promise$all4,cols,rows,cellXGene,cellXGeneMatrix,col;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:store=this.store;_context4.next=3;return Promise.all(['indptr','indices','data'].map(/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(name){var z,_yield$z$getRaw2,data;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Object(external_zarr_["openArray"])({store:store,path:"".concat(matrix,"/").concat(name),mode:'r'});case 2:z=_context3.sent;_context3.next=5;return z.getRaw(null);case 5:_yield$z$getRaw2=_context3.sent;data=_yield$z$getRaw2.data;return _context3.abrupt("return",data);case 8:case"end":return _context3.stop();}}},_callee3);}));return function(_x6){return _ref2.apply(this,arguments);};}()));case 3:_yield$Promise$all3=_context4.sent;_yield$Promise$all4=Object(slicedToArray["a" /* default */])(_yield$Promise$all3,3);cols=_yield$Promise$all4[0];rows=_yield$Promise$all4[1];cellXGene=_yield$Promise$all4[2];cellXGeneMatrix=new Float32Array(shape[0]*shape[1]).fill(0);col=0;cols.forEach(function(_,index){var colStart=cols[index];var colEnd=cols[index+1];for(var i=colStart;i<colEnd;i+=1){var val=cellXGene[i];var row=rows[i];cellXGeneMatrix[row*shape[1]+col]=val;}col+=1;});return _context4.abrupt("return",{data:cellXGeneMatrix});case 12:case"end":return _context4.stop();}}},_callee4,this);}));function _loadCSCSparseCellXGene(_x4,_x5){return _loadCSCSparseCellXGene2.apply(this,arguments);}return _loadCSCSparseCellXGene;}()/**
   * Class method for loading the cell x gene matrix.
   * @returns {Promise} A promise for the zarr array contianing the cell x gene data.
   */},{key:"loadCellXGene",value:function(){var _loadCellXGene=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var store,matrix,zattrs,encodingType;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:store=this.store;if(!this.arr){_context5.next=3;break;}return _context5.abrupt("return",this.arr);case 3:matrix=this.options.matrix;_context5.next=6;return this.getJson("".concat(matrix,"/.zattrs"));case 6:zattrs=_context5.sent;encodingType=zattrs['encoding-type'];if(!encodingType){_context5.next=15;break;}if(!(encodingType==='csr_matrix')){_context5.next=12;break;}this.arr=this._loadCSRSparseCellXGene(matrix,zattrs.shape);return _context5.abrupt("return",this.arr);case 12:if(!(encodingType==='csc_matrix')){_context5.next=15;break;}this.arr=this._loadCSCSparseCellXGene(matrix,zattrs.shape);return _context5.abrupt("return",this.arr);case 15:this.arr=Object(external_zarr_["openArray"])({store:store,path:matrix,mode:'r'}).then(function(z){return new Promise(function(resolve){z.getRaw(null).then(resolve);});});return _context5.abrupt("return",this.arr);case 17:case"end":return _context5.stop();}}},_callee5,this);}));function loadCellXGene(){return _loadCellXGene.apply(this,arguments);}return loadCellXGene;}()/**
   * Class method for loading the genes list from AnnData.var.
   * @returns {Promise} A promise for the zarr array contianing the gene names.
   */},{key:"loadGeneNames",value:function(){var _loadGeneNames=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(){var geneFilterZarr,geneFilter,_yield$this$getJson,_index;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!this.geneNames){_context6.next=2;break;}return _context6.abrupt("return",this.geneNames);case 2:geneFilterZarr=this.options.geneFilter;if(!geneFilterZarr){_context6.next=7;break;}_context6.next=6;return this.getFlatArrDecompressed(geneFilterZarr);case 6:geneFilter=_context6.sent;case 7:_context6.next=9;return this.getJson('var/.zattrs');case 9:_yield$this$getJson=_context6.sent;_index=_yield$this$getJson._index;if(!this.geneNames){_context6.next=13;break;}return _context6.abrupt("return",this.geneNames);case 13:this.geneNames=this.getFlatTextArr("var/".concat(_index)).then(function(data){return data.filter(function(_,j){return!geneFilter||geneFilter[j];});});return _context6.abrupt("return",this.geneNames);case 15:case"end":return _context6.stop();}}},_callee6,this);}));function loadGeneNames(){return _loadGeneNames.apply(this,arguments);}return loadGeneNames;}()},{key:"load",value:function load(){var _this=this;return Promise.all([this.loadCellNames(),this.loadGeneNames(),this.loadCellXGene()]).then(function(d){var _d=Object(slicedToArray["a" /* default */])(d,3),cellNames=_d[0],geneNames=_d[1],cellXGeneMatrix=_d[2].data;var attrs={rows:cellNames,cols:geneNames};if(!_this.min||!_this.max){var _extent=Object(external_d3_array_["extent"])(cellXGeneMatrix);var _extent2=Object(slicedToArray["a" /* default */])(_extent,2);_this.min=_extent2[0];_this.max=_extent2[1];}var ratio=255/(_this.max-_this.min);var data=new Uint8Array(cellXGeneMatrix.map(function(i){return Math.floor((i-_this.min)*ratio);}));return{data:[attrs,{data:data}],url:null};});}}]);return MatrixZarrLoader;}(BaseAnnDataLoader_BaseAnnDataLoader);
// CONCATENATED MODULE: ./src/loaders/anndata-loaders/index.js
/* harmony default export */ var anndata_loaders = ({CellSetsZarrLoader:CellSetsZarrLoader_CellSetsZarrLoader,CellsZarrLoader:CellsZarrLoader_CellsZarrLoader,MatrixZarrLoader:anndata_loaders_MatrixZarrLoader_MatrixZarrLoader});
// CONCATENATED MODULE: ./src/loaders/GenomicProfilesZarrLoader.js
var GenomicProfilesZarrLoader_GenomicProfilesZarrLoader=/*#__PURE__*/function(_AbstractLoader){Object(inherits["a" /* default */])(GenomicProfilesZarrLoader,_AbstractLoader);var _super=Object(createSuper["a" /* default */])(GenomicProfilesZarrLoader);function GenomicProfilesZarrLoader(params){var _this;Object(classCallCheck["a" /* default */])(this,GenomicProfilesZarrLoader);_this=_super.call(this,params);// TODO: Use this.requestInit to provide headers, tokens, etc.
// eslint-disable-next-line no-unused-vars
var _assertThisInitialize=Object(assertThisInitialized["a" /* default */])(_this),url=_assertThisInitialize.url,requestInit=_assertThisInitialize.requestInit;_this.store=new external_zarr_["HTTPStore"](url);return _this;}Object(createClass["a" /* default */])(GenomicProfilesZarrLoader,[{key:"loadAttrs",value:function loadAttrs(){var store=this.store;if(this.attrs){return this.attrs;}this.attrs=store.getItem('.zattrs').then(function(bytes){var decoder=new TextDecoder('utf-8');var json=JSON.parse(decoder.decode(bytes));return json;});return this.attrs;}},{key:"load",value:function load(){var url=this.url;return this.loadAttrs().then(function(attrs){return Promise.resolve({data:attrs,url:url});});}}]);return GenomicProfilesZarrLoader;}(AbstractLoader_AbstractLoader);
// CONCATENATED MODULE: ./src/loaders/types.js
var _fileTypeToLoader;var ANNDATA='anndata';var fileTypeToLoader=(_fileTypeToLoader={'expression-matrix.zarr':MatrixZarrLoader_MatrixZarrLoader,'clusters.json':ClustersJsonAsMatrixZarrLoader_ClustersJsonAsMatrixZarrLoader,'genes.json':GenesJsonAsMatrixZarrLoader_GenesJsonAsMatrixZarrLoader,'cells.json':JsonLoader_JsonLoader,'molecules.json':JsonLoader_JsonLoader,'neighborhoods.json':JsonLoader_JsonLoader,'raster.json':RasterJsonLoader_RasterLoader,'cell-sets.json':CellSetsJsonLoader_CellSetsJsonLoader},Object(defineProperty["a" /* default */])(_fileTypeToLoader,"".concat(ANNDATA,"-cell-sets.zarr"),anndata_loaders.CellSetsZarrLoader),Object(defineProperty["a" /* default */])(_fileTypeToLoader,"".concat(ANNDATA,"-cells.zarr"),anndata_loaders.CellsZarrLoader),Object(defineProperty["a" /* default */])(_fileTypeToLoader,"".concat(ANNDATA,"-expression-matrix.zarr"),anndata_loaders.MatrixZarrLoader),Object(defineProperty["a" /* default */])(_fileTypeToLoader,'genomic-profiles.zarr',GenomicProfilesZarrLoader_GenomicProfilesZarrLoader),_fileTypeToLoader);
// CONCATENATED MODULE: ./src/app/vitessce-grid-utils.js
/**
 * Return the bottom coordinate of the layout.
 * https://github.com/STRML/react-grid-layout/blob/20dac73f91274526034c00968b5bedb9c2ed36b9/lib/utils.js#L82
 * @param  {array} layout react-grid-layout layout array.
 * @returns {number} Bottom coordinate.
 */function getNumRows(layout){var max=0;var bottomY;// eslint-disable-next-line no-plusplus
for(var i=0,len=layout.length;i<len;i++){bottomY=layout[i].y+layout[i].h;if(bottomY>max)max=bottomY;}return max;}/**
 * Compute the row height based on the container height, number of rows,
 * and margin/padding. Basically the reverse of the react-grid-layout's
 * `.containerHeight()` function.
 * https://github.com/STRML/react-grid-layout/blob/83251e5e682abfa3252ff89d4bacf47fdc1f4270/lib/ReactGridLayout.jsx#L223
 * @param {number} containerHeight The height of the .vitessce-container element.
 * @param {number} numRows The number of rows in the layout.
 * @param {number} margin The margin value that will be passed to VitessceGrid.
 * @param {number} padding The padding value that will be passed to VitessceGrid.
 * @returns {number} The new row height value.
 */function getRowHeight(containerHeight,numRows,margin,padding){var effectiveContainerHeight=containerHeight-2*padding-(numRows-1)*margin;return effectiveContainerHeight/numRows;}function useRowHeight(config,initialRowHeight,height,margin,padding){var _useState=Object(external_react_["useState"])(height),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),containerHeight=_useState2[0],setContainerHeight=_useState2[1];var _useState3=Object(external_react_["useState"])(initialRowHeight),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),rowHeight=_useState4[0],setRowHeight=_useState4[1];var containerRef=Object(external_react_["useRef"])();// Detect when the `config` or `containerHeight` variables
// have changed, and update `rowHeight` in response.
Object(external_react_["useEffect"])(function(){var numRows=getNumRows(config.layout);var newRowHeight=getRowHeight(containerHeight,numRows,margin,padding);setRowHeight(newRowHeight);},[containerHeight,config,margin,padding]);// Update the `containerHeight` state when the `height` prop has changed.
Object(external_react_["useEffect"])(function(){if(height!==null&&height!==undefined){setContainerHeight(height);}},[height]);// If no height prop has been provided, set the `containerHeight`
// using height of the `.vitessce-container` element.
// Check the container element height whenever the window has been
// resized, as it may change if `.vitessce-container` should be
// sized relative to its parent (and by extension, potentially the window).
Object(external_react_["useEffect"])(function(){if(height!==null&&height!==undefined){// eslint will complain if the return value is inconsistent,
// so return a no-op function.
return function(){};}function onWindowResize(){if(!containerRef.current)return;var containerRect=containerRef.current.getBoundingClientRect();setContainerHeight(containerRect.height);}window.addEventListener('resize',onWindowResize);onWindowResize();return function(){window.removeEventListener('resize',onWindowResize);};},[containerRef,height]);return[rowHeight,containerRef];}/**
 * Create a mapping from dataset ID to loader objects by data type.
 * @param {object[]} datasets The datasets array from the view config.
 * @param {string} configDescription The top-level description in the
 * view config.
 * @returns {object} Mapping from dataset ID to data type to loader
 * instance.
 */function createLoaders(datasets,configDescription){var result={};datasets.forEach(function(dataset){var datasetLoaders={name:dataset.name,description:dataset.description||configDescription,loaders:{}};dataset.files.forEach(function(file){// Fall back to JsonLoader if a loader is not found for the file type.
var matchingLoaderClass=fileTypeToLoader[file.fileType]||JsonLoader_JsonLoader;// eslint-disable-next-line new-cap
datasetLoaders.loaders[file.type]=new matchingLoaderClass(file);});result[dataset.uid]=datasetLoaders;});return result;}
// EXTERNAL MODULE: ./src/app/state/hooks.js
var hooks = __webpack_require__(5);

// CONCATENATED MODULE: ./src/app/VitessceGrid.js
var VitessceGrid_padding=10;var VitessceGrid_margin=5;/**
 * The wrapper for the VitessceGrid and LoadingIndicator components.
 * @param {object} props
 * @param {number} props.rowHeight The height of each grid row. Optional.
 * @param {object} props.config The view config.
 * @param {function} props.getComponent A function that maps component names to their
 * React counterparts.
 * @param {string} props.theme The theme name.
 * @param {number} props.height Total height for grid. Optional.
 * @param {function} props.onWarn A callback for warning messages. Optional.
 */function VitessceGrid(props){var initialRowHeight=props.rowHeight,config=props.config,getComponent=props.getComponent,theme=props.theme,height=props.height;var _useRowHeight=useRowHeight(config,initialRowHeight,height,VitessceGrid_margin,VitessceGrid_padding),_useRowHeight2=Object(slicedToArray["a" /* default */])(_useRowHeight,2),rowHeight=_useRowHeight2[0],containerRef=_useRowHeight2[1];var onResize=Object(hooks["e" /* useEmitGridResize */])();// When the row height has changed, publish a GRID_RESIZE event.
Object(external_react_["useEffect"])(function(){onResize();},[rowHeight,onResize]);var setViewConfig=Object(hooks["m" /* useSetViewConfig */])();var setLoaders=Object(hooks["l" /* useSetLoaders */])();var removeComponent=Object(hooks["i" /* useRemoveComponent */])();var changeLayout=Object(hooks["a" /* useChangeLayout */])();var layout=Object(hooks["g" /* useLayout */])();// Update the view config and loaders in the global state.
Object(external_react_["useEffect"])(function(){if(config){setViewConfig(config);var loaders=createLoaders(config.datasets,config.description);setLoaders(loaders);}else{// No config found, so clear the loaders.
setLoaders({});}},[config,setViewConfig,setLoaders]);return/*#__PURE__*/external_react_default.a.createElement("div",{ref:containerRef,className:"vitessce-container vitessce-theme-".concat(theme)},layout&&/*#__PURE__*/external_react_default.a.createElement(VitessceGridLayout,{layout:layout,height:height,rowHeight:rowHeight,theme:theme,getComponent:getComponent,draggableHandle:".title",margin:VitessceGrid_margin,padding:VitessceGrid_padding,onRemoveComponent:removeComponent,onLayoutChange:changeLayout,reactGridLayoutProps:{onResize:onResize,onResizeStop:onResize}}));}
// CONCATENATED MODULE: ./src/app/api.js
// Exported because used by the cypress tests: They route API requests to the fixtures instead.
var urlPrefix='https://s3.amazonaws.com/vitessce-data/0.0.31/master_release';function makeLayerNameToConfig(datasetPrefix){return function(name){return{name:name,type:name.toUpperCase(),fileType:"".concat(name,".json"),url:"".concat(urlPrefix,"/").concat(datasetPrefix,"/").concat(datasetPrefix,".").concat(name,".json")};};}var linnarssonLayerNames=['cells','cell-sets','raster','molecules','neighborhoods'];var linnarssonDescription='Spatial organization of the somatosensory cortex revealed by cyclic smFISH';var linnarssonBase={description:linnarssonDescription,layers:[].concat(Object(toConsumableArray["a" /* default */])(linnarssonLayerNames.map(makeLayerNameToConfig('linnarsson'))),[Object(objectSpread2["a" /* default */])({},makeLayerNameToConfig('linnarsson')('clusters'),{type:'EXPRESSION-MATRIX'})])};var linnarssonBaseNoClusters={description:linnarssonDescription,layers:linnarssonLayerNames.filter(function(name){return name!=='clusters';}).map(makeLayerNameToConfig('linnarsson'))};var driesDescription='Giotto, a pipeline for integrative analysis and visualization of single-cell spatial transcriptomic data';var driesBase={description:driesDescription,layers:['cells','cell-sets'].map(makeLayerNameToConfig('dries'))};var wangDescription='Multiplexed imaging of high-density libraries of RNAs with MERFISH and expansion microscopy';var wangBase={description:wangDescription,layers:[].concat(Object(toConsumableArray["a" /* default */])(['cells','molecules'].map(makeLayerNameToConfig('wang'))),[Object(objectSpread2["a" /* default */])({},makeLayerNameToConfig('wang')('genes'),{name:'expression-matrix',type:'EXPRESSION-MATRIX'})])};var vanderbiltDescription='High Bit Depth (uint16) Multiplex Immunofluorescence Imaging';var vanderbiltBase={description:vanderbiltDescription,layers:['raster'].map(makeLayerNameToConfig('spraggins'))};/* eslint-disable object-property-newline */ /* eslint-disable object-curly-newline */ // Note that the ordering of the components in the staticLayout
// can affect the z-index of plot tooltips due to the
// resulting ordering of elements in the DOM.
var api_configs={'just-scatter':{version:'0.1.0',public:false,layers:[{name:'cells',type:'CELLS',fileType:'cells.json',url:"".concat(urlPrefix,"/linnarsson/linnarsson.cells.json"),requestInit:{// Where the client checks that the value is from an enumeration,
// I've chosen one of the allowed values,
// but nothing on our S3 actually needs any of these.
method:'GET',headers:{'x-foo':'FAKE'},mode:'cors',credentials:'omit',cache:'no-store',redirect:'error',referrer:'FAKE',integrity:'FAKE'}}],name:'Linnarsson, just scatterplot',staticLayout:[{component:'scatterplot',props:{mapping:'t-SNE',view:{zoom:0.75,target:[0,0,0]}},x:0,y:0,w:12,h:2}]},'just-scatter-expression':{version:'0.1.0',public:false,layers:[{name:'cells',type:'CELLS',url:'https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.cells.json'},{name:'genes',type:'GENES',url:'https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.genes.json'}],name:'Linnarsson, just scatterplot and expression',staticLayout:[{component:'scatterplot',props:{mapping:'t-SNE',view:{zoom:0.75,target:[0,0,0]}},x:0,y:0,w:8,h:2},{component:'genes',x:8,y:2,w:4,h:2}]},'linnarsson-2018':{name:'Linnarsson',version:'1.0.0',description:linnarssonDescription,public:true,datasets:[{uid:'linnarsson-2018',name:'Linnarsson 2018',description:"Linnarsson: ".concat(linnarssonDescription),files:linnarssonBase.layers.map(function(file){return{type:file.type.toLowerCase(),fileType:file.fileType,url:file.url};})}],initStrategy:'auto',coordinationSpace:{embeddingZoom:{PCA:0,TSNE:0.75},embeddingType:{PCA:'PCA',TSNE:'t-SNE'},spatialZoom:{A:-5.5},spatialTargetX:{A:16000},spatialTargetY:{A:20000}},layout:[{component:'description',x:0,y:0,w:2,h:1},{component:'layerController',x:0,y:1,w:2,h:4},{component:'status',x:0,y:5,w:2,h:1},{component:'spatial',coordinationScopes:{spatialZoom:'A',spatialTargetX:'A',spatialTargetY:'A'},x:2,y:0,w:4,h:4},{component:'genes',x:9,y:0,w:3,h:2},{component:'cellSets',x:9,y:3,w:3,h:2},{component:'heatmap',props:{transpose:true},x:2,y:4,w:5,h:2},{component:'cellSetExpression',x:7,y:4,w:3,h:2},{component:'expressionHistogram',x:10,y:4,w:2,h:2},{component:'scatterplot',coordinationScopes:{embeddingType:'PCA',embeddingZoom:'PCA'},x:6,y:0,w:3,h:2},{component:'scatterplot',coordinationScopes:{embeddingType:'TSNE',embeddingZoom:'TSNE'},x:6,y:2,w:3,h:2}]},'linnarsson-2018-two-spatial':Object(objectSpread2["a" /* default */])({},linnarssonBase,{version:'0.1.0',name:'Linnarsson (two spatial)',staticLayout:[{component:'spatial',props:{view:{zoom:-8,target:[18000,18000,0]}},x:0,y:0,w:5,h:2},{component:'scatterplot',props:{mapping:'t-SNE'},x:0,y:2,w:5,h:2},{component:'spatial',props:{view:{zoom:-6,target:[18000,18000,0]}},x:5,y:0,w:5,h:2},{component:'scatterplot',props:{mapping:'PCA'},x:5,y:2,w:5,h:2},{component:'genes',x:10,y:2,w:2,h:2},{component:'heatmap',x:0,y:4,w:12}]}),'linnarsson-2018-just-spatial':Object(objectSpread2["a" /* default */])({},linnarssonBaseNoClusters,{version:'0.1.0',name:'Linnarsson (just spatial)',staticLayout:[{component:'spatial',props:{view:{zoom:-6.5,target:[18000,18000,0]}},x:0,y:0,w:10,h:2},{component:'genes',x:10,y:1,w:2,h:1}]}),'linnarsson-2018-static':Object(objectSpread2["a" /* default */])({},linnarssonBase,{version:'0.1.0',name:'Linnarsson (static layout)',staticLayout:[{component:'description',props:{description:"Linnarsson (static layout): ".concat(linnarssonDescription)},x:0,y:0,w:3,h:1},{component:'scatterplot',props:{mapping:'t-SNE'},x:0,y:2,w:3,h:2},{component:'spatial',props:{view:{zoom:-6.5,target:[18000,18000,0]}},x:3,y:0,w:6,h:4},{component:'genes',x:9,y:2,w:3,h:2},{component:'heatmap',x:0,y:4,w:12,h:1}]}),'linnarsson-2018-dozen':Object(objectSpread2["a" /* default */])({},linnarssonBase,{version:'0.1.0',name:'Linnarsson (static layout, redundant components for performance testing)',staticLayout:[{component:'spatial',props:{view:{zoom:-6.5,target:[18000,18000,0]}},x:0,y:0,w:4,h:1},{component:'spatial',props:{view:{zoom:-6.5,target:[18000,18000,0]}},x:0,y:1,w:4,h:1},{component:'spatial',props:{view:{zoom:-6.5,target:[18000,18000,0]}},x:4,y:0,w:4,h:1},{component:'spatial',props:{view:{zoom:-6.5,target:[18000,18000,0]}},x:4,y:1,w:4,h:1},{component:'scatterplot',props:{mapping:'t-SNE'},x:0,y:2,w:4,h:1},{component:'scatterplot',props:{mapping:'t-SNE'},x:0,y:3,w:4,h:1},{component:'scatterplot',props:{mapping:'t-SNE'},x:0,y:4,w:4,h:1},{component:'scatterplot',props:{mapping:'t-SNE'},x:0,y:5,w:4,h:1},{component:'scatterplot',props:{mapping:'PCA'},x:4,y:2,w:4,h:1},{component:'scatterplot',props:{mapping:'PCA'},x:4,y:3,w:4,h:1},{component:'scatterplot',props:{mapping:'PCA'},x:4,y:4,w:4,h:1},{component:'scatterplot',props:{mapping:'PCA'},x:4,y:5,w:4,h:1},{component:'genes',x:8,y:2,w:4,h:2},{component:'heatmap',x:8,y:4,w:4,h:2}]}),'dries-2019':{name:'Dries',version:'1.0.0',description:driesDescription,public:true,datasets:[{uid:'dries-2019',name:'Dries 2019',files:driesBase.layers.map(function(file){return{type:file.type.toLowerCase(),fileType:file.fileType,url:file.url};})}],initStrategy:'auto',coordinationSpace:{embeddingType:{TSNE:'t-SNE',UMAP:'UMAP'},embeddingCellSetPolygonsVisible:{A:false},embeddingCellSetLabelsVisible:{A:true},embeddingCellSetLabelSize:{A:16},embeddingCellRadius:{A:1},embeddingZoom:{TSNE:3,UMAP:3},spatialZoom:{A:-4.4},spatialTargetX:{A:3800},spatialTargetY:{A:-900}},layout:[{component:'description',x:9,y:0,w:3,h:2},{component:'status',x:9,y:2,w:3,h:2},{component:'cellSets',x:9,y:4,w:3,h:4},{component:'cellSetSizes',x:5,y:4,w:4,h:4},{component:'scatterplot',coordinationScopes:{embeddingType:'TSNE',embeddingZoom:'TSNE',embeddingCellSetLabelsVisible:'A',embeddingCellSetLabelSize:'A',embeddingCellSetPolygonsVisible:'A',embeddingCellRadius:'A'},x:0,y:2,w:5,h:4},{component:'spatial',props:{cellRadius:50},coordinationScopes:{spatialZoom:'A',spatialTargetX:'A',spatialTargetY:'A'},x:5,y:0,w:4,h:4},{component:'scatterplot',coordinationScopes:{embeddingType:'UMAP',embeddingZoom:'UMAP',embeddingCellSetLabelsVisible:'A',embeddingCellSetLabelSize:'A',embeddingCellSetPolygonsVisible:'A',embeddingCellRadius:'A'},x:0,y:0,w:5,h:4}]},'wang-2019':{name:'Wang',version:'1.0.0',description:wangDescription,public:true,datasets:[{uid:'wang-2019',name:'Wang 2019',files:wangBase.layers.map(function(file){return{type:file.type.toLowerCase(),fileType:file.fileType,url:file.url};})}],initStrategy:'auto',coordinationSpace:{spatialZoom:{A:-1},spatialLayers:{A:[{type:'molecules',radius:2,opacity:1,visible:true},{type:'cells',opacity:1,radius:50,visible:true,stroked:false}]}},layout:[{component:'spatial',coordinationScopes:{spatialZoom:'A',spatialLayers:'A'},x:0,y:0,w:10,h:2},{component:'genes',x:10,y:0,w:2,h:4},{component:'expressionHistogram',x:0,y:2,w:10,h:2}]},vanderbilt:Object(objectSpread2["a" /* default */])({},vanderbiltBase,{version:'0.1.0',name:'Spraggins',public:true,staticLayout:[{component:'spatial',props:{view:{zoom:-6.5,target:[20000,20000,0]}},x:0,y:0,w:9,h:2},{component:'layerController',x:9,y:0,w:3,h:2}]}),'just-higlass':{public:false,initStrategy:'auto',version:'1.0.0',datasets:[{uid:'higlass-dataset',name:'HiGlass Dataset',files:[]}],name:'HiGlass demo',coordinationSpace:{genomicZoomX:{A:0},genomicZoomY:{A:0},genomicTargetX:{A:1549999999.5},genomicTargetY:{A:1549999999.5}},layout:[{component:'higlass',coordinationScopes:{genomicZoomX:'A',genomicZoomY:'A',genomicTargetX:'A',genomicTargetY:'A'},props:{hgViewConfig:{uid:'aa',autocompleteSource:'/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',genomePositionSearchBox:{autocompleteServer:'//higlass.io/api/v1',autocompleteId:'OHJakQICQD6gTD7skx4EWA',chromInfoServer:'//higlass.io/api/v1',chromInfoId:'hg19',visible:true},chromInfoPath:'//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',tracks:{top:[{type:'horizontal-gene-annotations',height:60,tilesetUid:'OHJakQICQD6gTD7skx4EWA',server:'//higlass.io/api/v1',uid:'OHJakQICQD6gTD7skx4EWA',options:{name:'Gene Annotations (hg19)',fontSize:10,labelPosition:'hidden',labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,geneAnnotationHeight:16,geneLabelPosition:'outside',geneStrandSpacing:4,showMousePosition:true,mousePositionColor:'#ff00ff',plusStrandColor:'#fdff54',minusStrandColor:'#68bf30',labelColor:'black',trackBorderWidth:0,trackBorderColor:'black'}},{chromInfoPath:'//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',type:'horizontal-chromosome-labels',height:30,uid:'X4e_1DKiQHmyghDa6lLMVA',options:{color:'#808080',stroke:'black',fontSize:12,fontIsLeftAligned:false,showMousePosition:true,mousePositionColor:'#ff00ff'}}],left:[{type:'vertical-gene-annotations',width:60,tilesetUid:'OHJakQICQD6gTD7skx4EWA',server:'//higlass.io/api/v1',options:{labelPosition:'bottomRight',name:'Gene Annotations (hg19)',fontSize:10,labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minWidth:24,geneAnnotationHeight:16,geneLabelPosition:'outside',geneStrandSpacing:4,showMousePosition:true,mousePositionColor:'#ff00ff',plusStrandColor:'#fdff54',minusStrandColor:'#68bf30',labelColor:'black',trackBorderWidth:0,trackBorderColor:'black'},uid:'dqBTMH78Rn6DeSyDBoAEXw'},{chromInfoPath:'//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',type:'vertical-chromosome-labels',width:30,uid:'RHdQK4IRQ7yJeDmKWb7Pcg',options:{color:'#777777',stroke:'black',fontSize:12,fontIsLeftAligned:false,minWidth:35,showMousePosition:true,mousePositionColor:'#ff00ff'}}],center:[{uid:'c1',type:'combined',height:600,contents:[{server:'//higlass.io/api/v1',tilesetUid:'CQMd6V_cRw6iCI_-Unl3PQ',type:'heatmap',options:{maxZoom:null,labelPosition:'bottomRight',name:'Rao et al. (2014) GM12878 MboI (allreps) 1kb',backgroundColor:'black',labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:true,labelShowAssembly:true,labelColor:'#ffffff',labelTextOpacity:0.5,labelBackgroundColor:'black',labelBackgroundOpacity:0.01,colorRange:['#000000','#222e54','#448db2','#68bf30','#fdff54','#FFFFFF'],colorbarBackgroundColor:'black',colorbarBackgroundOpacity:0.01,colorbarPosition:'topRight',trackBorderWidth:0,trackBorderColor:'black',heatmapValueScaling:'log',showMousePosition:true,mousePositionColor:'#ff00ff',showTooltip:false,extent:'full',zeroValueColor:null,scaleStartPercent:'0.00000',scaleEndPercent:'1.00000'},height:500,uid:'GjuZed1ySGW1IzZZqFB9BA',transforms:[{name:'ICE',value:'weight'}]}],options:{}}],right:[],bottom:[],whole:[],gallery:[]},layout:{w:12,h:12,x:0,y:0,moved:false,static:false}}},x:0,y:0,w:8,h:2},{component:'higlass',coordinationScopes:{genomicZoomX:'A',genomicZoomY:'A',genomicTargetX:'A',genomicTargetY:'A'},props:{hgViewConfig:{uid:'aa',autocompleteSource:'/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',genomePositionSearchBox:{autocompleteServer:'//higlass.io/api/v1',autocompleteId:'OHJakQICQD6gTD7skx4EWA',chromInfoServer:'//higlass.io/api/v1',chromInfoId:'hg19',visible:true},chromInfoPath:'//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',tracks:{top:[{type:'horizontal-gene-annotations',height:60,tilesetUid:'OHJakQICQD6gTD7skx4EWA',server:'//higlass.io/api/v1',uid:'OHJakQICQD6gTD7skx4EWA',options:{name:'Gene Annotations (hg19)',fontSize:10,labelPosition:'hidden',labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,geneAnnotationHeight:16,geneLabelPosition:'outside',geneStrandSpacing:4,showMousePosition:true,mousePositionColor:'#ff00ff',plusStrandColor:'#fdff54',minusStrandColor:'#68bf30',labelColor:'black',trackBorderWidth:0,trackBorderColor:'black'}},{chromInfoPath:'//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',type:'horizontal-chromosome-labels',height:30,uid:'X4e_1DKiQHmyghDa6lLMVA',options:{color:'#808080',stroke:'black',fontSize:12,fontIsLeftAligned:false,showMousePosition:true,mousePositionColor:'#ff00ff'}}],left:[{type:'vertical-gene-annotations',width:60,tilesetUid:'OHJakQICQD6gTD7skx4EWA',server:'//higlass.io/api/v1',options:{labelPosition:'bottomRight',name:'Gene Annotations (hg19)',fontSize:10,labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minWidth:24,geneAnnotationHeight:16,geneLabelPosition:'outside',geneStrandSpacing:4,showMousePosition:true,mousePositionColor:'#ff00ff',plusStrandColor:'#fdff54',minusStrandColor:'#68bf30',labelColor:'black',trackBorderWidth:0,trackBorderColor:'black'},uid:'dqBTMH78Rn6DeSyDBoAEXw'},{chromInfoPath:'//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',type:'vertical-chromosome-labels',width:30,uid:'RHdQK4IRQ7yJeDmKWb7Pcg',options:{color:'#777777',stroke:'black',fontSize:12,fontIsLeftAligned:false,minWidth:35,showMousePosition:true,mousePositionColor:'#ff00ff'}}],center:[{uid:'c1',type:'combined',height:600,contents:[{server:'//higlass.io/api/v1',tilesetUid:'CQMd6V_cRw6iCI_-Unl3PQ',type:'heatmap',options:{maxZoom:null,labelPosition:'bottomRight',name:'Rao et al. (2014) GM12878 MboI (allreps) 1kb',backgroundColor:'black',labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:true,labelShowAssembly:true,labelColor:'#ffffff',labelTextOpacity:0.5,labelBackgroundColor:'black',labelBackgroundOpacity:0.01,colorRange:['#000000','#222e54','#448db2','#68bf30','#fdff54','#FFFFFF'],colorbarBackgroundColor:'black',colorbarBackgroundOpacity:0.01,colorbarPosition:'topRight',trackBorderWidth:0,trackBorderColor:'black',heatmapValueScaling:'log',showMousePosition:true,mousePositionColor:'#ff00ff',showTooltip:false,extent:'full',zeroValueColor:null,scaleStartPercent:'0.00000',scaleEndPercent:'1.00000'},height:500,uid:'GjuZed1ySGW1IzZZqFB9BA',transforms:[{name:'ICE',value:'weight'}]}],options:{}}],right:[],bottom:[],whole:[],gallery:[]},layout:{w:12,h:12,x:0,y:0,moved:false,static:false}}},x:8,y:0,w:4,h:2}]},'sc-atac-seq-10x-genomics-pbmc':{version:'1.0.0',name:'HiGlass serverless demo with 10x Genomics scATAC-seq 5k PBMC dataset',datasets:[{uid:'10x-genomics-pbmc',name:'10x Genomics PBMC',files:[{type:'genomic-profiles',fileType:'genomic-profiles.zarr',url:'http://higlass-serverless.s3.amazonaws.com/multivec/pbmc_10x_peaks_by_cluster.zarr'}]}],layout:[{component:'genomicProfiles',props:{profileTrackUidKey:'file'},x:0,y:0,w:8,h:2},{component:'description',props:{description:'10x Genomics scATAC-seq of 5k PBMCs. Note: the Zarr HiGlass Plugin Datafetcher is not yet optimized. Please be patient while the HiGlass tracks load.'},x:8,y:0,w:4,h:2}],initStrategy:'auto'}};/* eslint-enable */function listConfigs(showAll){return Object.entries(api_configs).filter(function(entry){return showAll||entry[1].public;}).map(function(_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),id=_ref2[0],config=_ref2[1];return{id:id,name:config.name,description:config.description};});}function getConfig(id){return api_configs[id];}
// EXTERNAL MODULE: ./src/version.json
var src_version = __webpack_require__(161);

// CONCATENATED MODULE: ./src/app/Welcome.js
function DatasetList(props){var configs=props.configs,theme=props.theme;var aClassName='list-group-item list-group-item-action flex-column align-items-start bg-secondary';var links=configs.map(function(_ref){var id=_ref.id,name=_ref.name,description=_ref.description;return/*#__PURE__*/external_react_default.a.createElement("div",{className:aClassName,key:id},/*#__PURE__*/external_react_default.a.createElement("a",{href:"?dataset=".concat(id,"&theme=").concat(theme),key:id},/*#__PURE__*/external_react_default.a.createElement("h5",null,name),/*#__PURE__*/external_react_default.a.createElement("p",null,description)),/*#__PURE__*/external_react_default.a.createElement("a",{href:"?dataset=".concat(id,"&theme=").concat(theme,"&small"),style:{fontSize:'75%'}},name," as component"));});return/*#__PURE__*/external_react_default.a.createElement("div",{className:"list-group"},links);}function Form(props){var configs=props.configs,theme=props.theme;return/*#__PURE__*/external_react_default.a.createElement("form",{method:"GET"},/*#__PURE__*/external_react_default.a.createElement("h1",null,"Vitessce"),/*#__PURE__*/external_react_default.a.createElement("div",null,"Select a dataset:"),/*#__PURE__*/external_react_default.a.createElement(DatasetList,{configs:configs,theme:theme}),/*#__PURE__*/external_react_default.a.createElement("br",null),/*#__PURE__*/external_react_default.a.createElement("div",null,"Or specify URL of configuration:"),/*#__PURE__*/external_react_default.a.createElement("div",{className:"input-group mb-3"},/*#__PURE__*/external_react_default.a.createElement("input",{type:"text",name:"url",className:"form-control"}),/*#__PURE__*/external_react_default.a.createElement("input",{type:"hidden",name:"theme",value:theme}),/*#__PURE__*/external_react_default.a.createElement("div",{className:"input-group-append"},/*#__PURE__*/external_react_default.a.createElement("button",{className:"btn btn-outline-secondary",type:"submit"},"Load"))));}function Info(){return/*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment,null,/*#__PURE__*/external_react_default.a.createElement("p",{className:"info-paragraph"},"Vitessce is a visual integration tool for exploration of spatial single cell experiments. Its modular design is optimized for scalable, linked visualizations that support the spatial and non-spatial representation of tissue-, cell- and molecule-level data. Vitessce integrates the ",/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/hms-dbmi/viv"},"Viv library")," to visualize highly multiplexed, high-resolution, high-bit depth image data directly from OME-TIFF files and Bio-Formats-compatible Zarr stores."),/*#__PURE__*/external_react_default.a.createElement("h5",{className:"info-section-text"},"Contributors"),/*#__PURE__*/external_react_default.a.createElement("ul",null,/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/keller-mark"},"Mark Keller")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/mccalluc"},"Chuck McCallum")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/ilan-gold"},"Ilan Gold")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/manzt"},"Trevor Manz")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/thomaslchan"},"Tos Chan")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/jkmarx"},"Jennifer Marx")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/pkharchenko"},"Peter Kharchenko")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/ngehlenborg"},"Nils Gehlenborg"))),/*#__PURE__*/external_react_default.a.createElement("h5",{className:"info-section-text"},"Source Code"),/*#__PURE__*/external_react_default.a.createElement("ul",null,/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://github.com/hubmapconsortium/vitessce"},"GitHub")),/*#__PURE__*/external_react_default.a.createElement("li",null,/*#__PURE__*/external_react_default.a.createElement("a",{href:"https://www.npmjs.com/package/vitessce"},"NPM"))),/*#__PURE__*/external_react_default.a.createElement("h5",{className:"info-section-text"},"Funding"),/*#__PURE__*/external_react_default.a.createElement("ul",null,/*#__PURE__*/external_react_default.a.createElement("li",null,"NIH/OD Human BioMolecular Atlas Program (HuBMAP) (OT2OD026677, PI: Nils Gehlenborg)."),/*#__PURE__*/external_react_default.a.createElement("li",null,"NIH/NLM Biomedical Informatics and Data Science Research Training Program (T15LM007092, PI: Nils Gehlenborg)"),/*#__PURE__*/external_react_default.a.createElement("li",null,"Harvard Stem Cell Institute (CF-0014-17-03, PI: Nils Gehlenborg)")),/*#__PURE__*/external_react_default.a.createElement("p",{className:"info-section-text"},"This deployment: branch=",src_version.branch," | hash=",src_version.hash," | date=",src_version.date));}function Welcome(props){var configs=props.configs,theme=props.theme,showBetaHeader=props.showBetaHeader;return/*#__PURE__*/external_react_default.a.createElement("div",{className:"vitessce-container vitessce-theme-".concat(theme," welcome-container")},showBetaHeader&&/*#__PURE__*/external_react_default.a.createElement("div",{className:"welcome-beta-header"},/*#__PURE__*/external_react_default.a.createElement("p",null,"Visit ",/*#__PURE__*/external_react_default.a.createElement("a",{href:"http://beta.vitessce.io"},"beta.vitessce.io")," to view the next version of the Vitessce home page and documentation!")),/*#__PURE__*/external_react_default.a.createElement("div",{className:"react-grid-layout container-fluid",style:{height:'max(100vh, 100%)'}},/*#__PURE__*/external_react_default.a.createElement("div",{className:"row"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"welcome-col-left"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"card card-body bg-primary"},/*#__PURE__*/external_react_default.a.createElement(Form,{configs:configs,theme:theme}))),/*#__PURE__*/external_react_default.a.createElement("div",{className:"welcome-col-right"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"card card-body bg-primary"},/*#__PURE__*/external_react_default.a.createElement(Info,null))))));}
// EXTERNAL MODULE: ./src/components/classNames.js
var classNames = __webpack_require__(31);

// CONCATENATED MODULE: ./src/app/Warning.js
function Warning(props){var title=props.title,preformatted=props.preformatted,unformatted=props.unformatted,theme=props.theme;return/*#__PURE__*/external_react_default.a.createElement("div",{className:"vitessce-container vitessce-theme-".concat(theme)},/*#__PURE__*/external_react_default.a.createElement("div",{className:"warning-layout container-fluid"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"row"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"col-12"},/*#__PURE__*/external_react_default.a.createElement("div",{className:classNames["b" /* PRIMARY_CARD */]},/*#__PURE__*/external_react_default.a.createElement("h1",null,title),/*#__PURE__*/external_react_default.a.createElement("pre",null,preformatted),/*#__PURE__*/external_react_default.a.createElement("div",null,unformatted))))));}
// EXTERNAL MODULE: external "@material-ui/core/styles"
var styles_ = __webpack_require__(17);

// EXTERNAL MODULE: ./package.json
var package_0 = __webpack_require__(93);

// EXTERNAL MODULE: ./src/components/shared-mui/styles.js
var styles = __webpack_require__(37);

// EXTERNAL MODULE: ./src/schemas/config.schema.json
var config_schema = __webpack_require__(160);

// EXTERNAL MODULE: ./src/schemas/config-legacy.schema.json
var config_legacy_schema = __webpack_require__(171);

// CONCATENATED MODULE: ./src/app/CallbackPublisher.js
function validateViewConfig(viewConfig){// Need the try-catch here since Zustand will actually
// just catch and ignore errors in its subscription callbacks.
try{var validate=new external_ajv_default.a().addSchema(cell_sets_schema).addSchema(raster_schema).compile(config_schema);var valid=validate(viewConfig);if(!valid){var failureReason=JSON.stringify(validate.errors,null,2);throw new Error("Config validation failed: ".concat(failureReason));}}catch(e){console.error(e);}// Do nothing if successful.
}/**
 * This is a dummy component which handles
 * publishing new view configs and loaders to
 * the provided callbacks on changes.
 * @param {object} props
 * @param {function} props.onConfigChange A callback function
 * to execute on each change of the Vitessce view config.
 * @param {function} props.onLoaderChange A callback function
 * to execute on each change of the loaders object.
 * @param {boolean} props.validateOnConfigChange Whether to validate
 * against the view config schema when publishing changes.
 */function CallbackPublisher(props){var onWarn=props.onWarn,onConfigChange=props.onConfigChange,onLoaderChange=props.onLoaderChange,validateOnConfigChange=props.validateOnConfigChange;var warning=Object(hooks["p" /* useWarning */])();var loaders=Object(hooks["h" /* useLoaders */])();// View config updates are often-occurring, so
// we want to use the "transient update" approach
// to subscribe to view config changes.
// Reference: https://github.com/react-spring/zustand#transient-updates-for-often-occuring-state-changes
Object(external_react_["useEffect"])(function(){return hooks["o" /* useViewConfigStore */].subscribe(// The function to run on each publish.
function(viewConfig){if(validateOnConfigChange&&viewConfig){validateViewConfig(viewConfig);}if(onConfigChange&&viewConfig){onConfigChange(viewConfig);}},// The function to specify which part of the store
// we want to subscribe to.
function(state){return state.viewConfig;});},[onConfigChange,validateOnConfigChange]);// Emit updates to the warning message.
Object(external_react_["useEffect"])(function(){if(onWarn&&warning){onWarn(warning);}},[warning,onWarn]);// Emit updates to the loaders.
Object(external_react_["useEffect"])(function(){if(onLoaderChange&&loaders){onLoaderChange(loaders);}},[loaders,onLoaderChange]);// Render nothing.
return null;}
// EXTERNAL MODULE: ./src/components/hooks.js
var components_hooks = __webpack_require__(23);

// EXTERNAL MODULE: ./src/components/data-hooks.js
var data_hooks = __webpack_require__(24);

// EXTERNAL MODULE: ./src/app/state/coordination.js
var coordination = __webpack_require__(25);

// EXTERNAL MODULE: ./src/components/TitleInfo.js + 1 modules
var TitleInfo = __webpack_require__(35);

// CONCATENATED MODULE: ./src/components/description/Description.js
function Description(props){var description=props.description,metadata=props.metadata;return/*#__PURE__*/external_react_default.a.createElement("div",{className:"description"},/*#__PURE__*/external_react_default.a.createElement("p",null,description),metadata&&Array.from(metadata.entries()).map(function(_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),layerIndex=_ref2[0],_ref2$=_ref2[1],layerName=_ref2$.name,metadataRecord=_ref2$.metadata;return metadataRecord&&Object.entries(metadataRecord).length>0?/*#__PURE__*/external_react_default.a.createElement("details",{key:layerIndex},/*#__PURE__*/external_react_default.a.createElement("summary",null,layerName),/*#__PURE__*/external_react_default.a.createElement("div",{className:"metadata-container"},/*#__PURE__*/external_react_default.a.createElement("table",null,/*#__PURE__*/external_react_default.a.createElement("tbody",null,Object.entries(metadataRecord).map(function(_ref3){var _ref4=Object(slicedToArray["a" /* default */])(_ref3,2),key=_ref4[0],value=_ref4[1];return/*#__PURE__*/external_react_default.a.createElement("tr",{key:key},/*#__PURE__*/external_react_default.a.createElement("th",{title:key},key),/*#__PURE__*/external_react_default.a.createElement("td",{title:value},value));}))))):null;}));}
// CONCATENATED MODULE: ./src/components/description/DescriptionSubscriber.js
var DESCRIPTION_DATA_TYPES=['raster'];function DescriptionSubscriber(props){var coordinationScopes=props.coordinationScopes,descriptionOverride=props.description,removeGridComponent=props.removeGridComponent,theme=props.theme;var loaders=Object(hooks["h" /* useLoaders */])();// Get "props" from the coordination space.
var _useCoordination=Object(hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].description,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,1),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,layers=_useCoordination2$.spatialLayers;var _useReady=Object(components_hooks["c" /* useReady */])(DESCRIPTION_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useDescription=Object(data_hooks["c" /* useDescription */])(loaders,dataset),_useDescription2=Object(slicedToArray["a" /* default */])(_useDescription,1),description=_useDescription2[0];var _useRasterData=Object(data_hooks["h" /* useRasterData */])(loaders,dataset,setItemIsReady,function(){},false),_useRasterData2=Object(slicedToArray["a" /* default */])(_useRasterData,3),raster=_useRasterData2[0],imageLayerLoaders=_useRasterData2[1],imageLayerMeta=_useRasterData2[2];var metadata=Object(external_react_["useMemo"])(function(){var result=new Map();if(layers&&layers.length>0&&raster&&imageLayerMeta&&imageLayerLoaders){var rasterLayers=layers.filter(function(layer){return layer.type==='raster';});rasterLayers.forEach(function(layer){if(imageLayerMeta[layer.index]){// Want to ensure that layer index is a string.
result.set("".concat(layer.index),{name:raster.layers[layer.index].name,metadata:imageLayerLoaders[layer.index].getMetadata()});}});}return result;},[raster,layers,imageLayerMeta,imageLayerLoaders]);return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Data Set",removeGridComponent:removeGridComponent,isScroll:true,theme:theme,isReady:isReady},/*#__PURE__*/external_react_default.a.createElement(Description,{description:descriptionOverride||description,metadata:metadata}));}
// EXTERNAL MODULE: ./src/components/status/StatusSubscriber.js
var StatusSubscriber = __webpack_require__(133);

// EXTERNAL MODULE: ./src/components/genes/GenesSubscriber.js
var GenesSubscriber = __webpack_require__(134);

// EXTERNAL MODULE: ./src/components/sets/CellSetsManagerSubscriber.js
var CellSetsManagerSubscriber = __webpack_require__(135);

// EXTERNAL MODULE: ./src/components/scatterplot/ScatterplotSubscriber.js + 2 modules
var ScatterplotSubscriber = __webpack_require__(123);

// EXTERNAL MODULE: ./src/components/spatial/SpatialSubscriber.js + 2 modules
var SpatialSubscriber = __webpack_require__(122);

// EXTERNAL MODULE: ./src/components/heatmap/HeatmapSubscriber.js + 1 modules
var HeatmapSubscriber = __webpack_require__(124);

// EXTERNAL MODULE: ./src/components/layer-controller/LayerControllerSubscriber.js + 1 modules
var LayerControllerSubscriber = __webpack_require__(137);

// EXTERNAL MODULE: external "react-dom"
var external_react_dom_ = __webpack_require__(172);
var external_react_dom_default = /*#__PURE__*/__webpack_require__.n(external_react_dom_);

// EXTERNAL MODULE: external "dynamic-import-polyfill"
var external_dynamic_import_polyfill_ = __webpack_require__(173);
var external_dynamic_import_polyfill_default = /*#__PURE__*/__webpack_require__.n(external_dynamic_import_polyfill_);

// EXTERNAL MODULE: external "higlass-register"
var external_higlass_register_ = __webpack_require__(174);
var external_higlass_register_default = /*#__PURE__*/__webpack_require__.n(external_higlass_register_);

// EXTERNAL MODULE: external "higlass-zarr-datafetchers"
var external_higlass_zarr_datafetchers_ = __webpack_require__(164);

// EXTERNAL MODULE: ./src/components/utils.js
var components_utils = __webpack_require__(8);

// CONCATENATED MODULE: ./src/components/higlass/HiGlassLazy.js
var PIXI_BUNDLE_VERSION=package_0.dependencies['window-pixi'];var HIGLASS_BUNDLE_VERSION=package_0.dependencies.higlass;var BUNDLE_FILE_EXT= false?undefined:'min.js';var PIXI_BUNDLE_URL="https://unpkg.com/window-pixi@".concat(PIXI_BUNDLE_VERSION,"/dist/pixi.").concat(BUNDLE_FILE_EXT);var HIGLASS_BUNDLE_URL="https://unpkg.com/higlass@".concat(HIGLASS_BUNDLE_VERSION,"/dist/hglib.").concat(BUNDLE_FILE_EXT);// Initialize the dynamic __import__() function.
external_dynamic_import_polyfill_default.a.initialize();// Register the zarr-multivec plugin data fetcher.
// References:
// https://github.com/higlass/higlass-register
// https://github.com/higlass/higlass-zarr-datafetchers
external_higlass_register_default()({dataFetcher:external_higlass_zarr_datafetchers_["ZarrMultivecDataFetcher"],config:external_higlass_zarr_datafetchers_["ZarrMultivecDataFetcher"].config},{pluginType:'dataFetcher'});// Lazy load the HiGlass React component,
// using dynamic imports with absolute URLs.
var HiGlassComponent=external_react_default.a.lazy(function(){if(!window.React){window.React=external_react_default.a;}if(!window.ReactDOM){window.ReactDOM=external_react_dom_default.a;}return new Promise(function(resolve){var handleImportError=function handleImportError(e){console.warn(e);resolve(Object(components_utils["f" /* asEsModule */])(Object(components_utils["l" /* createWarningComponent */])({title:'Could not load HiGlass',message:'The HiGlass scripts could not be dynamically imported.'})));};// eslint-disable-next-line no-undef
__import__(PIXI_BUNDLE_URL).then(function(){// eslint-disable-next-line no-undef
__import__(HIGLASS_BUNDLE_URL).then(function(){// React.lazy promise must return an ES module with the
// component as the default export.
resolve(Object(components_utils["f" /* asEsModule */])(window.hglib.HiGlassComponent));}).catch(handleImportError);}).catch(handleImportError);});});// Use an arbitrary size for normalization of the zoom level.
// (800 means 800 px width for the full genome)
var HG_SIZE=800;/**
   * A wrapper around HiGlass (http://higlass.io/).
   * The HiGlassComponent react component is loaded lazily.
   * @prop {object} hgViewConfig A HiGlass viewconfig object to pass
   * to the HiGlassComponent viewConfig prop.
   * @prop {object} hgOptions An optional HiGlass object to pass
   * to the HiGlassComponent hgOptions prop.
   * @prop {function} removeGridComponent A grid component removal handler
   * to pass to the TitleInfo component.
   * @prop {function} onReady A callback function to signal that the component is ready.
   */function HiGlassLazy(props){var coordinationScopes=props.coordinationScopes,theme=props.theme,hgViewConfigProp=props.hgViewConfig,hgOptionsProp=props.hgOptions,genomeSize=props.genomeSize,height=props.height;// Get "props" from the coordination space.
var _useCoordination=Object(hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].higlass,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,2),_useCoordination2$=_useCoordination2[0],genomicZoomX=_useCoordination2$.genomicZoomX,genomicZoomY=_useCoordination2$.genomicZoomY,genomicTargetX=_useCoordination2$.genomicTargetX,genomicTargetY=_useCoordination2$.genomicTargetY,_useCoordination2$2=_useCoordination2[1],setGenomicZoomX=_useCoordination2$2.setGenomicZoomX,setGenomicZoomY=_useCoordination2$2.setGenomicZoomY,setGenomicTargetX=_useCoordination2$2.setGenomicTargetX,setGenomicTargetY=_useCoordination2$2.setGenomicTargetY;// eslint-disable-next-line no-unused-vars
var _useGridItemSize=Object(components_hooks["b" /* useGridItemSize */])(),_useGridItemSize2=Object(slicedToArray["a" /* default */])(_useGridItemSize,3),width=_useGridItemSize2[0],computedHeight=_useGridItemSize2[1],containerRef=_useGridItemSize2[2];var _useState=Object(external_react_["useState"])(),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),hgInstance=_useState2[0],setHgInstance=_useState2[1];var isActiveRef=Object(external_react_["useRef"])();var hgOptions=Object(external_react_["useMemo"])(function(){return Object(objectSpread2["a" /* default */])({},hgOptionsProp,{theme:theme});},[hgOptionsProp,theme]);var hgViewConfig=Object(external_react_["useMemo"])(function(){// HiGlass needs the start and end absolute genome coordinates
var centerX=genomicTargetX;var genomesPerUnitX=genomeSize/Math.pow(2,genomicZoomX);var unitX=width/HG_SIZE;var initialXDomain=[centerX-genomesPerUnitX*unitX/2,centerX+genomesPerUnitX*unitX/2];var centerY=genomicTargetY;var genomesPerUnitY=genomeSize/Math.pow(2,genomicZoomY);var unitY=height/HG_SIZE;var initialYDomain=[centerY-genomesPerUnitY*unitY/2,centerY+genomesPerUnitY*unitY/2];return{editable:false,zoomFixed:false,trackSourceServers:['//higlass.io/api/v1'],exportViewUrl:'//higlass.io/api/v1/viewconfs',views:[Object(objectSpread2["a" /* default */])({uid:'main'},hgViewConfigProp,{initialXDomain:initialXDomain,initialYDomain:initialYDomain})],zoomLocks:{locksByViewUid:{},locksDict:{}},locationLocks:{locksByViewUid:{},locksDict:{}},valueScaleLocks:{locksByViewUid:{},locksDict:{}}};},[genomicTargetX,genomeSize,genomicZoomX,width,genomicTargetY,genomicZoomY,height,hgViewConfigProp]);Object(external_react_["useEffect"])(function(){var handleMouseEnter=function handleMouseEnter(){isActiveRef.current=true;};var handleMouseLeave=function handleMouseLeave(){isActiveRef.current=false;};var container=containerRef.current;container.addEventListener('mouseenter',handleMouseEnter);container.addEventListener('mouseleave',handleMouseLeave);return function(){container.removeEventListener('mouseenter',handleMouseEnter);container.removeEventListener('mouseenter',handleMouseLeave);};},[containerRef]);Object(external_react_["useEffect"])(function(){if(!hgInstance){return function(){};}hgInstance.api.on('viewConfig',function(viewConfigString){// Only set if the user mouse is over this component ("is active").
// Otherwise, this could be an initial on viewConfig change callback from a sibling,
// which will cause an infinite loop.
if(!isActiveRef.current){return;}var viewConfig=JSON.parse(viewConfigString);var xDomain=viewConfig.views[0].initialXDomain;var yDomain=viewConfig.views[0].initialYDomain;var nextGenomicZoomX=Math.log2(genomeSize/((xDomain[1]-xDomain[0])*(HG_SIZE/width)));var nextGenomicZoomY=Math.log2(genomeSize/((yDomain[1]-yDomain[0])*(HG_SIZE/height)));var nextGenomicTargetX=xDomain[0]+(xDomain[1]-xDomain[0])/2;var nextGenomicTargetY=yDomain[0]+(yDomain[1]-yDomain[0])/2;setGenomicZoomX(nextGenomicZoomX);setGenomicZoomY(nextGenomicZoomY);setGenomicTargetX(nextGenomicTargetX);setGenomicTargetY(nextGenomicTargetY);});return function(){return hgInstance.api.off('viewConfig');};},[hgInstance,genomeSize,width,height,setGenomicZoomX,setGenomicZoomY,setGenomicTargetX,setGenomicTargetY]);return/*#__PURE__*/external_react_default.a.createElement("div",{className:"higlass-wrapper-parent"},/*#__PURE__*/external_react_default.a.createElement("div",{className:"higlass-wrapper",ref:containerRef,style:{height:"".concat(height,"px")}},/*#__PURE__*/external_react_default.a.createElement(external_react_["Suspense"],{fallback:/*#__PURE__*/external_react_default.a.createElement("div",null,"Loading...")},/*#__PURE__*/external_react_default.a.createElement(HiGlassComponent,{ref:setHgInstance,zoomFixed:false,viewConfig:hgViewConfig,options:hgOptions}))));}HiGlassLazy.defaultProps={hgOptions:{bounded:true,pixelPreciseMarginPadding:true,containerPaddingX:0,containerPaddingY:0,sizeMode:'default'},genomeSize:3100000000};
// CONCATENATED MODULE: ./src/components/higlass/HiGlassSubscriber.js
var HIGLASS_DATA_TYPES=[];/**
 * A wrapper around HiGlass (http://higlass.io/).
 * The HiGlassComponent react component is loaded lazily.
 * @prop {object} hgViewConfig A HiGlass viewconfig object to pass
 * to the HiGlassComponent viewConfig prop.
 * @prop {object} hgOptions An optional HiGlass object to pass
 * to the HiGlassComponent hgOptions prop.
 * @prop {function} removeGridComponent A grid component removal handler
 * to pass to the TitleInfo component.
 * @prop {function} onReady A callback function to signal that the component is ready.
 */function HiGlassSubscriber(props){var coordinationScopes=props.coordinationScopes,theme=props.theme,hgViewConfig=props.hgViewConfig,removeGridComponent=props.removeGridComponent;// eslint-disable-next-line no-unused-vars
var _useGridItemSize=Object(components_hooks["b" /* useGridItemSize */])(),_useGridItemSize2=Object(slicedToArray["a" /* default */])(_useGridItemSize,3),width=_useGridItemSize2[0],height=_useGridItemSize2[1],containerRef=_useGridItemSize2[2];// eslint-disable-next-line no-unused-vars
var _useReady=Object(components_hooks["c" /* useReady */])(HIGLASS_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// eslint-disable-next-line no-unused-vars
var _useUrls=Object(components_hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];return/*#__PURE__*/external_react_default.a.createElement("div",{className:"higlass-title-wrapper"},/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"HiGlass",removeGridComponent:removeGridComponent,theme:theme,isReady:isReady,urls:urls},/*#__PURE__*/external_react_default.a.createElement("div",{className:"higlass-lazy-wrapper",ref:containerRef},/*#__PURE__*/external_react_default.a.createElement(HiGlassLazy,{coordinationScopes:coordinationScopes,theme:theme,hgViewConfig:hgViewConfig,height:height}))));}
// EXTERNAL MODULE: ./src/components/sets/CellSetSizesPlotSubscriber.js
var CellSetSizesPlotSubscriber = __webpack_require__(136);

// CONCATENATED MODULE: ./src/components/higlass/GenomicProfilesSubscriber.js
var GENOMIC_PROFILES_DATA_TYPES=['genomic-profiles'];var REFERENCE_TILESETS={hg38:{chromosomes:'NyITQvZsS_mOFNlz5C2LJg',genes:'P0PLbQMwTYGy-5uPIQid7A'},hg19:{chromosomes:'N12wVGG9SPiTkk03yUayUw',genes:'OHJakQICQD6gTD7skx4EWA'},mm9:{chromosomes:'WAVhNHYxQVueq6KulwgWiQ',genes:'GUm5aBiLRCyz2PsBea7Yzg'},mm10:{chromosomes:'EtrWT0VtScixmsmwFSd7zg',genes:'QDutvmyiSrec5nX4pA5WGQ'}};/**
 * A component for visualization of genomic profiles
 * with genome-wide bar plots.
 * @param {object} props The component props.
 * @param {string} props.profileTrackUidKey The key in the genomic profiles row_info that identifies
 * each track. By default, 'path'.
 * @param {string} props.profileTrackNameKey The key in the genomic profiles row_info that
 * gives a name for each track. By default, null. When null is provided, uses the
 * profileTrackUidKey for both UID and name. If UID values are path arrays,
 * they will be converted to name strings.
 * @param {string} props.higlassServer The URL for the higlass server used to retreive
 * reference tilesets for the chromosome and gene annotations.
 * @param {string} props.assembly The genome assembly to use for the reference
 * tilesets for the chromosome and gene annotations.
 */function GenomicProfilesSubscriber(props){var coordinationScopes=props.coordinationScopes,theme=props.theme,removeGridComponent=props.removeGridComponent,_props$profileTrackUi=props.profileTrackUidKey,profileTrackUidKey=_props$profileTrackUi===void 0?'path':_props$profileTrackUi,_props$profileTrackNa=props.profileTrackNameKey,profileTrackNameKey=_props$profileTrackNa===void 0?null:_props$profileTrackNa,_props$higlassServer=props.higlassServer,higlassServer=_props$higlassServer===void 0?'https://higlass.io/api/v1':_props$higlassServer,_props$assembly=props.assembly,assembly=_props$assembly===void 0?'hg38':_props$assembly;// eslint-disable-next-line no-unused-vars
var _useGridItemSize=Object(components_hooks["b" /* useGridItemSize */])(),_useGridItemSize2=Object(slicedToArray["a" /* default */])(_useGridItemSize,3),width=_useGridItemSize2[0],height=_useGridItemSize2[1],containerRef=_useGridItemSize2[2];var loaders=Object(hooks["h" /* useLoaders */])();// Get "props" from the coordination space.
var _useCoordination=Object(hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].genomicProfiles,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,1),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,cellSetColor=_useCoordination2$.cellSetColor,cellSetSelection=_useCoordination2$.cellSetSelection;// eslint-disable-next-line no-unused-vars
var _useReady=Object(components_hooks["c" /* useReady */])(GENOMIC_PROFILES_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// eslint-disable-next-line no-unused-vars
var _useUrls=Object(components_hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useGenomicProfilesDa=Object(data_hooks["e" /* useGenomicProfilesData */])(loaders,dataset,setItemIsReady,addUrl,true),_useGenomicProfilesDa2=Object(slicedToArray["a" /* default */])(_useGenomicProfilesDa,1),genomicProfilesAttrs=_useGenomicProfilesDa2[0];var hgViewConfig=Object(external_react_["useMemo"])(function(){if(!genomicProfilesAttrs||urls.length!==1){return null;}// Get the URL to the data file from the downloadable URLs array.
var url=urls[0].url;// Set up the colors to use in the HiGlass view config based on the current theme.
var foregroundColor=theme==='dark'?'#C0C0C0':'#000000';var backgroundColor=theme==='dark'?'#000000':'#f1f1f1';var dimColor=theme==='dark'?'dimgray':'silver';// Define the "reference tracks" for chromosome labels and gene annotations.
var referenceTracks=[{type:'horizontal-chromosome-labels',server:higlassServer,tilesetUid:REFERENCE_TILESETS[assembly].chromosomes,uid:'chromosome-labels',options:{color:foregroundColor,fontSize:12,fontIsLeftAligned:false,showMousePosition:true,mousePositionColor:foregroundColor},height:30},{type:'horizontal-gene-annotations',server:higlassServer,tilesetUid:REFERENCE_TILESETS[assembly].genes,uid:'gene-annotations',options:{name:'Gene Annotations (hg38)',fontSize:10,labelPosition:'hidden',labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,geneAnnotationHeight:16,geneLabelPosition:'outside',geneStrandSpacing:4,showMousePosition:true,mousePositionColor:foregroundColor,plusStrandColor:foregroundColor,minusStrandColor:foregroundColor,labelColor:'black',labelBackgroundColor:backgroundColor,trackBorderWidth:0,trackBorderColor:'black'},height:70}];// Determine the heights of each profile track by subtracting the
// reference track heights from the component height, then
// dividing by the number of profiles.
var referenceTracksHeightSum=Object(external_d3_array_["sum"])(referenceTracks.map(function(t){return t.height;}));var profileTracksHeightSum=height-referenceTracksHeightSum-10;var profileTrackHeight=profileTracksHeightSum/genomicProfilesAttrs.row_infos.length;var profileTracks=genomicProfilesAttrs.row_infos.map(function(rowInfo,i){var _cellSetColor$find;// Get the uid for the HiGlass track.
var trackUid=rowInfo[profileTrackUidKey];// When profiles correspond to cell sets, the profile UID will be the cell set path array.
var isPath=Array.isArray(trackUid);// Get the name for the HiGlass track: try the name key first,
// then try the tail of the path, and otherwise the track UID.
// eslint-disable-next-line no-nested-ternary
var trackName=profileTrackNameKey?rowInfo[profileTrackNameKey]:isPath?trackUid[trackUid.length-1]:trackUid;// If the uid is a path, then try to get the corresponding cell set's color,
// if it is currently selected.
var setInSelection=isPath?cellSetSelection===null||cellSetSelection===void 0?void 0:cellSetSelection.find(function(s){return isEqual_default()(s,trackUid);}):false;var setColor=isPath?cellSetColor===null||cellSetColor===void 0?void 0:(_cellSetColor$find=cellSetColor.find(function(s){return isEqual_default()(s.path,trackUid);}))===null||_cellSetColor$find===void 0?void 0:_cellSetColor$find.color:null;// Get the track UID as a string before passing to HiGlass.
var trackUidString=isPath?trackUid.join('__'):trackUid;// Create the HiGlass track definition for this profile.
var track={type:'horizontal-bar',uid:"bar-track-".concat(trackUidString),data:{type:'zarr-multivec',url:url,row:i},options:{name:trackName,showMousePosition:true,mousePositionColor:foregroundColor,labelColor:theme==='dark'?'white':'black',labelBackgroundColor:theme==='dark'?'black':'white',labelShowAssembly:false},height:profileTrackHeight};// Set the track color if it is available.
if(setColor&&setInSelection){var c=setColor;track.options.barFillColor="rgb(".concat(c[0],",").concat(c[1],",").concat(c[2],")");}else{track.options.barFillColor=dimColor;}return track;});// Create the higlass view.
// The HiGlassLazy component will fill in the fields 'uid',
// 'initialXDomain', and 'initialYDomain'.
var hgView={tracks:{top:[].concat(referenceTracks,Object(toConsumableArray["a" /* default */])(profileTracks)),left:[],center:[],right:[],bottom:[],whole:[],gallery:[]},layout:{w:12,h:12,x:0,y:0,static:false}};return hgView;},[genomicProfilesAttrs,urls,theme,height,profileTrackUidKey,profileTrackNameKey,cellSetSelection,cellSetColor,higlassServer,assembly]);// Reset file URLs and loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);return/*#__PURE__*/external_react_default.a.createElement("div",{className:"higlass-title-wrapper"},/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Genomic Profiles",removeGridComponent:removeGridComponent,theme:theme,isReady:isReady,urls:urls},/*#__PURE__*/external_react_default.a.createElement("div",{className:"higlass-lazy-wrapper",ref:containerRef},hgViewConfig?/*#__PURE__*/external_react_default.a.createElement(HiGlassLazy,{coordinationScopes:coordinationScopes,theme:theme,hgViewConfig:hgViewConfig,height:height}):null)));}
// EXTERNAL MODULE: external "lodash/clamp"
var clamp_ = __webpack_require__(46);
var clamp_default = /*#__PURE__*/__webpack_require__.n(clamp_);

// EXTERNAL MODULE: ./src/components/vega/index.js + 3 modules
var vega = __webpack_require__(84);

// CONCATENATED MODULE: ./src/components/genes/ExpressionHistogram.js
/**
 * Gene expression histogram displayed as a bar chart,
 * implemented with the VegaPlot component.
 * @param {object} props
 * @param {string[]} props.geneSelection The list of genes
 * currently selected.
 * @param {object[]} props.data The expression data, an array
 * of objects with properties `value` and `gene`.
 * @param {string} props.theme The name of the current Vitessce theme.
 * @param {number} props.width The container width.
 * @param {number} props.height The container height.
 * @param {number} props.marginRight The size of the margin
 * on the right side of the plot, to account for the vega menu button.
 * By default, 90.
 * @param {number} props.marginBottom The size of the margin
 * on the bottom of the plot, to account for long x-axis labels.
 * By default, 50.
 */function ExpressionHistogram(props){var geneSelection=props.geneSelection,data=props.data,theme=props.theme,width=props.width,height=props.height,_props$marginRight=props.marginRight,marginRight=_props$marginRight===void 0?90:_props$marginRight,_props$marginBottom=props.marginBottom,marginBottom=_props$marginBottom===void 0?50:_props$marginBottom;var xTitle=geneSelection&&geneSelection.length>=1?'Normalized Expression Value':'Total Normalized Transcript Count';var spec={mark:{type:'bar'},encoding:{x:{field:'value',type:'quantitative',bin:{maxbins:50},title:xTitle},y:{type:'quantitative',aggregate:'count',title:'Number of Cells'},color:{value:'gray'}},width:clamp_default()(width-marginRight,10,Infinity),height:clamp_default()(height-marginBottom,10,Infinity),config:vega["b" /* VEGA_THEMES */][theme]};return/*#__PURE__*/external_react_default.a.createElement(vega["c" /* VegaPlot */],{data:data,spec:spec});}
// CONCATENATED MODULE: ./src/components/genes/ExpressionHistogramSubscriber.js
var EXPRESSION_HISTOGRAM_DATA_TYPES=['expression-matrix'];/**
 * A subscriber component for `ExpressionHistogram`,
 * which listens for gene selection updates and
 * `GRID_RESIZE` events.
 * @param {object} props
 * @param {function} props.removeGridComponent The grid component removal function.
 * @param {object} props.coordinationScopes An object mapping coordination
 * types to coordination scopes.
 * @param {string} props.theme The name of the current Vitessce theme.
 */function ExpressionHistogramSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme;var loaders=Object(hooks["h" /* useLoaders */])();// Get "props" from the coordination space.
var _useCoordination=Object(hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].expressionHistogram,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,1),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,geneSelection=_useCoordination2$.geneSelection;var _useGridItemSize=Object(components_hooks["b" /* useGridItemSize */])(),_useGridItemSize2=Object(slicedToArray["a" /* default */])(_useGridItemSize,3),width=_useGridItemSize2[0],height=_useGridItemSize2[1],containerRef=_useGridItemSize2[2];var _useUrls=Object(components_hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useReady=Object(components_hooks["c" /* useReady */])(EXPRESSION_HISTOGRAM_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset file URLs and loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useExpressionMatrixD=Object(data_hooks["d" /* useExpressionMatrixData */])(loaders,dataset,setItemIsReady,addUrl,true),_useExpressionMatrixD2=Object(slicedToArray["a" /* default */])(_useExpressionMatrixD,1),expressionMatrix=_useExpressionMatrixD2[0];var firstGeneSelected=geneSelection&&geneSelection.length>=1?geneSelection[0]:null;// From the expression matrix and the list of selected genes,
// generate the array of data points for the histogram.
var data=Object(external_react_["useMemo"])(function(){if(firstGeneSelected&&expressionMatrix){var numGenes=expressionMatrix.cols.length;var geneIndex=expressionMatrix.cols.indexOf(firstGeneSelected);if(geneIndex!==-1){// Create new cellColors map based on the selected gene.
return expressionMatrix.rows.map(function(cellId,cellIndex){var value=expressionMatrix.matrix[cellIndex*numGenes+geneIndex];var normValue=value*100/255;return{value:normValue,gene:firstGeneSelected};});}}else if(expressionMatrix){var _numGenes=expressionMatrix.cols.length;return expressionMatrix.rows.map(function(cellId,cellIndex){var values=expressionMatrix.matrix.subarray(cellIndex*_numGenes,(cellIndex+1)*_numGenes);var sumValue=Object(external_d3_array_["sum"])(values)*100/255;return{value:sumValue,gene:null};});}return null;},[expressionMatrix,firstGeneSelected]);return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Expression Histogram".concat(firstGeneSelected?" (".concat(firstGeneSelected,")"):''),removeGridComponent:removeGridComponent,urls:urls,theme:theme,isReady:isReady},/*#__PURE__*/external_react_default.a.createElement("div",{ref:containerRef,className:"vega-container"},/*#__PURE__*/external_react_default.a.createElement(ExpressionHistogram,{geneSelection:geneSelection,data:data,theme:theme,width:width,height:height})));}
// CONCATENATED MODULE: ./src/components/sets/hooks.js
/**
 * Get expression data for the cells
 * in the selected cell sets.
 * @param {object} expressionMatrix
 * @param {string[]} expressionMatrix.rows Cell IDs.
 * @param {string[]} expressionMatrix.cols Gene names.
 * @param {Uint8Array} expressionMatrix.matrix The
 * flattened expression matrix as a typed array.
 * @param {object} cellSets The cell sets from the dataset.
 * @param {object} additionalCellSets The user-defined cell sets
 * from the coordination space.
 * @param {array} geneSelection Array of selected genes.
 * @param {array} cellSetSelection Array of selected cell set paths.
 * @param {object[]} cellSetColor Array of objects with properties
 * `path` and `color`.
 */function useExpressionByCellSet(expressionMatrix,cellSets,additionalCellSets,geneSelection,cellSetSelection,cellSetColor){var mergedCellSets=Object(external_react_["useMemo"])(function(){return Object(components_utils["n" /* mergeCellSets */])(cellSets,additionalCellSets);},[cellSets,additionalCellSets]);// From the expression matrix and the list of selected genes / cell sets,
// generate the array of data points for the plot.
var _useMemo=Object(external_react_["useMemo"])(function(){if(mergedCellSets&&cellSetSelection&&geneSelection&&geneSelection.length>=1&&expressionMatrix){var cellObjects=Object(cell_set_utils["r" /* treeToObjectsBySetNames */])(mergedCellSets,cellSetSelection,cellSetColor);var firstGeneSelected=geneSelection[0];var geneIndex=expressionMatrix.cols.indexOf(firstGeneSelected);if(geneIndex!==-1){var numGenes=expressionMatrix.cols.length;// Create new cellColors map based on the selected gene.
var exprMax=-Infinity;var exprValues=cellObjects.map(function(cell){var cellIndex=expressionMatrix.rows.indexOf(cell.obsId);var value=expressionMatrix.matrix[cellIndex*numGenes+geneIndex];var normValue=value*100/255;exprMax=Math.max(normValue,exprMax);return{value:normValue,gene:firstGeneSelected,set:cell.name};});return[exprValues,exprMax];}}return[null,null];},[expressionMatrix,geneSelection,mergedCellSets,cellSetSelection,cellSetColor]),_useMemo2=Object(slicedToArray["a" /* default */])(_useMemo,2),expressionArr=_useMemo2[0],expressionMax=_useMemo2[1];// From the cell sets hierarchy and the list of selected cell sets,
// generate the array of set sizes data points for the bar plot.
var setArr=Object(external_react_["useMemo"])(function(){return mergedCellSets&&cellSetSelection?Object(cell_set_utils["s" /* treeToSetSizesBySetNames */])(mergedCellSets,cellSetSelection,cellSetColor):[];},[mergedCellSets,cellSetSelection,cellSetColor]);return[expressionArr,setArr,expressionMax];}
// EXTERNAL MODULE: ./src/components/sets/utils.js
var sets_utils = __webpack_require__(16);

// CONCATENATED MODULE: ./src/components/sets/CellSetExpressionPlot.js
/**
 * Gene expression histogram displayed as a bar chart,
 * implemented with the VegaPlot component.
 * @param {object} props
 * @param {object[]} props.data The expression data, an array
 * of objects with properties `value`, `gene`, and `set`.
 * @param {number} props.domainMax The maximum gene expression value.
 * @param {object[]} props.colors An object for each
 * cell set, with properties `name` and `color`.
 * @param {string} props.theme The name of the current Vitessce theme.
 * @param {number} props.width The container width.
 * @param {number} props.height The container height.
 * @param {number} props.marginRight The size of the margin
 * on the right side of the plot, to account for the vega menu button.
 * By default, 90.
 * @param {number} props.marginBottom The size of the margin
 * on the bottom of the plot, to account for long x-axis labels.
 * By default, 50.
 */function CellSetExpressionPlot(props){var _props$domainMax=props.domainMax,domainMax=_props$domainMax===void 0?100:_props$domainMax,colors=props.colors,data=props.data,theme=props.theme,width=props.width,height=props.height,_props$marginRight=props.marginRight,marginRight=_props$marginRight===void 0?90:_props$marginRight,_props$marginBottom=props.marginBottom,marginBottom=_props$marginBottom===void 0?120:_props$marginBottom;// Manually set the color scale so that Vega-Lite does
// not choose the colors automatically.
var colorScale={domain:colors.map(function(d){return d.name;}),range:colors.map(function(d){return Object(sets_utils["c" /* colorArrayToString */])(d.color);})};var plotWidth=clamp_default()(width-marginRight,10,Infinity);var plotHeight=clamp_default()(height-marginBottom,10,Infinity);var numBands=colors.length;var bandWidth=plotWidth/numBands;var rectColor=theme==='dark'?'white':'black';var spec={$schema:'https://vega.github.io/schema/vega/v5.json',description:'A violin plot showing distributions of expression levels for selected cell sets.',width:plotWidth,height:plotHeight,config:Object(objectSpread2["a" /* default */])({},vega["b" /* VEGA_THEMES */][theme],{axisBand:{bandPosition:1,tickExtra:true,tickOffset:0}}),signals:[{name:'bandWidth',value:bandWidth},{name:'width',value:plotWidth},{name:'height',value:plotHeight},{name:'trim',value:true}],data:[{name:'density',source:vega["a" /* DATASET_NAME */],transform:[{type:'kde',field:'value',groupby:['set'],bandwidth:0,extent:[0,domainMax]}]},{name:'stats',source:vega["a" /* DATASET_NAME */],transform:[{type:'aggregate',groupby:['set'],fields:['value','value','value'],ops:['q1','median','q3'],as:['q1','median','q3']}]}],scales:[{name:'layout',type:'band',range:'width',domain:{data:vega["a" /* DATASET_NAME */],field:'set'}},{name:'yscale',type:'linear',range:'height',domain:[0,domainMax]},{name:'wscale',type:'linear',range:[0,{signal:'bandWidth'}],domain:{data:'density',field:'density'}},{name:'wscaleReversed',type:'linear',reverse:true,range:[0,{signal:'bandWidth'}],domain:{data:'density',field:'density'}},Object(objectSpread2["a" /* default */])({name:'color',type:'ordinal'},colorScale)],axes:[{orient:'left',scale:'yscale',zindex:1,title:'Normalized Expression Value'},{orient:'bottom',scale:'layout',tickCount:5,zindex:1,title:'Cell Set',labelAngle:-45,labelAlign:'right'}],marks:[{type:'group',from:{facet:{data:'density',name:'violin',groupby:'set'}},encode:{enter:{xc:{scale:'layout',field:'set',band:0.5},width:{signal:'bandWidth'},height:{signal:'height'}}},data:[{name:'summary',source:'stats',transform:[{type:'filter',expr:'datum.set === parent.set'}]}],marks:[{type:'area',orient:'vertical',from:{data:'violin'},encode:{enter:{fill:{scale:'color',field:{parent:'set'}}},update:{width:{scale:'wscale',field:'density'},xc:{signal:'bandWidth / 2'},y2:{scale:'yscale',field:'value'},y:{scale:'yscale',value:0}}}},{type:'area',orient:'vertical',from:{data:'violin'},encode:{enter:{fill:{scale:'color',field:{parent:'set'}}},update:{width:{scale:'wscaleReversed',field:'density'},xc:{signal:'bandWidth'},y2:{scale:'yscale',field:'value'},y:{scale:'yscale',value:0}}}},{type:'rect',from:{data:'summary'},encode:{enter:{fill:{value:rectColor},width:{value:2}},update:{y:{scale:'yscale',field:'q1'},y2:{scale:'yscale',field:'q3'},xc:{signal:'bandWidth / 2'}}}},{type:'rect',from:{data:'summary'},encode:{enter:{fill:{value:rectColor},height:{value:2},width:{value:8}},update:{y:{scale:'yscale',field:'median'},xc:{signal:'bandWidth / 2'}}}}]}]};return/*#__PURE__*/external_react_default.a.createElement(vega["c" /* VegaPlot */],{data:data,spec:spec});}
// CONCATENATED MODULE: ./src/components/sets/CellSetExpressionPlotSubscriber.js
var CELL_SET_EXPRESSION_DATA_TYPES=['cell-sets','expression-matrix'];/**
 * A subscriber component for `CellSetExpressionPlot`,
 * which listens for gene selection updates and
 * `GRID_RESIZE` events.
 * @param {object} props
 * @param {function} props.removeGridComponent The grid component removal function.
 * @param {object} props.coordinationScopes An object mapping coordination
 * types to coordination scopes.
 * @param {string} props.theme The name of the current Vitessce theme.
 */function CellSetExpressionPlotSubscriber(props){var coordinationScopes=props.coordinationScopes,removeGridComponent=props.removeGridComponent,theme=props.theme;var loaders=Object(hooks["h" /* useLoaders */])();// Get "props" from the coordination space.
var _useCoordination=Object(hooks["d" /* useCoordination */])(coordination["b" /* COMPONENT_COORDINATION_TYPES */].cellSetExpression,coordinationScopes),_useCoordination2=Object(slicedToArray["a" /* default */])(_useCoordination,1),_useCoordination2$=_useCoordination2[0],dataset=_useCoordination2$.dataset,geneSelection=_useCoordination2$.geneSelection,cellSetSelection=_useCoordination2$.cellSetSelection,cellSetColor=_useCoordination2$.cellSetColor,additionalCellSets=_useCoordination2$.additionalCellSets;var _useGridItemSize=Object(components_hooks["b" /* useGridItemSize */])(),_useGridItemSize2=Object(slicedToArray["a" /* default */])(_useGridItemSize,3),width=_useGridItemSize2[0],height=_useGridItemSize2[1],containerRef=_useGridItemSize2[2];var _useUrls=Object(components_hooks["d" /* useUrls */])(),_useUrls2=Object(slicedToArray["a" /* default */])(_useUrls,3),urls=_useUrls2[0],addUrl=_useUrls2[1],resetUrls=_useUrls2[2];var _useReady=Object(components_hooks["c" /* useReady */])(CELL_SET_EXPRESSION_DATA_TYPES),_useReady2=Object(slicedToArray["a" /* default */])(_useReady,3),isReady=_useReady2[0],setItemIsReady=_useReady2[1],resetReadyItems=_useReady2[2];// Reset file URLs and loader progress when the dataset has changed.
Object(external_react_["useEffect"])(function(){resetUrls();resetReadyItems();// eslint-disable-next-line react-hooks/exhaustive-deps
},[loaders,dataset]);// Get data from loaders using the data hooks.
var _useExpressionMatrixD=Object(data_hooks["d" /* useExpressionMatrixData */])(loaders,dataset,setItemIsReady,addUrl,true),_useExpressionMatrixD2=Object(slicedToArray["a" /* default */])(_useExpressionMatrixD,1),expressionMatrix=_useExpressionMatrixD2[0];var _useCellSetsData=Object(data_hooks["a" /* useCellSetsData */])(loaders,dataset,setItemIsReady,addUrl,true),_useCellSetsData2=Object(slicedToArray["a" /* default */])(_useCellSetsData,1),cellSets=_useCellSetsData2[0];var _useExpressionByCellS=useExpressionByCellSet(expressionMatrix,cellSets,additionalCellSets,geneSelection,cellSetSelection,cellSetColor),_useExpressionByCellS2=Object(slicedToArray["a" /* default */])(_useExpressionByCellS,3),expressionArr=_useExpressionByCellS2[0],setArr=_useExpressionByCellS2[1],expressionMax=_useExpressionByCellS2[2];return/*#__PURE__*/external_react_default.a.createElement(TitleInfo["a" /* default */],{title:"Expression by Cell Set",removeGridComponent:removeGridComponent,urls:urls,theme:theme,isReady:isReady},/*#__PURE__*/external_react_default.a.createElement("div",{ref:containerRef,className:"vega-container"},expressionArr?/*#__PURE__*/external_react_default.a.createElement(CellSetExpressionPlot,{domainMax:expressionMax,colors:setArr,data:expressionArr,theme:theme,width:width,height:height}):/*#__PURE__*/external_react_default.a.createElement("span",null,"Select a gene.")));}
// CONCATENATED MODULE: ./src/app/component-registry.js
var registry={description:DescriptionSubscriber,status:StatusSubscriber["a" /* default */],genes:GenesSubscriber["a" /* default */],cellSets:CellSetsManagerSubscriber["a" /* default */],scatterplot:ScatterplotSubscriber["a" /* default */],spatial:SpatialSubscriber["a" /* default */],heatmap:HeatmapSubscriber["a" /* default */],layerController:LayerControllerSubscriber["a" /* default */],cellSetSizes:CellSetSizesPlotSubscriber["a" /* default */],expressionHistogram:ExpressionHistogramSubscriber,genomicProfiles:GenomicProfilesSubscriber,cellSetExpression:CellSetExpressionPlotSubscriber,// The plain higlass component does not abstract away the HiGlass view config,
// so we probably want to avoid documenting it, only use it for development purposes.
higlass:HiGlassSubscriber};function component_registry_getComponent(name){var component=registry[name];if(component===undefined){throw new Error("Could not find definition for \"".concat(name,"\" in registry."));}return registry[name];}
// CONCATENATED MODULE: ./src/app/view-config-utils.js
/* eslint-disable no-plusplus *//**
 * Get a list of all unique scope names for a
 * particular coordination type, which exist in
 * a particular view config.
 * @param {object} config A view config object.
 * @param {string} coordinationType A coordination type,
 * for example 'spatialZoom' or 'dataset'.
 * @returns {string[]} Array of existing coordination scope names.
 */function getExistingScopesForCoordinationType(config,coordinationType){var _config$coordinationS;var spaceScopes=Object.keys((config===null||config===void 0?void 0:(_config$coordinationS=config.coordinationSpace)===null||_config$coordinationS===void 0?void 0:_config$coordinationS[coordinationType])||{});var componentScopes=config.layout.map(function(c){var _c$coordinationScopes;return(_c$coordinationScopes=c.coordinationScopes)===null||_c$coordinationScopes===void 0?void 0:_c$coordinationScopes[coordinationType];});return Array.from(new Set([].concat(Object(toConsumableArray["a" /* default */])(spaceScopes),Object(toConsumableArray["a" /* default */])(componentScopes))));}/**
 * Give each component the same scope name for this coordination type.
 * @param {object} config A view config object.
 * @param {string} coordinationType A coordination type,
 * for example 'spatialZoom' or 'dataset'.
 * @param {*} scopeValue The initial value for the coordination scope,
 * to set in the coordination space.
 * @returns {object} The new view config.
 */function coordinateComponentsTogether(config,coordinationType,scopeValue){var _config$coordinationS2;var scopeName=Object(utils["c" /* getNextScope */])(getExistingScopesForCoordinationType(config,coordinationType));var newConfig=Object(objectSpread2["a" /* default */])({},config,{coordinationSpace:Object(objectSpread2["a" /* default */])({},config.coordinationSpace,Object(defineProperty["a" /* default */])({},coordinationType,Object(objectSpread2["a" /* default */])({},config===null||config===void 0?void 0:(_config$coordinationS2=config.coordinationSpace)===null||_config$coordinationS2===void 0?void 0:_config$coordinationS2[coordinationType],Object(defineProperty["a" /* default */])({},scopeName,scopeValue)))),layout:config.layout.map(function(component){var _component$coordinati;return Object(objectSpread2["a" /* default */])({},component,{coordinationScopes:Object(objectSpread2["a" /* default */])({},component.coordinationScopes,{},coordination["b" /* COMPONENT_COORDINATION_TYPES */][component.component].includes(coordinationType)&&!((_component$coordinati=component.coordinationScopes)===null||_component$coordinati===void 0?void 0:_component$coordinati[coordinationType])?Object(defineProperty["a" /* default */])({},coordinationType,scopeName):{})});})});return newConfig;}/**
 * Give each component a different scope name for this coordination type.
 * @param {object} config A view config object.
 * @param {string} coordinationType A coordination type,
 * for example 'spatialZoom' or 'dataset'.
 * @param {*} scopeValue The initial value for the coordination scope,
 * to set in the coordination space.
 * @returns {object} The new view config.
 */function coordinateComponentsIndependent(config,coordinationType,scopeValue){var newConfig=Object(objectSpread2["a" /* default */])({},config,{layout:Object(toConsumableArray["a" /* default */])(config.layout)});var newScopes={};newConfig.layout.forEach(function(component,i){var _component$coordinati2;// Only set the coordination scope if this component uses this coordination type,
// and the component is missing a coordination scope for this coordination type.
if(coordination["b" /* COMPONENT_COORDINATION_TYPES */][component.component].includes(coordinationType)&&!((_component$coordinati2=component.coordinationScopes)===null||_component$coordinati2===void 0?void 0:_component$coordinati2[coordinationType])){var scopeName=Object(utils["c" /* getNextScope */])([].concat(Object(toConsumableArray["a" /* default */])(getExistingScopesForCoordinationType(config,coordinationType)),Object(toConsumableArray["a" /* default */])(Object.keys(newScopes))));newScopes[scopeName]=scopeValue;newConfig.layout[i]=Object(objectSpread2["a" /* default */])({},component,{coordinationScopes:Object(objectSpread2["a" /* default */])({},component.coordinationScopes,Object(defineProperty["a" /* default */])({},coordinationType,scopeName))});}});newConfig.coordinationSpace=Object(objectSpread2["a" /* default */])({},newConfig.coordinationSpace,Object(defineProperty["a" /* default */])({},coordinationType,Object(objectSpread2["a" /* default */])({},newConfig.coordinationSpace[coordinationType],{},newScopes)));return newConfig;}function initializeAuto(config){var newConfig=config;var _newConfig=newConfig,layout=_newConfig.layout,datasets=_newConfig.datasets;// For each coordination type, check whether it requires initialization.
Object.values(coordination["c" /* COORDINATION_TYPES */]).forEach(function(coordinationType){// A coordination type requires coordination if at least one component is missing
// a (coordination type, coordination scope) tuple.
// Components may only use a subset of all coordination types.
var requiresCoordination=!layout.every(function(c){var _c$coordinationScopes2;return!coordination["b" /* COMPONENT_COORDINATION_TYPES */][c.component].includes(coordinationType)||((_c$coordinationScopes2=c.coordinationScopes)===null||_c$coordinationScopes2===void 0?void 0:_c$coordinationScopes2[coordinationType]);});if(requiresCoordination){// Note that the default value may be undefined.
var defaultValue=coordination["d" /* DEFAULT_COORDINATION_VALUES */][coordinationType];// Check whether this is the special 'dataset' coordination type.
if(coordinationType==='dataset'&&datasets.length>=1){// Use the first dataset ID as the default
// if there is at least one dataset.
defaultValue=datasets[0].uid;}// Use the list of "independent" coordination types
// to determine whether a particular coordination type
// should be initialized to
// a unique scope for every component ("independent")
// vs. the same scope for every component ("together").
if(coordination["a" /* AUTO_INDEPENDENT_COORDINATION_TYPES */].includes(coordinationType)){newConfig=coordinateComponentsIndependent(newConfig,coordinationType,defaultValue);}else{newConfig=coordinateComponentsTogether(newConfig,coordinationType,defaultValue);}}});return newConfig;}/**
 * Initialize the view config:
 * - Fill in missing coordination objects with default values.
 * - Fill in missing component coordination scope mappings.
 *   based on the `initStrategy` specified in the view config.
 * Should be "stable": if run on the same view config twice, the return value the second
 * time should be identical to the return value the first time.
 * @param {object} config The view config prop.
 */function initialize(config){if(config.initStrategy==='auto'){return initializeAuto(config);}return config;}/**
 * A helper function for the `upgrade()` function,
 * which helps convert `props.view` (for scatterplot and spatial),
 * into new coordination scopes, setting their values
 * in the coordination space and returning the new scope mappings.
 * This function does mutate the `coordinationSpace` parameter.
 * @param {string} prefix The coordination type prefix,
 * either 'embedding' or 'spatial'.
 * @param {object} view The view prop object containing
 * the properties `.target` and `.zoom`.
 * @param {object} coordinationSpace The coordination space.
 * @returns {object} The new coordination scope names.
 */function upgradeReplaceViewProp(prefix,view,coordinationSpace){var _ref2;var prevZScopes=Object.keys(coordinationSpace["".concat(prefix,"Zoom")]);var prevTXScopes=Object.keys(coordinationSpace["".concat(prefix,"TargetX")]);var prevTYScopes=Object.keys(coordinationSpace["".concat(prefix,"TargetY")]);var nextZScope=Object(utils["c" /* getNextScope */])(prevZScopes);var nextTXScope=Object(utils["c" /* getNextScope */])(prevTXScopes);var nextTYScope=Object(utils["c" /* getNextScope */])(prevTYScopes);var zoom=view.zoom,_view$target=Object(slicedToArray["a" /* default */])(view.target,2),targetX=_view$target[0],targetY=_view$target[1];// eslint-disable-next-line no-param-reassign
coordinationSpace["".concat(prefix,"Zoom")][nextZScope]=zoom;// eslint-disable-next-line no-param-reassign
coordinationSpace["".concat(prefix,"TargetX")][nextTXScope]=targetX;// eslint-disable-next-line no-param-reassign
coordinationSpace["".concat(prefix,"TargetY")][nextTYScope]=targetY;return _ref2={},Object(defineProperty["a" /* default */])(_ref2,"".concat(prefix,"Zoom"),nextZScope),Object(defineProperty["a" /* default */])(_ref2,"".concat(prefix,"TargetX"),nextTXScope),Object(defineProperty["a" /* default */])(_ref2,"".concat(prefix,"TargetY"),nextTYScope),_ref2;}/**
 * Convert an older view config to a newer view config.
 * @param {object} config A v0.1.0 "legacy" view config.
 * @returns {object} A v1.0.0 "upgraded" view config.
 */function upgrade(config){var datasetUid=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var coordinationSpace={embeddingType:{},embeddingZoom:{},embeddingTargetX:{},embeddingTargetY:{},spatialZoom:{},spatialTargetX:{},spatialTargetY:{}};var layout=[];config.staticLayout.forEach(function(componentDef){var newComponentDef=Object(objectSpread2["a" /* default */])({},componentDef,{coordinationScopes:{}});if(componentDef.component==='scatterplot'){// Need to set up the coordinationSpace
// with embeddingType to replace scatterplot
// component prop "mapping".
if(componentDef.props.mapping){coordinationSpace.embeddingType[componentDef.props.mapping]=componentDef.props.mapping;newComponentDef=Object(objectSpread2["a" /* default */])({},newComponentDef,{coordinationScopes:Object(objectSpread2["a" /* default */])({},newComponentDef.coordinationScopes,{embeddingType:componentDef.props.mapping})});}// Need to set up the coordinationSpace
// with embeddingZoom / embeddingTargetX/Y to replace scatterplot
// component prop "view" ({ zoom, target }).
if(componentDef.props.view){// Note that the below function does mutate the coordinationSpace param.
var newScopeValues=upgradeReplaceViewProp('embedding',componentDef.props.view,coordinationSpace);newComponentDef=Object(objectSpread2["a" /* default */])({},newComponentDef,{coordinationScopes:Object(objectSpread2["a" /* default */])({},newComponentDef.coordinationScopes,{},newScopeValues)});}}if(componentDef.component==='spatial'){var _componentDef$props;// Need to set up the coordinationSpace
// with spatialZoom / spatialTargetX/Y to replace spatial
// component prop "view" ({ zoom, target }).
if(componentDef===null||componentDef===void 0?void 0:(_componentDef$props=componentDef.props)===null||_componentDef$props===void 0?void 0:_componentDef$props.view){// Note that the below function does mutate the coordinationSpace param.
var _newScopeValues=upgradeReplaceViewProp('spatial',componentDef.props.view,coordinationSpace);newComponentDef=Object(objectSpread2["a" /* default */])({},newComponentDef,{coordinationScopes:Object(objectSpread2["a" /* default */])({},newComponentDef.coordinationScopes,{},_newScopeValues)});}}layout.push(newComponentDef);});// Use a random dataset ID when initializing automatically,
// so that it changes with each new v0.1.0 view config.
// However, check if the `datasetUid` parameter was passed,
// which allows for unit testing.
var newDatasetUid=datasetUid||v4_default()();return{version:'1.0.0',name:config.name,description:config.description,public:config.public,datasets:[{uid:newDatasetUid,name:newDatasetUid,files:config.layers.map(function(layer){return{type:layer.type.toLowerCase(),fileType:layer.fileType,url:layer.url};})}],initStrategy:'auto',coordinationSpace:coordinationSpace,layout:layout};}
// CONCATENATED MODULE: ./src/app/Vitessce.js
var generateClassName=Object(styles_["createGenerateClassName"])({disableGlobal:true});/**
 * The Vitessce component.
 * @param {object} props
 * @param {object} props.config A Vitessce view config.
 * If the config is valid, the VitessceGrid will be rendered as a child.
 * If the config is invalid, a Warning will be rendered instead.
 * @param {number} props.rowHeight Row height for grid layout. Optional.
 * @param {number} props.height Total height for grid layout. Optional.
 * @param {string} props.theme The theme, used for styling as
 * light or dark. Optional. By default, "dark"
 * @param {function} props.onWarn A callback for warning messages. Optional.
 * @param {function} props.onConfigChange A callback for view config
 * updates. Optional.
 * @param {function} props.onLoaderChange A callback for loader
 * updates. Optional.
 * @param {boolean} props.validateOnConfigChange Whether to validate
 * against the view config schema when publishing changes. Use for debugging
 * purposes, as this may have a performance impact. By default, false.
 */function Vitessce(props){var config=props.config,rowHeight=props.rowHeight,height=props.height,theme=props.theme,onWarn=props.onWarn,onConfigChange=props.onConfigChange,onLoaderChange=props.onLoaderChange,_props$validateOnConf=props.validateOnConfigChange,validateOnConfigChange=_props$validateOnConf===void 0?false:_props$validateOnConf;// Process the view config and memoize the result:
// - Validate.
// - Upgrade, if legacy schema.
// - Validate after upgrade, if legacy schema.
// - Initialize (based on initStrategy).
var _useMemo=Object(external_react_["useMemo"])(function(){// If the config value is undefined, show a warning message.
if(!config){return[{title:'No such dataset',unformatted:'The dataset configuration could not be found.'},false];}// If the view config is missing a version, show a warning message.
if(!config.version){return[{title:'Missing version',unformatted:'The dataset configuration is missing a version, preventing validation.'},false];}// Check if this is a "legacy" view config.
var upgradedConfig=config;if(config.version==='0.1.0'){// Validate under the legacy schema first.
var validateLegacy=new external_ajv_default.a().compile(config_legacy_schema);var validLegacy=validateLegacy(config);if(!validLegacy){var failureReason=JSON.stringify(validateLegacy.errors,null,2);return[{title:'Config validation failed',preformatted:failureReason},false];}// Upgrade from v0.1.0 to v1.0.0 before v1.0.0 schema validation.
upgradedConfig=upgrade(config);}// NOTE: Remove when a view config viewer/editor is available in UI.
console.groupCollapsed("\uD83D\uDE84 Vitessce (".concat(package_0.version,") view configuration"));console.info("data:,".concat(JSON.stringify(upgradedConfig)));console.info(JSON.stringify(upgradedConfig,null,2));console.groupEnd();var validate=new external_ajv_default.a().addSchema(cell_sets_schema).addSchema(raster_schema).compile(config_schema);var valid=validate(upgradedConfig);if(!valid){var _failureReason=JSON.stringify(validate.errors,null,2);return[{title:'Config validation failed',preformatted:_failureReason},false];}// Initialize the view config according to the initStrategy.
var initializedConfig=initialize(upgradedConfig);return[initializedConfig,true];},[config]),_useMemo2=Object(slicedToArray["a" /* default */])(_useMemo,2),configOrWarning=_useMemo2[0],success=_useMemo2[1];// Emit the upgraded/initialized view config
// to onConfigChange if necessary.
Object(external_react_["useEffect"])(function(){if(success&&!isEqual_default()(configOrWarning,config)&&onConfigChange){onConfigChange(configOrWarning);}},[success,config,configOrWarning,onConfigChange]);return success?/*#__PURE__*/external_react_default.a.createElement(styles_["StylesProvider"],{generateClassName:generateClassName},/*#__PURE__*/external_react_default.a.createElement(styles_["ThemeProvider"],{theme:styles["a" /* muiTheme */][theme]},/*#__PURE__*/external_react_default.a.createElement(VitessceGrid,{config:configOrWarning,getComponent:component_registry_getComponent,rowHeight:rowHeight,height:height,theme:theme}),/*#__PURE__*/external_react_default.a.createElement(CallbackPublisher,{onWarn:onWarn,onConfigChange:onConfigChange,onLoaderChange:onLoaderChange,validateOnConfigChange:validateOnConfigChange}))):/*#__PURE__*/external_react_default.a.createElement(Warning,Object.assign({theme:theme},configOrWarning));}
// EXTERNAL MODULE: ./src/css/index.scss
var css = __webpack_require__(176);

// EXTERNAL MODULE: ./node_modules/react-grid-layout/css/styles.css
var css_styles = __webpack_require__(177);

// EXTERNAL MODULE: ./node_modules/react-resizable/css/styles.css
var react_resizable_css_styles = __webpack_require__(178);

// CONCATENATED MODULE: ./src/app/app.js
function AwaitResponse(props){var response=props.response,theme=props.theme;var _useState=Object(external_react_["useState"])(true),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var responseRef=Object(external_react_["useRef"])();Object(external_react_["useEffect"])(function(){response.then(function(c){responseRef.current=c;setIsLoading(false);});},[response]);return!isLoading?external_react_default.a.createElement(responseRef.current):/*#__PURE__*/external_react_default.a.createElement(Warning,{title:"Loading...",theme:theme});}function preformattedDetails(response){return"\n    ok: ".concat(response.ok,"\n    status: ").concat(response.status,"\n    statusText: ").concat(response.statusText,"\n    redirected: ").concat(response.redirected,"\n    type: ").concat(response.type,"\n    url: ").concat(response.url);// TODO: headers
}function checkResponse(response,theme,debug){if(!response.ok){return Promise.resolve(function(){return/*#__PURE__*/external_react_default.a.createElement(Warning,{title:"Fetch response not OK",preformatted:preformattedDetails(response),theme:theme});});}return response.text().then(function(text){try{var config=JSON.parse(text);return Promise.resolve(function(){return/*#__PURE__*/external_react_default.a.createElement(Vitessce,{config:config,theme:theme// eslint-disable-next-line no-console
,onConfigChange:debug?console.log:undefined,validateOnConfigChange:debug});});}catch(e){return Promise.resolve(function(){return/*#__PURE__*/external_react_default.a.createElement(Warning,{title:"Error parsing JSON",preformatted:preformattedDetails(response),unformatted:"".concat(e.message,": ").concat(text),theme:theme});});}});}/**
 * Use the theme provided if it is valid, otherwise fall back to the 'dark' theme.
 * @param {string} theme A potentially invalid theme name.
 * @returns {string} A valid theme name.
 */function validateTheme(theme){return['light','dark'].includes(theme)?theme:'dark';}/**
 * Convenience function for creating the minimal Vitessce demo and demo listing
 * components based on the current URL parameters.
 * @param {object} params
 * @param {number|null} params.rowHeight The row height to pass to the Vitessce grid.
 * Optional. By default, null.
 * @param {boolean} showBetaHeader Should the header which links to the beta documentation
 * website be rendered? Optional. By default, false.
 * @returns A component, either <Welcome/> or <Vitessce/> depending on the URL params.
 */function createApp(params){var _params$rowHeight=params.rowHeight,rowHeight=_params$rowHeight===void 0?null:_params$rowHeight,_params$showBetaHeade=params.showBetaHeader,showBetaHeader=_params$showBetaHeade===void 0?false:_params$showBetaHeade;var urlParams=new URLSearchParams(window.location.search);var datasetId=urlParams.get('dataset');var debug=urlParams.get('debug')==='true';var datasetUrl=urlParams.get('url');var showAll=urlParams.get('show')==='all';var theme=validateTheme(urlParams.get('theme'));if(datasetId){var config=getConfig(datasetId);return/*#__PURE__*/external_react_default.a.createElement(Vitessce,{config:config,rowHeight:rowHeight,theme:theme// eslint-disable-next-line no-console
,onConfigChange:debug?console.log:undefined,validateOnConfigChange:debug});}if(datasetUrl){var responsePromise=fetch(datasetUrl).then(function(response){return checkResponse(response,theme,debug);}).catch(function(error){return Promise.resolve(/*#__PURE__*/external_react_default.a.createElement(Warning,{title:"Error fetching",unformatted:error.message,theme:theme}));});return/*#__PURE__*/external_react_default.a.createElement(AwaitResponse,{response:responsePromise,theme:theme});}var configs=listConfigs(showAll);return/*#__PURE__*/external_react_default.a.createElement(Welcome,{configs:configs,theme:theme,showBetaHeader:showBetaHeader});}
// EXTERNAL MODULE: external "bowser"
var external_bowser_ = __webpack_require__(175);
var external_bowser_default = /*#__PURE__*/__webpack_require__.n(external_bowser_);

// EXTERNAL MODULE: external "lz-string"
var external_lz_string_ = __webpack_require__(165);

// CONCATENATED MODULE: ./src/app/export-utils.js
var CURRENT_VERSION='0.0.1';var VITESSCE_CONF_QUERY_STRING='vitessce_conf';var VERSION_QUERY_STRING='vitessce_conf_version';var LENGTH_QUERY_STRING='vitessce_conf_length';function sniffBrowser(){var _Bowser$parse=external_bowser_default.a.parse(window.navigator.userAgent),browser=_Bowser$parse.browser;return browser.name;}// https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers
var MAX_BROWSER_URL_LENGTHS={Chrome:32779,'Internet Explorer':2047,Edge:2047,Safari:65000,Firefox:65000};var export_utils_CompressedConfLengthError=function CompressedConfLengthError(message){Object(classCallCheck["a" /* default */])(this,CompressedConfLengthError);this.message=message;};/**
 * Encode a configuration as url params with a version and an lz-compressed conf.
 * @param {Object} params
 * @param {Object} params.conf Previous scope names.
 * @param {function} params.onOverMaximumUrlLength Callback for when new url
 * is over max length for your browser - takes two arguments: { message, willWorkOn }
 * for the error message and the browsers for which the url will work (optional).
 * @returns {string} The new params like
 * vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl
 */function encodeConfInUrl(_ref){var conf=_ref.conf,_ref$onOverMaximumUrl=_ref.onOverMaximumUrlLength,onOverMaximumUrlLength=_ref$onOverMaximumUrl===void 0?function(){}:_ref$onOverMaximumUrl;var compressedConf=Object(external_lz_string_["compressToEncodedURIComponent"])(JSON.stringify(conf));var newParams="".concat(LENGTH_QUERY_STRING,"=").concat(compressedConf.length,"&").concat(VERSION_QUERY_STRING,"=").concat(CURRENT_VERSION,"&").concat(VITESSCE_CONF_QUERY_STRING,"=").concat(compressedConf);var browser=sniffBrowser();var maxLength=MAX_BROWSER_URL_LENGTHS[browser];if(newParams.length>maxLength){var willWorkOn=Object.entries(MAX_BROWSER_URL_LENGTHS).filter(function(entry){return entry[1]>newParams.length;}).map(function(entry){return entry[0];});var message="Configuration is ".concat(compressedConf.length," characters; max URL for ").concat(browser," is ").concat(maxLength,": it will work on ").concat(willWorkOn.join(', ')||'no browser',".");console.error(message);onOverMaximumUrlLength({message:message,willWorkOn:willWorkOn});}return newParams;}/**
 * Decode URL params to a Vitessce configuration.
 * The URL params must have version and vitessce_conf params,
 * like vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl.
 * @param {Object} queryString The URL params,
 * like vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl.
 * @returns {string} A vitessce configuration.
 */function decodeURLParamsToConf(queryString){var params=new URLSearchParams(queryString.replace('#','&'));var compressedConfString=params.get(VITESSCE_CONF_QUERY_STRING);var expectedConfLength=Number(params.get(LENGTH_QUERY_STRING));if(expectedConfLength!==compressedConfString.length){throw new export_utils_CompressedConfLengthError("Compressed conf length (".concat(compressedConfString.length,") != expected (").concat(expectedConfLength,"). URL truncated?"));}var version=params.get(VERSION_QUERY_STRING);if(version===CURRENT_VERSION){var conf=JSON.parse(Object(external_lz_string_["decompressFromEncodedURIComponent"])(compressedConfString));return conf;}throw new Error('Unrecognized URL Param Version');}
// CONCATENATED MODULE: ./src/app/index.js

// CONCATENATED MODULE: ./src/api/VitessceConfig.js
/**
 * Class representing a file within a Vitessce config dataset.
 */var VitessceConfig_VitessceConfigDatasetFile=/*#__PURE__*/function(){/**
   * Construct a new file definition instance.
   * @param {string} url The URL to the file.
   * @param {string} dataType The type of data contained in the file.
   * @param {string} fileType The file type.
   */function VitessceConfigDatasetFile(url,dataType,fileType){Object(classCallCheck["a" /* default */])(this,VitessceConfigDatasetFile);this.file={url:url,type:dataType,fileType:fileType};}/**
   * @returns {object} This dataset file as a JSON object.
   */Object(createClass["a" /* default */])(VitessceConfigDatasetFile,[{key:"toJSON",value:function toJSON(){return this.file;}}]);return VitessceConfigDatasetFile;}();/**
 * Class representing a dataset within a Vitessce config.
 */var VitessceConfig_VitessceConfigDataset=/*#__PURE__*/function(){/**
   * Construct a new dataset definition instance.
   * @param {string} uid The unique ID for the dataset.
   * @param {string} name The name of the dataset.
   * @param {string} description A description for the dataset.
   */function VitessceConfigDataset(uid,name,description){Object(classCallCheck["a" /* default */])(this,VitessceConfigDataset);this.dataset={uid:uid,name:name,description:description,files:[]};}/**
   * Add a file definition to the dataset.
   * @param {string} url The URL to the file.
   * @param {string} dataType The type of data contained in the file.
   * @param {string} fileType The file type.
   * @returns {VitessceConfigDataset} This, to allow chaining.
   */Object(createClass["a" /* default */])(VitessceConfigDataset,[{key:"addFile",value:function addFile(url,dataType,fileType){this.dataset.files.push(new VitessceConfig_VitessceConfigDatasetFile(url,dataType,fileType));return this;}/**
   * @returns {object} This dataset as a JSON object.
   */},{key:"toJSON",value:function toJSON(){return Object(objectSpread2["a" /* default */])({},this.dataset,{files:this.dataset.files.map(function(f){return f.toJSON();})});}}]);return VitessceConfigDataset;}();/**
 * Class representing a view within a Vitessce layout.
 */var VitessceConfig_VitessceConfigView=/*#__PURE__*/function(){/**
   * Construct a new view instance.
   * @param {string} component The name of the Vitessce component type.
   * @param {object} coordinationScopes A mapping from coordination type
   * names to coordination scope names.
   * @param {number} x The x-coordinate of the view in the layout.
   * @param {number} y The y-coordinate of the view in the layout.
   * @param {number} w The width of the view in the layout.
   * @param {number} h The height of the view in the layout.
   */function VitessceConfigView(component,coordinationScopes,x,y,w,h){Object(classCallCheck["a" /* default */])(this,VitessceConfigView);this.view={component:component,coordinationScopes:coordinationScopes,x:x,y:y,w:w,h:h};}/**
   * Attach coordination scopes to this view.
   * @param  {...VitessceConfigCoordinationScope} args A variable number of
   * coordination scope instances.
   * @returns {VitessceConfigView} This, to allow chaining.
   */Object(createClass["a" /* default */])(VitessceConfigView,[{key:"useCoordination",value:function useCoordination(){var _this=this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var cScopes=args;cScopes.forEach(function(cScope){_this.view.coordinationScopes[cScope.cType]=cScope.cScope;});return this;}/**
    * Set the x, y, w, h values for this view.
    * @param {number} x The x-coordinate of the view in the layout.
    * @param {number} y The y-coordinate of the view in the layout.
    * @param {number} w The width of the view in the layout.
    * @param {number} h The height of the view in the layout.
    */},{key:"setXYWH",value:function setXYWH(x,y,w,h){this.view.x=x;this.view.y=y;this.view.w=w;this.view.h=h;}/**
   * @returns {object} This view as a JSON object.
   */},{key:"toJSON",value:function toJSON(){return this.view;}}]);return VitessceConfigView;}();/**
 * Class representing a horizontal concatenation of views.
 */var VitessceConfig_VitessceConfigViewHConcat=function VitessceConfigViewHConcat(views){Object(classCallCheck["a" /* default */])(this,VitessceConfigViewHConcat);this.views=views;};/**
 * Class representing a vertical concatenation of views.
 */var VitessceConfig_VitessceConfigViewVConcat=function VitessceConfigViewVConcat(views){Object(classCallCheck["a" /* default */])(this,VitessceConfigViewVConcat);this.views=views;};/**
 * A helper function to create a horizontal concatenation of views.
 * @param  {...(VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat)} views A
 * variable number of views or view concatenations.
 * @returns {VitessceConfigViewHConcat} A new horizontal view concatenation instance.
 */function hconcat(){for(var _len2=arguments.length,views=new Array(_len2),_key2=0;_key2<_len2;_key2++){views[_key2]=arguments[_key2];}var vcvhc=new VitessceConfig_VitessceConfigViewHConcat(views);return vcvhc;}/**
 * A helper function to create a vertical concatenation of views.
 * @param  {...(VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat)} views A
 * variable number of views or view concatenations.
 * @returns {VitessceConfigViewVConcat} A new vertical view concatenation instance.
 */function vconcat(){for(var _len3=arguments.length,views=new Array(_len3),_key3=0;_key3<_len3;_key3++){views[_key3]=arguments[_key3];}var vcvvc=new VitessceConfig_VitessceConfigViewVConcat(views);return vcvvc;}/**
 * Class representing a coordination scope in the coordination space.
 */var VitessceConfig_VitessceConfigCoordinationScope=/*#__PURE__*/function(){/**
   * Construct a new coordination scope instance.
   * @param {string} cType The coordination type for this coordination scope.
   * @param {string} cScope The name of the coordination scope.
   */function VitessceConfigCoordinationScope(cType,cScope){Object(classCallCheck["a" /* default */])(this,VitessceConfigCoordinationScope);this.cType=cType;this.cScope=cScope;this.cValue=null;}/**
   * Set the coordination value of the coordination scope.
   * @param {any} cValue The value to set.
   * @returns {VitessceConfigCoordinationScope} This, to allow chaining.
   */Object(createClass["a" /* default */])(VitessceConfigCoordinationScope,[{key:"setValue",value:function setValue(cValue){this.cValue=cValue;return this;}}]);return VitessceConfigCoordinationScope;}();/**
 * Class representing a Vitessce view config.
 */var VitessceConfig_VitessceConfig=/*#__PURE__*/function(){/**
   * Construct a new view config instance.
   * @param {string} name A name for the config. Optional.
   * @param {string} description A description for the config. Optional.
   */function VitessceConfig(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;var description=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;Object(classCallCheck["a" /* default */])(this,VitessceConfig);this.config={version:'1.0.0',name:name,description:description,datasets:[],coordinationSpace:{},layout:[],initStrategy:'auto'};}/**
   * Add a new dataset to the config.
   * @param {string} name A name for the dataset. Optional.
   * @param {string} description A description for the dataset. Optional.
   * @param {object} options Extra parameters to be used internally. Optional.
   * @param {string} options.uid Override the automatically-generated dataset ID.
   * Intended for internal usage by the VitessceConfig.fromJSON code.
   * @returns {VitessceConfigDataset} A new dataset instance.
   */Object(createClass["a" /* default */])(VitessceConfig,[{key:"addDataset",value:function addDataset(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;var description=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;var _ref=options||{},uid=_ref.uid;var prevDatasetUids=this.config.datasets.map(function(d){return d.dataset.uid;});var nextUid=uid||Object(utils["c" /* getNextScope */])(prevDatasetUids);var newDataset=new VitessceConfig_VitessceConfigDataset(nextUid,name,description);this.config.datasets.push(newDataset);var _this$addCoordination=this.addCoordination(coordination["c" /* COORDINATION_TYPES */].DATASET),_this$addCoordination2=Object(slicedToArray["a" /* default */])(_this$addCoordination,1),newScope=_this$addCoordination2[0];newScope.setValue(nextUid);return newDataset;}/**
   * Add a new view to the config.
   * @param {VitessceConfigDataset} dataset The dataset instance which defines the data
   * that will be displayed in the view.
   * @param {string} component A component name, such as "scatterplot" or "spatial".
   * @param {object} options Extra options for the component.
   * @param {number} options.x The x-coordinate for the view in the grid layout.
   * @param {number} options.y The y-coordinate for the view in the grid layout.
   * @param {number} options.w The width for the view in the grid layout.
   * @param {number} options.h The height for the view in the grid layout.
   * @param {number} options.mapping A convenience parameter for setting the EMBEDDING_TYPE
   * coordination value. Only applicable if the component is "scatterplot".
   * @returns {VitessceConfigView} A new view instance.
   */},{key:"addView",value:function addView(dataset,component,options){var _ref2=options||{},_ref2$x=_ref2.x,x=_ref2$x===void 0?0:_ref2$x,_ref2$y=_ref2.y,y=_ref2$y===void 0?0:_ref2$y,_ref2$w=_ref2.w,w=_ref2$w===void 0?1:_ref2$w,_ref2$h=_ref2.h,h=_ref2$h===void 0?1:_ref2$h,_ref2$mapping=_ref2.mapping,mapping=_ref2$mapping===void 0?null:_ref2$mapping;var datasetMatches=this.config.coordinationSpace[coordination["c" /* COORDINATION_TYPES */].DATASET]?Object.entries(this.config.coordinationSpace[coordination["c" /* COORDINATION_TYPES */].DATASET])// eslint-disable-next-line no-unused-vars
.filter(function(_ref3){var _ref4=Object(slicedToArray["a" /* default */])(_ref3,2),scopeName=_ref4[0],datasetScope=_ref4[1];return datasetScope.cValue===dataset.dataset.uid;}).map(function(_ref5){var _ref6=Object(slicedToArray["a" /* default */])(_ref5,1),scopeName=_ref6[0];return scopeName;}):[];var datasetScope;if(datasetMatches.length===1){var _datasetMatches=Object(slicedToArray["a" /* default */])(datasetMatches,1);datasetScope=_datasetMatches[0];}else{throw new Error('No coordination scope matching the dataset parameter could be found in the coordination space.');}var coordinationScopes=Object(defineProperty["a" /* default */])({},coordination["c" /* COORDINATION_TYPES */].DATASET,datasetScope);var newView=new VitessceConfig_VitessceConfigView(component,coordinationScopes,x,y,w,h);if(mapping){var _this$addCoordination3=this.addCoordination(coordination["c" /* COORDINATION_TYPES */].EMBEDDING_TYPE),_this$addCoordination4=Object(slicedToArray["a" /* default */])(_this$addCoordination3,1),etScope=_this$addCoordination4[0];etScope.setValue(mapping);newView.useCoordination(etScope);}this.config.layout.push(newView);return newView;}/**
   * Get an array of new coordination scope instances corresponding to coordination types
   * of interest.
   * @param {...string} args A variable number of coordination type names.
   * @returns {VitessceConfigCoordinationScope[]} An array of coordination scope instances.
   */},{key:"addCoordination",value:function addCoordination(){var _this2=this;for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}var cTypes=args;var result=[];cTypes.forEach(function(cType){var prevScopes=_this2.config.coordinationSpace[cType]?Object.keys(_this2.config.coordinationSpace[cType]):[];var scope=new VitessceConfig_VitessceConfigCoordinationScope(cType,Object(utils["c" /* getNextScope */])(prevScopes));if(!_this2.config.coordinationSpace[scope.cType]){_this2.config.coordinationSpace[scope.cType]={};}_this2.config.coordinationSpace[scope.cType][scope.cScope]=scope;result.push(scope);});return result;}/**
   * A convenience function for setting up new coordination scopes across a set of views.
   * @param {VitessceConfigView[]} views An array of view objects to link together.
   * @param {string[]} cTypes The coordination types on which to coordinate the views.
   * @param {any[]} cValues Initial values corresponding to each coordination type.
   * Should have the same length as the cTypes array. Optional.
   * @returns {VitessceConfig} This, to allow chaining.
   */},{key:"linkViews",value:function linkViews(views,cTypes){var cValues=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var cScopes=this.addCoordination.apply(this,Object(toConsumableArray["a" /* default */])(cTypes));views.forEach(function(view){cScopes.forEach(function(cScope){view.useCoordination(cScope);});});if(Array.isArray(cValues)&&cValues.length===cTypes.length){cScopes.forEach(function(cScope,i){cScope.setValue(cValues[i]);});}return this;}/**
   * Set the layout of views.
   * @param {VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat} viewConcat A
   * view or a concatenation of views.
   * @returns {VitessceConfig} This, to allow chaining.
   */},{key:"layout",value:function layout(viewConcat){function layoutAux(obj,xMin,xMax,yMin,yMax){var w=xMax-xMin;var h=yMax-yMin;if(obj instanceof VitessceConfig_VitessceConfigView){obj.setXYWH(xMin,yMin,w,h);}else if(obj instanceof VitessceConfig_VitessceConfigViewHConcat){var views=obj.views;var numViews=views.length;views.forEach(function(view,i){layoutAux(view,xMin+w/numViews*i,xMin+w/numViews*(i+1),yMin,yMax);});}else if(obj instanceof VitessceConfig_VitessceConfigViewVConcat){var _views=obj.views;var _numViews=_views.length;_views.forEach(function(view,i){layoutAux(view,xMin,xMax,yMin+h/_numViews*i,yMin+h/_numViews*(i+1));});}}layoutAux(viewConcat,0,12,0,12);return this;}/**
   * Convert this instance to a JSON object that can be passed to the Vitessce component.
   * @returns {object} The view config as a JSON object.
   */},{key:"toJSON",value:function toJSON(){return Object(objectSpread2["a" /* default */])({},this.config,{datasets:this.config.datasets.map(function(d){return d.toJSON();}),coordinationSpace:Object(utils["b" /* fromEntries */])(Object.entries(this.config.coordinationSpace).map(function(_ref7){var _ref8=Object(slicedToArray["a" /* default */])(_ref7,2),cType=_ref8[0],cScopes=_ref8[1];return[cType,Object(utils["b" /* fromEntries */])(Object.entries(cScopes).map(function(_ref9){var _ref10=Object(slicedToArray["a" /* default */])(_ref9,2),cScopeName=_ref10[0],cScope=_ref10[1];return[cScopeName,cScope.cValue];}))];})),layout:this.config.layout.map(function(c){return c.toJSON();})});}/**
   * Create a VitessceConfig instance from an existing view config, to enable
   * manipulation with the JavaScript API.
   * @param {object} config An existing Vitessce view config as a JSON object.
   * @returns {VitessceConfig} A new config instance, with values set to match
   * the config parameter.
   */}],[{key:"fromJSON",value:function fromJSON(config){var name=config.name,description=config.description;var vc=new VitessceConfig(name,description);config.datasets.forEach(function(d){var newDataset=vc.addDataset(d.name,d.description,{uid:d.uid});d.files.forEach(function(f){newDataset.addFile(f.url,f.type,f.fileType);});});Object.keys(config.coordinationSpace).forEach(function(cType){if(cType!==coordination["c" /* COORDINATION_TYPES */].DATASET){var cObj=config.coordinationSpace[cType];vc.config.coordinationSpace[cType]={};Object.entries(cObj).forEach(function(_ref11){var _ref12=Object(slicedToArray["a" /* default */])(_ref11,2),cScopeName=_ref12[0],cScopeValue=_ref12[1];var scope=new VitessceConfig_VitessceConfigCoordinationScope(cType,cScopeName);scope.setValue(cScopeValue);vc.config.coordinationSpace[cType][cScopeName]=scope;});}});config.layout.forEach(function(c){var newView=new VitessceConfig_VitessceConfigView(c.component,c.coordinationScopes,c.x,c.y,c.w,c.h);vc.config.layout.push(newView);});return vc;}}]);return VitessceConfig;}();
// CONCATENATED MODULE: ./src/api/index.js

// CONCATENATED MODULE: ./src/index.js
/* concated harmony reexport Heatmap */__webpack_require__.d(__webpack_exports__, "Heatmap", function() { return heatmap["Heatmap"]; });
/* concated harmony reexport Spatial */__webpack_require__.d(__webpack_exports__, "Spatial", function() { return spatial["Spatial"]; });
/* concated harmony reexport Scatterplot */__webpack_require__.d(__webpack_exports__, "Scatterplot", function() { return scatterplot["Scatterplot"]; });
/* concated harmony reexport VitessceGrid */__webpack_require__.d(__webpack_exports__, "VitessceGrid", function() { return VitessceGrid; });
/* concated harmony reexport createApp */__webpack_require__.d(__webpack_exports__, "createApp", function() { return createApp; });
/* concated harmony reexport Vitessce */__webpack_require__.d(__webpack_exports__, "Vitessce", function() { return Vitessce; });
/* concated harmony reexport encodeConfInUrl */__webpack_require__.d(__webpack_exports__, "encodeConfInUrl", function() { return encodeConfInUrl; });
/* concated harmony reexport decodeURLParamsToConf */__webpack_require__.d(__webpack_exports__, "decodeURLParamsToConf", function() { return decodeURLParamsToConf; });
/* concated harmony reexport VitessceConfig */__webpack_require__.d(__webpack_exports__, "VitessceConfig", function() { return VitessceConfig_VitessceConfig; });
/* concated harmony reexport hconcat */__webpack_require__.d(__webpack_exports__, "hconcat", function() { return hconcat; });
/* concated harmony reexport vconcat */__webpack_require__.d(__webpack_exports__, "vconcat", function() { return vconcat; });


/***/ })
/******/ ]);
//# sourceMappingURL=index.js.map
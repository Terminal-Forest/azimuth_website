{"version":3,"sources":["../webpack/bootstrap","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","app/state/hooks.js","layers/heatmap-constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../external \"lodash/isEqual\"","components/sets/constants.js","utils.js","components/sets/utils.js","../external \"@material-ui/core/styles\"","components/spatial/constants.js","components/sets/cell-set-utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","loaders/errors/AbstractLoaderError.js","loaders/errors/LoaderFetchError.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/index.js","../external \"deck.gl\"","components/hooks.js","components/data-hooks.js","app/state/coordination.js","../external \"@deck.gl/core\"","../external \"@hms-dbmi/viv\"","../external \"mathjs\"","../external \"@material-ui/core/Grid\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/classNames.js","../external \"zustand\"","../external \"@luma.gl/constants\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","components/LoadingIndicator.js","components/TitleInfo.js","../external \"@deck.gl/layers\"","components/shared-mui/styles.js","../external \"d3-array\"","../external \"@material-ui/core/colors\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/IconButton\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","components/spatial/utils.js","../external \"@material-ui/core/MenuItem\"","../external \"lodash/clamp\"","../external \"lodash/range\"","../external \"nebula.gl\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"lodash/debounce\"","../external \"@turf/helpers\"","../external \"uuid/v4\"","../external \"@material-ui/core/TableCell\"","../external \"@material-ui/core/Paper\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../external \"lodash\"","../external \"@material-ui/core/Slider\"","../external \"math.gl\"","components/sets/io.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/Popper\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../external \"short-number\"","../external \"lodash/isNil\"","../external \"@material-ui/core/Checkbox\"","../external \"@material-ui/core/Select\"","../external \"tinycolor2\"","components/tooltip/Tooltip2D.js","components/tooltip/TooltipContent.js","components/shared-plot-options/styles.js","../external \"@material-ui/core/TableRow\"","components/tooltip/Tooltip.js","components/vega/ReactVega.js","components/vega/VegaPlot.js","components/vega/utils.js","components/vega/index.js","../external \"zarr\"","components/interpolate-colors.js","../external \"@luma.gl/core\"","../external \"@turf/concave\"","../external \"@turf/centroid\"","../external \"ajv\"","layers/SelectionLayer.js","layers/selection-utils.js","layers/SelectablePolygonLayer.js","layers/SelectableScatterplotLayer.js","layers/index.js","../external \"@nebula.gl/edit-modes\"","../external \"regenerator-runtime\"","layers/HeatmapCompositeTextLayer.js","layers/PixelatedBitmapLayer.js","layers/heatmap-bitmap-layer-shaders.js","layers/HeatmapBitmapLayer.js","../external \"@material-ui/core/Box\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../external \"classnames\"","../external \"d3-quadtree\"","components/layer-controller/styles.js","components/shared-spatial-scatterplot/quadtree.js","components/shared-plot-options/OptionsContainer.js","components/shared-plot-options/CellColorEncodingOption.js","assets/tools/near_me.svg","assets/tools/selection_rectangle.svg","assets/tools/selection_lasso.svg","components/shared-spatial-scatterplot/ToolMenu.js","components/shared-spatial-scatterplot/cursor.js","components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js","components/spatial/Spatial.js","components/heatmap/HeatmapControls.js","components/heatmap/utils.js","components/heatmap/Heatmap.js","components/shared-spatial-scatterplot/force-collide-rects.js","components/scatterplot/Scatterplot.js","../external \"rc-tree\"","../external \"@material-ui/icons/Add\"","components/layer-controller/VectorLayerController.js","../external \"@deck.gl/extensions\"","../external \"@turf/boolean-within\"","../external \"@turf/boolean-contains\"","../external \"@turf/boolean-overlap\"","../external \"@turf/boolean-point-in-polygon\"","../external \"@material-ui/core/Table\"","../external \"@material-ui/core/TableBody\"","../external \"@material-ui/core/TableContainer\"","components/spatial/SpatialOptions.js","components/spatial/SpatialTooltipSubscriber.js","components/spatial/SpatialSubscriber.js","components/scatterplot/ScatterplotTooltipSubscriber.js","components/scatterplot/ScatterplotOptions.js","components/scatterplot/ScatterplotSubscriber.js","components/heatmap/HeatmapTooltipSubscriber.js","components/heatmap/HeatmapSubscriber.js","components/status/Status.js","components/sets/CellSetSizesPlot.js","components/sets/Tree.js","components/sets/HelpTooltip.js","components/sets/Popover.js","components/sets/PopoverMenu.js","assets/menu.svg","components/sets/TreeNode.js","assets/sets/union.svg","assets/sets/intersection.svg","assets/sets/complement.svg","components/sets/SetsManagerButtons.js","components/sets/SetsManager.js","components/layer-controller/ColorPalette.js","components/layer-controller/ChannelOptions.js","components/layer-controller/ChannelController.js","components/layer-controller/LayerOptions.js","components/layer-controller/RasterLayerController.js","components/selectable-table/SelectableTable.js","components/genes/Genes.js","../external \"react-virtualized\"","../external \"@material-ui/core/Button\"","../external \"react-vega\"","components/status/StatusSubscriber.js","components/genes/GenesSubscriber.js","components/sets/CellSetsManagerSubscriber.js","components/sets/CellSetSizesPlotSubscriber.js","components/layer-controller/ImageAddButton.js","components/layer-controller/LayerControllerSubscriber.js","components/heatmap/heatmap.worker.js","../external \"d3-force\"","../external \"d3-dsv\"","../external \"json2csv\"","../external \"lodash/union\"","../external \"lodash/difference\"","../external \"clsx\"","../external \"rc-tree/es/util\"","../external \"react-color\"","../external \"rc-tooltip\"","../external \"@material-ui/core/ExpansionPanel\"","../external \"@material-ui/core/ExpansionPanelSummary\"","../external \"@material-ui/core/ExpansionPanelDetails\"","../external \"@material-ui/icons/ExpandMore\"","../external \"@material-ui/icons/MoreVert\"","../external \"@material-ui/icons/Lens\"","../external \"@material-ui/core/InputLabel\"","../external \"@material-ui/core/Typography\"","../external \"vega-tooltip\"","components/heatmap/index.js","components/spatial/index.js","components/scatterplot/index.js","../node_modules/worker-loader/dist/workers/InlineWorker.js","../external \"react-grid-layout\"","../external \"higlass-zarr-datafetchers\"","../external \"lz-string\"","../external \"react-dom\"","../external \"dynamic-import-polyfill\"","../external \"higlass-register\"","../external \"bowser\"","css/index.scss","../node_modules/react-grid-layout/css/styles.css","../node_modules/react-resizable/css/styles.css","app/vitessce-grid-layout/layout-utils.js","app/vitessce-grid-layout/VitessceGridLayout.js","loaders/AbstractLoader.js","loaders/JsonLoader.js","loaders/MatrixZarrLoader.js","loaders/GenesJsonAsMatrixZarrLoader.js","loaders/ClustersJsonAsMatrixZarrLoader.js","loaders/RasterJsonLoader.js","loaders/CellSetsJsonLoader.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct.js","loaders/anndata-loaders/BaseAnnDataLoader.js","loaders/anndata-loaders/CellSetsZarrLoader.js","loaders/anndata-loaders/CellsZarrLoader.js","loaders/anndata-loaders/MatrixZarrLoader.js","loaders/anndata-loaders/index.js","loaders/GenomicProfilesZarrLoader.js","loaders/types.js","app/vitessce-grid-utils.js","app/VitessceGrid.js","app/api.js","app/Welcome.js","app/Warning.js","app/CallbackPublisher.js","components/description/Description.js","components/description/DescriptionSubscriber.js","components/higlass/HiGlassLazy.js","components/higlass/HiGlassSubscriber.js","components/higlass/GenomicProfilesSubscriber.js","components/genes/ExpressionHistogram.js","components/genes/ExpressionHistogramSubscriber.js","components/sets/hooks.js","components/sets/CellSetExpressionPlot.js","components/sets/CellSetExpressionPlotSubscriber.js","app/component-registry.js","app/view-config-utils.js","app/Vitessce.js","app/app.js","app/export-utils.js","api/VitessceConfig.js","index.js"],"names":["useViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","i","newLayout","layout","slice","splice","changeLayout","newComponentProps","forEach","newProps","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","coordinationScopes","values","fromEntries","map","undefined","shallow","setters","setterName","capitalize","setterFunc","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","TILE_SIZE","MIN_ROW_AGG","MAX_ROW_AGG","COLOR_BAR_SIZE","AXIS_LABEL_TEXT_SIZE","AXIS_TITLE_TEXT_SIZE","AXIS_MIN_SIZE","AXIS_MAX_SIZE","AXIS_MARGIN","THEME_TO_TEXT_COLOR","dark","light","AXIS_FONT_FAMILY","PIXELATED_TEXTURE_PARAMETERS","GL","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","makeCellStatusMessage","cellInfoFactors","Object","entries","factor","join","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","data","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_COLOR","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","console","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","length","push","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","component","__esModule","default","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","iterable","reduce","obj","key","val","assign","range","Array","keys","pluralize","singular","plural","count","word","charAt","toUpperCase","getNextScope","prevScopes","chars","nextCharIndices","next","r","charIndex","unshift","increment","nextScope","includes","callbackOnKeyPress","event","callback","preventDefault","colorArrayToString","rgbArray","tinycolor","g","b","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","isEqual","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","GLOBAL_SLIDER_DIMENSION_FIELDS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","colormap","opacity","domainType","transparentColor","DEFAULT_MOLECULES_LAYER","type","radius","visible","DEFAULT_CELLS_LAYER","DEFAULT_NEIGHBORHOODS_LAYER","DEFAULT_LAYER_TYPE_ORDERING","generateKey","uuidv4","nodeToSet","currNode","flatMap","c","nodeToHeight","level","newLevel","childrenHeights","Math","max","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","filter","Boolean","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transform","transformedPaths","currPath","newPath","concat","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","from","treeToUnion","checkedPaths","nodeSets","a","h","hEl","treeToIntersection","treeToComplement","items","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","size","isLeaf","height","colorMixWithUncertainty","originalColor","p","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","isNil","Map","treeToObjectsBySetNames","setColor","cellsArray","obsId","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","mappings","points","turfFeatureCollection","turfPoint","hull","concave","hullCoords","geometry","coordinates","centroidCoords","centroid","treeToSetSizesBySetNames","sizes","filterNode","filterPath","treeToExpectedCheckedLevel","result","lzn","levelZeroPath","levelIndex","levelNodePaths","treesConflict","testCellSets","paths","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","fill","processNode","hierarchyLevel","treeIndex","index","getCellSetPolygons","params","cellSetSelection","AbstractLoaderError","Error","LoaderFetchError","datasetType","datasetFileType","datasetUrl","responseHeaders","LoaderValidationError","reason","JSON","stringify","LoaderNotFoundError","useGridItemSize","containerRef","useState","setHeight","width","setWidth","useEffect","onWindowResize","onResizeDebounced","debounce","trailing","window","addEventListener","removeEventListener","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","log","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","error","warnInConsole","useDescription","dataset","description","setDescription","useCellsData","isRequired","onLoad","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","attrs","cols","rows","matrix","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","l","useNeighborhoodsData","neighborhoods","setNeighborhoods","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","rasterLayers","layers","rasterRenderLayers","renderLayers","usePhysicalSizeScaling","initializeRasterLayersAndChannels","autoImageLayers","nextImageLoaders","nextImageMeta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_LAYERS","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","LoadingIndicator","useStyles","makeStyles","theme","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","useReducer","v","toggle","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","styles","paper","maxHeight","overflow","zIndex","span","textAlign","popper","muiTheme","createMuiTheme","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","MuiPopper","anchorEl","placement","MuiPaper","MuiSpan","PopperMenu","buttonIcon","buttonClassName","anchorRef","square","x","y","sortLayers","sort","indexOf","getDefaultGlobalSelection","imageDims","globalIndices","dim","field","selection","floor","buildDefaultSelection","globalSelection","firstNonGlobalDimension","min","initializeChannelForSelection","loader","getChannelStats","loaderSelection","stats","domain","isRgb","slider","autoSliders","initializeLayerChannels","loaderDimensions","dimensions","defaultSelection","domains","stat","colors","sliders","channel","initializeLayerChannelsIfMissing","layerDefsOrig","layerDefs","cloneDeep","newLayerDefPromises","didInitialize","layerIndex","layerDef","newLayerDefPromise","Promise","resolve","channels","newChannelDefPromises","channelIndex","channelDef","newChannelDefPromise","autoChannelDef","all","newChannelDefs","newLayerDefs","getMetaWithTransformMatrices","imageMeta","imageLoaders","meta","metadata","scale","translate","some","every","physicalSizes","minPhysicalSize","acc","unit","replace","compare","imageMetaWithTransform","k","divide","Matrix4","newMeta","toArray","autoImageLayerDefPromises","layer","loaderCreator","autoImageLayerDefPromise","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","initialTargetX","Infinity","initialTargetY","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","cellCoordinates","xy","xExtent","extent","yExtent","xRange","yRange","log2","tryUpgradeTreeToLatestSchema","validate","Ajv","compile","valid","failureReason","errors","isArray","itemId","handleImportJSON","importData","parse","handleImportTabular","dsvParser","dsvFormat","row","groupName","setName","predictionScore","treeToImport","uniqueGroupNames","Set","groupRows","uniqueSetNames","setRows","levelOneNode","handleExportJSON","jsonString","dataString","encodeURIComponent","handleExportTabular","exportData","csvString","json2csv","fields","delimiter","downloadForUser","fileName","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","Tooltip2D","parentUuid","sourceUuid","parentWidth","parentHeight","isTooltipVisible","crosshairWidth","left","top","TooltipContent","box","boxSizing","checkbox","padding","minWidth","sliderValueLabel","tableContainer","labelCell","inputCell","select","fontSize","Tooltip","ref","isNarrow","offsetPercentage","translateX","translateY","style","whiteSpace","DATASET_NAME","isVega","spec","$schema","VegaPlot","partialSpec","signalListeners","vegaComponent","useMemo","Handler","call","VEGA_THEMES","axis","domainColor","gridColor","tickColor","schemeRdBu","schemePlasma","rgbSpline","spline","t","basis","innerBasis","t1","v0","v1","v2","v3","t2","t3","interpolateRgbBasis","interpolateSequentialMulti","interpolateRdBu","interpolatePlasma","getCellColors","cellColorEncoding","geneSelection","firstGeneSelected","geneExpColormap","geneIndex","numGenes","cellIndex","cellColor","EDIT_TYPE_ADD","EDIT_TYPE_CLEAR","ClickableDrawRectangleMode","onEdit","editType","DrawRectangleMode","ClickableDrawPolygonByDraggingMode","DrawPolygonByDraggingMode","MODE_MAP","SELECTION_TYPE","RECTANGLE","POLYGON","defaultProps","selectionType","layerIds","onSelect","EMPTY_DATA","features","LAYER_ID_GEOJSON","PASS_THROUGH_PROPS","SelectionLayer","getCellCoords","cellsQuadTree","flipY","flippedCoordinates","poly","selectedPolygon","turfPolygon","pickingInfos","visit","x0","y0","x1","y1","nodePoints","nodePolygon","nodePolygonContainsSelectedPolygon","booleanContains","nodePolygonWithinSelectedPolygon","booleanWithin","nodePolygonOverlapsSelectedPolgyon","booleanOverlap","booleanPointInPolygon","mode","ViewMode","inheritedProps","EditableGeoJsonLayer","getSubLayerProps","id","modeConfig","dragToDraw","selectedFeatureIndexes","updatedData","_selectPolygonObjects","CompositeLayer","layerName","getBaseLayerId","layerId","getSelectedLayerId","getSelectionLayers","tool","updateCellsSelection","cellBaseLayerId","editHandlePointRadius","cellIds","cellObj","getTentativeFillColor","getTentativeLineColor","getTentativeLineDashArray","lineWidthMinPixels","lineWidthMaxPixels","getEditHandlePointColor","getEditHandlePointRadius","editHandlePointRadiusScale","editHandlePointRadiusMinPixels","editHandlePointRadiusMaxPixels","overlayBaseProps","getColor","isSelected","rest","overlay","getFillColor","getLineColor","getFilterValue","extensions","DataFilterExtension","filterSize","filterRange","base","SelectablePolygonLayer","PolygonLayer","SelectableScatterplotLayer","ScatterplotLayer","HeatmapCompositeTextLayer","axisTopLabelData","matrixLeft","matrixWidth","viewWidth","targetX","targetY","axisTopTitle","cellWidth","axisOffsetTop","scaleFactor","showAxisTopLabels","axisLabelTop","TextLayer","getText","getPosition","getTextAnchor","getSize","getAngle","fontFamily","updateTriggers","axisLeftLabelData","matrixTop","matrixHeight","viewHeight","axisLeftTitle","cellHeight","axisOffsetLeft","showAxisLeftLabels","axisLabelLeft","_renderAxisTopLayers","_renderAxisLeftLayers","BitmapLayer","async","bounds","desaturate","tintColor","PixelatedBitmapLayer","textureParameters","vertexShader","fragmentShader","aggSizeX","aggSizeY","colorScaleLo","colorScaleHi","HeatmapBitmapLayer","shaders","extension","_mergeShaders","getShaders","args","loadTexture","_getShaders","vs","fs","modules","project32","picking","opts","uniforms","bitmapTexture","model","setUniforms","uBitmapTexture","uTextureSize","uAggSize","uColorScaleRange","draw","gl","context","delete","Texture2D","setState","mipmaps","format","LUMINANCE","dataFormat","UNSIGNED_BYTE","useOptionStyles","useExpansionPanelStyles","root","spacing","flexDirection","useExpansionPanelSummaryStyles","marginBottom","textOverflow","expanded","expandIcon","createCellsQuadTree","cellsEntries","quadtree","addAll","OptionsContainer","table","CellColorEncodingOption","observationsLabelNice","handleColorEncodingChange","IconButton","alt","onClick","isActive","inactive","active","ToolMenu","setActiveTool","activeTool","visibleTools","pan","selectRectangle","selectLasso","getCursorWithTool","getCursor","interactionState","isDragging","AbstractSpatialOrScatterplot","viewport","onViewStateChange","bind","onInitializeViewInfo","onWebGLInitialized","onToolChange","nextViewState","viewState","setViewState","onToolChangeProp","updateViewInfo","project","positionX","positionY","getLayers","showCellSelectionTools","cellsLayer","showPanTool","OrthographicView","dragPan","PureComponent","CELLS_LAYER_ID","MOLECULES_LAYER_ID","NEIGHBORHOODS_LAYER_ID","defaultGetCellCoords","makeDefaultGetCellPolygon","cellEntry","makeDefaultGetCellColors","cellColors","get","makeDefaultGetCellIsSelected","Spatial","moleculesEntries","moleculesLayer","neighborhoodsLayer","imageLayers","layerLoaderSelections","onUpdateCellsData","onUpdateCellsLayer","onUpdateMoleculesData","onUpdateMoleculesLayer","onUpdateNeighborhoodsData","onUpdateNeighborhoodsLayer","onUpdateImages","cellFilter","getCellIsSelected","getCellColor","getCellPolygon","onCellClick","lineWidthScale","filteredCellsEntries","flipYTooltip","getPolygon","getLineWidth","setMoleculeHighlight","getMoleculeColor","getMoleculePosition","radiusMaxPixels","getRadius","getNeighborhoodPolygon","neighborhoodsEntry","neighborhood","neighborhoodsEntries","ScaleBarLayer","rawLayerDef","nextLoaderSelection","prevLoaderSelection","layerProps","visibilities","isPyramid","Layer","MultiscaleImageLayer","ImageLayer","colorValues","sliderValues","channelIsOn","createImageLayer","createScaleBarLayer","createSelectionLayers","createCellsLayer","molecule","coords","createMoleculesLayer","createNeighborhoodsLayer","createImageLayers","prevProps","viewInfoDidUpdate","shallowDiff","propName","forceUpdate","SpatialWrapper","forwardRef","bottom","right","position","transition","HeatmapControls","onColorScaleChange","getGeneByCellTile","view","tileSize","tileI","tileJ","numCells","cellOrdering","tileData","offset","cellI","geneI","sortedCellI","tileSizeRange","getCellByGeneTile","layerFilter","startsWith","getAxisSizes","transpose","geneLabelMaxLength","cellLabelMaxLength","clamp","mouseToHeatmapPosition","mouseX","mouseY","offsetLeft","offsetTop","numRows","numCols","viewMouseX","viewMouseY","bboxTargetX","bboxTargetY","bboxLeft","bboxTop","zoomedOffsetLeft","zoomedOffsetTop","zoomedViewMouseX","zoomedViewMouseY","zoomedMouseX","zoomedMouseY","rowI","colI","heatmapToMousePosition","minY","maxY","totalHeight","minInViewY","maxInViewY","inViewHeight","normalizedRowY","globalRowY","minX","maxX","totalWidth","minInViewX","maxInViewX","inViewWidth","normalizedRowX","globalRowX","Heatmap","rawViewState","setHeatmapControls","heatmapControls","expression","clearPleaseWait","setGeneHighlight","setIsRendering","variablesTitle","observationsTitle","minZoom","workerRef","HeatmapWorker","tilesRef","dataRef","axisLeftLabels","setAxisLeftLabels","axisTopLabels","setAxisTopLabels","setColorScaleLo","setColorScaleHi","newValue","tileIteration","incTileIteration","backlog","setBacklog","tiles","curr","currIndex","newCellOrdering","oldCellOrdering","matrixRight","matrixBottom","xTiles","ceil","yTiles","widthRatio","heightRatio","tileWidth","tileHeight","nextZoom","nextScaleFactor","minTargetX","maxTargetX","minTargetY","maxTargetY","nextTarget","postMessage","heatmapLayers","getLayer","tile","tileRow","textLayers","cellColorsTiles","colorBarTileWidthPx","colorBarTileHeightPx","Uint8ClampedArray","tileY","rValue","gValue","bValue","ImageData","cellColorsLayers","offsetCenter","obsI","varI","varId","controller","constant","jiggle","random","forceCollideRects","masses","strength","iterations","xCenter","vx","yCenter","vy","prepare","quad","force","nodeSize","nodeMass","xi","yi","visitAfter","apply","xSize","ySize","xd","abs","yd","sqrt","m","iterate","initialize","LABEL_FONT_FAMILY","NUM_FORCE_SIMULATION_TICKS","LABEL_UPDATE_ZOOM_DELTA","makeDefaultGetCellPosition","available","s","mappedCell","makeDefaultGetCellCoords","Scatterplot","cellSetsForceSimulation","cellSetsLabelPrevZoom","cellSetsLayers","onUpdateCellSetsLayers","getCellPosition","cellRadiusScale","cellOpacity","radiusScale","radiusMinPixels","cellSetPolygonsVisible","cellSetLabelsVisible","cellSetLabelSize","wireframe","label","collisionForce","forceSimulation","tick","getAlignmentBaseline","fontWeight","onlyViewStateChange","createCellSetsLayers","ScatterplotWrapper","VectorLayerController","handleLayerChange","isOn","handleSliderChange","handleCheckBoxChange","marginTop","paddingTop","SpatialOptions","SpatialTooltipSubscriber","cellHighlight","getCellInfo","SPATIAL_DATA_TYPES","SPATIAL_LAYER_TYPES","SpatialSubscriber","initializeLayers","observationsLabelOverride","observationsPluralLabelOverride","subobservationsLabelOverride","subobservationsPluralLabelOverride","disableTooltip","spatialZoom","spatialTargetX","spatialTargetY","targetZ","spatialTargetZ","spatialLayers","setZoom","setSpatialZoom","setTargetX","setSpatialTargetX","setTargetY","setSpatialTargetY","setTargetZ","setSpatialTargetZ","setLayers","setSpatialLayers","setCellFilter","autoLayers","setAutoLayers","areAutoLayersComplete","loaderType","newLayers","mergedCellSets","setCellSelectionProp","subtitle","newZoom","ScatterplotTooltipSubscriber","ScatterplotOptions","cellRadius","setCellRadius","setCellSetLabelsVisible","setCellSetLabelSize","setCellSetPolygonsVisible","handleRadiusChange","handleLabelVisibilityChange","checked","handleLabelSizeChange","handlePolygonVisibilityChange","valueLabel","SCATTERPLOT_DATA_TYPES","ScatterplotSubscriber","embeddingZoom","embeddingTargetX","embeddingTargetY","embeddingTargetZ","embeddingType","embeddingCellSetPolygonsVisible","embeddingCellSetLabelsVisible","embeddingCellSetLabelSize","embeddingCellRadius","setEmbeddingZoom","setEmbeddingTargetX","setEmbeddingTargetY","setEmbeddingTargetZ","setEmbeddingCellSetPolygonsVisible","setEmbeddingCellSetLabelsVisible","setEmbeddingCellSetLabelSize","setEmbeddingCellRadius","setCellRadiusScale","diagonalLength","newScale","newTargetX","newTargetY","HeatmapTooltipSubscriber","getGeneInfo","geneHighlight","cellCoord","geneInfo","geneCoord","HEATMAP_DATA_TYPES","HeatmapSubscriber","variablesLabelOverride","variablesLabel","variablesPluralLabelOverride","variablesPluralLabel","zoomX","heatmapZoomX","heatmapTargetX","heatmapTargetY","geneExpressionColormapRange","setZoomX","setHeatmapZoomX","setZoomY","setHeatmapZoomY","setHeatmapTargetX","setHeatmapTargetY","setGeneExpressionColormapRange","isRendering","genesCount","selectedCount","Status","warnClass","messages","CellSetSizesPlot","rawData","keyLength","keyName","mark","encoding","labelExpr","legend","tooltip","config","Tree","React","prefixCls","className","showIcon","blockNode","checkable","classNames","virtual","HelpTooltip","content","overlayClassName","spanRef","getTooltipContainer","closest","trigger","mouseEnterDelay","mouseLeaveDelay","Popover","PopoverMenuListButton","handler","handlerKey","confirm","isConfirming","setIsConfirming","handleOrRequireConfirm","titleWithConfirm","PopoverMenuList","menuConfig","handleColorChange","rgb","defaultPalette","PopoverMenu","setVisible","makeNodeViewMenuConfig","onCheckNode","onNodeRemove","onNodeSetIsEditing","onExportLevelZeroNodeJSON","onExportLevelZeroNodeTabular","onExportSetJSON","editable","exportable","NamedSetNodeStatic","isChecking","onNodeSetColor","onNodeView","onCheckLevel","checkedLevelPath","checkedLevelIndex","shouldCheckNextLevel","nextLevelToCheck","numberFormatter","Intl","NumberFormat","niceSize","tooltipText","tooltipProps","popoverMenuConfig","NamedSetNodeEditing","onNodeSetName","onNodeCheckNewName","currentTitle","setCurrentTitle","hasConflicts","trySetName","NamedSetNode","isEditing","isCurrentSet","LevelsButtons","hasColorEncoding","onCheck","parseInt","isChecked","clsx","SwitcherIcon","isOpen","hexColor","TreeNode","renderSelector","onDragStartProp","onDragStart","rcTree","prefixClass","draggable","wrapClass","isDraggable","setSelectHandle","getNodeState","renderCheckbox","renderLevels","renderSwitcher","onNodeExpand","onNodeExpandWrapper","switcherClass","loading","dragOver","dragOverGapTop","dragOverGapBottom","selected","halfChecked","onDragEndProp","onDragEnd","expandable","otherProps","filterTreeNode","disabled","isDisabled","dataAndAriaAttributeProps","getDataAndAria","onDragEnter","onDragOver","onDragLeave","onDrop","renderChildren","RcTreeNode","PlusButton","onError","onImportTree","onCreateLevelZeroNode","importable","onImport","importHandler","mimeType","uploadInputNode","File","FileReader","FileList","Blob","files","reader","readAsText","SetOperationButtons","onUnion","onIntersection","onComplement","operatable","hasCheckedSetsToUnion","hasCheckedSetsToIntersect","hasCheckedSetsToComplement","processSets","sets","getAllKeys","SetsManager","additionalSets","checkedLevel","levelSelection","setSelection","setExpansion","onExpandNode","onDropNode","autoExpandParent","setIsDragging","isEditingNodeName","setIsEditingNodeName","processedSets","processedAdditionalSets","additionalSetKeys","allSetSelectionKeys","allSetExpansionKeys","setSelectionKeys","setExpansionKeys","additionalSetSelectionKeys","additionalSetExpansionKeys","renderTreeNodes","readOnly","checkedKeys","expandedKeys","dropKey","eventKey","dragKey","dragNode","dropToGap","dropPosition","display","justifyContent","alignItems","flexWrap","button","icon","stroke","action","ColorPalette","handleChange","menuButton","ChannelOptions","handlePropertyChange","handleChannelRemove","handleIQRUpdate","handleColorSelect","handleRemove","toRgbUIString","on","abbreviateNumber","maxLength","maxNaiveDigits","Number","isInteger","naive","maximumSignificantDigits","useGrouping","toExponential","ChannelSelectionDropdown","disableOptions","channelOptions","selectionIndex","opt","ChannelSlider","dtype","handleChangeDebounced","step","ChannelVisibilityCheckbox","ChannelController","visibility","channelId","newDomainType","dimName","colormapOn","setDomain","setDomainType","rgbColor","mounted","hasDomainChanged","hasSelectionChanged","DTYPE_VALUES","newDomain","createSelection","DOMAIN_OPTIONS","ColormapSelect","inputId","TransparentColorCheckbox","float","OpacitySlider","SliderDomainSelector","GlobalSelectionSlider","possibleValues","LayerOption","LayerOptions","handleColormapChange","handleOpacityChange","handleTransparentColorChange","globalControlDimensions","globalDimensionValues","handleGlobalChannelsSelectionChange","handleDomainChange","hasDimensionsAndChannels","dimension","getDomainsAndSliders","buttonStyles","borderStyle","RasterLayerController","handleLayerRemove","firstSelection","o","setGlobalDimensionValues","setColormap","setOpacity","setChannels","setTransparentColor","setChannelsAndDomainType","newChannels","setChannel","addChannel","removeChannel","handleChannelAdd","mouseUp","channelControllers","channelDimensions","handleChannelPropertyChange","property","update","q1","q3","summaryClasses","MAX_SLIDERS_AND_CHANNELS","SelectableTable","columns","onChange","idKey","valueKey","allowMultiple","allowUncheck","showTableHead","showTableInputs","testHeight","testWidth","selectedRows","setSelectedRows","onSelectRow","union","difference","handleInputChange","getDataFromIds","ids","initialSelectedRows","selectedRowData","inputUuid","hiddenInputsClass","rowRenderer","column","headerRowRenderer","outline","Genes","geneList","geneFilter","setGeneSelection","searchTerm","setSearchTerm","searchResults","setSearchResults","results","gene","toLowerCase","localeCompare","StatusSubscriber","moleculeHighlight","infos","GENES_DATA_TYPES","GenesSubscriber","setGeneFilter","setGeneSelectionAndColorEncoding","newSelection","CELL_SETS_DATA_TYPES","CellSetsManagerSubscriber","initializeSelection","initializeColor","autoSetSelections","setAutoSetSelections","autoSetColors","setAutoSetColors","cellSetExpansion","setCellSetExpansion","newAutoSetSelectionParentName","newAutoSetSelections","newAutoSetColors","upgradedCellSets","allCellIds","setCellSetColorEncoding","levelZeroName","newCellSetSelection","targetKey","split","dropPath","dropNode","dropNodeLevel","dropNodeIsLevelZero","dragPath","dropParentNode","dropParentPath","dropNodeCurrIndex","hasSiblingNameConflict","dragNodeName","newDragPath","addChildFunction","checkPathFunction","newLevelZero","oldColors","newColors","newCellSetColor","prevNodeColor","nextNamePath","pop","renameNode","nextCellSetSelection","nextCellSetExpansion","setsToView","viewNode","expandedPath","targetNode","newSet","importAutoSetColors","packageJson","CELL_SET_SIZES_DATA_TYPES","CellSetSizesPlotSubscriber","addButton","ImageAddIcon","ImageAddButton","imageOptions","handleImageAdd","handleAdd","imgData","LAYER_CONTROLLER_DATA_TYPES","LayerControllerSubscriber","newLayer","layerMeta","module","exports","require","COMPONENT_ID_PREFIX","sum","makeGridLayout","colXs","colLayout","colWs","w","getMaxRows","layouts","xywh","resolveLayout","breakpoints","components","positions","def","columnXs","columnCount","ResponsiveGridLayout","WidthProvider","Responsive","ResponsiveHeightGridLayout","VitessceGridLayout","getComponent","margin","draggableHandle","reactGridLayoutProps","rowHeight","onRemoveComponent","onLayoutChangeProp","onLayoutChange","gridCols","gridLayouts","gridBreakpoints","gridComponents","maxRows","nextC","prevC","substring","nextProps","layoutChildren","Component","innerHeight","AbstractLoader","requestInit","subscriptions","subscriber","token","typeToSchema","cellsSchema","moleculesSchema","neighborhoodsSchema","rasterSchema","JsonLoader","fileType","fetch","response","ok","json","reject","headers","MatrixZarrLoader","store","HTTPStore","getItem","bytes","decoder","TextDecoder","decode","openArray","z","getRaw","loadAttrs","loadArr","GenesJsonAsMatrixZarrLoader","genesSchema","normalizedFlatMatrix","ClustersJsonAsMatrixZarrLoader","clustersSchema","shape","normalizedMatrix","col","normalize","tNormalizedMatrix","flat","initLoader","imageData","createZarrLoader","omeTiffOffsetsUrl","res","offsets","createOMETiffLoader","urlOrFile","RasterLoader","URL","createObjectURL","images","imagesWithLoaderCreators","CellSetsJsonLoader","upgradedData","BaseAnnDataLoader","buf","text","KeyError","cellSetZarrLocation","getJson","categories","getFlatTextArr","categoriesValues","cellSetsArr","cellSetsValues","mappedCellSetValues","keyPrefix","String","compressor","dbytes","tmp","getFlatArrDecompressed","decodeTextArray","cellNames","_index","CellSetsZarrLoader","loadCellNames","loadCellSetIds","cellSetsTree","cellSetIds","uniqueCellSetIds","clusters","cluster","CellsZarrLoader","loadNumeric","coordinationName","loadMappings","loadXy","loadPoly","loadFactors","dims","factorsObj","cellXGene","cellXGeneMatrix","Float32Array","_","rowStart","rowEnd","colStart","colEnd","zattrs","encodingType","_loadCSRSparseCellXGene","_loadCSCSparseCellXGene","geneNames","geneFilterZarr","loadGeneNames","loadCellXGene","ratio","GenomicProfilesZarrLoader","ANNDATA","fileTypeToLoader","RasterJsonLoader","AnnDataLoaders","getNumRows","bottomY","len","getRowHeight","containerHeight","effectiveContainerHeight","useRowHeight","initialRowHeight","setContainerHeight","setRowHeight","newRowHeight","createLoaders","datasets","configDescription","datasetLoaders","file","matchingLoaderClass","uid","VitessceGrid","onResize","onResizeStop","urlPrefix","makeLayerNameToConfig","datasetPrefix","linnarssonLayerNames","linnarssonDescription","linnarssonBase","linnarssonBaseNoClusters","driesDescription","driesBase","wangDescription","wangBase","vanderbiltDescription","vanderbiltBase","configs","public","method","credentials","cache","redirect","referrer","integrity","staticLayout","initStrategy","PCA","TSNE","A","UMAP","vanderbilt","genomicZoomX","genomicZoomY","genomicTargetX","genomicTargetY","hgViewConfig","autocompleteSource","genomePositionSearchBox","autocompleteServer","autocompleteId","chromInfoServer","chromInfoId","chromInfoPath","tracks","tilesetUid","server","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","minHeight","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing","showMousePosition","mousePositionColor","plusStrandColor","minusStrandColor","labelColor","trackBorderWidth","trackBorderColor","fontIsLeftAligned","center","contents","maxZoom","labelShowResolution","labelShowAssembly","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","colorbarBackgroundOpacity","colorbarPosition","heatmapValueScaling","showTooltip","zeroValueColor","scaleStartPercent","scaleEndPercent","transforms","whole","gallery","moved","static","profileTrackUidKey","listConfigs","showAll","entry","getConfig","DatasetList","aClassName","links","Form","Info","branch","hash","date","Welcome","showBetaHeader","Warning","preformatted","unformatted","validateViewConfig","addSchema","configSchema","CallbackPublisher","onWarn","onConfigChange","onLoaderChange","validateOnConfigChange","subscribe","Description","metadataRecord","DESCRIPTION_DATA_TYPES","DescriptionSubscriber","descriptionOverride","getMetadata","PIXI_BUNDLE_VERSION","dependencies","HIGLASS_BUNDLE_VERSION","BUNDLE_FILE_EXT","process","PIXI_BUNDLE_URL","HIGLASS_BUNDLE_URL","dynamicImportPolyfill","register","dataFetcher","ZarrMultivecDataFetcher","pluginType","HiGlassComponent","lazy","ReactDOM","handleImportError","__import__","hglib","HG_SIZE","HiGlassLazy","hgViewConfigProp","hgOptionsProp","hgOptions","genomeSize","setGenomicZoomX","setGenomicZoomY","setGenomicTargetX","setGenomicTargetY","computedHeight","hgInstance","setHgInstance","isActiveRef","centerX","genomesPerUnitX","unitX","initialXDomain","centerY","genomesPerUnitY","unitY","initialYDomain","zoomFixed","trackSourceServers","exportViewUrl","views","zoomLocks","locksByViewUid","locksDict","locationLocks","valueScaleLocks","handleMouseEnter","handleMouseLeave","api","viewConfigString","xDomain","yDomain","nextGenomicZoomX","nextGenomicZoomY","nextGenomicTargetX","nextGenomicTargetY","off","bounded","pixelPreciseMarginPadding","containerPaddingX","containerPaddingY","sizeMode","HIGLASS_DATA_TYPES","HiGlassSubscriber","GENOMIC_PROFILES_DATA_TYPES","REFERENCE_TILESETS","hg38","chromosomes","hg19","mm9","mm10","GenomicProfilesSubscriber","profileTrackNameKey","higlassServer","assembly","foregroundColor","dimColor","referenceTracks","referenceTracksHeightSum","profileTracksHeightSum","profileTrackHeight","row_infos","profileTracks","rowInfo","trackUid","isPath","trackName","setInSelection","trackUidString","track","barFillColor","hgView","ExpressionHistogram","xTitle","bin","maxbins","aggregate","EXPRESSION_HISTOGRAM_DATA_TYPES","ExpressionHistogramSubscriber","normValue","subarray","sumValue","useExpressionByCellSet","cellObjects","exprMax","exprValues","expressionArr","expressionMax","setArr","CellSetExpressionPlot","domainMax","colorScale","plotWidth","plotHeight","numBands","bandWidth","rectColor","axisBand","bandPosition","tickExtra","tickOffset","signals","source","groupby","bandwidth","ops","as","scales","signal","reverse","axes","orient","zindex","tickCount","labelAngle","labelAlign","marks","facet","encode","enter","xc","band","expr","parent","y2","CELL_SET_EXPRESSION_DATA_TYPES","CellSetExpressionPlotSubscriber","registry","getExistingScopesForCoordinationType","coordinationType","spaceScopes","componentScopes","coordinateComponentsTogether","scopeValue","scopeName","newConfig","coordinateComponentsIndependent","newScopes","initializeAuto","requiresCoordination","defaultValue","upgradeReplaceViewProp","prevZScopes","prevTXScopes","prevTYScopes","nextZScope","nextTXScope","nextTYScope","upgrade","datasetUid","componentDef","newComponentDef","newScopeValues","newDatasetUid","generateClassName","createGenerateClassName","disableGlobal","Vitessce","upgradedConfig","validateLegacy","legacyConfigSchema","validLegacy","groupCollapsed","groupEnd","initializedConfig","configOrWarning","success","AwaitResponse","isLoading","setIsLoading","responseRef","preformattedDetails","statusText","redirected","checkResponse","debug","validateTheme","createApp","urlParams","URLSearchParams","location","search","datasetId","responsePromise","CURRENT_VERSION","VITESSCE_CONF_QUERY_STRING","VERSION_QUERY_STRING","LENGTH_QUERY_STRING","sniffBrowser","Bowser","navigator","userAgent","browser","MAX_BROWSER_URL_LENGTHS","Chrome","Edge","Safari","Firefox","CompressedConfLengthError","encodeConfInUrl","conf","onOverMaximumUrlLength","compressedConf","compressToEncodedURIComponent","newParams","willWorkOn","decodeURLParamsToConf","queryString","compressedConfString","expectedConfLength","decompressFromEncodedURIComponent","VitessceConfigDatasetFile","dataType","VitessceConfigDataset","f","toJSON","VitessceConfigView","cScopes","cScope","cType","VitessceConfigViewHConcat","VitessceConfigViewVConcat","hconcat","vcvhc","vconcat","vcvvc","VitessceConfigCoordinationScope","cValue","VitessceConfig","prevDatasetUids","nextUid","newDataset","addCoordination","newScope","setValue","datasetMatches","datasetScope","newView","etScope","cTypes","cValues","viewConcat","layoutAux","xMin","xMax","yMin","yMax","setXYWH","numViews","cScopeName","vc","addDataset","addFile","cObj","cScopeValue"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;;;;ACAe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AACJ;AACsB;AAClB;AACrC;AACf,SAAS,kBAAiB,SAAS,gBAAe,SAAS,qDAA0B,SAAS,kBAAiB;AAC/G,C;;;;;;;ACNA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 184);\n","module.exports = require(\"react\");","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useRef, useCallback } from 'react';\nimport create from 'zustand';\nimport shallow from 'zustand/shallow';\nimport { fromEntries, capitalize } from '../../utils';\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const useViewConfigStore = create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: i => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  }));\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig() {\n  const setViewConfigRef = useRef(useViewConfigStore.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","import GL from '@luma.gl/constants';\n\nexport const TILE_SIZE = 2048;\nexport const MIN_ROW_AGG = 1;\nexport const MAX_ROW_AGG = 16;\n\nexport const COLOR_BAR_SIZE = 20;\nexport const AXIS_LABEL_TEXT_SIZE = 9;\nexport const AXIS_TITLE_TEXT_SIZE = 15;\nexport const AXIS_MIN_SIZE = 10;\nexport const AXIS_MAX_SIZE = 90;\nexport const AXIS_MARGIN = 3;\nexport const THEME_TO_TEXT_COLOR = {\n  dark: [224, 224, 224],\n  light: [64, 64, 64],\n};\nexport const AXIS_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\n\nexport const PIXELATED_TEXTURE_PARAMETERS = {\n  // NEAREST for integer data to prevent interpolation.\n  [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n  [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n  // CLAMP_TO_EDGE to remove tile artifacts.\n  [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n  [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n};\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from 'deck.gl';\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_COLOR = [128, 128, 128];\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","module.exports = require(\"regenerator-runtime\");\n","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","module.exports = require(\"lodash/isEqual\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\nexport function range(length) {\n  return [...Array(length).keys()];\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n","import tinycolor from 'tinycolor2';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * Execute a callback function based on a keypress event.\n * @param {object} event The event from onKeyPress\n * @param {string} key The key identifier to match.\n * @param {Function} callback The function to execute.\n */\nexport function callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\n/**\n * Convert an array of [r, g, b] numbers to a hex color.\n * @param {number[]} rgbArray The color [r, g, b] array.\n * @returns {string} The hex color as a string.\n */\nexport function colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\n\n/**\n * Convert a string color representation to an array of [r,g,b].\n * @param {string} colorString The color as a string.\n * @returns {number[]} The color as an array.\n */\nexport function colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\n/**\n * Get a string of help text for coloring a particular hierarchy level.\n * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.\n * @returns {string} The tooltip text for coloring the level.\n */\nexport function getLevelTooltipText(i) {\n  if (i === 0) return 'Color by hierarchy';\n  if (i <= 2) {\n    const subs = j => ('sub'.repeat(j));\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\n\nexport function isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\n\nexport function tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\n\nexport const PATH_SEP = '___';\n\nexport function pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n","module.exports = require(\"@material-ui/core/styles\");","export const GLOBAL_SLIDER_DIMENSION_FIELDS = ['z', 'time'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  type: 'molecules', opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  type: 'cells', opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  type: 'neighborhoods', visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","/* eslint-disable no-underscore-dangle */\nimport uuidv4 from 'uuid/v4';\nimport isNil from 'lodash/isNil';\nimport isEqual from 'lodash/isEqual';\nimport range from 'lodash/range';\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from '@turf/helpers';\nimport concave from '@turf/concave';\nimport centroid from '@turf/centroid';\nimport {\n  HIERARCHICAL_SCHEMAS,\n} from './constants';\nimport { DEFAULT_COLOR, PALETTE } from '../utils';\nimport { pathToKey } from './utils';\n\n/**\n * Alias for the uuidv4 function to make code more readable.\n * @returns {string} UUID.\n */\nfunction generateKey() {\n  return uuidv4();\n}\n\n/**\n * Get the set associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {array} The array representing the set associated with the node.\n */\nexport function nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return (currNode.set || []);\n  }\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\n/**\n * Get the height of a node (the number of levels to reach a leaf).\n * @param {object} currNode A node object.\n * @param {number} level The level that the height will be computed relative to. By default, 0.\n * @returns {number} The height. If the node has a .children property,\n * then the minimum value returned is 1.\n */\nexport function nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\n/**\n * Find a node with a matching name path, relative to a particular node.\n * @param {object} node A node object.\n * @param {string[]} path The name path for the node of interest.\n * @param {number} currLevelIndex The index of the current hierarchy level.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children\n        .map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1))\n        .filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Find a node with a matching name path, relative to the whole tree.\n * @param {object} currTree A tree object.\n * @param {string[]} targetNamePath The name path for the node of interest.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nexport function treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree\n    .map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0))\n    .filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\n\n/**\n * Transform a node object using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...node,\n      children: node.children.map(\n        child => nodeTransform(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return node;\n}\n\n/**\n * Transform many node objects using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...newNode,\n      children: newNode.children.map(\n        child => nodeTransformAll(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return newNode;\n}\n\n/**\n * Append a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodeAppendChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [...currNode.children, newChild],\n  };\n}\n\n/**\n * Prepend a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodePrependChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [newChild, ...currNode.children],\n  };\n}\n\n/**\n * Insert a child to a parent node.\n * @param {object} currNode A node object.\n * @param {*} newChild The child node object.\n * @param {*} insertIndex The index at which to insert the child.\n * @returns {object} The updated node.\n */\nexport function nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return {\n    ...currNode,\n    children: newChildren,\n  };\n}\n\n/**\n * Get an array representing the union of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the union of the sets of checked nodes.\n */\nexport function treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the intersection of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the intersection of the sets of checked nodes.\n */\nexport function treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the complement of the union of the sets of checked nodes.\n * @param {object} currTree\n * @returns {array} An array representing the complement of the\n * union of the sets of checked nodes.\n */\nexport function treeToComplement(currTree, checkedPaths, items) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items.filter(el => !primaryUnion.includes(el));\n}\n\n/**\n * Get an flattened array of descendants at a particular relative\n * level of interest.\n * @param {object} node A node object.\n * @param {number} level The relative level of interest.\n * 0 for this node's children, 1 for grandchildren, etc.\n * @param {boolean} stopEarly Should a node be returned early if no children exist?\n * @returns {object[]} An array of descendants at the specified level,\n * where the level is relative to the node.\n */\nexport function nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children\n    .flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly))\n    .filter(Boolean);\n}\n\n/**\n * Export the tree by clearing tree state and all node states.\n * @param {object} currTree A tree object.\n * @returns {object} Tree object with tree and node state removed.\n */\nexport function treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree,\n  };\n}\n\n/**\n * Export the tree by clearing tree state and all node states,\n * and filter so that only the level zero node of interest is included.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { treeToExport, nodeName }\n * Tree with one level zero node, and with state removed.\n */\nexport function treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    const nodeColor = cellSetColors?.find(c => isEqual(c.path, nPath))?.color ?? DEFAULT_COLOR;\n    return {\n      ...n,\n      color: nodeColor.slice(0, 3),\n    };\n  }, []);\n  const treeWithOneLevelZeroNode = {\n    ...currTree,\n    tree: [nodeWithColors],\n  };\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name,\n  };\n}\n\n/**\n * Prepare the set of a node of interest for export.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { setToExport, nodeName } The set as an array.\n */\nexport function treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\n\n/**\n * Get an empty tree, with a default tree state.\n * @param {string} datatype The type of sets that this tree contains.\n * @returns {object} Empty tree.\n */\nexport function treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: [],\n  };\n}\n\n/**\n * For convenience, get an object with information required\n * to render a node as a component.\n * @param {object} node A node to be rendered.\n * @returns {object} An object containing properties required\n * by the TreeNode render functions.\n */\nexport function nodeToRenderProps(node, path, cellSetColor) {\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: nodeToSet(node).length,\n    color: cellSetColor?.find(d => isEqual(d.path, path))?.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node),\n  };\n}\n\n/**\n * Using a color and a probability, mix the color with an \"uncertainty\" color,\n * for example, gray.\n * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701\n * @param {number[]} originalColor The color assignment for the class.\n * @param {number} p The mixing amount, or level certainty in the originalColor classification,\n * between 0 and 1.\n * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.\n * @returns {number[]} Returns the color after mixing.\n */\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    ((originalColor[0] - mixingColor[0]) * p) + mixingColor[0],\n    ((originalColor[1] - mixingColor[1]) * p) + mixingColor[1],\n    ((originalColor[2] - mixingColor[2]) * p) + mixingColor[2],\n  ];\n}\n\n/**\n * Given a tree with state, get the cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n *  @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} cellSetColor Array of objects with the\n * properties `path` and `color`.\n * @returns {array} Tuple of [cellIds, cellColors]\n * where cellIds is an array of strings,\n * and cellColors is an object mapping cellIds to color [r,g,b] arrays.\n */\nexport function treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          (isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)),\n        ]),\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\n/**\n * Given a tree with state, get an array of\n * objects with cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @returns {object[]} Array of objects with properties\n * `obsId`, `name`, and `color`.\n */\nexport function treeToObjectsBySetNames(currTree, selectedNamePaths, setColor) {\n  let cellsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      cellsArray = [\n        ...cellsArray,\n        ...nodeSet.map(([cellId]) => ({\n          obsId: cellId,\n          name: node.name,\n          color: nodeColor,\n        })),\n      ];\n    }\n  });\n  return cellsArray;\n}\n\nexport function treeToCellPolygonsBySetNames(\n  currTree, cells, mapping, selectedNamePaths, cellSetColor,\n) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      const cellPositions = nodeSet\n        .map(([cellId]) => ([\n          cells[cellId]?.mappings[mapping][0],\n          -cells[cellId]?.mappings[mapping][1],\n        ]))\n        .filter(Boolean);\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(\n          cellPositions.map(turfPoint),\n        );\n        const hull = concave(points);\n        if (hull) {\n          const hullCoords = hull.geometry.coordinates;\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords,\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\n/**\n * Given a tree with state, get the sizes of the\n * sets currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @returns {object[]} Array of objects\n * with the properties `name`, `size`, `key`,\n * and `color`.\n */\nexport function treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = setColor.find(d => isEqual(d.path, setNamePath))?.color || DEFAULT_COLOR;\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor,\n      });\n    }\n  });\n  return sizes;\n}\n\n/**\n * Find and remove a node from the descendants of the current node.\n * @param {object} node A node to search on.\n * @param {array} prevPath Path of the current node to be searched.\n * @param {array} filterPath The path sought.\n * @returns {object} A new node without a node at filterPath.\n */\nexport function filterNode(node, prevPath, filterPath) {\n  if (isEqual([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return {\n    ...node,\n    children: node.children.map(\n      c => filterNode(c, [...prevPath, node.name], filterPath),\n    ).filter(Boolean),\n  };\n}\n\nexport function treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\n\nexport function treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n\n  testPaths.forEach((testPath) => {\n    if (paths.find(p => isEqual(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nexport function initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array\n    .from({\n      length: nodeToHeight(tree) + 1, // Need to add one because its an array.\n    }).fill(0));\n\n  function processNode(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n\n    const nodeColor = nextCellSetColor.find(d => isEqual(d.path, nodePath));\n    if (!nodeColor) {\n      nextCellSetColor.push({\n        path: nodePath,\n        color: PALETTE[index % PALETTE.length],\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach(c => processNode(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nexport function getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(cellSets, cells, mapping, cellSetSelection, cellSetColor);\n  }\n  return [];\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderFetchError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, responseHeaders) {\n    super(`Error HTTP status fetching ${datasetType}.`);\n    this.name = 'LoaderFetchError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.responseHeaders = responseHeaders;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, responseHeaders,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: fetch failed`,\n      responseHeaders,\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderFetchError } from './LoaderFetchError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\n","module.exports = require(\"deck.gl\");","import {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n","import { useState, useEffect } from 'react';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n} from '../loaders/errors/index';\nimport { initializeRasterLayersAndChannels } from './spatial/utils';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        if (onLoad) {\n          onLoad(data);\n        }\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, urls } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n\n        const {\n          layers: rasterLayers,\n          renderLayers:\n          rasterRenderLayers,\n          usePhysicalSizeScaling,\n        } = data;\n        initializeRasterLayersAndChannels(rasterLayers, rasterRenderLayers, usePhysicalSizeScaling)\n          .then(([autoImageLayers, nextImageLoaders, nextImageMeta]) => {\n            setImageLayerLoaders(nextImageLoaders);\n            setImageLayerMeta(nextImageMeta);\n            if (onLoad) {\n              onLoad(autoImageLayers);\n            }\n            setItemIsReady('raster');\n          });\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const COORDINATION_TYPES = {\n  DATASET: 'dataset',\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: 'embeddingCellSetPolygonsVisible',\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: 'embeddingCellSetLabelsVisible',\n  EMBEDDING_CELL_SET_LABEL_SIZE: 'embeddingCellSetLabelSize',\n  EMBEDDING_CELL_RADIUS: 'embeddingCellRadius',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  CELL_FILTER: 'cellFilter',\n  CELL_HIGHLIGHT: 'cellHighlight',\n  CELL_SET_SELECTION: 'cellSetSelection',\n  CELL_SET_HIGHLIGHT: 'cellSetHighlight',\n  CELL_SET_COLOR: 'cellSetColor',\n  GENE_FILTER: 'geneFilter',\n  GENE_HIGHLIGHT: 'geneHighlight',\n  GENE_SELECTION: 'geneSelection',\n  GENE_EXPRESSION_COLORMAP: 'geneExpressionColormap',\n  GENE_EXPRESSION_COLORMAP_RANGE: 'geneExpressionColormapRange',\n  CELL_COLOR_ENCODING: 'cellColorEncoding',\n  SPATIAL_LAYERS: 'spatialLayers',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_CELL_SETS: 'additionalCellSets',\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n};\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: 0,\n  [COORDINATION_TYPES.SPATIAL_LAYERS]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: 'plasma',\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0.0, 1.0],\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: 'cellSetSelection',\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 1549999999.5,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 1549999999.5,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.SPATIAL_ZOOM,\n  COORDINATION_TYPES.SPATIAL_TARGET_X,\n  COORDINATION_TYPES.SPATIAL_TARGET_Y,\n  COORDINATION_TYPES.SPATIAL_TARGET_Z,\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n};\n","module.exports = require(\"@deck.gl/core\");","module.exports = require(\"@hms-dbmi/viv\");","module.exports = require(\"mathjs\");","module.exports = require(\"@material-ui/core/Grid\");","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\n","module.exports = require(\"zustand\");","module.exports = require(\"@luma.gl/constants\");","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.75em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title d-flex justify-content-between align-items-baseline\">\n        <div className=\"justify-content-between d-flex align-items-end\">\n          <span>{title}</span>\n        </div>\n        <span className=\"details pl-2 align-items-end\">\n          <span className=\"d-flex justify-content-between\">\n            {info}\n            { options && (\n              <PlotOptions\n                options={options}\n              />\n            ) }\n            {urls && urls.length > 0 && (\n              <DownloadOptions\n                urls={urls}\n              />\n            )}\n            <ClosePaneButton\n              removeGridComponent={removeGridComponent}\n            />\n          </span>\n        </span>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","module.exports = require(\"@deck.gl/layers\");","import { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n    zIndex: 1500,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nexport const muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/core/colors\");","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/IconButton\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { styles } from './styles';\n\nfunction MuiPopper(props) {\n  const classes = styles();\n  const {\n    anchorEl,\n    open,\n    placement = 'bottom-start',\n    children,\n  } = props;\n  return (\n    <Popper\n      className={classes.popper}\n      open={open}\n      anchorEl={anchorEl.current}\n      placement={placement}\n    >\n      {children}\n    </Popper>\n  );\n}\n\nfunction MuiPaper(props) {\n  const { children } = props;\n  const classes = styles();\n  return (\n    <Paper className={classes.paper} elevation={4}>\n      {children}\n    </Paper>\n  );\n}\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    toggle,\n    children,\n    placement,\n    buttonClassName,\n  } = props;\n  const anchorRef = useRef(null);\n  const classes = styles();\n  return (\n    <>\n      <IconButton\n        onClick={toggle}\n        size=\"small\"\n        ref={anchorRef}\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <MuiPopper\n        className={classes.popper}\n        open={open}\n        anchorEl={anchorRef}\n        placement={placement}\n      >\n        <MuiPaper>\n          <ClickAwayListener onClickAway={toggle}>\n            <MenuList>{children}</MenuList>\n          </ClickAwayListener>\n        </MuiPaper>\n      </MuiPopper>\n    </>\n  );\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport { cloneDeep, isEqual } from 'lodash';\nimport { getChannelStats, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_SLIDER_DIMENSION_FIELDS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(imageDims) {\n  const globalIndices = imageDims\n    .filter(dim => GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim.field] = Math.floor((dim.values.length || 0) / 2);\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(imageDims) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(imageDims);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = imageDims.filter(\n    dim => !GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field) && dim.values,\n  )[0];\n  for (let i = 0; i < Math.min(4, firstNonGlobalDimension.values.length); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension.field]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * Initialize the channel settings for an individual channel and selection.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @param {object} selection The channel selection object.\n * @param {number} i The index of this channel for the layer.\n * @returns {object} The initialized channel with\n * domain/slider settings.\n */\nexport async function initializeChannelForSelection(loader, selection, i) {\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: [selection] });\n\n  const domain = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].domain;\n  const color = loader.isRgb ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]][i] : VIEWER_PALETTE[i];\n  const slider = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].autoSliders;\n\n  return {\n    selection,\n    color,\n    visible: true,\n    slider: slider || domain,\n  };\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader) {\n  const result = [];\n  const loaderDimensions = loader.dimensions;\n  // Add channel automatically as the first avaialable value for each dimension.\n  const defaultSelection = buildDefaultSelection(loaderDimensions);\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: defaultSelection });\n\n  const domains = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.domain);\n  const colors = loader.isRgb\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.autoSliders);\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      color: colors ? colors[i] : VIEWER_PALETTE[i],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\n/**\n * A user may want to use pre-defined channels of interest\n * (defined in a `spatialLayers` coordination object),\n * but wants to allow Vitessce to auto-initialize the\n * sliders, colors, and/or domains for those channels.\n * This function allows those channel properties to\n * be initialized.\n * @param {object[]} layerDefsOrig The original array\n * of user-defined layer definitions, which must contain\n * an array of channel definitions with the .selection\n * property, but may be missing the .domain, .color, .visible,\n * or .slider properties.\n * @param {object} loaders Mapping from layer index to loader\n * instance.\n * @returns {Promise<array>} A tuple of [newLayerDefs, didInitialize],\n * where newLayerDefs is an array of the layers which contains\n * initialized channel properties,\n * and didInitialize is a boolean value indicating whether any\n * channels were initialized.\n */\nexport async function initializeLayerChannelsIfMissing(layerDefsOrig, loaders) {\n  const layerDefs = cloneDeep(layerDefsOrig);\n  const newLayerDefPromises = [];\n\n  let didInitialize = false;\n  for (let layerIndex = 0; layerIndex < layerDefs.length; layerIndex++) {\n    const layerDef = layerDefs[layerIndex];\n    const loader = loaders[layerDef.index];\n    let newLayerDefPromise = Promise.resolve(layerDef);\n    if (layerDef.channels) {\n      const newChannelDefPromises = [];\n      for (let channelIndex = 0; channelIndex < layerDef.channels.length; channelIndex++) {\n        const channelDef = layerDef.channels[channelIndex];\n        let newChannelDefPromise = Promise.resolve(channelDef);\n        // Only auto-initialize if domains, colors, or sliders is missing.\n        if (channelDef.selection && !(channelDef.color && channelDef.slider)) {\n          newChannelDefPromise = initializeChannelForSelection(\n            loader, channelDef.selection, channelIndex,\n          )\n            .then(autoChannelDef => Promise.resolve({ ...autoChannelDef, ...channelDef }));\n          didInitialize = true;\n        }\n        newChannelDefPromises.push(newChannelDefPromise);\n      }\n      newLayerDefPromise = Promise.all(newChannelDefPromises)\n        .then(newChannelDefs => Promise.resolve({ ...layerDef, channels: newChannelDefs }));\n    }\n    newLayerDefPromises.push(newLayerDefPromise);\n  }\n  const newLayerDefs = await Promise.all(newLayerDefPromises);\n  return [newLayerDefs, didInitialize];\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n      || imageLoaders.every(loader => !loader?.physicalSizes?.x || !loader?.physicalSizes?.y)\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = imageLoaders.reduce((acc, loader) => {\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const loader = imageLoaders[j];\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale, 1]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMeta = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMeta[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMeta = getMetaWithTransformMatrices(nextImageMeta, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, domainType: 'Min/Max', modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMeta];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i],\n        viewSize,\n        zoomBackoff,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n    }\n  } else if (cellValues.length > 0) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    const xExtent = extent(cellCoordinates, c => c[0]);\n    const yExtent = extent(cellCoordinates, c => c[1]);\n    const xRange = xExtent[1] - xExtent[0];\n    const yRange = yExtent[1] - yExtent[0];\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  }\n  return { initialTargetX, initialTargetY, initialZoom };\n}\n","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"lodash/clamp\");","module.exports = require(\"lodash/range\");","module.exports = require(\"nebula.gl\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"@turf/helpers\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Paper\");","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","module.exports = require(\"lodash\");","module.exports = require(\"@material-ui/core/Slider\");","module.exports = require(\"math.gl\");","import Ajv from 'ajv';\nimport isNil from 'lodash/isNil';\nimport { dsvFormat } from 'd3-dsv';\nimport { parse as json2csv } from 'json2csv';\nimport { colorArrayToString, colorStringToArray } from './utils';\nimport { nodeTransform } from './cell-set-utils';\nimport { DEFAULT_COLOR } from '../utils';\nimport {\n  HIERARCHICAL_SCHEMAS, TABULAR_SCHEMAS,\n  MIME_TYPE_JSON, MIME_TYPE_TABULAR,\n  SEPARATOR_TABULAR, NA_VALUE_TABULAR,\n} from './constants';\n\n/**\n * Check if an imported tree has an old schema version that we know how to\n * \"upgrade\" to the latest schema version.  Validate against the schema.\n * @param {object} currTree A hierarchical tree object with a .version property,\n * which has already passed schema validation, but may not have the latest schema version.\n * @param {string} datatype The data type of the items in the schema.\n */\nexport function tryUpgradeTreeToLatestSchema(currTree, datatype) {\n  const validate = new Ajv().compile(HIERARCHICAL_SCHEMAS[datatype].schema);\n  const valid = validate(currTree);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Tree validation failed: ${failureReason}`);\n  } else if (currTree.datatype !== datatype) {\n    throw new Error(\n      `The data type does not match the expected data type of '${datatype}'.`,\n    );\n  }\n  if (currTree.version === '0.1.2') {\n    // To upgrade from cell-sets schema 0.1.2 to 0.1.3,\n    // add a confidence value of null for each cell ID.\n    return {\n      ...currTree,\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      tree: currTree.tree.map(levelZeroNode => nodeTransform(\n        levelZeroNode,\n        n => !n.children && Array.isArray(n.set),\n        n => ({ ...n, set: n.set.map(itemId => ([itemId, null])) }), [],\n      )),\n    };\n  }\n  return currTree;\n}\n\n/**\n * Handler for JSON imports. Validates and upgrades against the hierarchical sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\nexport function handleImportJSON(result, datatype) {\n  let importData = JSON.parse(result);\n  // Validate the imported file.\n  importData = tryUpgradeTreeToLatestSchema(importData, datatype);\n  return importData;\n}\n\n/**\n * Handler for tabular imports. Validates against the tabular sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\nexport function handleImportTabular(result, datatype) {\n  const dsvParser = dsvFormat(SEPARATOR_TABULAR);\n  const importData = dsvParser.parse(result, row => ({\n    groupName: row.groupName,\n    setName: row.setName,\n    setColor: (row.setColor ? colorStringToArray(row.setColor) : DEFAULT_COLOR),\n    obsId: row.obsId,\n    predictionScore: (\n      (\n        isNil(row.predictionScore)\n        || row.predictionScore === NA_VALUE_TABULAR\n      )\n        ? null\n        : +row.predictionScore\n    ),\n  }));\n  // Validate the imported file.\n  const validate = new Ajv().compile(TABULAR_SCHEMAS[datatype].schema);\n  const valid = validate(importData);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Import validation failed: ${failureReason}`);\n  } else {\n    // Convert the validated array to a tree representation.\n    const treeToImport = {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      datatype,\n      tree: [],\n    };\n    const uniqueGroupNames = Array.from(new Set(importData.map(d => d.groupName)));\n    uniqueGroupNames.forEach((groupName) => {\n      const levelZeroNode = {\n        name: groupName,\n        children: [],\n      };\n      const groupRows = importData.filter(d => d.groupName === groupName);\n      const uniqueSetNames = Array.from(new Set(groupRows.map(d => d.setName)));\n      uniqueSetNames.forEach((setName) => {\n        const setRows = groupRows.filter(d => d.setName === setName);\n        const { setColor } = setRows[0];\n        const levelOneNode = {\n          name: setName,\n          color: setColor,\n          set: setRows.map(d => ([d.obsId, d.predictionScore])),\n        };\n        levelZeroNode.children.push(levelOneNode);\n      });\n      treeToImport.tree.push(levelZeroNode);\n    });\n    return treeToImport;\n  }\n}\n\n/**\n * Convert a tree object to a JSON representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportJSON(result) {\n  const jsonString = JSON.stringify(result);\n  const dataString = `data:${MIME_TYPE_JSON};charset=utf-8,${encodeURIComponent(jsonString)}`;\n  return dataString;\n}\n\n/**\n * Convert a tree object with one level (height === 1) to a tabular representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportTabular(result) {\n  // Convert a tree object to an array of JSON objects.\n  const exportData = [];\n  result.tree.forEach((levelZeroNode) => {\n    levelZeroNode.children.forEach((levelOneNode) => {\n      if (levelOneNode.set) {\n        levelOneNode.set.forEach(([obsId, prob]) => {\n          exportData.push({\n            groupName: levelZeroNode.name,\n            setName: levelOneNode.name,\n            setColor: colorArrayToString(levelOneNode.color),\n            obsId,\n            predictionScore: isNil(prob) ? NA_VALUE_TABULAR : prob,\n          });\n        });\n      }\n    });\n  });\n  const csvString = json2csv(exportData, {\n    fields: ['groupName', 'setName', 'setColor', 'obsId', 'predictionScore'],\n    delimiter: SEPARATOR_TABULAR,\n  });\n  const dataString = `data:${MIME_TYPE_TABULAR};charset=utf-8,${encodeURIComponent(csvString)}`;\n  return dataString;\n}\n\n/**\n * Download a file. Appends and removes an anchor node in the DOM.\n * @param {string} dataString The function that converts the data to a string.\n * @param {string} fileName The name of the file to be downloaded.\n */\nexport function downloadForUser(dataString, fileName) {\n  const downloadAnchorNode = document.createElement('a');\n  downloadAnchorNode.setAttribute('href', dataString);\n  downloadAnchorNode.setAttribute('download', fileName);\n  document.body.appendChild(downloadAnchorNode); // required for firefox\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Popper\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"zustand/shallow\");","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","module.exports = require(\"short-number\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"tinycolor2\");","import React from 'react';\nimport Tooltip from './Tooltip';\n\n/**\n * A tooltip component that also incorporates a crosshair element.\n * @param {object} props\n * @param {string} props.parentUuid A unique identifier corresponding to the plot\n * with which this scatterplot is associated.\n * @param {string} props.sourceUuid A unique identifier corresponding to the plot\n * from which this tooltip originated.\n * @param {number} props.x The x coordinate for the tooltip.\n * @param {number} props.y The y coordinate for the tooltip.\n * @param {number} props.parentWidth The width of the parent plot container element.\n * @param {number} props.parentHeight The height of the parent plot container element.\n * @param {React.Component} props.children The tooltip contents as a react component.\n */\nexport default function Tooltip2D(props) {\n  const {\n    parentUuid,\n    sourceUuid,\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n  // Check if out of bounds.\n  if (x < 0 || x > parentWidth || y < 0 || y > parentHeight) {\n    return null;\n  }\n  // Show tooltip or crosshair?\n  const isTooltipVisible = (parentUuid === sourceUuid);\n  const crosshairWidth = 1;\n  return (\n    <>\n      {isTooltipVisible ? (\n        <Tooltip\n          x={x}\n          y={y}\n          parentWidth={parentWidth}\n          parentHeight={parentHeight}\n        >\n          {children}\n        </Tooltip>\n      ) : (\n        <>\n          {x !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: `${x - crosshairWidth / 2}px`,\n                top: 0,\n                width: `${crosshairWidth}px`,\n                height: `${parentHeight}px`,\n              }}\n            />\n          ) : null}\n          {y !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: 0,\n                top: `${y - crosshairWidth / 2}px`,\n                width: `${parentWidth}px`,\n                height: `${crosshairWidth}px`,\n              }}\n            />\n          ) : null}\n        </>\n      )}\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function TooltipContent(props) {\n  const {\n    info,\n  } = props;\n\n  return (\n    <table>\n      <tbody>\n        {Object.entries(info).map(([key, value]) => (\n          <tr key={key}>\n            <th>{key}</th>\n            <td>{value}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(theme => ({\n  box: {\n    boxSizing: 'border-box',\n  },\n  checkbox: {\n    padding: '3px',\n    color: theme.palette.primaryForeground,\n    '&:checked': {\n      color: theme.palette.primaryForeground,\n    },\n    '& input': {\n      height: '100%',\n    },\n  },\n  slider: {\n    color: theme.palette.primaryForeground,\n    minWidth: '60px',\n    padding: '10px 0 6px 0',\n  },\n  sliderValueLabel: {\n    '& span': {\n      '& span': {\n        color: theme.palette.primaryBackground,\n      },\n    },\n  },\n  tableContainer: {\n    overflow: 'hidden',\n  },\n  labelCell: {\n    padding: '2px 8px 2px 16px',\n  },\n  inputCell: {\n    padding: '2px 16px 2px 8px',\n    overflow: 'visible',\n  },\n  select: {\n    '& select': {\n      fontSize: '.875rem',\n    },\n  },\n}));\n","module.exports = require(\"@material-ui/core/TableRow\");","import React, { useEffect, useRef } from 'react';\n\nexport default function Tooltip(props) {\n  const {\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n\n  const ref = useRef(null);\n  const isNarrow = (parentWidth < 500);\n  // Do collision detection based on the bounds of the tooltip ancestor element.\n  useEffect(() => {\n    const el = ref.current;\n    const offsetPercentage = isNarrow ? -5 : 10;\n    const translateX = (x > parentWidth / 2) ? -(100 + offsetPercentage) : offsetPercentage;\n    const translateY = (y > parentHeight / 2) ? -(100 + offsetPercentage) : offsetPercentage;\n    const scale = isNarrow ? 0.75 : 1.0;\n    el.style.transform = `translateX(${translateX}%) translateY(${translateY}%) scale(${scale})`;\n    el.style.whiteSpace = (isNarrow ? 'normal' : 'nowrap');\n  });\n\n  return (\n    <div\n      ref={ref}\n      className=\"cell-tooltip bg-primary\"\n      style={{\n        left: `${x}px`,\n        top: `${y}px`,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n","// See https://reactjs.org/docs/code-splitting.html#named-exports\nexport { Vega as default } from 'react-vega';\n","import React, { Suspense, useMemo } from 'react';\nimport { Handler } from 'vega-tooltip';\nimport ReactVega from './ReactVega';\n\n// TODO: React.lazy is not working with Vitessce in the portal-ui.\n// For now, we can work around this by not using React.lazy,\n// but for performance benefits that come with lazy-loading\n// we should eventually try to resolve this issue.\n// const ReactVega = React.lazy(() => import('./ReactVega'));\n\nexport const DATASET_NAME = 'table';\n\nfunction isVega(spec) {\n  return spec.$schema === 'https://vega.github.io/schema/vega/v5.json';\n}\n\n/**\n * A wrapper around the react-vega Vega component.\n * @param {object} props\n * @param {object} spec A vega or vega-lite spec.\n * @param {object[]} data The plot data as an array of objects.\n * @param {object} signalListeners Vega signal listeners. Optional.\n */\nexport default function VegaPlot(props) {\n  const {\n    spec: partialSpec,\n    data,\n    signalListeners,\n  } = props;\n\n  const spec = {\n    ...partialSpec,\n    data: (isVega(partialSpec)\n      ? [\n        { name: DATASET_NAME },\n        ...partialSpec.data,\n      ]\n      : { name: DATASET_NAME }\n    ),\n  };\n\n  const vegaComponent = useMemo(() => (\n    <ReactVega\n      spec={spec}\n      data={{\n        [DATASET_NAME]: data,\n      }}\n      signalListeners={signalListeners}\n      tooltip={new Handler().call}\n      renderer=\"canvas\"\n      scaleFactor={3}\n    />\n  ), [spec, data, signalListeners]);\n\n  return (\n    spec && data && data.length > 0 ? (\n      <Suspense fallback={<div>Loading...</div>}>\n        {vegaComponent}\n      </Suspense>\n    ) : null\n  );\n}\n","/**\n * Vega-Lite themes that can be passed to the `config` property\n * of the vega-lite spec.\n */\nexport const VEGA_THEMES = {\n  dark: {\n    // The vega-themes dark theme.\n    // Reference: https://github.com/vega/vega-themes/blob/master/src/theme-dark.ts\n    background: null,\n    title: { color: '#fff' },\n    style: {\n      'guide-label': {\n        fill: '#fff',\n      },\n      'guide-title': {\n        fill: '#fff',\n      },\n    },\n    axis: {\n      domainColor: '#fff',\n      gridColor: '#888',\n      tickColor: '#fff',\n    },\n  },\n  light: {\n    // The default vega theme.\n    background: null,\n  },\n};\n","export { default as VegaPlot, DATASET_NAME } from './VegaPlot';\nexport { VEGA_THEMES } from './utils';\n","module.exports = require(\"zarr\");","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\nimport { treeToCellColorsBySetNames } from './sets/cell-set-utils';\n\n// The functions defined here have been adapted from d3-interpolate,\n// d3-color, and d3-scale-chromatic.\n// Color string \"rgb(r,g,b)\" representations are replaced by color array [r, g, b]\n// representations, to allow them to work nicely with deck.gl,\n// without the need to converting back and forth between string and array formats.\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/431d21da776f97c632f53a855bd822edfbbcd56e/src/diverging/RdBu.js\n// eslint-disable-next-line max-len\nconst schemeRdBu = [[103, 0, 31], [178, 24, 43], [214, 96, 77], [244, 165, 130], [253, 219, 199], [247, 247, 247], [209, 229, 240], [146, 197, 222], [67, 147, 195], [33, 102, 172], [5, 48, 97]];\n// eslint-disable-next-line max-len\nconst schemePlasma = [[13, 8, 135], [16, 7, 136], [19, 7, 137], [22, 7, 138], [25, 6, 140], [27, 6, 141], [29, 6, 142], [32, 6, 143], [34, 6, 144], [36, 6, 145], [38, 5, 145], [40, 5, 146], [42, 5, 147], [44, 5, 148], [46, 5, 149], [47, 5, 150], [49, 5, 151], [51, 5, 151], [53, 4, 152], [55, 4, 153], [56, 4, 154], [58, 4, 154], [60, 4, 155], [62, 4, 156], [63, 4, 156], [65, 4, 157], [67, 3, 158], [68, 3, 158], [70, 3, 159], [72, 3, 159], [73, 3, 160], [75, 3, 161], [76, 2, 161], [78, 2, 162], [80, 2, 162], [81, 2, 163], [83, 2, 163], [85, 2, 164], [86, 1, 164], [88, 1, 164], [89, 1, 165], [91, 1, 165], [92, 1, 166], [94, 1, 166], [96, 1, 166], [97, 0, 167], [99, 0, 167], [100, 0, 167], [102, 0, 167], [103, 0, 168], [105, 0, 168], [106, 0, 168], [108, 0, 168], [110, 0, 168], [111, 0, 168], [113, 0, 168], [114, 1, 168], [116, 1, 168], [117, 1, 168], [119, 1, 168], [120, 1, 168], [122, 2, 168], [123, 2, 168], [125, 3, 168], [126, 3, 168], [128, 4, 168], [129, 4, 167], [131, 5, 167], [132, 5, 167], [134, 6, 166], [135, 7, 166], [136, 8, 166], [138, 9, 165], [139, 10, 165], [141, 11, 165], [142, 12, 164], [143, 13, 164], [145, 14, 163], [146, 15, 163], [148, 16, 162], [149, 17, 161], [150, 19, 161], [152, 20, 160], [153, 21, 159], [154, 22, 159], [156, 23, 158], [157, 24, 157], [158, 25, 157], [160, 26, 156], [161, 27, 155], [162, 29, 154], [163, 30, 154], [165, 31, 153], [166, 32, 152], [167, 33, 151], [168, 34, 150], [170, 35, 149], [171, 36, 148], [172, 38, 148], [173, 39, 147], [174, 40, 146], [176, 41, 145], [177, 42, 144], [178, 43, 143], [179, 44, 142], [180, 46, 141], [181, 47, 140], [182, 48, 139], [183, 49, 138], [184, 50, 137], [186, 51, 136], [187, 52, 136], [188, 53, 135], [189, 55, 134], [190, 56, 133], [191, 57, 132], [192, 58, 131], [193, 59, 130], [194, 60, 129], [195, 61, 128], [196, 62, 127], [197, 64, 126], [198, 65, 125], [199, 66, 124], [200, 67, 123], [201, 68, 122], [202, 69, 122], [203, 70, 121], [204, 71, 120], [204, 73, 119], [205, 74, 118], [206, 75, 117], [207, 76, 116], [208, 77, 115], [209, 78, 114], [210, 79, 113], [211, 81, 113], [212, 82, 112], [213, 83, 111], [213, 84, 110], [214, 85, 109], [215, 86, 108], [216, 87, 107], [217, 88, 106], [218, 90, 106], [218, 91, 105], [219, 92, 104], [220, 93, 103], [221, 94, 102], [222, 95, 101], [222, 97, 100], [223, 98, 99], [224, 99, 99], [225, 100, 98], [226, 101, 97], [226, 102, 96], [227, 104, 95], [228, 105, 94], [229, 106, 93], [229, 107, 93], [230, 108, 92], [231, 110, 91], [231, 111, 90], [232, 112, 89], [233, 113, 88], [233, 114, 87], [234, 116, 87], [235, 117, 86], [235, 118, 85], [236, 119, 84], [237, 121, 83], [237, 122, 82], [238, 123, 81], [239, 124, 81], [239, 126, 80], [240, 127, 79], [240, 128, 78], [241, 129, 77], [241, 131, 76], [242, 132, 75], [243, 133, 75], [243, 135, 74], [244, 136, 73], [244, 137, 72], [245, 139, 71], [245, 140, 70], [246, 141, 69], [246, 143, 68], [247, 144, 68], [247, 145, 67], [247, 147, 66], [248, 148, 65], [248, 149, 64], [249, 151, 63], [249, 152, 62], [249, 154, 62], [250, 155, 61], [250, 156, 60], [250, 158, 59], [251, 159, 58], [251, 161, 57], [251, 162, 56], [252, 163, 56], [252, 165, 55], [252, 166, 54], [252, 168, 53], [252, 169, 52], [253, 171, 51], [253, 172, 51], [253, 174, 50], [253, 175, 49], [253, 177, 48], [253, 178, 47], [253, 180, 47], [253, 181, 46], [254, 183, 45], [254, 184, 44], [254, 186, 44], [254, 187, 43], [254, 189, 42], [254, 190, 42], [254, 192, 41], [253, 194, 41], [253, 195, 40], [253, 197, 39], [253, 198, 39], [253, 200, 39], [253, 202, 38], [253, 203, 38], [252, 205, 37], [252, 206, 37], [252, 208, 37], [252, 210, 37], [251, 211, 36], [251, 213, 36], [251, 215, 36], [250, 216, 36], [250, 218, 36], [249, 220, 36], [249, 221, 37], [248, 223, 37], [248, 225, 37], [247, 226, 37], [247, 228, 37], [246, 230, 38], [246, 232, 38], [245, 233, 38], [245, 235, 39], [244, 237, 39], [243, 238, 39], [243, 240, 39], [242, 242, 39], [241, 244, 38], [241, 245, 37], [240, 247, 36], [240, 249, 33]];\n\n// Reference: https://github.com/d3/d3-interpolate/blob/96d54051d1c2fec55f240edd0ec5401715b10390/src/rgb.js\nfunction rgbSpline(spline) {\n  return (colors) => {\n    const n = colors.length;\n    let r = new Array(n);\n    let g = new Array(n);\n    let b = new Array(n);\n    let i; let\n      color;\n    // eslint-disable-next-line no-plusplus\n    for (i = 0; i < n; ++i) {\n      color = [colors[i][0], colors[i][1], colors[i][2]];\n      r[i] = color[0] || 0;\n      g[i] = color[1] || 0;\n      b[i] = color[2] || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    return t => [r(t), g(t), b(t)];\n  };\n}\n\n// Reference: https://github.com/d3/d3-interpolate/blob/594a32af1fe1118812b439012c2cb742e907c0c0/src/basis.js\nfunction basis(values) {\n  function innerBasis(t1, v0, v1, v2, v3) {\n    const t2 = t1 * t1; const\n      t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n          + (4 - 6 * t2 + 3 * t3) * v1\n          + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n          + t3 * v3) / 6;\n  }\n\n  const n = values.length - 1;\n  return (t) => {\n    const i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n);\n    const v1 = values[i];\n    const v2 = values[i + 1];\n    const v0 = i > 0 ? values[i - 1] : 2 * v1 - v2;\n    const v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return innerBasis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/ade54c13e8dfdb9807801a794eaec1a37f926b8a/src/ramp.js\nconst interpolateRgbBasis = rgbSpline(basis);\n\nfunction interpolateSequentialMulti(range) {\n  const n = range.length;\n  return t => range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n}\n\nexport const interpolateRdBu = interpolateRgbBasis(schemeRdBu);\nexport const interpolatePlasma = interpolateSequentialMulti(schemePlasma);\n\n\n/**\n * Get a mapping of cell IDs to cell colors based on\n * gene / cell set selection coordination state.\n * @param {object} params\n * @param {object} params.expressionMatrix { rows, cols, matrix }\n * @param {array} params.geneSelection Array of selected gene IDs.\n * @param {object} params.cellSets The cell sets tree.\n * @param {object} params.cellSetSelection Selected cell sets.\n * @param {string} params.cellColorEncoding Which to use for\n * coloring: gene expression or cell sets?\n * @returns {Map} Mapping from cell IDs to [r, g, b] color arrays.\n */\nexport function getCellColors(params) {\n  const {\n    cellColorEncoding,\n    expressionMatrix, geneSelection,\n    cellSets, cellSetSelection,\n    cellSetColor,\n  } = params;\n  if (cellColorEncoding === 'geneSelection' && geneSelection && geneSelection.length >= 1 && expressionMatrix) {\n    const firstGeneSelected = geneSelection[0];\n    // TODO: allow other color maps.\n    const geneExpColormap = interpolatePlasma;\n    const geneIndex = expressionMatrix.cols.indexOf(firstGeneSelected);\n    if (geneIndex !== -1) {\n      const numGenes = expressionMatrix.cols.length;\n      // Create new cellColors map based on the selected gene.\n      return new Map(expressionMatrix.rows.map((cellId, cellIndex) => {\n        const value = expressionMatrix.matrix[cellIndex * numGenes + geneIndex];\n        const cellColor = geneExpColormap(value / 255);\n        return [cellId, cellColor];\n      }));\n    }\n  } else if (cellColorEncoding === 'cellSetSelection' && cellSetSelection && cellSets) {\n    // Cell sets can potentially lack set colors since the color property\n    // is not a required part of the schema.\n    // The `initializeSets` function fills in any empty colors\n    // with defaults and returns the processed tree object.\n    return treeToCellColorsBySetNames(cellSets, cellSetSelection, cellSetColor);\n  }\n  return new Map();\n}\n","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"@turf/concave\");","module.exports = require(\"@turf/centroid\");","module.exports = require(\"ajv\");","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-underscore-dangle */\n// File adopted from nebula.gl's SelectionLayer\n// https://github.com/uber/nebula.gl/blob/8e9c2ec8d7cf4ca7050909ed826eb847d5e2cd9c/modules/layers/src/layers/selection-layer.js\nimport { CompositeLayer } from 'deck.gl';\nimport { polygon as turfPolygon, point as turfPoint } from '@turf/helpers';\nimport booleanWithin from '@turf/boolean-within';\nimport booleanContains from '@turf/boolean-contains';\nimport booleanOverlap from '@turf/boolean-overlap';\nimport booleanPointInPolygon from '@turf/boolean-point-in-polygon';\nimport { EditableGeoJsonLayer, SELECTION_TYPE } from 'nebula.gl';\nimport { DrawRectangleMode, DrawPolygonByDraggingMode, ViewMode } from '@nebula.gl/edit-modes';\n\nconst EDIT_TYPE_ADD = 'addFeature';\nconst EDIT_TYPE_CLEAR = 'clearFeatures';\n\n// Customize the click handlers for the rectangle and polygon tools,\n// so that clicking triggers the `onEdit` callback.\nclass ClickableDrawRectangleMode extends DrawRectangleMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nclass ClickableDrawPolygonByDraggingMode extends DrawPolygonByDraggingMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nconst MODE_MAP = {\n  [SELECTION_TYPE.RECTANGLE]: ClickableDrawRectangleMode,\n  [SELECTION_TYPE.POLYGON]: ClickableDrawPolygonByDraggingMode,\n};\n\nconst defaultProps = {\n  selectionType: SELECTION_TYPE.RECTANGLE,\n  layerIds: [],\n  onSelect: () => {},\n};\n\nconst EMPTY_DATA = {\n  type: 'FeatureCollection',\n  features: [],\n};\n\nconst LAYER_ID_GEOJSON = 'selection-geojson';\n\nconst PASS_THROUGH_PROPS = [\n  'lineWidthScale',\n  'lineWidthMinPixels',\n  'lineWidthMaxPixels',\n  'lineWidthUnits',\n  'lineJointRounded',\n  'lineMiterLimit',\n  'pointRadiusScale',\n  'pointRadiusMinPixels',\n  'pointRadiusMaxPixels',\n  'lineDashJustified',\n  'getLineColor',\n  'getFillColor',\n  'getRadius',\n  'getLineWidth',\n  'getLineDashArray',\n  'getTentativeLineDashArray',\n  'getTentativeLineColor',\n  'getTentativeFillColor',\n  'getTentativeLineWidth',\n  'editHandlePointRadiusScale',\n  'editHandlePointRadiusMinPixels',\n  'editHandlePointRadiusMaxPixels',\n  'getEditHandlePointColor',\n  'getEditHandlePointRadius',\n  'modeHandlers',\n];\n\nexport default class SelectionLayer extends CompositeLayer {\n  _selectPolygonObjects(coordinates) {\n    const {\n      onSelect,\n      getCellCoords,\n      cellsQuadTree,\n      flipY,\n    } = this.props;\n\n    const flippedCoordinates = (flipY\n      ? coordinates.map(poly => poly.map(p => ([p[0], -p[1]])))\n      : coordinates);\n\n    // Convert the selection to a turf polygon object.\n    const selectedPolygon = turfPolygon(flippedCoordinates);\n\n    // Create an array to store the results.\n    const pickingInfos = [];\n\n    // quadtree.visit() takes a callback that returns a boolean:\n    // If true returned, then the children of the node are _not_ visited.\n    // If false returned, then the children of the node are visited.\n    // Reference: https://github.com/d3/d3-quadtree#quadtree_visit\n    cellsQuadTree.visit((node, x0, y0, x1, y1) => {\n      const nodePoints = [[[x0, y0], [x1, y0], [x1, y1], [x0, y1], [x0, y0]]];\n      const nodePolygon = turfPolygon(nodePoints);\n\n      const nodePolygonContainsSelectedPolygon = booleanContains(nodePolygon, selectedPolygon);\n      const nodePolygonWithinSelectedPolygon = booleanWithin(nodePolygon, selectedPolygon);\n      const nodePolygonOverlapsSelectedPolgyon = booleanOverlap(nodePolygon, selectedPolygon);\n\n      if (!nodePolygonContainsSelectedPolygon\n        && !nodePolygonWithinSelectedPolygon\n        && !nodePolygonOverlapsSelectedPolgyon) {\n        // We are not interested in anything below this node,\n        // so return true because we are done with this node.\n        return true;\n      }\n\n      // This node made it past the above return statement, so it must either\n      // contain, be within, or overlap with the selected polygon.\n\n      // Check if this is a leaf node.\n      if (node.data\n        && booleanPointInPolygon(turfPoint(getCellCoords(node.data[1])), selectedPolygon)) {\n        // This node has data, so it is a leaf node representing one data point,\n        // and we have verified that the point is in the selected polygon.\n        pickingInfos.push(node.data);\n      }\n\n      // Return false because we are not done.\n      // We want to visit the children of this node.\n      return false;\n    });\n\n    onSelect({ pickingInfos });\n  }\n\n  renderLayers() {\n    const { onSelect } = this.props;\n    const mode = MODE_MAP[this.props.selectionType] || ViewMode;\n\n    const inheritedProps = {};\n    PASS_THROUGH_PROPS.forEach((p) => {\n      if (this.props[p] !== undefined) inheritedProps[p] = this.props[p];\n    });\n    const layers = [\n      new EditableGeoJsonLayer(\n        this.getSubLayerProps({\n          id: LAYER_ID_GEOJSON,\n          pickable: true,\n          mode,\n          modeConfig: {\n            dragToDraw: true,\n          },\n          selectedFeatureIndexes: [],\n          data: EMPTY_DATA,\n          onEdit: ({ updatedData, editType }) => {\n            if (editType === EDIT_TYPE_ADD) {\n              const { coordinates } = updatedData.features[0].geometry;\n              this._selectPolygonObjects(coordinates);\n            } else if (editType === EDIT_TYPE_CLEAR) {\n              // We want to select an empty array to clear any previous selection.\n              onSelect({ pickingInfos: [] });\n            }\n          },\n          ...inheritedProps,\n        }),\n      ),\n    ];\n\n    return layers;\n  }\n}\n\nSelectionLayer.layerName = 'SelectionLayer';\nSelectionLayer.defaultProps = defaultProps;\n","import { COORDINATE_SYSTEM } from 'deck.gl';\nimport { DataFilterExtension } from '@deck.gl/extensions';\nimport SelectionLayer from './SelectionLayer';\n\n/**\n * Convert a DeckGL layer ID to a \"base\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getBaseLayerId(layerId) {\n  return `base-${layerId}`;\n}\n\n/**\n * Convert a DeckGL layer ID to a \"selected\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getSelectedLayerId(layerId) {\n  return `selected-${layerId}`;\n}\n\n/**\n * Construct DeckGL selection layers.\n * @param {string} tool\n * @param {number} zoom\n * @param {string} cellBaseLayerId\n * @param {function} getCellCoords\n * @param {function} updateCellsSelection\n * @returns {object[]} The array of DeckGL selection layers.\n */\nexport function getSelectionLayers(\n  tool,\n  zoom,\n  layerId,\n  getCellCoords,\n  updateCellsSelection,\n  cellsQuadTree,\n  flipY = false,\n) {\n  if (!tool) {\n    return [];\n  }\n\n  const cellBaseLayerId = getBaseLayerId(layerId);\n  const editHandlePointRadius = 5 / (zoom + 16);\n\n  return [new SelectionLayer({\n    id: 'selection',\n    flipY,\n    cellsQuadTree,\n    getCellCoords,\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    selectionType: tool,\n    onSelect: ({ pickingInfos }) => {\n      const cellIds = pickingInfos.map(cellObj => cellObj[0]);\n      if (updateCellsSelection) {\n        updateCellsSelection(cellIds);\n      }\n    },\n    layerIds: [cellBaseLayerId],\n    getTentativeFillColor: () => [255, 255, 255, 95],\n    getTentativeLineColor: () => [143, 143, 143, 255],\n    getTentativeLineDashArray: () => [7, 4],\n    lineWidthMinPixels: 2,\n    lineWidthMaxPixels: 2,\n    getEditHandlePointColor: () => [0xff, 0xff, 0xff, 0xff],\n    getEditHandlePointRadius: () => editHandlePointRadius,\n    editHandlePointRadiusScale: 1,\n    editHandlePointRadiusMinPixels: editHandlePointRadius,\n    editHandlePointRadiusMaxPixels: 2 * editHandlePointRadius,\n  })];\n}\n\n/**\n * Get deck.gl layer props for selection overlays.\n * @param {object} props\n * @returns {object} Object with two properties,\n * overlay: overlayProps, base: baseProps,\n * where the values are deck.gl layer props.\n */\nexport function overlayBaseProps(props) {\n  const {\n    id, getColor, data, isSelected, ...rest\n  } = props;\n  return {\n    overlay: {\n      id: getSelectedLayerId(id),\n      getFillColor: getColor,\n      getLineColor: getColor,\n      data,\n      getFilterValue: isSelected,\n      extensions: [new DataFilterExtension({ filterSize: 1 })],\n      filterRange: [1, 1],\n      ...rest,\n    },\n    base: {\n      id: getBaseLayerId(id),\n      getLineColor: getColor,\n      getFillColor: getColor,\n      // Alternatively: contrast outlines with solids:\n      // getLineColor: getColor,\n      // getFillColor: [255, 255, 255],\n      data: data.slice(),\n      ...rest,\n    },\n  };\n}\n","import { CompositeLayer, PolygonLayer } from 'deck.gl';\n\nimport { overlayBaseProps } from './selection-utils';\n\nexport default class SelectablePolygonLayer extends CompositeLayer {\n  renderLayers() {\n    const props = overlayBaseProps(this.props);\n    const base = new PolygonLayer(props.base);\n    const overlay = new PolygonLayer(props.overlay);\n    return [base, overlay];\n  }\n}\n\nSelectablePolygonLayer.layerName = 'SelectablePolygonLayer';\n","import { CompositeLayer, ScatterplotLayer } from 'deck.gl';\n\nimport { overlayBaseProps } from './selection-utils';\n\nexport default class SelectableScatterplotLayer extends CompositeLayer {\n  renderLayers() {\n    const props = overlayBaseProps(this.props);\n    const base = new ScatterplotLayer(props.base);\n    const overlay = new ScatterplotLayer(props.overlay);\n    return [base, overlay];\n  }\n}\n\nSelectableScatterplotLayer.layerName = 'SelectableScatterplotLayer';\n","// Selection Layers\nexport { default as SelectablePolygonLayer } from './SelectablePolygonLayer';\nexport { default as SelectableScatterplotLayer } from './SelectableScatterplotLayer';\nexport { getSelectionLayers } from './selection-utils';\n\n// Heatmap Layers\nexport { default as HeatmapBitmapLayer } from './HeatmapBitmapLayer';\nexport { default as PixelatedBitmapLayer } from './PixelatedBitmapLayer';\nexport { default as HeatmapCompositeTextLayer } from './HeatmapCompositeTextLayer';\n","module.exports = require(\"@nebula.gl/edit-modes\");","module.exports = require(\"regenerator-runtime\");","/* eslint-disable no-underscore-dangle */\nimport { COORDINATE_SYSTEM, CompositeLayer } from '@deck.gl/core';\nimport { TextLayer } from '@deck.gl/layers';\nimport {\n  AXIS_LABEL_TEXT_SIZE,\n  AXIS_TITLE_TEXT_SIZE,\n  AXIS_MARGIN,\n  THEME_TO_TEXT_COLOR,\n  AXIS_FONT_FAMILY,\n} from './heatmap-constants';\n\nexport default class HeatmapCompositeTextLayer extends CompositeLayer {\n  _renderAxisTopLayers() {\n    const {\n      axisTopLabelData, matrixLeft, width, matrixWidth, viewWidth, theme,\n      targetX, targetY, axisTopTitle, cellWidth, axisOffsetTop, scaleFactor,\n    } = this.props;\n    const showAxisTopLabels = cellWidth >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer({\n        id: 'axisTopLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisTopLabelData,\n        getText: d => d[1],\n        getPosition: d => [matrixLeft + ((d[0] + 0.5) / width) * matrixWidth, axisLabelTop],\n        getTextAnchor: 'start',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisTopLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 75,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelTop, matrixLeft, matrixWidth, viewWidth],\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisTopTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisTopTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisTopLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  _renderAxisLeftLayers() {\n    const {\n      axisLeftLabelData, matrixTop, height, matrixHeight,\n      viewHeight, theme, axisLeftTitle, targetX, targetY, cellHeight, axisOffsetLeft,\n      scaleFactor,\n    } = this.props;\n    const showAxisLeftLabels = cellHeight >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer({\n        id: 'axisLeftLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisLeftLabelData,\n        getText: d => d[1],\n        getPosition: d => [axisLabelLeft, matrixTop + ((d[0] + 0.5) / height) * matrixHeight],\n        getTextAnchor: 'end',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisLeftLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelLeft, matrixTop, matrixHeight, viewHeight],\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisLeftTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisLeftTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisLeftLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 90,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  renderLayers() {\n    return [\n      this._renderAxisTopLayers(),\n      this._renderAxisLeftLayers(),\n    ];\n  }\n}\n\nHeatmapCompositeTextLayer.layerName = 'HeatmapCompositeTextLayer';\n","import { BitmapLayer } from '@deck.gl/layers';\nimport { CompositeLayer } from '@deck.gl/core';\nimport { PIXELATED_TEXTURE_PARAMETERS } from './heatmap-constants';\n\n\n// These are the same defaultProps as for BitmapLayer.\nconst defaultProps = {\n  ...BitmapLayer.defaultProps,\n  image: { type: 'object', value: null, async: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  desaturate: {\n    type: 'number', min: 0, max: 1, value: 0,\n  },\n  transparentColor: { type: 'color', value: [0, 0, 0, 0] },\n  tintColor: { type: 'color', value: [255, 255, 255] },\n};\n\nexport default class PixelatedBitmapLayer extends CompositeLayer {\n  renderLayers() {\n    const { image } = this.props;\n    return new BitmapLayer(this.props, {\n      id: `${this.props.id}-wrapped`,\n      image,\n      textureParameters: PIXELATED_TEXTURE_PARAMETERS,\n    });\n  }\n}\n\nPixelatedBitmapLayer.layerName = 'PixelatedBitmapLayer';\nPixelatedBitmapLayer.defaultProps = defaultProps;\n","import glsl from 'glslify';\n\n/**\n * No change to the vertex shader from the base BitmapLayer.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-vertex.js\n */\nexport const vertexShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\n/**\n * Fragment shader adapted to perform aggregation and\n * take color scale functions + sliders into account.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-fragment.js\n * Reference: https://github.com/hubmapconsortium/vitessce-image-viewer/blob/06231ae02cac1ff57ba458c71e9bc59ed2fc4f8b/src/layers/XRLayer/xr-layer-fragment-colormap.webgl1.glsl\n */\nexport const fragmentShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#pragma glslify: rdbu = require(\"glsl-colormap/rdbu\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n\n// The texture (GL.LUMINANCE & Uint8Array).\nuniform sampler2D uBitmapTexture;\n\n// What are the dimensions of the texture (width, height)?\nuniform vec2 uTextureSize;\n\n// How many consecutive pixels should be aggregated together along each axis?\nuniform vec2 uAggSize;\n\n// What are the values of the color scale sliders?\nuniform vec2 uColorScaleRange;\n\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  // Compute 1 pixel in texture coordinates\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\n  \n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\n\n  // Compute (x % aggSizeX, y % aggSizeY).\n  // These values will be the number of values to the left / above the current position to consider.\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\n\n  // Take the sum of values along each axis.\n  float intensitySum = 0.0;\n  vec2 offsetPixels = vec2(0.0, 0.0);\n\n  for(int i = 0; i < 16; i++) {\n    // Check to break outer loop early.\n    // Uniforms cannot be used as conditions in GLSL for loops.\n    if(float(i) >= uAggSize.y) {\n      // Done in the y direction.\n      break;\n    }\n\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\n\n    for(int j = 0; j < 16; j++) {\n      // Check to break inner loop early.\n      // Uniforms cannot be used as conditions in GLSL for loops.\n      if(float(j) >= uAggSize.x) {\n        // Done in the x direction.\n        break;\n      }\n\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\n    }\n  }\n  \n  // Compute the mean value.\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\n  \n  // Re-scale using the color scale slider values.\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n\n  gl_FragColor = __colormap(clamp(scaledIntensityMean, 0.0, 1.0));\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants';\nimport { _mergeShaders, project32, picking } from '@deck.gl/core';\nimport { BitmapLayer } from '@deck.gl/layers';\nimport { Texture2D } from '@luma.gl/core';\nimport { PIXELATED_TEXTURE_PARAMETERS, TILE_SIZE } from './heatmap-constants';\nimport { vertexShader, fragmentShader } from './heatmap-bitmap-layer-shaders';\n\nconst defaultProps = {\n  image: { type: 'object', value: null, async: true },\n  colormap: { type: 'string', value: 'plasma', compare: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  aggSizeX: { type: 'number', value: 8.0, compare: true },\n  aggSizeY: { type: 'number', value: 8.0, compare: true },\n  colorScaleLo: { type: 'number', value: 0.0, compare: true },\n  colorScaleHi: { type: 'number', value: 1.0, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class HeatmapBitmapLayer extends BitmapLayer {\n  /**\n   * Copy of getShaders from Layer (grandparent, parent of BitmapLayer).\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/core/src/lib/layer.js#L302\n   * @param {object} shaders\n   * @returns {object} Merged shaders.\n   */\n  // eslint-disable-next-line no-underscore-dangle\n  _getShaders(shaders) {\n    this.props.extensions.forEach((extension) => {\n      // eslint-disable-next-line no-param-reassign\n      shaders = _mergeShaders(shaders, extension.getShaders.call(this, extension));\n    });\n    return shaders;\n  }\n\n  updateState(args) {\n    super.updateState(args);\n    this.loadTexture(this.props.image);\n  }\n\n  /**\n   * Need to override to provide custom shaders.\n   */\n  getShaders() {\n    const { colormap } = this.props;\n    // eslint-disable-next-line no-underscore-dangle\n    return this._getShaders({\n      vs: vertexShader,\n      fs: fragmentShader.replace('__colormap', colormap),\n      modules: [project32, picking],\n    });\n  }\n\n  /**\n   * Need to override to provide additional uniform values.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L173\n   * @param {*} opts\n   */\n  draw(opts) {\n    const { uniforms } = opts;\n    const { bitmapTexture, model } = this.state;\n    const {\n      aggSizeX,\n      aggSizeY,\n      colorScaleLo,\n      colorScaleHi,\n    } = this.props;\n\n    // Render the image\n    if (bitmapTexture && model) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            uBitmapTexture: bitmapTexture,\n            uTextureSize: [TILE_SIZE, TILE_SIZE],\n            uAggSize: [aggSizeX, aggSizeY],\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * Need to override to provide the custom DEFAULT_TEXTURE_PARAMETERS\n   * object.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L218\n   * @param {Uint8Array} image\n   */\n  loadTexture(image) {\n    const { gl } = this.context;\n\n    if (this.state.bitmapTexture) {\n      this.state.bitmapTexture.delete();\n    }\n\n    if (image instanceof Texture2D) {\n      this.setState({\n        bitmapTexture: image,\n      });\n    } else if (image) {\n      this.setState({\n        bitmapTexture: new Texture2D(gl, {\n          data: image,\n          mipmaps: false,\n          parameters: PIXELATED_TEXTURE_PARAMETERS,\n          // Each color contains a single luminance value.\n          // When sampled, rgb are all set to this luminance, alpha is 1.0.\n          // Reference: https://luma.gl/docs/api-reference/webgl/texture#texture-formats\n          format: GL.LUMINANCE,\n          dataFormat: GL.LUMINANCE,\n          type: GL.UNSIGNED_BYTE,\n          width: TILE_SIZE,\n          height: TILE_SIZE,\n        }),\n      });\n    }\n  }\n}\nHeatmapBitmapLayer.layerName = 'HeatmapBitmapLayer';\nHeatmapBitmapLayer.defaultProps = defaultProps;\n","module.exports = require(\"@material-ui/core/Box\");","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","module.exports = require(\"classnames\");","module.exports = require(\"d3-quadtree\");","import { makeStyles } from '@material-ui/core/styles';\n\nexport const useOptionStyles = makeStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nexport const useExpansionPanelStyles = makeStyles(theme => ({\n  root: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    width: '100%',\n    flexDirection: 'column',\n  },\n}));\n\nexport const useExpansionPanelSummaryStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: theme.spacing(-2),\n    top: theme.spacing(-1),\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1),\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n  },\n  expandIcon: {\n    '&$expanded': {\n      top: theme.spacing(-1.3),\n    },\n  },\n}));\n","import { quadtree } from 'd3-quadtree';\n\n/**\n * Create a d3-quadtree object for cells data points.\n * @param {array} cellsEntries Array of [cellId, cell] tuples,\n * resulting from running Object.entries on the cells object.\n * @param {function} getCellCoords Given a cell object, return the\n * spatial/scatterplot coordinates [x, y].\n * @returns {object} Quadtree instance.\n */\nexport function createCellsQuadTree(cellsEntries, getCellCoords) {\n  // Use the cellsEntries variable since it is already\n  // an array, converted by Object.entries().\n  if (!cellsEntries) {\n    // Abort if the cells data is not yet available.\n    return null;\n  }\n  const tree = quadtree()\n    .x(d => getCellCoords(d[1])[0])\n    .y(d => getCellCoords(d[1])[1])\n    .addAll(cellsEntries);\n  return tree;\n}\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport { useStyles } from './styles';\n\nexport default function OptionsContainer(props) {\n  const {\n    children,\n  } = props;\n\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.box}>\n      <TableContainer className={classes.tableContainer}>\n        <Table className={classes.table} size=\"small\">\n          <TableBody>\n            {children}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n","import React from 'react';\nimport Select from '@material-ui/core/Select';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { capitalize } from '../../utils';\nimport { useStyles } from './styles';\n\nexport default function CellColorEncodingOption(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  const classes = useStyles();\n\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  function handleColorEncodingChange(event) {\n    setCellColorEncoding(event.target.value);\n  }\n\n  return (\n    <TableRow>\n      <TableCell className={classes.labelCell} htmlFor=\"cell-color-encoding-select\">\n        {observationsLabelNice} Color Encoding\n      </TableCell>\n      <TableCell className={classes.inputCell}>\n        <Select\n          native\n          className={classes.select}\n          value={cellColorEncoding}\n          onChange={handleColorEncodingChange}\n          inputProps={{\n            id: 'cell-color-encoding-select',\n          }}\n        >\n          <option value=\"cellSetSelection\">Cell Sets</option>\n          <option value=\"geneSelection\">Gene Expression</option>\n        </Select>\n      </TableCell>\n    </TableRow>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z\"\n});\n\nfunction SvgNearMe(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgNearMe, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/near_me.2a308adc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     \"\n});\n\nfunction SvgSelectionRectangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionRectangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_rectangle.aa477261.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSelectionLasso(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      strokeWidth: 0.343565\n    },\n    d: \"M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z\",\n    id: \"path10\"\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionLasso, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_lasso.00e80a33.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { SELECTION_TYPE } from 'nebula.gl';\nimport { ReactComponent as PointerIconSVG } from '../../assets/tools/near_me.svg';\nimport { ReactComponent as SelectRectangleIconSVG } from '../../assets/tools/selection_rectangle.svg';\nimport { ReactComponent as SelectLassoIconSVG } from '../../assets/tools/selection_lasso.svg';\n\nexport function IconButton(props) {\n  const {\n    alt, onClick, isActive, children,\n  } = props;\n  const inactive = 'btn btn-outline-secondary mr-2 icon';\n  const active = `${inactive} active`;\n  return (\n    <button\n      className={isActive ? active : inactive}\n      onClick={onClick}\n      type=\"button\"\n      title={alt}\n    >\n      {children}\n    </button>\n  );\n}\n\nexport default function ToolMenu(props) {\n  const {\n    setActiveTool,\n    activeTool,\n    visibleTools = { pan: true, selectRectangle: true, selectLasso: true },\n  } = props;\n  return (\n    <div className=\"tool\">\n      {visibleTools.pan && (\n      <IconButton\n        alt=\"pointer tool\"\n        onClick={() => setActiveTool(null)}\n        isActive={activeTool === null}\n      ><PointerIconSVG />\n      </IconButton>\n      )}\n      {visibleTools.selectRectangle && (\n      <IconButton\n        alt=\"select rectangle\"\n        onClick={() => setActiveTool(SELECTION_TYPE.RECTANGLE)}\n        isActive={activeTool === SELECTION_TYPE.RECTANGLE}\n      ><SelectRectangleIconSVG />\n      </IconButton>\n      )}\n      {visibleTools.selectLasso && (\n      <IconButton\n        alt=\"select lasso\"\n        onClick={() => setActiveTool(SELECTION_TYPE.POLYGON)}\n        isActive={activeTool === SELECTION_TYPE.POLYGON}\n      ><SelectLassoIconSVG />\n      </IconButton>\n      )}\n    </div>\n  );\n}\n","export const getCursorWithTool = () => 'crosshair';\nexport const getCursor = interactionState => (interactionState.isDragging\n  ? 'grabbing' : 'default'\n);\n","import React, { PureComponent } from 'react';\nimport DeckGL, { OrthographicView } from 'deck.gl';\nimport ToolMenu from './ToolMenu';\nimport { DEFAULT_GL_OPTIONS } from '../utils';\nimport { getCursor, getCursorWithTool } from './cursor';\n\n/**\n * Abstract class component intended to be inherited by\n * the Spatial and Scatterplot class components.\n * Contains a common constructor, common DeckGL callbacks,\n * and common render function.\n */\nexport default class AbstractSpatialOrScatterplot extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      gl: null,\n      tool: null,\n    };\n\n    this.viewport = null;\n\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    this.onInitializeViewInfo = this.onInitializeViewInfo.bind(this);\n    this.onWebGLInitialized = this.onWebGLInitialized.bind(this);\n    this.onToolChange = this.onToolChange.bind(this);\n  }\n\n  /**\n   * Called by DeckGL upon a viewState change,\n   * for example zoom or pan interaction.\n   * Emit the new viewState to the `setViewState`\n   * handler prop.\n   * @param {object} params\n   * @param {object} params.viewState The next deck.gl viewState.\n   */\n  onViewStateChange({ viewState: nextViewState }) {\n    const { setViewState } = this.props;\n    setViewState(nextViewState);\n  }\n\n  /**\n   * Called by DeckGL upon viewport\n   * initialization.\n   * @param {object} viewState\n   * @param {object} viewState.viewport\n   */\n  onInitializeViewInfo({ viewport }) {\n    this.viewport = viewport;\n  }\n\n  /**\n   * Called by DeckGL upon initialization,\n   * helps to understand when to pass layers\n   * to the DeckGL component.\n   * @param {object} gl The WebGL context object.\n   */\n  onWebGLInitialized(gl) {\n    this.setState({ gl });\n  }\n\n  /**\n   * Called by the ToolMenu buttons.\n   * Emits the new tool value to the\n   * `onToolChange` prop.\n   * @param {string} tool Name of tool.\n   */\n  onToolChange(tool) {\n    const { onToolChange: onToolChangeProp } = this.props;\n    this.setState({ tool });\n    if (onToolChangeProp) {\n      onToolChangeProp(tool);\n    }\n  }\n\n  /**\n   * Create the DeckGL layers.\n   * @returns {object[]} Array of\n   * DeckGL layer objects.\n   * Intended to be overriden by descendants.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getLayers() {\n    return [];\n  }\n\n  /**\n   * Emits a function to project from the\n   * cell ID space to the scatterplot or\n   * spatial coordinate space, via the\n   * `updateViewInfo` prop.\n   */\n  viewInfoDidUpdate(getCellCoords) {\n    const { updateViewInfo, cells, uuid } = this.props;\n    const { viewport } = this;\n    if (updateViewInfo && viewport) {\n      updateViewInfo({\n        uuid,\n        project: (cellId) => {\n          const cell = cells[cellId];\n          try {\n            const [positionX, positionY] = getCellCoords(cell);\n            return viewport.project([positionX, positionY]);\n          } catch (e) {\n            return [null, null];\n          }\n        },\n      });\n    }\n  }\n\n  /**\n   * Intended to be overriden by descendants.\n   */\n  componentDidUpdate() {\n\n  }\n\n  /**\n   * A common render function for both Spatial\n   * and Scatterplot components.\n   */\n  render() {\n    const { deckRef, viewState, uuid } = this.props;\n    const { gl, tool } = this.state;\n    const layers = this.getLayers();\n\n    const showCellSelectionTools = this.cellsLayer !== null;\n    const showPanTool = this.cellsLayer !== null;\n\n    return (\n      <>\n        <ToolMenu\n          activeTool={tool}\n          setActiveTool={this.onToolChange}\n          visibleTools={{\n            pan: showPanTool,\n            selectRectangle: showCellSelectionTools,\n            selectLasso: showCellSelectionTools,\n          }}\n        />\n        <DeckGL\n          id={`deckgl-overlay-${uuid}`}\n          ref={deckRef}\n          views={[new OrthographicView({ id: 'ortho' })]} // id is a fix for https://github.com/uber/deck.gl/issues/3259\n          layers={(gl && viewState.target.every(i => typeof i === 'number')) ? layers : ([])}\n          glOptions={DEFAULT_GL_OPTIONS}\n          onWebGLInitialized={this.onWebGLInitialized}\n          onViewStateChange={this.onViewStateChange}\n          viewState={viewState}\n          controller={tool ? ({ dragPan: false }) : true}\n          getCursor={tool ? getCursorWithTool : getCursor}\n        >\n          {this.onInitializeViewInfo}\n        </DeckGL>\n      </>\n    );\n  }\n}\n","import React, { forwardRef } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport { ScatterplotLayer, PolygonLayer, COORDINATE_SYSTEM } from 'deck.gl';\nimport { Matrix4 } from 'math.gl';\nimport { MultiscaleImageLayer, ImageLayer, ScaleBarLayer } from '@hms-dbmi/viv';\nimport { SelectablePolygonLayer, getSelectionLayers } from '../../layers';\nimport { cellLayerDefaultProps, PALETTE, DEFAULT_COLOR } from '../utils';\nimport { square } from './utils';\nimport AbstractSpatialOrScatterplot from '../shared-spatial-scatterplot/AbstractSpatialOrScatterplot';\nimport {\n  createCellsQuadTree,\n} from '../shared-spatial-scatterplot/quadtree';\n\nconst CELLS_LAYER_ID = 'cells-layer';\nconst MOLECULES_LAYER_ID = 'molecules-layer';\nconst NEIGHBORHOODS_LAYER_ID = 'neighborhoods-layer';\n\n// Default getter function props.\nconst defaultGetCellCoords = cell => cell.xy;\nconst makeDefaultGetCellPolygon = radius => (cellEntry) => {\n  const cell = cellEntry[1];\n  return cell.poly?.length ? cell.poly : square(cell.xy[0], cell.xy[1], radius);\n};\nconst makeDefaultGetCellColors = cellColors => cellEntry => (\n  cellColors && cellColors.get(cellEntry[0])\n) || DEFAULT_COLOR;\nconst makeDefaultGetCellIsSelected = cellSelection => cellEntry => (\n  cellSelection\n    ? cellSelection.includes(cellEntry[0])\n    : true // If nothing is selected, everything is selected.\n);\n\n/**\n * React component which expresses the spatial relationships between cells and molecules.\n * @param {object} props\n * @param {string} props.uuid A unique identifier for this component,\n * used to determine when to show tooltips vs. crosshairs.\n * @param {number} props.height Height of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {number} props.width Width of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {object} props.viewState The DeckGL viewState object.\n * @param {function} props.setViewState A handler for updating the DeckGL\n * viewState object.\n * @param {object} props.molecules Molecules data.\n * @param {object} props.cells Cells data.\n * @param {object} props.neighborhoods Neighborhoods data.\n * @param {number} props.lineWidthScale Width of cell border in view space (deck.gl).\n * @param {number} props.lineWidthMaxPixels Max width of the cell border in pixels (deck.gl).\n * @param {object} props.imageLayerLoaders An object mapping raster layer index to Viv loader\n * instances.\n * @param {object} props.cellColors Map from cell IDs to colors [r, g, b].\n * @param {function} props.getCellCoords Getter function for cell coordinates\n * (used by the selection layer).\n * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.\n * @param {function} props.getCellPolygon Getter function for cell polygons.\n * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.\n * @param {function} props.getMoleculeColor\n * @param {function} props.getMoleculePosition\n * @param {function} props.getNeighborhoodPolygon\n * @param {function} props.updateViewInfo Handler for DeckGL viewport updates,\n * used when rendering tooltips and crosshairs.\n * @param {function} props.onCellClick Getter function for cell layer onClick.\n */\nclass Spatial extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n\n    // To avoid storing large arrays/objects\n    // in React state, this component\n    // uses instance variables.\n    // All instance variables used in this class:\n    this.cellsEntries = [];\n    this.moleculesEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.moleculesLayer = null;\n    this.neighborhoodsLayer = null;\n    this.imageLayers = [];\n    this.layerLoaderSelections = {};\n\n    // Initialize data and layers.\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateMoleculesData();\n    this.onUpdateMoleculesLayer();\n    this.onUpdateNeighborhoodsData();\n    this.onUpdateNeighborhoodsLayer();\n    this.onUpdateImages();\n  }\n\n  createCellsLayer(layerDef) {\n    const {\n      radius, stroked, visible, opacity,\n    } = layerDef;\n    const {\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(cellSelection),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors),\n      getCellPolygon = makeDefaultGetCellPolygon(radius),\n      onCellClick,\n      lineWidthScale = 10,\n      lineWidthMaxPixels = 2,\n    } = this.props;\n    const { cellsEntries } = this;\n    const filteredCellsEntries = (cellFilter\n      ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0]))\n      : cellsEntries);\n\n    // Graphics rendering has the y-axis positive going south,\n    // so we need to flip it for rendering tooltips.\n    const flipYTooltip = true;\n\n    return new SelectablePolygonLayer({\n      id: CELLS_LAYER_ID,\n      backgroundColor: [0, 0, 0],\n      isSelected: getCellIsSelected,\n      getPolygon: getCellPolygon,\n      updateTriggers: {\n        getFillColor: [opacity],\n        getLineWidth: [stroked],\n      },\n      getFillColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = opacity * 255;\n        return color;\n      },\n      getLineColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = 255;\n        return color;\n      },\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      visible,\n      getLineWidth: stroked ? 1 : 0,\n      lineWidthScale,\n      lineWidthMaxPixels,\n      ...cellLayerDefaultProps(\n        filteredCellsEntries, undefined, setCellHighlight,\n        setComponentHover, flipYTooltip,\n      ),\n    });\n  }\n\n  createMoleculesLayer(layerDef) {\n    const {\n      setMoleculeHighlight,\n      getMoleculeColor = d => PALETTE[d[2] % PALETTE.length],\n      getMoleculePosition = d => [d[0], d[1], 0],\n    } = this.props;\n    const { moleculesEntries } = this;\n\n    return new ScatterplotLayer({\n      id: MOLECULES_LAYER_ID,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: moleculesEntries,\n      pickable: true,\n      autoHighlight: true,\n      radiusMaxPixels: 3,\n      opacity: layerDef.opacity,\n      visible: layerDef.visible,\n      getRadius: layerDef.radius,\n      getPosition: getMoleculePosition,\n      getLineColor: getMoleculeColor,\n      getFillColor: getMoleculeColor,\n      onHover: (info) => {\n        if (setMoleculeHighlight) {\n          if (info.object) {\n            setMoleculeHighlight(info.object[3]);\n          } else {\n            setMoleculeHighlight(null);\n          }\n        }\n      },\n    });\n  }\n\n  createNeighborhoodsLayer(layerDef) {\n    const {\n      getNeighborhoodPolygon = (neighborhoodsEntry) => {\n        const neighborhood = neighborhoodsEntry[1];\n        return neighborhood.poly;\n      },\n    } = this.props;\n    const { neighborhoodsEntries } = this;\n\n    return new PolygonLayer({\n      id: NEIGHBORHOODS_LAYER_ID,\n      getPolygon: getNeighborhoodPolygon,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: neighborhoodsEntries,\n      pickable: true,\n      autoHighlight: true,\n      stroked: true,\n      filled: false,\n      getElevation: 0,\n      getLineWidth: 10,\n      visible: layerDef.visible,\n    });\n  }\n\n  createSelectionLayers() {\n    const { viewState, getCellCoords = defaultGetCellCoords, setCellSelection } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    return getSelectionLayers(\n      tool,\n      viewState.zoom,\n      CELLS_LAYER_ID,\n      getCellCoords,\n      setCellSelection,\n      cellsQuadTree,\n    );\n  }\n\n  createScaleBarLayer() {\n    const {\n      viewState, width, height, imageLayerLoaders = {},\n    } = this.props;\n    // Just get the first layer/loader since they should all be spatially\n    // resolved and therefore have the same unit size scale.\n    const loaders = Object.values(imageLayerLoaders);\n    if (!viewState || !width || !height || loaders.length < 1) return null;\n    const loader = loaders[0];\n    if (!loader) return null;\n    const { physicalSizes } = loader;\n    if (physicalSizes) {\n      const { x } = physicalSizes;\n      const { unit, value } = x;\n      if (unit && value) {\n        return new ScaleBarLayer({\n          id: 'scalebar-layer',\n          loader,\n          unit,\n          size: value,\n          viewState: { ...viewState, width, height },\n        });\n      }\n      return null;\n    }\n    return null;\n  }\n\n  createImageLayer(rawLayerDef, loader, i) {\n    const layerDef = {\n      ...rawLayerDef,\n      channels: rawLayerDef.channels\n        .filter(channel => channel.selection && channel.color && channel.slider),\n    };\n\n    // We need to keep the same loaderSelection array reference,\n    // otherwise the Viv layer will not be re-used as we want it to,\n    // since loaderSelection is one of its `updateTriggers`.\n    // Reference: https://github.com/hms-dbmi/viv/blob/ad86d0f/src/layers/MultiscaleImageLayer/MultiscaleImageLayer.js#L127\n    let loaderSelection;\n    const nextLoaderSelection = layerDef.channels.map(c => c.selection);\n    const prevLoaderSelection = this.layerLoaderSelections[layerDef.index];\n    if (isEqual(prevLoaderSelection, nextLoaderSelection)) {\n      loaderSelection = prevLoaderSelection;\n    } else {\n      loaderSelection = nextLoaderSelection;\n      this.layerLoaderSelections[layerDef.index] = nextLoaderSelection;\n    }\n    const layerProps = {\n      colormap: layerDef.colormap,\n      opacity: layerDef.opacity,\n      transparentColor: layerDef.transparentColor,\n      colors: layerDef.channels.map(c => c.color),\n      sliders: layerDef.channels.map(c => c.slider),\n      visibilities: layerDef.channels.map(c => c.visible),\n    };\n\n    if (!loader || !layerProps) return null;\n    const { scale, translate, isPyramid } = loader;\n    let modelMatrix;\n    if (scale && translate) {\n      modelMatrix = new Matrix4().translate([translate.x, translate.y, 0]).scale(scale);\n    } else if (layerDef.modelMatrix) {\n      // eslint-disable-next-line prefer-destructuring\n      modelMatrix = new Matrix4(layerDef.modelMatrix);\n    }\n    const Layer = isPyramid ? MultiscaleImageLayer : ImageLayer;\n    return new Layer({\n      loader,\n      id: `image-layer-${layerDef.index}-${i}`,\n      colorValues: layerProps.colors,\n      sliderValues: layerProps.sliders,\n      loaderSelection,\n      channelIsOn: layerProps.visibilities,\n      opacity: layerProps.opacity,\n      colormap: (layerProps.colormap ? layerProps.colormap : ''),\n      modelMatrix,\n      transparentColor: layerProps.transparentColor,\n    });\n  }\n\n  createImageLayers() {\n    const { layers, imageLayerLoaders = {} } = this.props;\n    return (layers || [])\n      .filter(layer => layer.type === 'raster')\n      .map((layer, i) => this.createImageLayer(\n        layer, imageLayerLoaders[layer.index], i,\n      ));\n  }\n\n  getLayers() {\n    const {\n      imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n    } = this;\n    return [\n      ...imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n      this.createScaleBarLayer(),\n      ...this.createSelectionLayers(),\n    ];\n  }\n\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      getCellCoords = defaultGetCellCoords,\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'cells');\n    if (layerDef) {\n      this.cellsLayer = this.createCellsLayer(layerDef);\n    } else {\n      this.cellsLayer = null;\n    }\n  }\n\n  onUpdateMoleculesData() {\n    const { molecules = {} } = this.props;\n    const moleculesEntries = Object\n      .entries(molecules)\n      .flatMap(([molecule, coords], index) => coords.map(([x, y]) => [\n        x, y, index, molecule,\n      ]));\n    this.moleculesEntries = moleculesEntries;\n  }\n\n  onUpdateMoleculesLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'molecules');\n    if (layerDef) {\n      this.moleculesLayer = this.createMoleculesLayer(layerDef);\n    } else {\n      this.moleculesLayer = null;\n    }\n  }\n\n  onUpdateNeighborhoodsData() {\n    const { neighborhoods = {} } = this.props;\n    const neighborhoodsEntries = Object\n      .entries(neighborhoods);\n    this.neighborhoodsEntries = neighborhoodsEntries;\n  }\n\n  onUpdateNeighborhoodsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'neighborhoods');\n    if (layerDef) {\n      this.neighborhoodsLayer = this.createNeighborhoodsLayer(layerDef);\n    } else {\n      this.neighborhoodsLayer = null;\n    }\n  }\n\n  onUpdateImages() {\n    this.imageLayers = this.createImageLayers();\n  }\n\n  viewInfoDidUpdate() {\n    const { getCellCoords = defaultGetCellCoords } = this.props;\n    super.viewInfoDidUpdate(getCellCoords);\n  }\n\n  /**\n   * Here, asynchronously check whether props have\n   * updated which require re-computing memoized variables,\n   * followed by a re-render.\n   * This function does not follow React conventions or paradigms,\n   * it is only implemented this way to try to squeeze out\n   * performance.\n   * @param {object} prevProps The previous props to diff against.\n   */\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => (prevProps[propName] !== this.props[propName]);\n    if (['cells'].some(shallowDiff)) {\n      // Cells data changed.\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if ([\n      'layers', 'cells', 'cellFilter', 'cellSelection', 'cellColors',\n    ].some(shallowDiff)) {\n      // Cells layer props changed.\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n\n    if (['molecules'].some(shallowDiff)) {\n      // Molecules data changed.\n      this.onUpdateMoleculesData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'molecules'].some(shallowDiff)) {\n      // Molecules layer props changed.\n      this.onUpdateMoleculesLayer();\n      this.forceUpdate();\n    }\n\n    if (['neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods data changed.\n      this.onUpdateNeighborhoodsData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods layer props changed.\n      this.onUpdateNeighborhoodsLayer();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'imageLayerLoaders'].some(shallowDiff)) {\n      // Image layers changed.\n      this.onUpdateImages();\n      this.forceUpdate();\n    }\n  }\n\n  // render() is implemented in the abstract parent class.\n}\n\n/**\n * Need this wrapper function here,\n * since we want to pass a forwardRef\n * so that outer components can\n * access the grandchild DeckGL ref,\n * but we are using a class component.\n */\nconst SpatialWrapper = forwardRef((props, deckRef) => <Spatial {...props} deckRef={deckRef} />);\nexport default SpatialWrapper;\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() => ({\n  box: {\n    opacity: 0.5,\n    height: '80px',\n    bottom: 0,\n    right: 0,\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    padding: '10px 0',\n    transition: 'opacity 0.1s',\n    '&:hover': {\n      opacity: 1.0,\n    },\n  },\n}));\n\nexport default function HeatmapControls(props) {\n  const {\n    colorScaleLo,\n    colorScaleHi,\n    onColorScaleChange,\n  } = props;\n  const classes = useStyles();\n\n  return (\n    <Box component=\"div\" m={1} className={classes.box}>\n      <Slider\n        orientation=\"vertical\"\n        value={[colorScaleLo, colorScaleHi]}\n        onChange={onColorScaleChange}\n        aria-labelledby=\"colorscale-slider\"\n        min={0.0}\n        max={1.0}\n        step={0.005}\n      />\n    </Box>\n  );\n}\n","import clamp from 'lodash/clamp';\nimport range from 'lodash/range';\n\nimport {\n  AXIS_LABEL_TEXT_SIZE,\n  AXIS_MIN_SIZE,\n  AXIS_MAX_SIZE,\n} from '../../layers/heatmap-constants';\n\nexport function getGeneByCellTile(view, {\n  tileSize, tileI, tileJ, numCells, numGenes, cellOrdering, cells,\n}) {\n  const tileData = new Uint8Array(tileSize * tileSize);\n  let offset;\n  let value;\n  let cellI;\n  let geneI;\n  let sortedCellI;\n\n  const tileSizeRange = range(tileSize);\n\n  tileSizeRange.forEach((j) => {\n    // Need to iterate over cells in the outer loop.\n    cellI = (tileJ * tileSize) + j;\n    if (cellI < numCells) {\n      sortedCellI = cells.indexOf(cellOrdering[cellI]);\n      if (sortedCellI >= -1) {\n        tileSizeRange.forEach((i) => {\n          geneI = (tileI * tileSize) + i;\n          value = view[sortedCellI * numGenes + geneI];\n          offset = ((tileSize - i - 1) * tileSize + j);\n          tileData[offset] = value;\n        });\n      }\n    }\n  });\n  return tileData;\n}\n\nexport function getCellByGeneTile(view, {\n  tileSize, tileI, tileJ, numCells, numGenes, cellOrdering, cells,\n}) {\n  const tileData = new Uint8Array(tileSize * tileSize);\n  let offset;\n  let value;\n  let cellI;\n  let geneI;\n  let sortedCellI;\n\n  const tileSizeRange = range(tileSize);\n\n  tileSizeRange.forEach((i) => {\n    // Need to iterate over cells in the outer loop.\n    cellI = (tileI * tileSize) + i;\n    if (cellI < numCells) {\n      sortedCellI = cells.indexOf(cellOrdering[cellI]);\n      if (sortedCellI >= -1) {\n        tileSizeRange.forEach((j) => {\n          geneI = (tileJ * tileSize) + j;\n          if (geneI < numGenes) {\n            value = view[sortedCellI * numGenes + geneI];\n          } else {\n            value = 0;\n          }\n          offset = ((tileSize - i - 1) * tileSize + j);\n          tileData[offset] = value;\n        });\n      }\n    }\n  });\n\n  return tileData;\n}\n\n/**\n * Called before a layer is drawn to determine whether it should be rendered.\n * Reference: https://deck.gl/docs/api-reference/core/deck#layerfilter\n * @param {object} params A viewport, layer pair.\n * @param {object} params.layer The layer to check.\n * @param {object} params.viewport The viewport to check.\n * @returns {boolean} Should this layer be rendered in this viewport?\n */\nexport function layerFilter({ layer, viewport }) {\n  if (viewport.id === 'axisLeft') {\n    return layer.id.startsWith('axisLeft');\n  } if (viewport.id === 'axisTop') {\n    return layer.id.startsWith('axisTop');\n  } if (viewport.id === 'heatmap') {\n    return layer.id.startsWith('heatmap');\n  } if (viewport.id === 'colorsLeft') {\n    return layer.id.startsWith('colorsLeft');\n  } if (viewport.id === 'colorsTop') {\n    return layer.id.startsWith('colorsTop');\n  }\n  return false;\n}\n\n/**\n * Get the size of the left and top heatmap axes,\n * taking into account the maximum label string lengths.\n * @param {boolean} transpose Is the heatmap transposed?\n * @param {number} geneLabelMaxLength What is the maximum length gene label?\n * @param {number} cellLabelMaxLength What is the maximum length cell label?\n * @returns {number[]} [axisOffsetLeft, axisOffsetTop]\n */\nexport function getAxisSizes(transpose, geneLabelMaxLength, cellLabelMaxLength) {\n  const axisOffsetLeft = clamp(\n    (transpose ? geneLabelMaxLength : cellLabelMaxLength) * AXIS_LABEL_TEXT_SIZE,\n    AXIS_MIN_SIZE,\n    AXIS_MAX_SIZE,\n  );\n  const axisOffsetTop = clamp(\n    (transpose ? cellLabelMaxLength : geneLabelMaxLength) * AXIS_LABEL_TEXT_SIZE,\n    AXIS_MIN_SIZE,\n    AXIS_MAX_SIZE,\n  );\n  return [axisOffsetLeft, axisOffsetTop];\n}\n\n/**\n * Convert a mouse coordinate (x, y) to a heatmap coordinate (col index, row index).\n * @param {number} mouseX The mouse X of interest.\n * @param {number} mouseY The mouse Y of interest.\n * @param {object} param2 An object containing current sizes and scale factors.\n * @returns {number[]} [colI, rowI]\n */\nexport function mouseToHeatmapPosition(mouseX, mouseY, {\n  offsetLeft, offsetTop, targetX, targetY, scaleFactor, matrixWidth, matrixHeight, numRows, numCols,\n}) {\n  // TODO: use linear algebra\n  const viewMouseX = mouseX - offsetLeft;\n  const viewMouseY = mouseY - offsetTop;\n\n  if (viewMouseX < 0 || viewMouseY < 0) {\n    // The mouse is outside the heatmap.\n    return [null, null];\n  }\n\n  // Determine the rowI and colI values based on the current viewState.\n  const bboxTargetX = targetX * scaleFactor + matrixWidth * scaleFactor / 2;\n  const bboxTargetY = targetY * scaleFactor + matrixHeight * scaleFactor / 2;\n\n  const bboxLeft = bboxTargetX - matrixWidth / 2;\n  const bboxTop = bboxTargetY - matrixHeight / 2;\n\n  const zoomedOffsetLeft = bboxLeft / (matrixWidth * scaleFactor);\n  const zoomedOffsetTop = bboxTop / (matrixHeight * scaleFactor);\n\n  const zoomedViewMouseX = viewMouseX / (matrixWidth * scaleFactor);\n  const zoomedViewMouseY = viewMouseY / (matrixHeight * scaleFactor);\n\n  const zoomedMouseX = zoomedOffsetLeft + zoomedViewMouseX;\n  const zoomedMouseY = zoomedOffsetTop + zoomedViewMouseY;\n\n  const rowI = Math.floor(zoomedMouseY * numRows);\n  const colI = Math.floor(zoomedMouseX * numCols);\n  return [colI, rowI];\n}\n\n/**\n * Convert a heatmap coordinate (col index, row index) to a mouse coordinate (x, y).\n * @param {number} colI The column index of interest.\n * @param {number} rowI The row index of interest.\n * @param {object} param2 An object containing current sizes and scale factors.\n * @returns {number[]} [x, y]\n */\nexport function heatmapToMousePosition(colI, rowI, {\n  offsetLeft, offsetTop, targetX, targetY, scaleFactor, matrixWidth, matrixHeight, numRows, numCols,\n}) {\n  // TODO: use linear algebra\n  let zoomedMouseY = null;\n  let zoomedMouseX = null;\n\n  if (rowI !== null) {\n    const minY = -matrixHeight * scaleFactor / 2;\n    const maxY = matrixHeight * scaleFactor / 2;\n    const totalHeight = maxY - minY;\n\n    const minInViewY = (targetY * scaleFactor) - (matrixHeight / 2);\n    const maxInViewY = (targetY * scaleFactor) + (matrixHeight / 2);\n    const inViewHeight = maxInViewY - minInViewY;\n\n    const normalizedRowY = (rowI + 0.5) / numRows;\n    const globalRowY = minY + (normalizedRowY * totalHeight);\n\n    if (minInViewY <= globalRowY && globalRowY <= maxInViewY) {\n      zoomedMouseY = offsetTop + ((globalRowY - minInViewY) / inViewHeight) * matrixHeight;\n    }\n  }\n  if (colI !== null) {\n    const minX = -matrixWidth * scaleFactor / 2;\n    const maxX = matrixWidth * scaleFactor / 2;\n    const totalWidth = maxX - minX;\n\n    const minInViewX = (targetX * scaleFactor) - (matrixWidth / 2);\n    const maxInViewX = (targetX * scaleFactor) + (matrixWidth / 2);\n    const inViewWidth = maxInViewX - minInViewX;\n\n    const normalizedRowX = (colI + 0.5) / numCols;\n    const globalRowX = minX + (normalizedRowX * totalWidth);\n\n    if (minInViewX <= globalRowX && globalRowX <= maxInViewX) {\n      zoomedMouseX = offsetLeft + ((globalRowX - minInViewX) / inViewWidth) * matrixWidth;\n    }\n  }\n  return [zoomedMouseX, zoomedMouseY];\n}\n","import React, {\n  useRef, useState, useCallback, useMemo, useEffect, useReducer, forwardRef,\n} from 'react';\nimport uuidv4 from 'uuid/v4';\nimport DeckGL from 'deck.gl';\nimport { OrthographicView } from '@deck.gl/core';\nimport range from 'lodash/range';\nimport clamp from 'lodash/clamp';\nimport isEqual from 'lodash/isEqual';\nimport { max } from 'd3-array';\nimport HeatmapControls from './HeatmapControls';\nimport HeatmapCompositeTextLayer from '../../layers/HeatmapCompositeTextLayer';\nimport PixelatedBitmapLayer from '../../layers/PixelatedBitmapLayer';\nimport HeatmapBitmapLayer from '../../layers/HeatmapBitmapLayer';\nimport {\n  DEFAULT_GL_OPTIONS,\n  createDefaultUpdateCellsHover,\n  createDefaultUpdateGenesHover,\n  createDefaultUpdateViewInfo,\n  copyUint8Array,\n} from '../utils';\nimport HeatmapWorker from './heatmap.worker';\nimport {\n  layerFilter,\n  getAxisSizes,\n  mouseToHeatmapPosition,\n  heatmapToMousePosition,\n} from './utils';\nimport {\n  TILE_SIZE, MAX_ROW_AGG, MIN_ROW_AGG,\n  COLOR_BAR_SIZE,\n  AXIS_MARGIN,\n} from '../../layers/heatmap-constants';\n\n/**\n * A heatmap component for cell x gene matrices.\n * @param {object} props\n * @param {string} props.uuid The uuid of this component,\n * used by tooltips to determine whether to render a tooltip or\n * a crosshair.\n * @param {string} props.theme The current theme name.\n * @param {object} props.initialViewState The initial viewState for\n * DeckGL.\n * @param {number} props.width The width of the canvas.\n * @param {number} props.height The height of the canvas.\n * @param {object} props.expressionMatrix An object { rows, cols, matrix },\n * where matrix is a flat Uint8Array, rows is a list of cell ID strings,\n * and cols is a list of gene ID strings.\n * @param {Map} props.cellColors Map of cell ID to color. Optional.\n * If defined, the key ordering is used to order the cell axis of the heatmap.\n * @param {function} props.clearPleaseWait The clear please wait callback,\n * called when the expression matrix has loaded (is not null).\n * @param {function} props.setCellHighlight Callback function called on\n * hover with the cell ID. Optional.\n * @param {function} props.setGeneHighlight Callback function called on\n * hover with the gene ID. Optional.\n * @param {function} props.updateViewInfo Callback function that gets called with an\n * object { uuid, project() } where project is a function that maps (cellId, geneId)\n * to canvas (x,y) coordinates. Used to show tooltips. Optional.\n * @param {boolean} props.transpose By default, false.\n * @param {string} props.variablesTitle By default, 'Genes'.\n * @param {string} props.observationsTitle By default, 'Cells'.\n */\nconst Heatmap = forwardRef((props, deckRef) => {\n  const {\n    uuid,\n    theme,\n    viewState: rawViewState,\n    setViewState,\n    setHeatmapControls,\n    heatmapControls = [0, 1],\n    width: viewWidth,\n    height: viewHeight,\n    expressionMatrix: expression,\n    cellColors,\n    clearPleaseWait,\n    setComponentHover,\n    setCellHighlight = createDefaultUpdateCellsHover('Heatmap'),\n    setGeneHighlight = createDefaultUpdateGenesHover('Heatmap'),\n    updateViewInfo = createDefaultUpdateViewInfo('Heatmap'),\n    setIsRendering = () => {},\n    transpose = false,\n    variablesTitle = 'Genes',\n    observationsTitle = 'Cells',\n  } = props;\n\n  const viewState = {\n    ...rawViewState,\n    target: (transpose ? [rawViewState.target[1], rawViewState.target[0]] : rawViewState.target),\n    minZoom: 0,\n  };\n\n  const axisLeftTitle = (transpose ? variablesTitle : observationsTitle);\n  const axisTopTitle = (transpose ? observationsTitle : variablesTitle);\n\n  useEffect(() => {\n    if (clearPleaseWait && expression) {\n      clearPleaseWait('expression-matrix');\n    }\n  }, [clearPleaseWait, expression]);\n\n  const workerRef = useRef(new HeatmapWorker());\n  const tilesRef = useRef();\n  const dataRef = useRef();\n  const [axisLeftLabels, setAxisLeftLabels] = useState([]);\n  const [axisTopLabels, setAxisTopLabels] = useState([]);\n  const [colorScaleLo, setColorScaleLo] = useState(heatmapControls[0]);\n  const [colorScaleHi, setColorScaleHi] = useState(heatmapControls[1]);\n\n  // Callback function for the color scale slider change event.\n  const onColorScaleChange = useCallback((event, newValue) => {\n    setColorScaleLo(newValue[0]);\n    setColorScaleHi(newValue[1]);\n    setHeatmapControls(newValue);\n  }, [setHeatmapControls]);\n\n  // Since we are storing the tile data in a ref,\n  // and updating it asynchronously when the worker finishes,\n  // we need to tie it to a piece of state through this iteration value.\n  const [tileIteration, incTileIteration] = useReducer(i => i + 1, 0);\n\n  // We need to keep a backlog of the tasks for the worker thread,\n  // since the array buffer can only be held by one thread at a time.\n  const [backlog, setBacklog] = useState([]);\n\n  // Use an effect to listen for the worker to send the array of tiles.\n  useEffect(() => {\n    workerRef.current.addEventListener('message', (event) => {\n      // The tiles have been generated.\n      tilesRef.current = event.data.tiles;\n      // The buffer has been transferred back to the main thread.\n      dataRef.current = new Uint8Array(event.data.buffer);\n      // Increment the counter to notify the downstream useEffects and useMemos.\n      incTileIteration();\n      // Remove this task and everything prior from the backlog.\n      const { curr } = event.data;\n      setBacklog((prev) => {\n        const currIndex = prev.indexOf(curr);\n        return prev.slice(currIndex + 1, prev.length);\n      });\n    });\n  }, [workerRef, tilesRef]);\n\n  // Store a reference to the matrix Uint8Array in the dataRef,\n  // since we need to access its array buffer to transfer\n  // it back and forth from the worker thread.\n  useEffect(() => {\n    // Store the expression matrix Uint8Array in the dataRef.\n    if (expression && expression.matrix) {\n      dataRef.current = copyUint8Array(expression.matrix);\n    }\n  }, [dataRef, expression]);\n\n  // Check if the ordering of axis labels needs to be changed,\n  // for example if the cells \"selected\" (technically just colored)\n  // have changed.\n  useEffect(() => {\n    if (!expression) {\n      return;\n    }\n    const newCellOrdering = (!cellColors || cellColors.size === 0\n      ? expression.rows\n      : Array.from(cellColors.keys())\n    );\n    const oldCellOrdering = (transpose ? axisTopLabels : axisLeftLabels);\n\n    if (!isEqual(oldCellOrdering, newCellOrdering)) {\n      if (transpose) {\n        setAxisTopLabels(newCellOrdering);\n      } else {\n        setAxisLeftLabels(newCellOrdering);\n      }\n    }\n  }, [expression, cellColors, axisTopLabels, axisLeftLabels, transpose]);\n\n  // Set the genes ordering.\n  useEffect(() => {\n    if (!expression) {\n      return;\n    }\n    if (transpose) {\n      setAxisLeftLabels(expression.cols);\n    } else {\n      setAxisTopLabels(expression.cols);\n    }\n  }, [expression, transpose]);\n\n  const [cellLabelMaxLength, geneLabelMaxLength] = useMemo(() => {\n    if (!expression) {\n      return [0, 0];\n    }\n    return [\n      max(expression.rows.map(cellId => cellId.length)),\n      max(expression.cols.map(geneId => geneId.length)),\n    ];\n  }, [expression]);\n\n  const width = axisTopLabels.length;\n  const height = axisLeftLabels.length;\n\n  const [axisOffsetLeft, axisOffsetTop] = getAxisSizes(\n    transpose, geneLabelMaxLength, cellLabelMaxLength,\n  );\n\n  const offsetTop = axisOffsetTop + COLOR_BAR_SIZE;\n  const offsetLeft = axisOffsetLeft + COLOR_BAR_SIZE;\n\n  const matrixWidth = viewWidth - offsetLeft;\n  const matrixHeight = viewHeight - offsetTop;\n\n  const matrixLeft = -matrixWidth / 2;\n  const matrixRight = matrixWidth / 2;\n  const matrixTop = -matrixHeight / 2;\n  const matrixBottom = matrixHeight / 2;\n\n  const xTiles = Math.ceil(width / TILE_SIZE);\n  const yTiles = Math.ceil(height / TILE_SIZE);\n\n  const widthRatio = 1 - (TILE_SIZE - (width % TILE_SIZE)) / (xTiles * TILE_SIZE);\n  const heightRatio = 1 - (TILE_SIZE - (height % TILE_SIZE)) / (yTiles * TILE_SIZE);\n\n  const tileWidth = (matrixWidth / widthRatio) / (xTiles);\n  const tileHeight = (matrixHeight / heightRatio) / (yTiles);\n\n  const scaleFactor = 2 ** viewState.zoom;\n  const cellHeight = (matrixHeight * scaleFactor) / height;\n  const cellWidth = (matrixWidth * scaleFactor) / width;\n\n  // Get power of 2 between 1 and 16,\n  // for number of cells to aggregate together in each direction.\n  const aggSizeX = clamp(2 ** Math.ceil(Math.log2(1 / cellWidth)), MIN_ROW_AGG, MAX_ROW_AGG);\n  const aggSizeY = clamp(2 ** Math.ceil(Math.log2(1 / cellHeight)), MIN_ROW_AGG, MAX_ROW_AGG);\n\n  const [targetX, targetY] = viewState.target;\n\n  // Emit the viewInfo object on viewState updates\n  // (used by tooltips / crosshair elements).\n  useEffect(() => {\n    updateViewInfo({\n      uuid,\n      project: (cellId, geneId) => {\n        const colI = transpose ? axisTopLabels.indexOf(cellId) : axisTopLabels.indexOf(geneId);\n        const rowI = transpose ? axisLeftLabels.indexOf(geneId) : axisLeftLabels.indexOf(cellId);\n        return heatmapToMousePosition(\n          colI, rowI, {\n            offsetLeft,\n            offsetTop,\n            targetX: viewState.target[0],\n            targetY: viewState.target[1],\n            scaleFactor,\n            matrixWidth,\n            matrixHeight,\n            numRows: height,\n            numCols: width,\n          },\n        );\n      },\n    });\n  }, [uuid, updateViewInfo, transpose, axisTopLabels, axisLeftLabels, offsetLeft,\n    offsetTop, viewState, scaleFactor, matrixWidth, matrixHeight, height, width]);\n\n\n  // Listen for viewState changes.\n  // Do not allow the user to zoom and pan outside of the initial window.\n  const onViewStateChange = useCallback(({ viewState: nextViewState }) => {\n    const { zoom: nextZoom } = nextViewState;\n    const nextScaleFactor = 2 ** nextZoom;\n\n    const minTargetX = nextZoom === 0 ? 0 : -(matrixRight - (matrixRight / nextScaleFactor));\n    const maxTargetX = -1 * minTargetX;\n\n    const minTargetY = nextZoom === 0 ? 0 : -(matrixBottom - (matrixBottom / nextScaleFactor));\n    const maxTargetY = -1 * minTargetY;\n\n    // Manipulate view state if necessary to keep the user in the window.\n    const nextTarget = [\n      clamp(nextViewState.target[0], minTargetX, maxTargetX),\n      clamp(nextViewState.target[1], minTargetY, maxTargetY),\n    ];\n\n    setViewState({\n      zoom: nextZoom,\n      target: (transpose ? [nextTarget[1], nextTarget[0]] : nextTarget),\n    });\n  }, [matrixRight, matrixBottom, transpose, setViewState]);\n\n  // If `expression` or `cellOrdering` have changed,\n  // then new tiles need to be generated,\n  // so add a new task to the backlog.\n  useEffect(() => {\n    if (!expression) {\n      return;\n    }\n    // Use a uuid to give the task a unique ID,\n    // to help identify where in the list it is located\n    // after the worker thread asynchronously sends the data back\n    // to this thread.\n    setBacklog(prev => ([...prev, uuidv4()]));\n  }, [dataRef, expression, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n\n  // When the backlog has updated, a new worker job can be submitted if:\n  // - the backlog has length >= 1 (at least one job is waiting), and\n  // - buffer.byteLength is not zero, so the worker does not currently \"own\" the buffer.\n  useEffect(() => {\n    if (backlog.length < 1) {\n      return;\n    }\n    const curr = backlog[backlog.length - 1];\n    if (dataRef.current && dataRef.current.buffer.byteLength) {\n      const { rows, cols } = expression;\n      workerRef.current.postMessage(['getTiles', {\n        curr,\n        xTiles,\n        yTiles,\n        tileSize: TILE_SIZE,\n        cellOrdering: (transpose ? axisTopLabels : axisLeftLabels),\n        rows,\n        cols,\n        transpose,\n        data: dataRef.current.buffer,\n      }], [dataRef.current.buffer]);\n    }\n  }, [axisLeftLabels, axisTopLabels, backlog, expression, transpose, xTiles, yTiles]);\n\n  useEffect(() => {\n    setIsRendering(backlog.length > 0);\n  }, [backlog, setIsRendering]);\n\n  // Update the heatmap tiles if:\n  // - new tiles are available (`tileIteration` has changed), or\n  // - the matrix bounds have changed, or\n  // - the `aggSizeX` or `aggSizeY` have changed, or\n  // - the cell ordering has changed.\n  const heatmapLayers = useMemo(() => {\n    if (!tilesRef.current || backlog.length) {\n      return [];\n    }\n    function getLayer(i, j, tile) {\n      return new HeatmapBitmapLayer({\n        id: `heatmapLayer-${tileIteration}-${i}-${j}`,\n        image: tile,\n        bounds: [\n          matrixLeft + j * tileWidth,\n          matrixTop + i * tileHeight,\n          matrixLeft + (j + 1) * tileWidth,\n          matrixTop + (i + 1) * tileHeight,\n        ],\n        aggSizeX,\n        aggSizeY,\n        colorScaleLo,\n        colorScaleHi,\n        updateTriggers: {\n          image: [axisLeftLabels, axisTopLabels],\n          bounds: [tileHeight, tileWidth],\n        },\n      });\n    }\n    return tilesRef.current.flatMap((tileRow, i) => tileRow.map((tile, j) => getLayer(i, j, tile)));\n  }, [backlog, tileIteration, matrixLeft, tileWidth, matrixTop, tileHeight,\n    aggSizeX, aggSizeY, colorScaleLo, colorScaleHi, axisLeftLabels, axisTopLabels]);\n\n\n  // Map cell and gene names to arrays with indices,\n  // to prepare to render the names in TextLayers.\n  const axisTopLabelData = useMemo(() => axisTopLabels.map((d, i) => [i, d]), [axisTopLabels]);\n  const axisLeftLabelData = useMemo(() => axisLeftLabels.map((d, i) => [i, d]), [axisLeftLabels]);\n\n  // Generate the axis label, axis title, and loading indicator text layers.\n  const textLayers = [\n    new HeatmapCompositeTextLayer({\n      targetX,\n      targetY,\n      scaleFactor,\n      axisLeftLabelData,\n      matrixTop,\n      height,\n      matrixHeight,\n      cellHeight,\n      cellWidth,\n      axisTopLabelData,\n      matrixLeft,\n      width,\n      matrixWidth,\n      viewHeight,\n      viewWidth,\n      theme,\n      axisLeftTitle,\n      axisTopTitle,\n      axisOffsetLeft,\n      axisOffsetTop,\n    }),\n  ];\n\n  // Create the left color bar with a BitmapLayer.\n  // TODO: find a way to do aggregation for this as well.\n  const cellColorsTiles = useMemo(() => {\n    if (!cellColors) {\n      return null;\n    }\n\n    let cellId;\n    let offset;\n    let color;\n    let rowI;\n\n    const cellOrdering = (transpose ? axisTopLabels : axisLeftLabels);\n    const colorBarTileWidthPx = (transpose ? TILE_SIZE : 1);\n    const colorBarTileHeightPx = (transpose ? 1 : TILE_SIZE);\n\n    const result = range((transpose ? xTiles : yTiles)).map((i) => {\n      const tileData = new Uint8ClampedArray(TILE_SIZE * 1 * 4);\n\n      range(TILE_SIZE).forEach((tileY) => {\n        rowI = (i * TILE_SIZE) + tileY; // the row / cell index\n        if (rowI < cellOrdering.length) {\n          cellId = cellOrdering[rowI];\n          color = cellColors.get(cellId);\n          offset = (transpose ? tileY : (TILE_SIZE - tileY - 1)) * 4;\n          if (color) {\n            const [rValue, gValue, bValue] = color;\n            tileData[offset + 0] = rValue;\n            tileData[offset + 1] = gValue;\n            tileData[offset + 2] = bValue;\n            tileData[offset + 3] = 255;\n          }\n        }\n      });\n\n      return new ImageData(tileData, colorBarTileWidthPx, colorBarTileHeightPx);\n    });\n\n    return result;\n  }, [cellColors, transpose, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n\n  const cellColorsLayers = useMemo(() => (cellColorsTiles\n    ? cellColorsTiles\n      .map((tile, i) => new PixelatedBitmapLayer({\n        id: `${(transpose ? 'colorsTopLayer' : 'colorsLeftLayer')}-${i}-${uuidv4()}`,\n        image: tile,\n        bounds: (transpose ? [\n          matrixLeft + i * tileWidth,\n          -matrixHeight / 2,\n          matrixLeft + (i + 1) * tileWidth,\n          matrixHeight / 2,\n        ] : [\n          -matrixWidth / 2,\n          matrixTop + i * tileHeight,\n          matrixWidth / 2,\n          matrixTop + (i + 1) * tileHeight,\n        ]),\n      }))\n    : []), [cellColorsTiles, matrixTop, matrixLeft, matrixHeight,\n    matrixWidth, tileWidth, tileHeight, transpose]);\n\n  const layers = heatmapLayers\n    .concat(textLayers)\n    .concat(cellColorsLayers);\n\n  // Set up the onHover function.\n  function onHover(info, event) {\n    if (!expression) {\n      return;\n    }\n    const { x: mouseX, y: mouseY } = event.offsetCenter;\n    const [colI, rowI] = mouseToHeatmapPosition(mouseX, mouseY, {\n      offsetLeft,\n      offsetTop,\n      targetX,\n      targetY,\n      scaleFactor,\n      matrixWidth,\n      matrixHeight,\n      numRows: height,\n      numCols: width,\n    });\n\n    if (colI === null) {\n      if (transpose) {\n        setCellHighlight(null);\n      } else {\n        setGeneHighlight(null);\n      }\n    }\n\n    if (rowI === null) {\n      if (transpose) {\n        setGeneHighlight(null);\n      } else {\n        setCellHighlight(null);\n      }\n    }\n\n    const obsI = expression.rows.indexOf(transpose\n      ? axisTopLabels[colI]\n      : axisLeftLabels[rowI]);\n    const varI = expression.cols.indexOf(transpose\n      ? axisLeftLabels[rowI]\n      : axisTopLabels[colI]);\n\n    const obsId = expression.rows[obsI];\n    const varId = expression.cols[varI];\n    if (setComponentHover) {\n      setComponentHover();\n    }\n    setCellHighlight(obsId || null);\n    setGeneHighlight(varId || null);\n  }\n\n  return (\n    <>\n      <DeckGL\n        id={`deckgl-overlay-${uuid}`}\n        ref={deckRef}\n        views={[\n          // Note that there are multiple views here,\n          // but only one viewState.\n          new OrthographicView({\n            id: 'heatmap',\n            controller: true,\n            x: offsetLeft,\n            y: offsetTop,\n            width: matrixWidth,\n            height: matrixHeight,\n          }),\n          new OrthographicView({\n            id: 'axisLeft',\n            controller: false,\n            x: (transpose ? COLOR_BAR_SIZE : 0),\n            y: offsetTop,\n            width: axisOffsetLeft,\n            height: matrixHeight,\n          }),\n          new OrthographicView({\n            id: 'axisTop',\n            controller: false,\n            x: offsetLeft,\n            y: (transpose ? 0 : COLOR_BAR_SIZE),\n            width: matrixWidth,\n            height: axisOffsetTop,\n          }),\n          new OrthographicView({\n            id: 'colorsLeft',\n            controller: false,\n            x: axisOffsetLeft,\n            y: offsetTop,\n            width: COLOR_BAR_SIZE - AXIS_MARGIN,\n            height: matrixHeight,\n          }),\n          new OrthographicView({\n            id: 'colorsTop',\n            controller: false,\n            x: offsetLeft,\n            y: axisOffsetTop,\n            width: matrixWidth,\n            height: COLOR_BAR_SIZE - AXIS_MARGIN,\n          }),\n        ]}\n        layers={layers}\n        layerFilter={layerFilter}\n        getCursor={interactionState => (interactionState.isDragging ? 'grabbing' : 'default')}\n        glOptions={DEFAULT_GL_OPTIONS}\n        onViewStateChange={onViewStateChange}\n        viewState={viewState}\n        onHover={onHover}\n      />\n      <HeatmapControls\n        colorScaleLo={colorScaleLo}\n        colorScaleHi={colorScaleHi}\n        onColorScaleChange={onColorScaleChange}\n      />\n    </>\n  );\n});\n\nexport default Heatmap;\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\nimport { quadtree } from 'd3-quadtree';\n\n/**\n * Returns a closure that returns a constant value.\n */\nfunction constant(v) {\n  return (() => v);\n}\n\n/**\n * Adds a tiny bit of randomness to a number.\n */\nfunction jiggle(v) {\n  return v + (Math.random() - 0.5) * 1e-6;\n}\n\n/**\n * A force function to be used with d3.forceSimulation.\n * This has been adapted for use here, with comments explaining each part.\n * Reference: https://bl.ocks.org/cmgiven/547658968d365bcc324f3e62e175709b\n */\nexport function forceCollideRects() {\n  // D3 implements things with function prototypes rather than classes.\n  // Pretend these variables are the \"instance members\" of a class.\n  // Note that this function actually returns the internal force() function,\n  // but that the force() function is a closure with access to these instance members.\n\n  let nodes;\n  let masses;\n  let strength = 1;\n  let iterations = 1;\n\n  let sizes;\n  let size = constant([0, 0]);\n\n  // Given a node, return the center point along the x-axis.\n  function xCenter(d) {\n    return d.x + d.vx + sizes[d.index][0] / 2;\n  }\n\n  // Given a node, return the center point along the y-axis.\n  function yCenter(d) {\n    return d.y + d.vy + sizes[d.index][1] / 2;\n  }\n\n  // Given a quadtree node, initialize its .size property.\n  function prepare(quad) {\n    if (quad.data) {\n      // This is a leaf node, so we set quad.size to the node's size.\n      // (No need to compute the max of internal nodes,\n      // since leaf nodes do not have any internal nodes).\n      quad.size = sizes[quad.data.index];\n    } else {\n      quad.size = [0, 0];\n      // Internal nodes of the quadtree are represented\n      // as four-element arrays in left-to-right, top-to-bottom order.\n      // Here, we are setting quad.size to [maxWidth, maxHeight]\n      // among the internal nodes of this current `quad` node.\n      for (let i = 0; i < 4; i++) {\n        if (quad[i] && quad[i].size) {\n          quad.size[0] = Math.max(quad.size[0], quad[i].size[0]);\n          quad.size[1] = Math.max(quad.size[1], quad[i].size[1]);\n        }\n      }\n    }\n  }\n\n  function force() {\n    let node;\n    let nodeSize;\n    let nodeMass;\n    let xi;\n    let yi;\n\n    // Create a quadtree based on node center points.\n    // Initialize each quadtree node's .size property by calling\n    // the prepare() function on each quadtree node.\n    const tree = quadtree(nodes, xCenter, yCenter).visitAfter(prepare);\n\n    // Update the .vx and .vy properties of both `node` and `data`\n    // (the current node pair).\n    function apply(quad, x0, y0, x1, y1) {\n      // `quad` is a quadtree node.\n      const { data } = quad;\n      const xSize = (nodeSize[0] + quad.size[0]) / 2;\n      const ySize = (nodeSize[1] + quad.size[1]) / 2;\n\n      if (data && data.index > node.index) {\n        // This is a leaf node because `data` is defined.\n        // `x` is the difference in x centers between `node` and `data`.\n        // `y` is the difference in y centers between `node` and `data`.\n        let x = jiggle(xi - xCenter(data));\n        let y = jiggle(yi - yCenter(data));\n        const xd = Math.abs(x) - xSize;\n        const yd = Math.abs(y) - ySize;\n\n        // If `xd` and `yd` is less than zero,\n        // then there is an overlap between the two nodes.\n        if (xd < 0 && yd < 0) {\n          const l = Math.sqrt(x * x + y * y);\n          const m = masses[data.index] / (nodeMass + masses[data.index]);\n\n          // We move the nodes either in the x or y direction.\n          // Nodes are moved proportionally to:\n          // their distance apart (`l`), their amount of overlap (`xd` or `yd`), their masses (`m`),\n          // and the strength parameter (`strength`).\n          if (Math.abs(xd) < Math.abs(yd)) {\n            node.vx -= (x *= xd / l * strength) * m;\n            data.vx += x * (1 - m);\n          } else {\n            node.vy -= (y *= yd / l * strength) * m;\n            data.vy += y * (1 - m);\n          }\n        }\n        // When the quadtree.visit callback returns _true_ for a node,\n        // then the node's children will _not_ be visited.\n        return x0 > xi + xSize || x1 < xi - xSize || y0 > yi + ySize || y1 < yi - ySize;\n      }\n      return false;\n    }\n\n    function iterate() {\n      // On every iteration, use the `apply` function to visit every node\n      // which has an index greater than the current node's index,\n      // (visiting every node pair).\n      for (let j = 0; j < nodes.length; j++) {\n        node = nodes[j];\n        nodeSize = sizes[j];\n        nodeMass = masses[j];\n        xi = xCenter(node);\n        yi = yCenter(node);\n\n        tree.visit(apply);\n      }\n    }\n\n    // Do the specified number of iterations.\n    for (let i = 0; i < iterations; i++) {\n      iterate();\n    }\n  }\n\n  // The \"constructor\".\n  // Takes a list of nodes as input.\n  force.initialize = (v) => {\n    nodes = v;\n    // Get the size [w, h] of each node using the size getter function.\n    sizes = nodes.map(size);\n    // Get the mass of each node,\n    // which is the sum of its horizontal and vertical edge lengths.\n    masses = sizes.map(d => d[0] + d[1]);\n  };\n\n  // Set the number of iterations.\n  // If no value is provided as a parameter, this acts as a getter function.\n  force.iterations = (...v) => {\n    if (v.length) {\n      iterations = +v[0];\n      return force;\n    }\n    return iterations;\n  };\n\n  // Set the strength value.\n  // If no value is provided as a parameter, this acts as a getter function.\n  force.strength = (...v) => {\n    if (v.length) {\n      strength = +v[0];\n      return force;\n    }\n    return strength;\n  };\n\n  // Set the size function.\n  // The size function takes a node as a parameter and returns its size.\n  // If no size function is provided as a parameter, this acts as a getter function.\n  force.size = (...v) => {\n    if (v.length) {\n      size = (typeof v[0] === 'function' ? v[0] : constant(v[0]));\n      return force;\n    }\n    return size;\n  };\n\n  // Returns the force closure.\n  return force;\n}\n","import React, { forwardRef } from 'react';\nimport { PolygonLayer, TextLayer } from '@deck.gl/layers';\nimport { forceSimulation } from 'd3-force';\nimport { SelectableScatterplotLayer, getSelectionLayers } from '../../layers';\nimport { cellLayerDefaultProps, DEFAULT_COLOR } from '../utils';\nimport {\n  createCellsQuadTree,\n} from '../shared-spatial-scatterplot/quadtree';\nimport AbstractSpatialOrScatterplot from '../shared-spatial-scatterplot/AbstractSpatialOrScatterplot';\nimport { forceCollideRects } from '../shared-spatial-scatterplot/force-collide-rects';\n\nconst CELLS_LAYER_ID = 'scatterplot';\nconst LABEL_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nconst NUM_FORCE_SIMULATION_TICKS = 100;\nconst LABEL_UPDATE_ZOOM_DELTA = 0.25;\n\n// Default getter function props.\nconst makeDefaultGetCellPosition = mapping => (cellEntry) => {\n  const { mappings } = cellEntry[1];\n  if (!(mapping in mappings)) {\n    const available = Object.keys(mappings).map(s => `\"${s}\"`).join(', ');\n    throw new Error(`Expected to find \"${mapping}\", but available mappings are: ${available}`);\n  }\n  const mappedCell = mappings[mapping];\n  // The negative applied to the y-axis is because\n  // graphics rendering has the y-axis positive going south.\n  return [mappedCell[0], -mappedCell[1], 0];\n};\nconst makeDefaultGetCellCoords = mapping => cell => cell.mappings[mapping];\nconst makeDefaultGetCellColors = cellColors => cellEntry => (\n  cellColors && cellColors.get(cellEntry[0])\n) || DEFAULT_COLOR;\nconst makeDefaultGetCellIsSelected = cellSelection => cellEntry => (\n  cellSelection\n    ? cellSelection.includes(cellEntry[0])\n    : true // If nothing is selected, everything is selected.\n);\n\n/**\n * React component which renders a scatterplot from cell data, typically tSNE or PCA.\n * @param {object} props\n * @param {string} props.uuid A unique identifier for this component.\n * @param {string} props.theme The current vitessce theme.\n * @param {object} props.viewState The deck.gl view state.\n * @param {function} props.setViewState Function to call to update the deck.gl view state.\n * @param {object} props.cells\n * @param {string} props.mapping The name of the coordinate mapping field,\n * for each cell, for example \"PCA\" or \"t-SNE\".\n * @param {Map} props.cellColors Mapping of cell IDs to colors.\n * @param {array} props.cellSelection Array of selected cell IDs.\n * @param {array} props.cellFilter Array of filtered cell IDs. By default, null.\n * @param {number} props.cellRadiusScale The value for `radiusScale` to pass\n * to the deck.gl cells ScatterplotLayer.\n * @param {number} props.cellOpacity The value for `opacity` to pass\n * to the deck.gl cells ScatterplotLayer.\n * @param {function} props.getCellCoords Getter function for cell coordinates\n * (used by the selection layer).\n * @param {function} props.getCellPosition Getter function for cell [x, y, z] position.\n * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.\n * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.\n * @param {function} props.setCellSelection\n * @param {function} props.setCellHighlight\n * @param {function} props.updateViewInfo\n * @param {function} props.onToolChange Callback for tool changes\n * (lasso/pan/rectangle selection tools).\n * @param {function} props.onCellClick Getter function for cell layer onClick.\n */\nclass Scatterplot extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n\n    // To avoid storing large arrays/objects\n    // in React state, this component\n    // uses instance variables.\n    // All instance variables used in this class:\n    this.cellsEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.cellSetsForceSimulation = forceCollideRects();\n    this.cellSetsLabelPrevZoom = null;\n    this.cellSetsLayers = [];\n\n    // Initialize data and layers.\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateCellSetsLayers();\n  }\n\n  createCellsLayer() {\n    const {\n      theme,\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping),\n      cellRadiusScale = 0.2,\n      cellOpacity = 1.0,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(cellSelection),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors),\n      onCellClick,\n    } = this.props;\n    const { cellsEntries } = this;\n    const filteredCellsEntries = (cellFilter\n      ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0]))\n      : cellsEntries);\n\n    return new SelectableScatterplotLayer({\n      id: CELLS_LAYER_ID,\n      backgroundColor: (theme === 'dark' ? [0, 0, 0] : [241, 241, 241]),\n      isSelected: getCellIsSelected,\n      opacity: cellOpacity,\n      radiusScale: cellRadiusScale,\n      radiusMinPixels: 1,\n      radiusMaxPixels: 10,\n      getPosition: getCellPosition,\n      getColor: getCellColor,\n      getLineWidth: 0,\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      ...cellLayerDefaultProps(\n        filteredCellsEntries, undefined, setCellHighlight, setComponentHover,\n      ),\n    });\n  }\n\n  createCellSetsLayers() {\n    const {\n      theme,\n      cellSetPolygons,\n      viewState,\n      cellSetPolygonsVisible,\n      cellSetLabelsVisible,\n      cellSetLabelSize,\n    } = this.props;\n\n    const result = [];\n\n    if (cellSetPolygonsVisible) {\n      result.push(new PolygonLayer({\n        id: 'cell-sets-polygon-layer',\n        data: cellSetPolygons,\n        stroked: true,\n        filled: false,\n        wireframe: true,\n        lineWidthMaxPixels: 1,\n        getPolygon: d => d.hull,\n        getLineColor: d => d.color,\n        getLineWidth: 1,\n      }));\n    }\n\n    if (cellSetLabelsVisible) {\n      const { zoom } = viewState;\n      const nodes = cellSetPolygons.map(p => ({\n        x: p.centroid[0],\n        y: p.centroid[1],\n        label: p.name,\n      }));\n\n      const collisionForce = this.cellSetsForceSimulation\n        .size(d => ([\n          cellSetLabelSize * 1 / (2 ** zoom) * 4 * d.label.length,\n          cellSetLabelSize * 1 / (2 ** zoom) * 1.5,\n        ]));\n\n      forceSimulation()\n        .nodes(nodes)\n        .force('collision', collisionForce)\n        .tick(NUM_FORCE_SIMULATION_TICKS);\n\n      result.push(new TextLayer({\n        id: 'cell-sets-text-layer',\n        data: nodes,\n        getPosition: d => ([d.x, d.y]),\n        getText: d => d.label,\n        getColor: (theme === 'dark' ? [255, 255, 255] : [0, 0, 0]),\n        getSize: cellSetLabelSize,\n        getAngle: 0,\n        getTextAnchor: 'middle',\n        getAlignmentBaseline: 'center',\n        fontFamily: LABEL_FONT_FAMILY,\n        fontWeight: 'normal',\n      }));\n    }\n\n    return result;\n  }\n\n  createSelectionLayers() {\n    const {\n      viewState,\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping),\n      setCellSelection,\n    } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    const flipYTooltip = true;\n    return getSelectionLayers(\n      tool,\n      viewState.zoom,\n      CELLS_LAYER_ID,\n      getCellCoords,\n      setCellSelection,\n      cellsQuadTree,\n      flipYTooltip,\n    );\n  }\n\n  getLayers() {\n    const {\n      cellsLayer,\n      cellSetsLayers,\n    } = this;\n    return [\n      cellsLayer,\n      ...cellSetsLayers,\n      ...this.createSelectionLayers(),\n    ];\n  }\n\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping),\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    this.cellsLayer = this.createCellsLayer();\n  }\n\n  onUpdateCellSetsLayers(onlyViewStateChange) {\n    // Because the label sizes for the force simulation depend on the zoom level,\n    // we _could_ run the simulation every time the zoom level changes.\n    // However, this has a performance impact in firefox.\n    if (onlyViewStateChange) {\n      const { viewState, cellSetLabelsVisible } = this.props;\n      const { zoom } = viewState;\n      const { cellSetsLabelPrevZoom } = this;\n      // Instead, we can just check if the zoom level has changed\n      // by some relatively large delta, to be more conservative\n      // about re-running the force simulation.\n      if (cellSetLabelsVisible\n        && (\n          cellSetsLabelPrevZoom === null\n          || Math.abs(cellSetsLabelPrevZoom - zoom) > LABEL_UPDATE_ZOOM_DELTA\n        )\n      ) {\n        this.cellSetsLayers = this.createCellSetsLayers();\n        this.cellSetsLabelPrevZoom = zoom;\n      }\n    } else {\n      // Otherwise, something more substantial than just\n      // the viewState has changed, such as the label array\n      // itself, so we always want to update the layer\n      // in this case.\n      this.cellSetsLayers = this.createCellSetsLayers();\n    }\n  }\n\n  viewInfoDidUpdate() {\n    const {\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping),\n    } = this.props;\n    super.viewInfoDidUpdate(cell => getCellPosition([null, cell]));\n  }\n\n  /**\n   * Here, asynchronously check whether props have\n   * updated which require re-computing memoized variables,\n   * followed by a re-render.\n   * This function does not follow React conventions or paradigms,\n   * it is only implemented this way to try to squeeze out\n   * performance.\n   * @param {object} prevProps The previous props to diff against.\n   */\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => (prevProps[propName] !== this.props[propName]);\n    if (['cells'].some(shallowDiff)) {\n      // Cells data changed.\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if ([\n      'cells', 'cellFilter', 'cellSelection', 'cellColors', 'cellRadiusScale',\n    ].some(shallowDiff)) {\n      // Cells layer props changed.\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n    if ([\n      'cellSetPolygons', 'cellSetPolygonsVisible',\n      'cellSetLabelsVisible', 'cellSetLabelSize',\n    ].some(shallowDiff)) {\n      // Cell sets layer props changed.\n      this.onUpdateCellSetsLayers(false);\n      this.forceUpdate();\n    }\n    if (shallowDiff('viewState')) {\n      // The viewState prop has changed (due to zoom or pan).\n      this.onUpdateCellSetsLayers(true);\n      this.forceUpdate();\n    }\n  }\n\n  // render() is implemented in the abstract parent class.\n}\n\n/**\n * Need this wrapper function here,\n * since we want to pass a forwardRef\n * so that outer components can\n * access the grandchild DeckGL ref,\n * but we are using a class component.\n */\nconst ScatterplotWrapper = forwardRef((props, deckRef) => (\n  <Scatterplot\n    {...props}\n    deckRef={deckRef}\n  />\n));\nexport default ScatterplotWrapper;\n","module.exports = require(\"rc-tree\");","module.exports = require(\"@material-ui/icons/Add\");","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { useExpansionPanelStyles } from './styles';\n\nexport default function VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    handleLayerChange,\n  } = props;\n\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n\n  function handleSliderChange(v) {\n    if (layer.type === 'cells') {\n      const stroked = v < 0.7;\n      handleLayerChange({ ...layer, opacity: v, stroked });\n    } else {\n      handleLayerChange({ ...layer, opacity: v });\n    }\n  }\n\n  function handleCheckBoxChange(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  const classes = useExpansionPanelStyles();\n  return (\n    <Grid item style={{ marginTop: '10px' }}>\n      <Paper className={classes.root}>\n        <Typography\n          style={{\n            paddingTop: '15px',\n            paddingLeft: '10px',\n            marginBottom: '-5px',\n          }}\n        >\n          {label}\n        </Typography>\n        <Grid container direction=\"row\" justify=\"space-between\">\n          <Grid item xs={2}>\n            <Checkbox color=\"primary\" checked={isOn} onChange={(e, v) => handleCheckBoxChange(v)} />\n          </Grid>\n          <Grid item xs={9} style={{ paddingRight: '8px' }}>\n            <Slider\n              value={slider}\n              min={0}\n              max={1}\n              step={0.001}\n              onChange={(e, v) => handleSliderChange(v)}\n              style={{ marginTop: '7px' }}\n              orientation=\"horizontal\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n}\n","module.exports = require(\"@deck.gl/extensions\");","module.exports = require(\"@turf/boolean-within\");","module.exports = require(\"@turf/boolean-contains\");","module.exports = require(\"@turf/boolean-overlap\");","module.exports = require(\"@turf/boolean-point-in-polygon\");","module.exports = require(\"@material-ui/core/Table\");","module.exports = require(\"@material-ui/core/TableBody\");","module.exports = require(\"@material-ui/core/TableContainer\");","import React from 'react';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport CellColorEncodingOption from '../shared-plot-options/CellColorEncodingOption';\n\nexport default function SpatialOptions(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  return (\n    <OptionsContainer>\n      <CellColorEncodingOption\n        observationsLabel={observationsLabel}\n        cellColorEncoding={cellColorEncoding}\n        setCellColorEncoding={setCellColorEncoding}\n      />\n    </OptionsContainer>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function SpatialTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, x, y] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]),\n    ]\n  ) : ([null, null, null]));\n\n  return (\n    (cellInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        sourceUuid={sourceUuid}\n        parentWidth={width}\n        parentHeight={height}\n      >\n        <TooltipContent info={cellInfo} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, {\n  useState, useEffect, useMemo, useCallback,\n} from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { capitalize } from '../../utils';\nimport { useDeckCanvasSize, useReady, useUrls } from '../hooks';\nimport { setCellSelection, mergeCellSets } from '../utils';\nimport {\n  useCellsData, useCellSetsData, useExpressionMatrixData,\n  useMoleculesData, useNeighborhoodsData, useRasterData,\n} from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport Spatial from './Spatial';\nimport SpatialOptions from './SpatialOptions';\nimport SpatialTooltipSubscriber from './SpatialTooltipSubscriber';\nimport {\n  makeSpatialSubtitle,\n  initializeLayerChannelsIfMissing,\n  sortLayers,\n  getInitialSpatialTargets,\n} from './utils';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './constants';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetComponentHover,\n  useSetComponentViewInfo,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst SPATIAL_DATA_TYPES = [\n  'cells', 'molecules', 'raster', 'cell-sets', 'expression-matrix',\n];\n\nconst SPATIAL_LAYER_TYPES = [\n  'cells', 'molecules', 'raster', 'neighborhoods',\n];\n\nexport default function SpatialSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    initializeLayers = true,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    subobservationsLabelOverride: subobservationsLabel = 'molecule',\n    subobservationsPluralLabelOverride: subobservationsPluralLabel = `${subobservationsLabel}s`,\n    theme,\n    disableTooltip = false,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialZoom: zoom,\n    spatialTargetX: targetX,\n    spatialTargetY: targetY,\n    spatialTargetZ: targetZ,\n    spatialLayers: layers,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n  }, {\n    setSpatialZoom: setZoom,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialLayers: setLayers,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setMoleculeHighlight,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.spatial, coordinationScopes);\n\n  const [autoLayers, setAutoLayers] = useState({\n    [dataset]: [\n      loaders[dataset].loaders.cells?.url ? DEFAULT_CELLS_LAYER : null,\n      loaders[dataset].loaders.molecules?.url ? DEFAULT_MOLECULES_LAYER : null,\n      loaders[dataset].loaders.neighborhoods?.url ? DEFAULT_NEIGHBORHOODS_LAYER : null,\n    ].filter(Boolean),\n  });\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    SPATIAL_DATA_TYPES,\n  );\n  const [width, height, deckRef] = useDeckCanvasSize();\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  // Also clear the array of automatically-initialized layers.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    setAutoLayers({\n      [dataset]: [\n        loaders[dataset].loaders.cells?.url ? DEFAULT_CELLS_LAYER : null,\n        loaders[dataset].loaders.molecules?.url ? DEFAULT_MOLECULES_LAYER : null,\n        loaders[dataset].loaders.neighborhoods?.url ? DEFAULT_NEIGHBORHOODS_LAYER : null,\n      ].filter(Boolean),\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells, cellsCount] = useCellsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    () => {},\n  );\n  const [molecules, moleculesCount, locationsCount] = useMoleculesData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    () => {},\n  );\n  const [neighborhoods] = useNeighborhoodsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    () => {},\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders] = useRasterData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    autoImageLayers => setAutoLayers(prev => (\n      // This prevents old updates from overriding the current dataset.\n      // The previous state must be for this dataset, otherwise it's an old update.\n      Object.keys(prev).includes(dataset)\n        ? { [dataset]: [...(prev[dataset] || []), ...autoImageLayers] }\n        : prev\n    )),\n  );\n  // Try to set up the layers array automatically if null or undefined.\n  useEffect(() => {\n    // Check if the autoLayers have a layer for each spatial layer loader type.\n    const areAutoLayersComplete = Object.keys(loaders[dataset].loaders)?.every(\n      loaderType => !SPATIAL_LAYER_TYPES.includes(loaderType)\n        || (\n          autoLayers[dataset] && autoLayers[dataset].filter(\n            layer => layer.type === loaderType,\n          ).length > 0\n        )\n    );\n    if (isReady && initializeLayers) {\n      if (!layers && autoLayers[dataset] && areAutoLayersComplete) {\n        setLayers(sortLayers(autoLayers[dataset]));\n      } else if (layers) {\n        // Layers were defined, but check whether channels for each layer were also defined.\n        // If channel / slider / domain definitions are missing, initialize in automatically.\n        initializeLayerChannelsIfMissing(layers, imageLayerLoaders).then(\n          ([newLayers, didInitialize]) => {\n            if (didInitialize) {\n              // Channels were only partially defined.\n              setLayers(newLayers);\n            }\n          },\n        );\n      }\n      if ((typeof targetX !== 'number' || typeof targetY !== 'number')) {\n        const { initialTargetX, initialTargetY, initialZoom } = getInitialSpatialTargets({\n          width,\n          height,\n          cells,\n          imageLayerLoaders,\n        });\n        setTargetX(initialTargetX);\n        setTargetY(initialTargetY);\n        setZoom(initialZoom);\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dataset, loaders, autoLayers, imageLayerLoaders,\n    isReady, layers, setLayers, initializeLayers, cells]);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const setCellSelectionProp = useCallback((v) => {\n    setCellSelection(\n      v, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n    );\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding,\n    setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionMatrix,\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n  }), [cellColorEncoding, geneSelection, mergedCellSets,\n    cellSetColor, cellSetSelection, expressionMatrix]);\n\n  const cellSelection = useMemo(() => Array.from(cellColors.keys()), [cellColors]);\n\n  const getCellInfo = (cellId) => {\n    const cell = cells[cellId];\n    if (cell) {\n      return {\n        [`${capitalize(observationsLabel)} ID`]: cellId,\n        ...cell.factors,\n      };\n    }\n    return null;\n  };\n\n  const subtitle = makeSpatialSubtitle({\n    observationsCount: cellsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount: moleculesCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount,\n  });\n  return (\n    <TitleInfo\n      title=\"Spatial\"\n      info={subtitle}\n      isSpatial\n      urls={urls}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      options={(\n        <SpatialOptions\n          observationsLabel={observationsLabel}\n          cellColorEncoding={cellColorEncoding}\n          setCellColorEncoding={setCellColorEncoding}\n        />\n      )}\n    >\n      <Spatial\n        ref={deckRef}\n        uuid={uuid}\n        width={width}\n        height={height}\n        viewState={{ zoom, target: [targetX, targetY, targetZ] }}\n        setViewState={({ zoom: newZoom, target }) => {\n          setZoom(newZoom);\n          setTargetX(target[0]);\n          setTargetY(target[1]);\n          setTargetZ(target[2]);\n        }}\n        layers={layers}\n        cells={cells}\n        cellFilter={cellFilter}\n        cellSelection={cellSelection}\n        cellHighlight={cellHighlight}\n        cellColors={cellColors}\n        molecules={molecules}\n        neighborhoods={neighborhoods}\n        imageLayerLoaders={imageLayerLoaders}\n        setCellFilter={setCellFilter}\n        setCellSelection={setCellSelectionProp}\n        setCellHighlight={setCellHighlight}\n        setMoleculeHighlight={setMoleculeHighlight}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n      />\n      {!disableTooltip && (\n      <SpatialTooltipSubscriber\n        parentUuid={uuid}\n        cellHighlight={cellHighlight}\n        width={width}\n        height={height}\n        getCellInfo={getCellInfo}\n      />\n      )}\n    </TitleInfo>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function ScatterplotTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, x, y] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]),\n    ]\n  ) : ([null, null, null]));\n\n  return (\n    (cellInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        sourceUuid={sourceUuid}\n        parentWidth={width}\n        parentHeight={height}\n      >\n        <TooltipContent info={cellInfo} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React from 'react';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Slider from '@material-ui/core/Slider';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { capitalize } from '../../utils';\nimport { useStyles } from '../shared-plot-options/styles';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport CellColorEncodingOption from '../shared-plot-options/CellColorEncodingOption';\n\nexport default function ScatterplotOptions(props) {\n  const {\n    observationsLabel,\n    cellRadius,\n    setCellRadius,\n    cellSetLabelsVisible,\n    setCellSetLabelsVisible,\n    cellSetLabelSize,\n    setCellSetLabelSize,\n    cellSetPolygonsVisible,\n    setCellSetPolygonsVisible,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  const classes = useStyles();\n\n  function handleRadiusChange(event, value) {\n    setCellRadius(value);\n  }\n\n  function handleLabelVisibilityChange(event) {\n    setCellSetLabelsVisible(event.target.checked);\n  }\n\n  function handleLabelSizeChange(event, value) {\n    setCellSetLabelSize(value);\n  }\n\n  function handlePolygonVisibilityChange(event) {\n    setCellSetPolygonsVisible(event.target.checked);\n  }\n\n  return (\n    <OptionsContainer>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Set Labels Visible\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Checkbox\n            className={classes.checkbox}\n            checked={cellSetLabelsVisible}\n            onChange={handleLabelVisibilityChange}\n            name=\"scatterplot-option-cell-set-labels\"\n            color=\"default\"\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Set Label Size\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            disabled={!cellSetLabelsVisible}\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={cellSetLabelSize}\n            onChange={handleLabelSizeChange}\n            aria-labelledby=\"cell-set-label-size-slider\"\n            valueLabelDisplay=\"auto\"\n            step={1}\n            min={8}\n            max={36}\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Set Polygons Visible\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Checkbox\n            className={classes.checkbox}\n            checked={cellSetPolygonsVisible}\n            onChange={handlePolygonVisibilityChange}\n            name=\"scatterplot-option-cell-set-polygons\"\n            color=\"default\"\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Radius\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={cellRadius}\n            onChange={handleRadiusChange}\n            aria-labelledby=\"cell-radius-slider\"\n            valueLabelDisplay=\"auto\"\n            step={0.25}\n            min={0.25}\n            max={8}\n          />\n        </TableCell>\n      </TableRow>\n      <CellColorEncodingOption\n        observationsLabel={observationsLabel}\n        cellColorEncoding={cellColorEncoding}\n        setCellColorEncoding={setCellColorEncoding}\n      />\n    </OptionsContainer>\n  );\n}\n","import React, {\n  useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport { extent } from 'd3-array';\nimport clamp from 'lodash/clamp';\nimport TitleInfo from '../TitleInfo';\nimport { pluralize, capitalize } from '../../utils';\nimport { useDeckCanvasSize, useReady, useUrls } from '../hooks';\nimport { setCellSelection, mergeCellSets } from '../utils';\nimport { getCellSetPolygons } from '../sets/cell-set-utils';\nimport { useCellsData, useCellSetsData, useExpressionMatrixData } from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport Scatterplot from './Scatterplot';\nimport ScatterplotTooltipSubscriber from './ScatterplotTooltipSubscriber';\nimport ScatterplotOptions from './ScatterplotOptions';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetComponentHover,\n  useSetComponentViewInfo,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst SCATTERPLOT_DATA_TYPES = ['cells', 'expression-matrix', 'cell-sets'];\n\nexport default function ScatterplotSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    disableTooltip = false,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    embeddingZoom: zoom,\n    embeddingTargetX: targetX,\n    embeddingTargetY: targetY,\n    embeddingTargetZ: targetZ,\n    embeddingType: mapping,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    embeddingCellSetPolygonsVisible: cellSetPolygonsVisible,\n    embeddingCellSetLabelsVisible: cellSetLabelsVisible,\n    embeddingCellSetLabelSize: cellSetLabelSize,\n    embeddingCellRadius: cellRadius,\n  }, {\n    setEmbeddingZoom: setZoom,\n    setEmbeddingTargetX: setTargetX,\n    setEmbeddingTargetY: setTargetY,\n    setEmbeddingTargetZ: setTargetZ,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setEmbeddingCellSetPolygonsVisible: setCellSetPolygonsVisible,\n    setEmbeddingCellSetLabelsVisible: setCellSetLabelsVisible,\n    setEmbeddingCellSetLabelSize: setCellSetLabelSize,\n    setEmbeddingCellRadius: setCellRadius,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.scatterplot, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    SCATTERPLOT_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells, cellsCount] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(\n    loaders,\n    dataset,\n    setItemIsReady,\n    addUrl,\n    false,\n  );\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n\n  const [cellRadiusScale, setCellRadiusScale] = useState(0.2);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const setCellSelectionProp = useCallback((v) => {\n    setCellSelection(\n      v, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n    );\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding,\n    setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionMatrix,\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n  }), [cellColorEncoding, geneSelection, mergedCellSets,\n    cellSetSelection, cellSetColor, expressionMatrix]);\n\n  const cellSetPolygons = useMemo(() => getCellSetPolygons({\n    cells,\n    mapping,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n  }), [cells, mapping, mergedCellSets, cellSetSelection, cellSetColor]);\n\n  const cellSelection = useMemo(() => Array.from(cellColors.keys()), [cellColors]);\n\n  // After cells have loaded or changed,\n  // compute the cell radius scale based on the\n  // extents of the cell coordinates on the x/y axes.\n  useEffect(() => {\n    const cellValues = cells && Object.values(cells);\n    if (cellValues?.length) {\n      const cellCoordinates = Object.values(cells)\n        .map(c => c.mappings[mapping]);\n      const xExtent = extent(cellCoordinates, c => c[0]);\n      const yExtent = extent(cellCoordinates, c => c[1]);\n      const xRange = xExtent[1] - xExtent[0];\n      const yRange = yExtent[1] - yExtent[0];\n      const diagonalLength = Math.sqrt((xRange ** 2) + (yRange ** 2));\n      // The 300 value here is a heuristic.\n      const newScale = clamp(diagonalLength / 300, 0, 0.2);\n      if (newScale) {\n        setCellRadiusScale(newScale);\n      } if (typeof targetX !== 'number' || typeof targetY !== 'number') {\n        const newTargetX = xExtent[0] + xRange / 2;\n        const newTargetY = yExtent[0] + yRange / 2;\n        const newZoom = Math.log2(Math.min(width / xRange, height / yRange));\n        setTargetX(newTargetX);\n        // Graphics rendering has the y-axis going south so we need to multiply by negative one.\n        setTargetY(-newTargetY);\n        setZoom(newZoom);\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cells, mapping]);\n\n  const getCellInfo = useCallback((cellId) => {\n    const cellInfo = cells[cellId];\n    return {\n      [`${capitalize(observationsLabel)} ID`]: cellId,\n      ...(cellInfo ? cellInfo.factors : {}),\n    };\n  }, [cells, observationsLabel]);\n\n  return (\n    <TitleInfo\n      title={`Scatterplot (${mapping})`}\n      info={`${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)}`}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n      options={(\n        <ScatterplotOptions\n          observationsLabel={observationsLabel}\n          cellRadius={cellRadius}\n          setCellRadius={setCellRadius}\n          cellSetLabelsVisible={cellSetLabelsVisible}\n          setCellSetLabelsVisible={setCellSetLabelsVisible}\n          cellSetLabelSize={cellSetLabelSize}\n          setCellSetLabelSize={setCellSetLabelSize}\n          cellSetPolygonsVisible={cellSetPolygonsVisible}\n          setCellSetPolygonsVisible={setCellSetPolygonsVisible}\n          cellColorEncoding={cellColorEncoding}\n          setCellColorEncoding={setCellColorEncoding}\n        />\n      )}\n    >\n      <Scatterplot\n        ref={deckRef}\n        uuid={uuid}\n        theme={theme}\n        viewState={{ zoom, target: [targetX, targetY, targetZ] }}\n        setViewState={({ zoom: newZoom, target }) => {\n          setZoom(newZoom);\n          setTargetX(target[0]);\n          setTargetY(target[1]);\n          setTargetZ(target[2]);\n        }}\n        cells={cells}\n        mapping={mapping}\n        cellFilter={cellFilter}\n        cellSelection={cellSelection}\n        cellHighlight={cellHighlight}\n        cellColors={cellColors}\n        cellSetPolygons={cellSetPolygons}\n\n        cellSetLabelSize={cellSetLabelSize}\n        cellSetLabelsVisible={cellSetLabelsVisible}\n        cellSetPolygonsVisible={cellSetPolygonsVisible}\n\n        setCellFilter={setCellFilter}\n        setCellSelection={setCellSelectionProp}\n        setCellHighlight={setCellHighlight}\n        cellRadiusScale={cellRadiusScale * cellRadius}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n      />\n      {!disableTooltip && (\n      <ScatterplotTooltipSubscriber\n        parentUuid={uuid}\n        cellHighlight={cellHighlight}\n        width={width}\n        height={height}\n        getCellInfo={getCellInfo}\n      />\n      )}\n    </TitleInfo>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function HeatmapTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    width, height, transpose,\n    getCellInfo, getGeneInfo,\n    cellHighlight, geneHighlight,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, cellCoord] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      (viewInfo && viewInfo.project\n        ? viewInfo.project(cellHighlight, null)[(transpose ? 0 : 1)]\n        : null),\n    ]\n  ) : ([null, null]));\n\n  const [geneInfo, geneCoord] = (geneHighlight && getGeneInfo ? (\n    [\n      getGeneInfo(geneHighlight),\n      (viewInfo && viewInfo.project\n        ? viewInfo.project(null, geneHighlight)[(transpose ? 1 : 0)]\n        : null),\n    ]\n  ) : ([null, null]));\n\n  const x = (transpose ? cellCoord : geneCoord);\n  const y = (transpose ? geneCoord : cellCoord);\n\n  return (\n    (cellInfo || geneInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        parentWidth={width}\n        parentHeight={height}\n        sourceUuid={sourceUuid}\n      >\n        <TooltipContent info={{ ...geneInfo, ...cellInfo }} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, {\n  useEffect, useState, useCallback, useMemo,\n} from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { pluralize, capitalize } from '../../utils';\nimport { useDeckCanvasSize, useReady, useUrls } from '../hooks';\nimport { mergeCellSets } from '../utils';\nimport { useCellsData, useCellSetsData, useExpressionMatrixData } from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport {\n  useCoordination, useLoaders,\n  useSetComponentHover, useSetComponentViewInfo,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport Heatmap from './Heatmap';\nimport HeatmapTooltipSubscriber from './HeatmapTooltipSubscriber';\n\nconst HEATMAP_DATA_TYPES = ['cells', 'cell-sets', 'expression-matrix'];\n\nexport default function HeatmapSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent, theme, transpose,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    variablesLabelOverride: variablesLabel = 'gene',\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    disableTooltip = false,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    heatmapZoomX: zoomX,\n    heatmapTargetX: targetX,\n    heatmapTargetY: targetY,\n    geneSelection,\n    cellHighlight,\n    geneHighlight,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    geneExpressionColormapRange: heatmapControls,\n  }, {\n    setHeatmapZoomX: setZoomX,\n    setHeatmapZoomY: setZoomY,\n    setHeatmapTargetX: setTargetX,\n    setHeatmapTargetY: setTargetY,\n    setCellHighlight,\n    setGeneHighlight,\n    setGeneExpressionColormapRange: setHeatmapControls,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.heatmap, coordinationScopes);\n\n  const observationsTitle = capitalize(observationsPluralLabel);\n  const variablesTitle = capitalize(variablesPluralLabel);\n\n  const [isRendering, setIsRendering] = useState(false);\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    HEATMAP_DATA_TYPES,\n  );\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionMatrix,\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n  }), [cellColorEncoding, geneSelection, mergedCellSets,\n    cellSetColor, cellSetSelection, expressionMatrix]);\n\n  const getCellInfo = useCallback((cellId) => {\n    if (cellId) {\n      const cellInfo = cells[cellId];\n      return {\n        [`${capitalize(observationsLabel)} ID`]: cellId,\n        ...(cellInfo ? cellInfo.factors : {}),\n      };\n    }\n    return null;\n  }, [cells, observationsLabel]);\n\n  const getGeneInfo = useCallback((geneId) => {\n    if (geneId) {\n      return { [`${capitalize(variablesLabel)} ID`]: geneId };\n    }\n    return null;\n  }, [variablesLabel]);\n\n  const cellsCount = expressionMatrix && expressionMatrix.rows\n    ? expressionMatrix.rows.length : 0;\n  const genesCount = expressionMatrix && expressionMatrix.cols\n    ? expressionMatrix.cols.length : 0;\n  const selectedCount = cellColors.size;\n  return (\n    <TitleInfo\n      title=\"Heatmap\"\n      info={`${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)} × ${genesCount} ${pluralize(variablesLabel, variablesPluralLabel, genesCount)},\n             with ${selectedCount} ${pluralize(observationsLabel, observationsPluralLabel, selectedCount)} selected`}\n      urls={urls}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isReady={isReady && !isRendering}\n    >\n      <Heatmap\n        ref={deckRef}\n        transpose={transpose}\n        viewState={{ zoom: zoomX, target: [targetX, targetY] }}\n        setViewState={({ zoom, target }) => {\n          setZoomX(zoom);\n          setZoomY(zoom);\n          setTargetX(target[0]);\n          setTargetY(target[1]);\n        }}\n        heatmapControls={heatmapControls}\n        setHeatmapControls={setHeatmapControls}\n        height={height}\n        width={width}\n        theme={theme}\n        uuid={uuid}\n        expressionMatrix={expressionMatrix}\n        cellColors={cellColors}\n        setIsRendering={setIsRendering}\n        setCellHighlight={setCellHighlight}\n        setGeneHighlight={setGeneHighlight}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n        observationsTitle={observationsTitle}\n        variablesTitle={variablesTitle}\n      />\n      {!disableTooltip && (\n      <HeatmapTooltipSubscriber\n        parentUuid={uuid}\n        width={width}\n        height={height}\n        transpose={transpose}\n        getCellInfo={getCellInfo}\n        getGeneInfo={getGeneInfo}\n        cellHighlight={cellHighlight}\n        geneHighlight={geneHighlight}\n      />\n      )}\n    </TitleInfo>\n  );\n}\n","import React from 'react';\n\nexport default function Status(props) {\n  const warnClass = 'alert alert-warning my-0 details';\n  const { info, warn } = props;\n  const messages = [];\n  if (info) {\n    messages.push(<p className=\"details\" key=\"info\">{info}</p>);\n  }\n  if (warn) {\n    messages.push(<p className={warnClass} key=\"warn\">{warn}</p>);\n  }\n  return (\n    messages\n  );\n}\n","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES } from '../vega';\nimport { colorArrayToString } from './utils';\n\n/**\n * Cell set sizes displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {object[]} props.data The set size data, an array\n * of objects with properties `name`, `key`, `color`, and `size`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 120.\n * @param {number} props.keyLength The length of the `key` property of\n * each data point. Assumes all key strings have the same length.\n * By default, 36.\n */\nexport default function CellSetSizesPlot(props) {\n  const {\n    data: rawData,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n    keyLength = 36,\n  } = props;\n\n  // Add a property `keyName` which concatenates the key and the name,\n  // which is both unique and can easily be converted\n  // back to the name by taking a substring.\n  // Add a property `colorString` which contains the `[r, g, b]` color\n  // after converting to a color hex string.\n  const data = rawData.map(d => ({\n    ...d,\n    keyName: d.key + d.name,\n    colorString: colorArrayToString(d.color),\n  }));\n\n  // Manually set the color scale so that Vega-Lite does\n  // not choose the colors automatically.\n  const colors = {\n    domain: data.map(d => d.key),\n    range: data.map(d => d.colorString),\n  };\n\n  // Get an array of keys for sorting purposes.\n  const keys = data.map(d => d.keyName);\n\n  const spec = {\n    mark: { type: 'bar' },\n    encoding: {\n      x: {\n        field: 'keyName',\n        type: 'nominal',\n        axis: { labelExpr: `substring(datum.label, ${keyLength})` },\n        title: 'Cell Set',\n        sort: keys,\n      },\n      y: {\n        field: 'size',\n        type: 'quantitative',\n        title: 'Cell Set Size',\n      },\n      color: {\n        field: 'key',\n        type: 'nominal',\n        scale: colors,\n        legend: null,\n      },\n      tooltip: {\n        field: 'size',\n        type: 'quantitative',\n      },\n    },\n    width: clamp(width - marginRight, 10, Infinity),\n    height: clamp(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React from 'react';\nimport RcTree from 'rc-tree';\nimport classNames from 'classnames';\n\n/**\n * A helper component around the rc-tree\n * library's tree component, to set\n * default props.\n */\nconst Tree = React.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    className,\n    showIcon,\n    blockNode,\n    children,\n    checkable,\n  } = props;\n  return (\n    <RcTree\n      itemHeight={32}\n      ref={ref}\n      {...props}\n      className={classNames(className, {\n        [`${prefixCls}-icon-hide`]: !showIcon,\n        [`${prefixCls}-block-node`]: blockNode,\n      })}\n      checkable={checkable ? <span className={`${prefixCls}-checkbox-inner`} /> : checkable}\n    >\n      {children}\n    </RcTree>\n  );\n});\n\nTree.defaultProps = {\n  virtual: false,\n  checkable: false,\n  showIcon: false,\n  blockNode: true,\n  prefixCls: 'rc-tree',\n};\n\nexport default Tree;\n","import React, { useRef, useCallback } from 'react';\nimport RcTooltip from 'rc-tooltip';\n\n/**\n * This is a small wrapper around the Tooltip component from the rc-tooltip library,\n * which is required to be able to apply theme styles to the tooltip.\n * The default `getTooltipContainer` function used by rc-tooltip\n * just returns `document.body` (see https://github.com/react-component/tooltip#props),\n * We want theme styles to be applied relative to the closest `.vitessce-container`\n * ancestor element.\n * https://github.com/hubmapconsortium/vitessce/pull/494#discussion_r395957914\n * @param {object} props Props are passed through to the <RcTooltip/> from the library.\n */\nexport default function HelpTooltip(props) {\n  const { title, content, overlayClassName } = props;\n  const spanRef = useRef();\n\n  const getTooltipContainer = useCallback(() => {\n    if (spanRef.current) {\n      return spanRef.current.closest('.vitessce-container');\n    }\n    return null;\n  }, [spanRef]);\n\n  const overlay = title || content;\n\n  return (\n    <>\n      <span ref={spanRef} />\n      <RcTooltip\n        getTooltipContainer={getTooltipContainer}\n        overlayClassName={overlayClassName}\n        overlay={overlay}\n        {...props}\n      />\n    </>\n  );\n}\n\nHelpTooltip.defaultProps = {\n  overlayClassName: 'help-tooltip',\n  placement: 'top',\n  trigger: 'hover',\n  mouseEnterDelay: 0.2,\n  mouseLeaveDelay: 0,\n};\n","import React from 'react';\nimport HelpTooltip from './HelpTooltip';\n\n/**\n * This is a wrapper around the HelpTooltip component, to style it as a popover,\n * and change the trigger to \"click\" rather than \"hover\".\n * @param {*} props Props are passed through to the HelpTooltip component.\n */\nexport default function Popover(props) {\n  return (\n    <HelpTooltip {...props} />\n  );\n}\n\nPopover.defaultProps = {\n  overlayClassName: 'popover',\n  placement: 'top',\n  trigger: 'click',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0,\n};\n","import React, { useState, useEffect } from 'react';\nimport { TwitterPicker } from 'react-color';\nimport { colorArrayToString, callbackOnKeyPress } from './utils';\nimport { PALETTE } from '../utils';\nimport Popover from './Popover';\n\n/**\n * Wrapper around a button element that supports asking for confirmation.\n * @param {object} props\n * @param {string} props.title The main button text.\n * @param {string} props.subtitle Smaller text on a line beneath the main text. Optional.\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {function} props.handler A function to call on button click (or after confirmation).\n * @param {string} props.handlerKey A key associated with the button, to support accessibility.\n * @param {boolean} props.confirm Does the user need to press the button again to confirm?\n * By default, false.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, the button can clear its confirmation state.\n */\nfunction PopoverMenuListButton(props) {\n  const {\n    title, subtitle, onClick, handler, handlerKey, confirm,\n    visible,\n  } = props;\n\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    // Want to clear the \"confirming\",\n    // state if the user hides the popover.\n    setIsConfirming(false);\n  }, [visible]);\n\n  function handleOrRequireConfirm() {\n    if (!confirm || isConfirming) {\n      onClick();\n      handler();\n    } else {\n      setIsConfirming(true);\n    }\n  }\n\n  const titleWithConfirm = `${isConfirming ? 'Confirm ' : ''}${title}`;\n\n  return (\n    <button\n      title={titleWithConfirm}\n      type=\"button\"\n      onClick={handleOrRequireConfirm}\n      onKeyPress={e => callbackOnKeyPress(e, handlerKey, handleOrRequireConfirm)}\n    >{titleWithConfirm}\n      {subtitle && (<><br /><span className=\"small\">{subtitle}</span></>)}\n    </button>\n  );\n}\n\n/**\n * Helper component to create a list of buttons for the body of a popover.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, buttons can clear confirmation states.\n */\nfunction PopoverMenuList(props) {\n  const {\n    menuConfig,\n    onClick,\n    color = null,\n    palette = null,\n    setColor = null,\n    visible,\n  } = props;\n\n  function handleColorChange({ rgb }) {\n    if (rgb && setColor) {\n      setColor([rgb.r, rgb.g, rgb.b]);\n    }\n  }\n\n  const defaultPalette = palette\n    ? palette.map(colorArrayToString)\n    : PALETTE.concat([[255, 255, 255], [128, 128, 128], [0, 0, 0]]).map(colorArrayToString);\n\n  return (\n    <div>\n      {color && setColor && defaultPalette && (\n        <TwitterPicker\n          className=\"popover-menu-color\"\n          disableAlpha\n          width={108}\n          triangle=\"hide\"\n          colors={defaultPalette}\n          color={colorArrayToString(color)}\n          onChangeComplete={handleColorChange}\n        />\n      )}\n      <ul className=\"popover-menu-list\">\n        {menuConfig.map(item => (\n          <li key={item.title + item.subtitle}>\n            <PopoverMenuListButton\n              {...item}\n              onClick={onClick}\n              visible={visible}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n/**\n * Helper component to create a popover component with a list of buttons.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {string} placement Where to place the popover (top, bottom, left, right).\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {Element|React.Component} props.children Children to render,\n * which will trigger the popover on click.\n */\nexport default function PopoverMenu(props) {\n  const {\n    menuConfig, placement, children,\n    color = null, setColor = null, palette = null,\n  } = props;\n\n  const [visible, setVisible] = useState(false);\n\n  return (\n    <Popover\n      content={(\n        <PopoverMenuList\n          menuConfig={menuConfig}\n          onClick={() => setVisible(false)}\n          color={color}\n          setColor={setColor}\n          palette={palette}\n          visible={visible}\n        />\n)}\n      placement={placement}\n      visible={visible}\n      onVisibleChange={setVisible}\n    >\n      {children}\n    </Popover>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\"\n});\n\nfunction SvgMenu(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMenu, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/menu.bc56e94a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { TreeNode as RcTreeNode } from 'rc-tree';\nimport { getDataAndAria } from 'rc-tree/es/util';\nimport classNames from 'classnames';\nimport range from 'lodash/range';\nimport isEqual from 'lodash/isEqual';\nimport PopoverMenu from './PopoverMenu';\nimport HelpTooltip from './HelpTooltip';\nimport { callbackOnKeyPress, colorArrayToString, getLevelTooltipText } from './utils';\nimport { ReactComponent as MenuSVG } from '../../assets/menu.svg';\nimport { DEFAULT_COLOR } from '../utils';\n\n\n/**\n * Construct a `menuConfig` array for the PopoverMenu component.\n * @param {object} props The props for the TreeNode component.\n * @returns {object[]} An array of menu items to pass to PopoverMenu.\n */\nfunction makeNodeViewMenuConfig(props) {\n  const {\n    path,\n    level,\n    height,\n    onCheckNode,\n    onNodeRemove,\n    onNodeSetIsEditing,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    checkable,\n    editable,\n    exportable,\n    checked,\n  } = props;\n\n  return [\n    ...(editable ? [\n      {\n        title: 'Rename',\n        handler: () => { onNodeSetIsEditing(path, true); },\n        handlerKey: 'r',\n      },\n      {\n        title: 'Delete',\n        confirm: true,\n        handler: () => { onNodeRemove(path); },\n        handlerKey: 'd',\n      },\n    ] : []),\n    ...(level === 0 && exportable ? [\n      {\n        title: 'Export hierarchy',\n        subtitle: '(to JSON file)',\n        handler: () => { onExportLevelZeroNodeJSON(path); },\n        handlerKey: 'j',\n      },\n      ...(height <= 1 ? [\n        {\n          title: 'Export hierarchy',\n          subtitle: '(to CSV file)',\n          handler: () => { onExportLevelZeroNodeTabular(path); },\n          handlerKey: 't',\n        },\n      ] : []),\n    ] : []),\n    ...(level > 0 ? [\n      ...(checkable ? [\n        {\n          title: (checked ? 'Uncheck' : 'Check'),\n          handler: () => { onCheckNode(path, !checked); },\n          handlerKey: 's',\n        },\n      ] : []),\n      ...(exportable ? [\n        {\n          title: 'Export set',\n          subtitle: '(to JSON file)',\n          handler: () => { onExportSetJSON(path); },\n          handlerKey: 'e',\n        },\n      ] : []),\n    ] : []),\n  ];\n}\n\n/**\n * The \"static\" node component to render when the user is not renaming.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeStatic(props) {\n  const {\n    title,\n    path,\n    nodeKey,\n    level,\n    height,\n    color,\n    checkbox,\n    isChecking,\n    isLeaf,\n    onNodeSetColor,\n    onNodeView,\n    expanded,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    disableTooltip,\n    size,\n    datatype,\n    editable,\n  } = props;\n  const shouldCheckNextLevel = (level === 0 && !expanded);\n  const nextLevelToCheck = (\n    (checkedLevelIndex && isEqual(path, checkedLevelPath) && checkedLevelIndex < height)\n      ? checkedLevelIndex + 1\n      : 1\n  );\n  const numberFormatter = new Intl.NumberFormat('en-US');\n  const niceSize = numberFormatter.format(size);\n  let tooltipText;\n  if (shouldCheckNextLevel) {\n    tooltipText = getLevelTooltipText(nextLevelToCheck);\n  } else if (isLeaf || !expanded) {\n    tooltipText = `Color individual set (${niceSize} ${datatype}${(size === 1 ? '' : 's')})`;\n  } else {\n    tooltipText = 'Color by expanded descendants';\n  }\n  // If this is a level zero node and is _not_ expanded, then upon click,\n  // the behavior should be to color by the first or next cluster level.\n  // If this is a level zero node and _is_ expanded, or if any other node,\n  // click should trigger onNodeView.\n  const onClick = (level === 0 && !expanded\n    ? () => onCheckLevel(nodeKey, nextLevelToCheck)\n    : () => onNodeView(path)\n  );\n  const tooltipProps = (disableTooltip ? { visible: false } : {});\n  const popoverMenuConfig = makeNodeViewMenuConfig(props);\n  return (\n    <span>\n      <HelpTooltip title={tooltipText} {...tooltipProps}>\n        <button\n          type=\"button\"\n          onClick={onClick}\n          onKeyPress={e => callbackOnKeyPress(e, 'v', () => onNodeView(path))}\n          className=\"title-button\"\n        >\n          {title}\n        </button>\n      </HelpTooltip>\n      {popoverMenuConfig.length > 0 ? (\n        <PopoverMenu\n          menuConfig={makeNodeViewMenuConfig(props)}\n          color={level > 0 && editable ? (color || DEFAULT_COLOR) : null}\n          setColor={c => onNodeSetColor(path, c)}\n        >\n          <MenuSVG className=\"node-menu-icon\" />\n        </PopoverMenu>\n      ) : null}\n      {level > 0 && isChecking ? checkbox : null}\n      {level > 0 && (<span className=\"node-size-label\">{niceSize}</span>)}\n    </span>\n  );\n}\n\n/**\n * The \"editing\" node component to render when the user is renaming,\n * containing a text input field and a save button.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeEditing(props) {\n  const {\n    title,\n    path,\n    onNodeSetName,\n    onNodeCheckNewName,\n  } = props;\n  const [currentTitle, setCurrentTitle] = useState(title);\n\n  // Do not allow the user to save a potential name if it conflicts with\n  // another name in the hierarchy.\n  const hasConflicts = onNodeCheckNewName(path, currentTitle);\n  function trySetName() {\n    if (!hasConflicts) {\n      onNodeSetName(path, currentTitle, true);\n    }\n  }\n  return (\n    <span className=\"title-button-with-input\">\n      <input\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus\n        className=\"title-input\"\n        type=\"text\"\n        value={currentTitle}\n        onChange={(e) => { setCurrentTitle(e.target.value); }}\n        onKeyPress={e => callbackOnKeyPress(\n          e,\n          'Enter',\n          trySetName,\n        )}\n        onFocus={e => e.target.select()}\n      />\n      {!hasConflicts && (\n        <button\n          type=\"button\"\n          className=\"title-save-button\"\n          onClick={trySetName}\n        >\n          Save\n        </button>\n      )}\n    </span>\n  );\n}\n\n/**\n * A \"delegation\" component, to decide whether to render\n * an \"editing\" vs. \"static\" node component.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNode(props) {\n  const {\n    isEditing,\n    isCurrentSet,\n  } = props;\n  return (\n    (isEditing || isCurrentSet)\n      ? (<NamedSetNodeEditing {...props} />)\n      : (<NamedSetNodeStatic {...props} />)\n  );\n}\n\n/**\n * Buttons for viewing each hierarchy level,\n * rendered below collapsed level zero nodes.\n * @param {object} props The props for the (level zero) TreeNode component.\n */\nfunction LevelsButtons(props) {\n  const {\n    nodeKey,\n    path,\n    height,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    hasColorEncoding,\n  } = props;\n  function onCheck(event) {\n    if (event.target.checked) {\n      const newLevel = parseInt(event.target.value, 10);\n      onCheckLevel(nodeKey, newLevel);\n    }\n  }\n  return (\n    <div className=\"level-buttons-container\">\n      {range(1, height + 1).map((i) => {\n        const isChecked = isEqual(path, checkedLevelPath) && i === checkedLevelIndex;\n        return (\n          <div className=\"level-buttons\" key={i}>\n            <HelpTooltip title={getLevelTooltipText(i)}>\n              <input\n                className={clsx('level-radio-button', { checked: isChecked && !hasColorEncoding })}\n                type=\"checkbox\"\n                value={i}\n                checked={isChecked && hasColorEncoding}\n                onChange={onCheck}\n              />\n            </HelpTooltip>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/**\n * Render the \"switcher\" icon.\n * Arrow for collapsed/expanded non-leaf nodes,\n * or square for leaf nodes.\n * @param {object} props The props for the TreeNode component.\n */\nfunction SwitcherIcon(props) {\n  const {\n    isLeaf, isOpen, color,\n  } = props;\n  const hexColor = (color ? colorArrayToString(color) : undefined);\n  if (isLeaf) {\n    return (\n      <i\n        className=\"anticon anticon-circle rc-tree-switcher-icon\"\n      >\n        <svg\n          viewBox=\"0 0 1024 1024\"\n          focusable=\"false\"\n          data-icon=\"caret-down\"\n          width=\"1em\"\n          height=\"1em\"\n          aria-hidden=\"true\"\n        >\n          <rect fill={hexColor} x={600 / 2} y={600 / 2} width={1024 - 600} height={1024 - 600} />\n        </svg>\n      </i>\n    );\n  }\n  return (\n    <i\n      className=\"anticon anticon-caret-down rc-tree-switcher-icon\"\n    >\n      <svg\n        viewBox=\"0 0 1024 1024\"\n        focusable=\"false\"\n        data-icon=\"caret-down\"\n        width=\"1em\"\n        height=\"1em\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fill={(isOpen ? '#444' : hexColor)}\n          d=\"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z\"\n        />\n      </svg>\n    </i>\n  );\n}\n\n/**\n * A custom TreeNode component.\n * @extends {RcTreeNode} TreeNode from the rc-tree library.\n */\nexport default class TreeNode extends RcTreeNode {\n  /**\n   * Override the main node text elements.\n   */\n  renderSelector = () => {\n    const {\n      title,\n      isCurrentSet,\n      isSelected,\n      isEditing,\n      onDragStart: onDragStartProp,\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        draggable,\n      },\n    } = this.context;\n\n    const onDragStart = (e) => {\n      onDragStartProp();\n      this.onDragStart(e);\n    };\n\n    const wrapClass = `${prefixClass}-node-content-wrapper`;\n    const isDraggable = (!isCurrentSet && !isEditing && draggable);\n    return (\n      <span\n        ref={this.setSelectHandle}\n        title={title}\n        className={classNames(\n          wrapClass,\n          `${wrapClass}-${this.getNodeState() || 'normal'}`,\n          isSelected && `${prefixClass}-node-selected`,\n          isDraggable && 'draggable',\n        )}\n        draggable={isDraggable}\n        aria-grabbed={isDraggable}\n        onDragStart={isDraggable ? onDragStart : undefined}\n      >\n        <NamedSetNode\n          {...this.props}\n          prefixClass={prefixClass}\n          checkbox={this.renderCheckbox()}\n        />\n        {this.renderLevels()}\n      </span>\n    );\n  };\n\n  /**\n   * Render the LevelsButtons component if this node\n   * is a collapsed level zero node.\n   */\n  renderLevels = () => {\n    const { level, expanded } = this.props;\n    if (level !== 0 || expanded) {\n      return null;\n    }\n    return (\n      <LevelsButtons\n        {...this.props}\n      />\n    );\n  }\n\n  /**\n   * Override the switcher element.\n   */\n  renderSwitcher = () => {\n    const { expanded, isLeaf, color } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        onNodeExpand,\n      },\n    } = this.context;\n\n    const onNodeExpandWrapper = (e) => {\n      // Do not call onNodeExpand if the node is a leaf node.\n      if (!isLeaf) {\n        onNodeExpand(e, this);\n      }\n    };\n\n    const switcherClass = classNames(\n      `${prefixClass}-switcher`,\n      { [`${prefixClass}-switcher_${(expanded ? 'open' : 'close')}`]: !isLeaf },\n    );\n    return (\n      <span\n        className={switcherClass}\n        onClick={onNodeExpandWrapper}\n        onKeyPress={e => callbackOnKeyPress(e, 'd', onNodeExpandWrapper)}\n        role=\"button\"\n        tabIndex=\"0\"\n      >\n        <SwitcherIcon\n          isLeaf={isLeaf}\n          isOpen={expanded}\n          color={color}\n        />\n      </span>\n    );\n  };\n\n  /**\n   * Override main render function,\n   * to enable overriding the sub-render functions\n   * for switcher, selector, etc.\n   */\n  render() {\n    const {\n      style, loading, level,\n      dragOver, dragOverGapTop, dragOverGapBottom,\n      isLeaf,\n      expanded, selected, checked, halfChecked,\n      onDragEnd: onDragEndProp,\n      expandable,\n      ...otherProps\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        filterTreeNode,\n        draggable,\n      },\n    } = this.context;\n    const disabled = this.isDisabled();\n    const dataAndAriaAttributeProps = getDataAndAria(otherProps);\n\n    const onDragEnd = (e) => {\n      onDragEndProp();\n      this.onDragEnd(e);\n    };\n\n    return (\n      <li\n        className={classNames('rc-tree-treenode', `level-${level}-treenode`, {\n          [`${prefixClass}-treenode-disabled`]: disabled,\n          [`${prefixClass}-treenode-switcher-${expanded ? 'open' : 'close'}`]: !isLeaf,\n          [`${prefixClass}-treenode-checkbox-checked`]: checked,\n          [`${prefixClass}-treenode-checkbox-indeterminate`]: halfChecked,\n          [`${prefixClass}-treenode-selected`]: selected,\n          [`${prefixClass}-treenode-loading`]: loading,\n\n          'drag-over': !disabled && dragOver,\n          'drag-over-gap-top': !disabled && dragOverGapTop,\n          'drag-over-gap-bottom': !disabled && dragOverGapBottom,\n          'filter-node': filterTreeNode && filterTreeNode(this),\n        })}\n        style={style}\n        role=\"treeitem\"\n        onDragEnter={draggable ? this.onDragEnter : undefined}\n        onDragOver={draggable ? this.onDragOver : undefined}\n        onDragLeave={draggable ? this.onDragLeave : undefined}\n        onDrop={draggable ? this.onDrop.bind(this) : undefined}\n        onDragEnd={draggable ? onDragEnd : undefined}\n        {...dataAndAriaAttributeProps}\n      >\n        {expandable ? this.renderSwitcher() : null}\n        {this.renderSelector()}\n        {this.renderChildren()}\n      </li>\n    );\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUnion(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16.433999 10.234\",\n    height: 12,\n    width: 18,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.117,-2.883)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUnion, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/union.de5168c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIntersection(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 12,\n    viewBox: \"0 0 16 10\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,-3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgIntersection, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/intersection.b0003109.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: \"5%\",\n  width: \"90%\",\n  height: \"100%\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"rect\", {\n  x: 0,\n  y: 0,\n  width: 25.3804963846,\n  height: 16,\n  mask: \"url(#union-mask)\"\n}));\n\nfunction SvgComplement(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"svg14\",\n    viewBox: \"0 0 25.3804963846 16\",\n    height: 16,\n    width: 25.3804963846,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"union-mask\",\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16\n  }, _ref2, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(4.69,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    },\n    fill: \"black\"\n  })))), _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgComplement, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/complement.c220ca8c.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback } from 'react';\nimport PopoverMenu from './PopoverMenu';\nimport {\n  handleImportJSON,\n  handleImportTabular,\n} from './io';\nimport {\n  MIME_TYPE_JSON,\n  MIME_TYPE_TABULAR,\n} from './constants';\n\nimport { ReactComponent as SetUnionSVG } from '../../assets/sets/union.svg';\nimport { ReactComponent as SetIntersectionSVG } from '../../assets/sets/intersection.svg';\nimport { ReactComponent as SetComplementSVG } from '../../assets/sets/complement.svg';\n\n/**\n * A plus button for creating or importing set hierarchies.\n * @param {object} props\n * @param {string} props.datatype The data type to validate imported hierarchies against.\n * @param {function} props.onError A callback to pass error message strings.\n * @param {function} props.onImportTree A callback to pass successfully-validated tree objects.\n * @param {function} props.onCreateLevelZeroNode A callback to create a new empty\n * level zero node.\n * @param {boolean} props.importable Is importing allowed?\n * If not, the import button will not be rendered.\n * @param {boolean} props.editable Is editing allowed?\n * If not, the create button will not be rendered.\n */\nexport function PlusButton(props) {\n  const {\n    datatype, onError, onImportTree, onCreateLevelZeroNode,\n    importable, editable,\n  } = props;\n\n  /**\n   * Import a file, then process the imported data via the supplied handler function.\n   * @param {Function} importHandler The function to process the imported data.\n   * @param {string} mimeType The accepted mime type for the file upload input.\n   * @returns {Function} An import function corresponding to the supplied parameters.\n   */\n  const onImport = useCallback((importHandler, mimeType) => () => {\n    const uploadInputNode = document.createElement('input');\n    uploadInputNode.setAttribute('type', 'file');\n    uploadInputNode.setAttribute('accept', mimeType);\n    document.body.appendChild(uploadInputNode); // required for firefox\n    uploadInputNode.click();\n    uploadInputNode.addEventListener('change', (event) => {\n      if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n        onError('Local file reading APIs are not fully supported in this browser.');\n        return;\n      }\n      const { files } = event.target;\n      if (!files || files.length !== 1) {\n        onError('Incorrect number of files selected.');\n        return;\n      }\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        const { result } = reader;\n        try {\n          const treeToImport = importHandler(result, datatype);\n          onError(false); // Clear any previous import error.\n          onImportTree(treeToImport);\n        } catch (e) {\n          onError(e.message);\n        }\n      }, false);\n      reader.readAsText(files[0]);\n    });\n    uploadInputNode.remove();\n  }, [datatype, onError, onImportTree]);\n\n  const menuConfig = [\n    ...(editable ? [\n      {\n        title: 'Create hierarchy',\n        handler: onCreateLevelZeroNode,\n        handlerKey: 'n',\n      },\n    ] : []),\n    ...(importable ? [\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from CSV file)',\n        handler: onImport(handleImportTabular, MIME_TYPE_TABULAR),\n        handlerKey: 'c',\n      },\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from JSON file)',\n        handler: onImport(handleImportJSON, MIME_TYPE_JSON),\n        handlerKey: 'j',\n      },\n    ] : []),\n  ];\n\n  return (menuConfig.length > 0 ? (\n    <PopoverMenu\n      menuConfig={menuConfig}\n    >\n      <button className=\"plus-button\" type=\"submit\">+</button>\n    </PopoverMenu>\n  ) : null);\n}\n\n/**\n * Set operations buttons (union, intersection, complement)\n * and a view checked sets button.\n * @param {object} props\n * @param {function} props.onUnion A callback for the union button.\n * @param {function} props.onIntersection A callback for the intersection button.\n * @param {function} props.onComplement A callback for the complement button.\n * @param {boolean} props.operatable Are set operations allowed?\n * If not, the union, intersection, and complement buttons will not be rendered.\n */\nexport function SetOperationButtons(props) {\n  const {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  return (\n    <>\n      {operatable && (\n        <>\n          <button\n            onClick={onUnion}\n            title=\"New set from union of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToUnion}\n          >\n            <SetUnionSVG />\n          </button>\n          <button\n            onClick={onIntersection}\n            title=\"New set from intersection of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToIntersect}\n          >\n            <SetIntersectionSVG />\n          </button>\n          <button\n            onClick={onComplement}\n            title=\"New set from complement of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToComplement}\n          >\n            <SetComplementSVG />\n          </button>\n        </>\n      )}\n    </>\n  );\n}\n","/* eslint-disable no-underscore-dangle */\nimport React, { useState, useMemo } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport Tree from './Tree';\nimport TreeNode from './TreeNode';\nimport { PlusButton, SetOperationButtons } from './SetsManagerButtons';\nimport { nodeToRenderProps } from './cell-set-utils';\nimport { DEFAULT_COLOR } from '../utils';\nimport { pathToKey } from './utils';\n\nfunction processNode(node, prevPath, setColor) {\n  const nodePath = [...prevPath, node.name];\n  return {\n    ...node,\n    ...(node.children ? ({\n      children: node.children\n        .map(c => processNode(c, nodePath, setColor)),\n    }) : {}),\n    color: setColor?.find(d => isEqual(d.path, nodePath))?.color || DEFAULT_COLOR,\n  };\n}\n\nfunction processSets(sets, setColor) {\n  return {\n    ...sets,\n    tree: sets ? sets.tree.map(lzn => processNode(lzn, [], setColor)) : [],\n  };\n}\n\nfunction getAllKeys(node, path = []) {\n  if (!node) {\n    return null;\n  }\n  const newPath = [...path, node.name];\n  if (node.children) {\n    return [pathToKey(newPath), ...node.children.flatMap(v => getAllKeys(v, newPath))];\n  }\n  return pathToKey(newPath);\n}\n\n/**\n * A generic hierarchical set manager component.\n * @prop {object} tree An object representing set hierarchies.\n * @prop {string} datatype The data type for sets (e.g. \"cell\")\n * @prop {function} clearPleaseWait A callback to signal that loading is complete.\n * @prop {boolean} draggable Whether tree nodes can be rearranged via drag-and-drop.\n * By default, true.\n * @prop {boolean} checkable Whether to show the \"Check\" menu button\n * and checkboxes for selecting multiple sets. By default, true.\n * @prop {boolean} editable Whether to show rename, delete, color, or create options.\n * By default, true.\n * @prop {boolean} expandable Whether to allow hierarchies to be expanded\n * to show the list or tree of sets contained. By default, true.\n * @prop {boolean} operatable Whether to enable union, intersection,\n * and complement operations on checked sets. By default, true.\n * @prop {boolean} exportable Whether to enable exporting hierarchies and sets to files.\n * By default, true.\n * @prop {boolean} importable Whether to enable importing hierarchies from files.\n * By default, true.\n * @prop {function} onError Function to call with error messages (failed import validation, etc).\n * @prop {function} onCheckNode Function to call when a single node has been checked or un-checked.\n * @prop {function} onExpandNode Function to call when a node has been expanded.\n * @prop {function} onDropNode Function to call when a node has been dragged-and-dropped.\n * @prop {function} onCheckLevel Function to call when an entire hierarchy level has been selected,\n * via the \"Color by cluster\" and \"Color by subcluster\" buttons below collapsed level zero nodes.\n * @prop {function} onNodeSetColor Function to call when a new node color has been selected.\n * @prop {function} onNodeSetName Function to call when a node has been renamed.\n * @prop {function} onNodeRemove Function to call when the user clicks the \"Delete\" menu button\n * to remove a node.\n * @prop {function} onNodeView Function to call when the user wants to view the set associated\n * with a particular node.\n * @prop {function} onImportTree Function to call when a tree has been imported\n * using the \"plus\" button.\n * @prop {function} onCreateLevelZeroNode Function to call when a user clicks the \"Create hierarchy\"\n * menu option using the \"plus\" button.\n * @prop {function} onExportLevelZeroNode Function to call when a user wants to\n * export an entire hierarchy via the \"Export hierarchy\" menu button for a\n * particular level zero node.\n * @prop {function} onExportSet Function to call when a user wants to export a set associated with\n * a particular node via the \"Export set\" menu button.\n * @prop {function} onUnion Function to call when a user wants to create a new set from the union\n * of the sets associated with the currently-checked nodes.\n * @prop {function} onIntersection Function to call when a user wants to create a new set from the\n * intersection of the sets associated with the currently-checked nodes.\n * @prop {function} onComplement Function to call when a user wants to create a new set from the\n * complement of the (union of the) sets associated with the currently-checked nodes.\n * @prop {function} onView Function to call when a user wants to view the sets\n * associated with the currently-checked nodes.\n */\nexport default function SetsManager(props) {\n  const {\n    sets,\n    additionalSets,\n    setColor, // TODO: use this\n    levelSelection: checkedLevel,\n    setSelection,\n    setExpansion,\n    hasColorEncoding,\n    datatype,\n    draggable = true,\n    checkable = true,\n    editable = true,\n    expandable = true,\n    operatable = true,\n    exportable = true,\n    importable = true,\n    onError,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  const isChecking = true;\n  const autoExpandParent = true;\n  const [isDragging, setIsDragging] = useState(false);\n  const [isEditingNodeName, setIsEditingNodeName] = useState(null);\n\n  const processedSets = useMemo(() => processSets(\n    sets, setColor,\n  ), [sets, setColor]);\n  const processedAdditionalSets = useMemo(() => processSets(\n    additionalSets, setColor,\n  ), [additionalSets, setColor]);\n\n  const additionalSetKeys = (processedAdditionalSets\n    ? processedAdditionalSets.tree.flatMap(v => getAllKeys(v, []))\n    : []\n  );\n\n  const allSetSelectionKeys = (setSelection || []).map(pathToKey);\n  const allSetExpansionKeys = (setExpansion || []).map(pathToKey);\n\n  const setSelectionKeys = allSetSelectionKeys.filter(k => !additionalSetKeys.includes(k));\n  const setExpansionKeys = allSetExpansionKeys.filter(k => !additionalSetKeys.includes(k));\n\n  const additionalSetSelectionKeys = allSetSelectionKeys.filter(k => additionalSetKeys.includes(k));\n  const additionalSetExpansionKeys = allSetExpansionKeys.filter(k => additionalSetKeys.includes(k));\n\n  /**\n   * Recursively render TreeNode components.\n   * @param {object[]} nodes An array of node objects.\n   * @returns {TreeNode[]|null} Array of TreeNode components or null.\n   */\n  function renderTreeNodes(nodes, readOnly, currPath) {\n    if (!nodes) {\n      return null;\n    }\n    return nodes.map((node) => {\n      const newPath = [...currPath, node.name];\n      return (\n        <TreeNode\n          key={pathToKey(newPath)}\n          {...nodeToRenderProps(node, newPath, setColor)}\n\n          isEditing={isEqual(isEditingNodeName, newPath)}\n\n          datatype={datatype}\n          draggable={draggable && !readOnly}\n          editable={editable && !readOnly}\n          checkable={checkable}\n          expandable={expandable}\n          exportable={exportable}\n\n          hasColorEncoding={hasColorEncoding}\n          isChecking={isChecking}\n          checkedLevelPath={checkedLevel ? checkedLevel.levelZeroPath : null}\n          checkedLevelIndex={checkedLevel ? checkedLevel.levelIndex : null}\n\n          onCheckNode={onCheckNode}\n          onCheckLevel={onCheckLevel}\n          onNodeView={onNodeView}\n          onNodeSetColor={onNodeSetColor}\n          onNodeSetName={(targetPath, name) => {\n            onNodeSetName(targetPath, name);\n            setIsEditingNodeName(null);\n          }}\n          onNodeCheckNewName={onNodeCheckNewName}\n          onNodeSetIsEditing={setIsEditingNodeName}\n          onNodeRemove={onNodeRemove}\n          onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n          onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n          onExportSetJSON={onExportSetJSON}\n\n          disableTooltip={isDragging}\n          onDragStart={() => setIsDragging(true)}\n          onDragEnd={() => setIsDragging(false)}\n        >\n          {renderTreeNodes(node.children, readOnly, newPath)}\n        </TreeNode>\n      );\n    });\n  }\n\n  return (\n    <div className=\"sets-manager\">\n      <div className=\"sets-manager-tree\">\n        <Tree\n          draggable={false}\n          checkable={checkable}\n\n          checkedKeys={setSelectionKeys}\n          expandedKeys={setExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n        >\n          {renderTreeNodes(processedSets.tree, true, [])}\n        </Tree>\n        <Tree\n          draggable /* TODO */\n          checkable={checkable}\n\n          checkedKeys={additionalSetSelectionKeys}\n          expandedKeys={additionalSetExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n          onDrop={(info) => {\n            const { eventKey: dropKey } = info.node.props;\n            const { eventKey: dragKey } = info.dragNode.props;\n            const { dropToGap, dropPosition } = info;\n            onDropNode(dropKey, dragKey, dropPosition, dropToGap);\n          }}\n        >\n          {renderTreeNodes(processedAdditionalSets.tree, false, [])}\n        </Tree>\n\n        <PlusButton\n          datatype={datatype}\n          onError={onError}\n          onImportTree={onImportTree}\n          onCreateLevelZeroNode={onCreateLevelZeroNode}\n          importable={importable}\n          editable={editable}\n        />\n      </div>\n      {isChecking ? (\n        <div className=\"set-operation-buttons\">\n          <SetOperationButtons\n            onUnion={onUnion}\n            onIntersection={onIntersection}\n            onComplement={onComplement}\n            operatable={operatable}\n\n            hasCheckedSetsToUnion={hasCheckedSetsToUnion}\n            hasCheckedSetsToIntersect={hasCheckedSetsToIntersect}\n            hasCheckedSetsToComplement={hasCheckedSetsToComplement}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nimport { VIEWER_PALETTE } from '../utils';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '70px',\n    height: '40px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  button: {\n    padding: '3px',\n    width: '16px',\n  },\n  icon: {\n    width: '17px',\n    height: '17px',\n    stroke: theme.palette.action.selected,\n    'stroke-width': '1px',\n  },\n}));\n\nconst ColorPalette = ({ handleChange }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container} aria-label=\"color-swatch\">\n      {VIEWER_PALETTE.map(color => (\n        <IconButton\n          className={classes.button}\n          key={color}\n          onClick={() => handleChange(color)}\n        >\n          <LensIcon\n            fontSize=\"small\"\n            style={{ color: `rgb(${color})` }}\n            className={classes.icon}\n          />\n        </IconButton>\n      ))}\n    </div>\n  );\n};\n\nexport default ColorPalette;\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu, MuiSpan } from '../shared-mui/components';\n\nimport ColorPalette from './ColorPalette';\n\nconst useStyles = makeStyles(() => ({\n  menuButton: {\n    backgroundColor: 'transparent',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\n/**\n * Dropdown for options for a channel on the three dots button.\n * @prop {function} handlePropertyChange Callback for changing property (color, IQR of sliders).\n * @prop {function} handleChannelRemove Callback for channel removal.\n * @prop {function} handleIQRUpdate Callback for IQR slider update.\n */\nfunction ChannelOptions({ handlePropertyChange, handleChannelRemove, handleIQRUpdate }) {\n  const [open, toggle] = useReducer(v => !v, false);\n\n  const classes = useStyles();\n\n  const handleColorSelect = (color) => {\n    handlePropertyChange('color', color);\n  };\n\n  const handleRemove = () => {\n    toggle();\n    handleChannelRemove();\n  };\n\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<MoreVertIcon fontSize=\"small\" />}\n      buttonClassName={classes.menuButton}\n    >\n      <MenuItem dense disableGutters onClick={handleRemove}>\n        <MuiSpan>Remove</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters onClick={handleIQRUpdate}>\n        <MuiSpan>Use IQR</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters className={classes.colors}>\n        <ColorPalette handleChange={handleColorSelect} />\n      </MenuItem>\n    </PopperMenu>\n  );\n}\n\nexport default ChannelOptions;\n","import React, { useCallback, useState, useEffect } from 'react';\nimport { getChannelStats, DTYPE_VALUES } from '@hms-dbmi/viv';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport Select from '@material-ui/core/Select';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\n\nimport ChannelOptions from './ChannelOptions';\n\n// Returns an rgb string for display, and changes the color (arr)\n// to use a grey for light theme + white color or if the colormap is on.\nexport const toRgbUIString = (on, arr, theme) => {\n  const color = (on || (theme === 'light' && arr.every(i => i === 255))) ? [220, 220, 220] : arr;\n  return `rgb(${color})`;\n};\n\nfunction abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) { --maxNaiveDigits; } // Wasted on \".\"\n  if (value < 1) { --maxNaiveDigits; } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n\n  const naive = Intl.NumberFormat(\n    'en-US',\n    {\n      maximumSignificantDigits: maxNaiveDigits,\n      useGrouping: false,\n    },\n  ).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n\n\n/**\n * Dropdown for selecting a channel.\n * @prop {function} handleChange Callback for each new selection.\n * @prop {boolean} disableOptions Whether or not to allow options.\n * @prop {array} channelOptions List of available selections, like ['DAPI', 'FITC', ...].\n * @prop {number} selectionIndex Current numeric index of a selection.\n */\nfunction ChannelSelectionDropdown({\n  handleChange,\n  disableOptions,\n  channelOptions,\n  selectionIndex,\n}) {\n  return (\n    <Select\n      native\n      value={selectionIndex}\n      onChange={e => handleChange(Number(e.target.value))}\n    >\n      {channelOptions.map((opt, i) => (\n        <option disabled={disableOptions} key={opt} value={i}>\n          {opt}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Slider for controlling current colormap.\n * @prop {string} color Current color for this channel.\n * @prop {arry} slider Current value of the slider.\n * @prop {function} handleChange Callback for each slider change.\n * @prop {array} domain Current max/min allowable slider values.\n */\nfunction ChannelSlider({\n  color, slider = [0, 0], handleChange, domain = [0, 0], dtype,\n}) {\n  const [min, max] = domain;\n  const handleChangeDebounced = useCallback(\n    debounce(handleChange, 3, { trailing: true }), [handleChange],\n  );\n  const step = max - min < 500 && dtype === '<f4' ? (max - min) / 500 : 1;\n  return (\n    <Slider\n      value={slider}\n      valueLabelFormat={abbreviateNumber}\n      onChange={(e, v) => handleChangeDebounced(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${color}-${slider}`}\n      min={min}\n      max={max}\n      step={step}\n      orientation=\"horizontal\"\n      style={{ color, marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Checkbox for toggling on/off of a channel.\n * @prop {string} color Current color for this channel.\n * @prop {boolean} checked Whether or not this channel is \"on\".\n * @prop {function} toggle Callback for toggling on/off.\n */\nfunction ChannelVisibilityCheckbox({ color, checked, toggle }) {\n  return (\n    <Checkbox\n      onChange={toggle}\n      checked={checked}\n      style={{ color, '&$checked': { color } }}\n    />\n  );\n}\n\n/**\n * Controller for the handling the colormapping sliders.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {array} slider Current slider range.\n * @prop {array} color Current color for this channel.\n * @prop {array} domain Current max/min for this channel.\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {boolean} colormapOn Whether or not the colormap (viridis, magma etc.) is on.\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {function} handleIQRUpdate When the IQR button is clicked, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n * @prop {boolean} disableOptions Whether or not channel options are be disabled (default: false).\n */\nfunction ChannelController({\n  visibility = false,\n  slider,\n  color,\n  channels,\n  channelId,\n  domainType: newDomainType,\n  dimName,\n  theme,\n  loader,\n  colormapOn,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  handleIQRUpdate,\n  selectionIndex,\n  disableOptions = false,\n}) {\n  const { dtype } = loader;\n  const [domain, setDomain] = useState(null);\n  const [domainType, setDomainType] = useState(null);\n  const [selection, setSelection] = useState([{ ...channels[channelId].selection }]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n\n  useEffect(() => {\n    let mounted = true;\n    if (dtype && loader && channels) {\n      const loaderSelection = [\n        { ...channels[channelId].selection },\n      ];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const hasSelectionChanged = !isEqual(loaderSelection, selection);\n      if (hasDomainChanged || hasSelectionChanged) {\n        if (newDomainType === 'Full') {\n          domains = [[0, DTYPE_VALUES[dtype].max]];\n          const [newDomain] = domains;\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n            if (hasSelectionChanged) {\n              setSelection(loaderSelection);\n            }\n          }\n        } else {\n          getChannelStats({ loader, loaderSelection }).then((stats) => {\n            domains = stats.map(stat => stat.domain);\n            const [newDomain] = domains;\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n              if (hasSelectionChanged) {\n                setSelection(loaderSelection);\n              }\n            }\n          });\n        }\n      }\n    }\n    return () => { mounted = false; };\n  }, [domainType, channels, channelId, loader, dtype, newDomainType, selection]);\n\n  /* A valid selection is defined by an object where the keys are\n  *  the name of a dimension of the data, and the values are the\n  *  index of the image along that particular dimension.\n  *\n  *  Since we currently only support making a selection along one\n  *  addtional dimension (i.e. the dropdown just has channels or mz)\n  *  we have a helper function to create the selection.\n  *\n  *  e.g { channel: 2 } // channel dimension, third channel\n  */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"column\" m={1} justify=\"center\">\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={10}>\n          <ChannelSelectionDropdown\n            handleChange={v => handlePropertyChange('selection', createSelection(v))}\n            selectionIndex={selectionIndex}\n            disableOptions={disableOptions}\n            channelOptions={channelOptions}\n          />\n        </Grid>\n        <Grid item xs={1} style={{ marginTop: '4px' }}>\n          <ChannelOptions\n            handlePropertyChange={handlePropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n          />\n        </Grid>\n      </Grid>\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={2}>\n          <ChannelVisibilityCheckbox\n            color={rgbColor}\n            checked={visibility}\n            toggle={() => handlePropertyChange('visible', !visibility)}\n          />\n        </Grid>\n        <Grid item xs={9}>\n          {domain && (\n            <ChannelSlider\n              color={rgbColor}\n              slider={slider}\n              domain={domain}\n              dtype={dtype}\n              handleChange={v => handlePropertyChange('slider', v)}\n            />\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default ChannelController;\n","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport { COLORMAP_OPTIONS } from '../utils';\nimport { DEFAULT_RASTER_DOMAIN_TYPE } from '../spatial/constants';\n\nconst DOMAIN_OPTIONS = ['Full', 'Min/Max'];\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {string} value Currently selected value for the colormap.\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in colormap.\n */\nfunction ColormapSelect({ value, inputId, handleChange }) {\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value === '' ? null : e.target.value)}\n      value={value}\n      inputProps={{ name: 'colormap', id: inputId }}\n      style={{ width: '100%' }}\n    >\n      <option aria-label=\"None\" value=\"\">None</option>\n      {COLORMAP_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\nfunction TransparentColorCheckbox({ value, handleChange }) {\n  return (\n    <Checkbox\n      style={{ float: 'left', padding: 0 }}\n      color=\"default\"\n      onChange={() => {\n        if (value) {\n          handleChange(null);\n        } else {\n          handleChange([0, 0, 0]);\n        }\n      }}\n      checked={Boolean(value)}\n    />\n  );\n}\n\n/**\n * Wrapper for the slider that updates opacity.\n * @prop {string} value Currently selected value between 0 and 1.\n * @prop {function} handleChange Callback for every change in opacity.\n */\nfunction OpacitySlider({ value, handleChange }) {\n  return (\n    <Slider\n      value={value}\n      onChange={(e, v) => handleChange(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => 'opacity slider'}\n      min={0}\n      max={1}\n      step={0.01}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Wrapper for the dropdown that chooses the domain type.\n * @prop {string} value Currently selected value (i.e 'Max/Min').\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in domain.\n */\nfunction SliderDomainSelector({ value, inputId, handleChange }) {\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value)}\n      value={value}\n      inputProps={{ name: 'domain-selector', id: inputId }}\n      style={{ width: '100%' }}\n    >\n      {DOMAIN_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Wrapper for the slider that chooses global selections (z, t etc.).\n * @prop {string} field The dimension this selects for (z, t etc.).\n * @prop {number} value Currently selected index (1, 4, etc.).\n * @prop {function} handleChange Callback for every change in selection.\n * @prop {function} possibleValues All available values for the field.\n */\nfunction GlobalSelectionSlider({\n  field,\n  value,\n  handleChange,\n  possibleValues,\n}) {\n  return (\n    <Slider\n      value={value}\n      // See https://github.com/hubmapconsortium/vitessce-image-viewer/issues/176 for why\n      // we have the two handlers.\n      onChange={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      onChangeCommitted={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${field} slider`}\n      marks={possibleValues.map(val => ({ value: val }))}\n      min={Number(possibleValues[0])}\n      max={Number(possibleValues.slice(-1))}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n      step={null}\n    />\n  );\n}\n\n/**\n * Wrapper for each of the options to show its name and then its UI component.\n * @prop {string} name Display name for option.\n * @prop {number} opacity Current opacity value.\n * @prop {string} inputId An id for css.\n * @prop {object} children Components to be rendered next to the name (slider, dropdown etc.).\n */\nfunction LayerOption({ name, inputId, children }) {\n  return (\n    <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n      <Grid item xs={6}>\n        <InputLabel htmlFor={inputId}>{name}:</InputLabel>\n      </Grid>\n      <Grid item xs={6}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n}\n\n/**\n * Gloabl options for all channels (opacity, colormap, etc.).\n * @prop {string} colormap What colormap is currently selected (None, viridis etc.).\n * @prop {number} opacity Current opacity value.\n * @prop {function} handleColormapChange Callback for when colormap changes.\n * @prop {function} handleOpacityChange Callback for when opacity changes.\n * @prop {object} globalControlDimensions All available options for global control (z and t).\n * @prop {function} handleGlobalChannelsSelectionChange Callback for global selection changes.\n * @prop {function} handleDomainChange Callback for domain type changes (full or min/max).\n * @prop {array} channels Current channel object for inferring the current global selection.\n * @prop {array} dimensions Currently available dimensions (channel, z, t etc.).\n * @prop {string} domainType One of Max/Min or Full (soon presets as well).\n * @prop {boolean} isRgb Whether or not the image is rgb (so we don't need colormap controllers).\n */\nfunction LayerOptions({\n  colormap,\n  opacity,\n  handleColormapChange,\n  handleOpacityChange,\n  handleTransparentColorChange,\n  globalControlDimensions,\n  globalDimensionValues,\n  handleGlobalChannelsSelectionChange,\n  handleDomainChange,\n  transparentColor,\n  channels,\n  dimensions,\n  domainType,\n  isRgb,\n}) {\n  const hasDimensionsAndChannels = dimensions.length > 0 && channels.length > 0;\n  return (\n    <Grid container direction=\"column\" style={{ width: '100%' }}>\n      {!isRgb ? (\n        <>\n          <Grid item>\n            <LayerOption name=\"Colormap\" inputId=\"colormap-select\">\n              <ColormapSelect\n                value={colormap || ''}\n                inputId=\"colormap-select\"\n                handleChange={handleColormapChange}\n              />\n            </LayerOption>\n          </Grid>\n          <Grid item>\n            <LayerOption name=\"Domain\" inputId=\"domain-selector\">\n              <SliderDomainSelector\n                value={domainType || DEFAULT_RASTER_DOMAIN_TYPE}\n                handleChange={(value) => {\n                  handleDomainChange(value);\n                }}\n              />\n            </LayerOption>\n          </Grid>\n        </>\n      ) : null}\n      <Grid item>\n        <LayerOption name=\"Opacity\" inputId=\"opacity-slider\">\n          <OpacitySlider value={opacity} handleChange={handleOpacityChange} />\n        </LayerOption>\n      </Grid>\n      <Grid item>\n        <LayerOption\n          name=\"Zero Transparent\"\n          inputId=\"transparent-color-selector\"\n        >\n          <TransparentColorCheckbox\n            value={transparentColor}\n            handleChange={handleTransparentColorChange}\n          />\n        </LayerOption>\n      </Grid>\n      {hasDimensionsAndChannels\n        && globalControlDimensions.map((dimension) => {\n          const { field, values } = dimension;\n          // If there is only one value in the dimension, do not return a slider.\n          return (\n            values.length > 1 && (\n              <LayerOption name={field} inputId={`${field}-slider`} key={field}>\n                <GlobalSelectionSlider\n                  field={field}\n                  value={globalDimensionValues[field]}\n                  handleChange={handleGlobalChannelsSelectionChange}\n                  possibleValues={values}\n                />\n              </LayerOption>\n            )\n          );\n        })}\n    </Grid>\n  );\n}\n\nexport default LayerOptions;\n","import React, { useState } from 'react';\nimport { getChannelStats, DTYPE_VALUES, MAX_SLIDERS_AND_CHANNELS } from '@hms-dbmi/viv';\n\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport ChannelController from './ChannelController';\nimport LayerOptions from './LayerOptions';\n\nimport { useExpansionPanelStyles, useExpansionPanelSummaryStyles } from './styles';\nimport { GLOBAL_SLIDER_DIMENSION_FIELDS } from '../spatial/constants';\n\n\n// Set the domain of the sliders based on either a full range or min/max.\nasync function getDomainsAndSliders(loader, loaderSelection, domainType) {\n  let domains;\n  const stats = await getChannelStats({ loader, loaderSelection });\n  const sliders = stats.map(stat => stat.autoSliders);\n  if (domainType === 'Min/Max') {\n    domains = stats.map(stat => stat.domain);\n  } if (domainType === 'Full') {\n    domains = loaderSelection.map(() => [0, DTYPE_VALUES[loader.dtype].max]);\n  }\n  return { domains, sliders };\n}\n\nconst buttonStyles = { borderStyle: 'dashed', marginTop: '10px', fontWeight: 400 };\n\n/**\n * Controller for the various imaging options (color, opactiy, sliders etc.)\n * @prop {object} imageData Image config object, one of the `images` in the raster schema.\n * @prop {object} layerId Randomly generated id for the image layer that this controller handles.\n * @prop {function} handleLayerRemove Callback for handling the removal of a layer.\n * @prop {object} loader Loader object for the current imaging layer.\n * @prop {function} handleLayerChange Callback for handling the changing of layer properties.\n */\nexport default function RasterLayerController(props) {\n  const {\n    layer,\n    name,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n  } = props;\n\n  const {\n    colormap,\n    opacity,\n    channels,\n    transparentColor,\n  } = layer;\n  const firstSelection = channels[0]?.selection || {};\n\n  const { dimensions } = loader;\n  const [domainType, setDomainType] = useState(layer.domainType);\n  const [globalDimensionValues, setGlobalDimensionValues] = useState(\n    GLOBAL_SLIDER_DIMENSION_FIELDS\n      .filter(field => firstSelection[field])\n      .reduce((o, key) => ({ ...o, [key]: firstSelection[key] }), {}),\n  );\n\n  function setColormap(v) {\n    handleLayerChange({ ...layer, colormap: v });\n  }\n\n  function setOpacity(v) {\n    handleLayerChange({ ...layer, opacity: v });\n  }\n\n  function setChannels(v) {\n    handleLayerChange({ ...layer, channels: v });\n  }\n  function setTransparentColor(v) {\n    handleLayerChange({ ...layer, transparentColor: v });\n  }\n\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange({\n      ...layer,\n      channels: newChannels,\n      domainType: newDomainType,\n    });\n  }\n\n  function setChannel(v, i) {\n    const newChannels = [...channels];\n    newChannels[i] = v;\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function addChannel(v) {\n    const newChannels = [...channels, v];\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function removeChannel(i) {\n    const newChannels = [...channels];\n    newChannels.splice(i, 1);\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  // Handles adding a channel, creating a default selection\n  // for the current global settings and domain type.\n  const handleChannelAdd = async () => {\n    const selection = {};\n    dimensions.forEach((dimension) => {\n      // Set new image to default selection for non-global selections (0)\n      // and use current global selection otherwise.\n      selection[dimension.field] = GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dimension.field)\n        ? globalDimensionValues[dimension.field]\n        : 0;\n    });\n    const { domains, sliders } = await getDomainsAndSliders(loader, [selection], domainType);\n    const domain = domains[0];\n    const slider = sliders[0] || domain;\n    const color = [255, 255, 255];\n    const visible = true;\n    addChannel({\n      selection, slider, visible, color,\n    });\n  };\n\n  const handleDomainChange = async (value) => {\n    setDomainType(value);\n    const loaderSelection = channels.map(\n      channel => channel.selection,\n    );\n    let sliders = channels.map(\n      channel => channel.slider,\n    );\n    const { domains } = await getDomainsAndSliders(\n      loader,\n      loaderSelection,\n      value,\n    );\n\n    // If it's the right-most slider, we take the minimum of that and the new value.\n    // Otherwise, we use the maximum of the left-hand side and the new value.\n    sliders = sliders.map(\n      (slider, i) => {\n        const [left, right] = slider;\n        return [\n          Math.max(left, domains[i][0]),\n          Math.min(right, domains[i][1]),\n        ];\n      },\n    );\n\n    const newChannels = channels.map((c, i) => ({ ...c, slider: sliders[i] }));\n    setChannelsAndDomainType(newChannels, value);\n  };\n\n  // This call updates all channel selections with new global selection from the UI.\n  const handleGlobalChannelsSelectionChange = async ({ selection, event }) => {\n    const loaderSelection = channels.map(channel => ({\n      ...channel.selection,\n      ...selection,\n    }));\n    const mouseUp = event.type === 'mouseup';\n    // Only update domains on a mouseup event for the same reason as above.\n    const { sliders } = mouseUp\n      ? await getDomainsAndSliders(loader, loaderSelection, domainType)\n      : { domains: [], sliders: [] };\n    if (mouseUp) {\n      const newChannels = channels.map((c, i) => ({\n        ...c,\n        slider: sliders[i],\n        selection: { ...c.selection, ...selection },\n      }));\n      setChannels(newChannels);\n    }\n    setGlobalDimensionValues(prev => ({ ...prev, ...selection }));\n  };\n\n  let channelControllers = [];\n  if (dimensions.length > 0) {\n    const channelDimensions = loader.type === 'ome-tiff' ? dimensions.find(c => c.field === 'channel') : dimensions[0];\n    const { values: channelOptions, field: dimName } = channelDimensions;\n    // Create the channel controllers for each channel.\n    channelControllers = channels.map(\n      // c is an object like { color, selection, slider, visible }.\n      (c, channelId) => {\n        // Change one property of a channel (for now - soon\n        // nested structures allowing for multiple z/t selecitons at once, for example).\n        const handleChannelPropertyChange = async (property, value) => {\n          // property is something like \"selection\" or \"slider.\"\n          // value is the actual change, like { channel: \"DAPI\" }.\n          const update = { [property]: value };\n          if (property === 'selection') {\n            update.selection = { ...globalDimensionValues, ...update.selection };\n            const loaderSelection = [\n              { ...channels[channelId][property], ...value },\n            ];\n            const { sliders } = await getDomainsAndSliders(\n              loader, loaderSelection, domainType,\n            );\n            [update.slider] = sliders;\n          }\n          setChannel({ ...c, ...update }, channelId);\n        };\n        const handleChannelRemove = () => {\n          removeChannel(channelId);\n        };\n        const handleIQRUpdate = async () => {\n          const stats = await getChannelStats(\n            { loader, loaderSelection: [channels[channelId].selection] },\n          );\n          const { q1, q3 } = stats[0];\n          setChannel({ ...c, slider: [q1, q3] }, channelId);\n        };\n        return (\n          <Grid\n            // eslint-disable-next-line react/no-array-index-key\n            key={`channel-controller-${channelId}`}\n            item\n            style={{ width: '100%' }}\n          >\n            <ChannelController\n              dimName={dimName}\n              visibility={c.visible}\n              selectionIndex={c.selection[dimName]}\n              slider={c.slider}\n              color={c.color}\n              channels={channels}\n              channelId={channelId}\n              domainType={domainType}\n              loader={loader}\n              globalDimensionValues={globalDimensionValues}\n              theme={theme}\n              channelOptions={channelOptions}\n              colormapOn={Boolean(colormap)}\n              handlePropertyChange={handleChannelPropertyChange}\n              handleChannelRemove={handleChannelRemove}\n              handleIQRUpdate={handleIQRUpdate}\n            />\n          </Grid>\n        );\n      },\n    );\n  }\n\n  const classes = useExpansionPanelStyles();\n  const summaryClasses = useExpansionPanelSummaryStyles();\n  return (\n    <ExpansionPanel defaultExpanded className={classes.root}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls={`layer-${name}-controls`}\n        classes={{ ...summaryClasses }}\n      >\n        {name}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className={classes.root}>\n        <Grid item>\n          <LayerOptions\n            channels={channels}\n            dimensions={dimensions}\n            opacity={opacity}\n            colormap={colormap}\n            transparentColor={transparentColor}\n            domainType={domainType}\n            // Only allow for global dimension controllers that\n            // exist in the `dimensions` part of the loader.\n            globalControlDimensions={\n              dimensions.filter(\n                dimension => GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dimension.field),\n              )\n            }\n            globalDimensionValues={globalDimensionValues}\n            handleOpacityChange={setOpacity}\n            handleColormapChange={setColormap}\n            handleGlobalChannelsSelectionChange={\n              handleGlobalChannelsSelectionChange\n            }\n            handleTransparentColorChange={setTransparentColor}\n            isRgb={loader.isRgb}\n            handleDomainChange={handleDomainChange}\n          />\n        </Grid>\n        {!loader.isRgb ? channelControllers : null}\n        {!loader.isRgb && (\n          <Grid item>\n            <Button\n              disabled={channels.length === MAX_SLIDERS_AND_CHANNELS}\n              onClick={handleChannelAdd}\n              fullWidth\n              variant=\"outlined\"\n              style={buttonStyles}\n              startIcon={<AddIcon />}\n              size=\"small\"\n            >\n              Add Channel\n            </Button>\n          </Grid>\n        )}\n        <Grid item>\n          <Button\n            onClick={handleLayerRemove}\n            fullWidth\n            variant=\"outlined\"\n            style={buttonStyles}\n            size=\"small\"\n          >\n            Remove Image Layer\n          </Button>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","/* eslint-disable jsx-a11y/no-noninteractive-element-to-interactive-role */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useCallback, useState } from 'react';\nimport { Table, AutoSizer } from 'react-virtualized';\nimport uuidv4 from 'uuid/v4';\nimport union from 'lodash/union';\nimport difference from 'lodash/difference';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * A table with \"selectable\" rows.\n * @prop {string[]} columns An array of column names, corresponding to data object properties.\n * @prop {object[]} data An array of data objects used to populate table rows.\n * @prop {function} onChange Callback function,\n * passed a selection object when `allowMultiple` is false (and `null` if `allowUncheck` is true),\n * or passed an array of selection objects when `allowMultiple` is true.\n * @prop {string} idKey The key for a unique identifier property of `data` objects.\n * @prop {string} valueKey If initially-selected rows are required,\n * this key specifies a boolean property of the `data` objects\n * indicating those rows that should be initially selected.\n * @prop {boolean} allowMultiple Whether to allow multiple rows to be selected. By default, false.\n * @prop {boolean} allowUncheck Whether to allow selected rows to be un-checked. By default, false.\n * @prop {boolean} showTableHead Whether to show the table header element. By default, true.\n * @prop {boolean} showTableInputs Whether to show the table input elements for each row.\n * By default, false.\n */\nexport default function SelectableTable(props) {\n  const {\n    hasColorEncoding,\n    columns,\n    data,\n    onChange,\n    idKey = 'id',\n    valueKey = 'value',\n    allowMultiple = false,\n    allowUncheck = false,\n    showTableHead = true,\n    showTableInputs = false,\n    testHeight = undefined,\n    testWidth = undefined,\n  } = props;\n\n  const [selectedRows, setSelectedRows] = useState(null);\n\n  // Callback function to update the `selectedRows` state.\n  const onSelectRow = useCallback((value, checked) => {\n    if (checked || allowUncheck) {\n      if (!allowMultiple) {\n        setSelectedRows(checked ? [value] : []);\n      } else {\n        setSelectedRows(\n          checked\n            ? union(selectedRows || [], [value])\n            : difference(selectedRows || [], [value]),\n        );\n      }\n    }\n  }, [allowMultiple, allowUncheck, selectedRows]);\n\n  // Handler for checkbox input elements.\n  const handleInputChange = useCallback((event) => {\n    const { target } = event;\n    const { checked } = target;\n    const { value } = target;\n    onSelectRow(value, checked);\n  }, [onSelectRow]);\n\n  // Function to map row IDs to corresponding objects\n  // to pass to the `onChange` callback.\n  const getDataFromIds = useCallback(ids => ids.map(id => ({\n    [idKey]: id,\n    data: data.find(item => item[idKey] === id),\n  })), [data, idKey]);\n\n  // Function to check if a row ID has been selected.\n  const isSelected = useCallback(id => (\n    Array.isArray(selectedRows) && selectedRows.includes(id)\n  ), [selectedRows]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    // Check whether an initial set of rows should be selected.\n    const initialSelectedRows = data\n      .map((d) => {\n        if (d[valueKey]) {\n          return d[idKey];\n        }\n        return null;\n      })\n      .filter(Boolean);\n    if (!isEqual(initialSelectedRows, selectedRows)) {\n      if (initialSelectedRows.length > 0) {\n        setSelectedRows(initialSelectedRows);\n      } else {\n        setSelectedRows(null);\n      }\n    }\n  }, [data, idKey, valueKey]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    // Call the `onChange` prop function with an updated row or set of rows.\n    if (!onChange || !selectedRows) {\n      return;\n    }\n    const selectedRowData = getDataFromIds(selectedRows);\n    if (allowMultiple) {\n      onChange(selectedRowData);\n    } else if (selectedRows.length === 1) {\n      onChange(selectedRowData[0]);\n    } else if (selectedRows.length === 0) {\n      onChange(null);\n    }\n  }, [selectedRows]);\n\n  // Generate a unique ID to use in (for, id) label-input pairs.\n  const inputUuid = uuidv4();\n\n  // Class for first column of inputs, to hide them if desired.\n  const hiddenInputsClass = (showTableInputs ? '' : 'hidden-input-column');\n\n  const rowRenderer = ({ index, style }) => (\n    // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n    <div\n      key={data[index][idKey]}\n      className={`table-item table-row ${isSelected(data[index][idKey]) ? 'row-checked ' : ''}`}\n      style={style}\n      role=\"button\"\n      onClick={() => onSelectRow(\n        data[index][idKey],\n        !isSelected(data[index][idKey]) || !hasColorEncoding,\n      )}\n    >\n      <div className={`input-container ${hiddenInputsClass} table-cell`}>\n        <label htmlFor={`${inputUuid}_${data[index][idKey]}`}>\n          <input\n            id={`${inputUuid}_${data[index][idKey]}`}\n            type=\"checkbox\"\n            className={(allowMultiple ? 'checkbox' : 'radio')}\n            name={inputUuid}\n            value={data[index][idKey]}\n            onChange={handleInputChange}\n            checked={isSelected(data[index][idKey])}\n          />\n        </label>\n      </div>\n      {columns.map(column => (\n        <div\n          className=\"table-cell\"\n          key={column}\n        >\n          {data[index][column]}\n        </div>\n      ))}\n    </div>\n  );\n\n  const headerRowRenderer = ({ style }) => (\n    <div className={`${hiddenInputsClass} table-row`} style={style}>\n      {columns.map(column => (\n        <div key={column}>{column}</div>\n      ))}\n    </div>\n  );\n\n  return (\n    <div className=\"selectable-table\">\n      <AutoSizer>\n        {({ width, height }) => (\n          <Table\n            height={testHeight || height}\n            gridStyle={{ outline: 'none' }}\n            rowCount={data.length}\n            // 24 is 1 em + padding in either direction (see _selectable_table.scss).\n            rowHeight={24}\n            headerHeight={showTableHead ? 24 : undefined}\n            rowRenderer={rowRenderer}\n            width={testWidth || width}\n            headerRowRenderer={showTableHead ? headerRowRenderer : undefined}\n            rowGetter={({ index }) => data[index]}\n          />\n        )}\n      </AutoSizer>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { SelectableTable } from '../selectable-table/index';\n\nexport default function Genes(props) {\n  const {\n    hasColorEncoding,\n    geneList = [],\n    geneSelection = [],\n    geneFilter = null,\n    setGeneSelection,\n  } = props;\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState(geneList);\n\n  useEffect(() => {\n    const results = geneList\n      .filter(gene => gene.toLowerCase().includes(searchTerm.toLowerCase()));\n    setSearchResults(results);\n  }, [searchTerm, geneList]);\n\n  function onChange(selection) {\n    if (setGeneSelection && selection && selection.name) {\n      setGeneSelection([selection.name]);\n    }\n  }\n\n  const data = searchResults\n    .filter(gene => (geneFilter ? geneFilter.includes(gene) : true))\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      gene => ({ name: gene, value: (geneSelection ? geneSelection.includes(gene) : false) }),\n    );\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  return (\n    <>\n      <input\n        className=\"search-bar\"\n        type=\"text\"\n        placeholder=\"Search\"\n        value={searchTerm}\n        onChange={handleChange}\n      />\n      <SelectableTable\n        columns={['name']}\n        data={data}\n        hasColorEncoding={hasColorEncoding}\n        idKey=\"name\"\n        valueKey=\"value\"\n        onChange={onChange}\n        allowUncheck={false}\n        showTableHead={false}\n      />\n    </>\n  );\n}\n","module.exports = require(\"react-virtualized\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"react-vega\");","import React from 'react';\nimport { useCoordination, useWarning } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport TitleInfo from '../TitleInfo';\nimport Status from './Status';\n\nexport default function StatusSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  // Get \"props\" from the coordination space.\n  const [{\n    cellHighlight,\n    geneHighlight,\n    moleculeHighlight,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.status, coordinationScopes);\n\n  const warn = useWarning();\n\n  const infos = [\n    ...(cellHighlight\n      ? [`Hovered cell ${cellHighlight}`]\n      : []\n    ),\n    ...(geneHighlight\n      ? [`Hovered gene ${geneHighlight}`]\n      : []\n    ),\n    ...(moleculeHighlight\n      ? [`Hovered gene ${moleculeHighlight}`]\n      : []\n    ),\n  ];\n  const info = infos.join('; ');\n\n  return (\n    <TitleInfo\n      title=\"Status\"\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isScroll\n      isReady\n    >\n      <Status warn={warn} info={info} />\n    </TitleInfo>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { pluralize } from '../../utils';\nimport { useReady, useUrls } from '../hooks';\nimport { useExpressionMatrixData } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nimport TitleInfo from '../TitleInfo';\nimport Genes from './Genes';\n\nconst GENES_DATA_TYPES = ['expression-matrix'];\n\nexport default function GenesSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    variablesLabelOverride: variablesLabel = 'gene',\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    geneSelection,\n    geneFilter,\n    cellColorEncoding,\n  }, {\n    setGeneSelection,\n    setGeneFilter,\n    setGeneHighlight,\n    setCellColorEncoding,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genes, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    GENES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  const geneList = expressionMatrix ? expressionMatrix.cols : [];\n  const numGenes = geneList.length;\n\n  function setGeneSelectionAndColorEncoding(newSelection) {\n    setGeneSelection(newSelection);\n    setCellColorEncoding('geneSelection');\n  }\n\n  return (\n    <TitleInfo\n      title=\"Expression Levels\"\n      info={`${numGenes} ${pluralize(variablesLabel, variablesPluralLabel, numGenes)}`}\n      theme={theme}\n      // Virtual scroll is used but this allows for the same styling as a scroll component\n      // even though this no longer uses the TitleInfo component's\n      // scroll css (SelectableTable is virtual scroll).\n      isScroll\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      urls={urls}\n    >\n      <Genes\n        hasColorEncoding={cellColorEncoding === 'geneSelection'}\n        geneList={geneList}\n        geneSelection={geneSelection}\n        geneFilter={geneFilter}\n        setGeneSelection={setGeneSelectionAndColorEncoding}\n        setGeneFilter={setGeneFilter}\n        setGeneHighlight={setGeneHighlight}\n      />\n    </TitleInfo>\n  );\n}\n","import React, {\n  useEffect,\n  useState,\n  useMemo,\n} from 'react';\nimport isEqual from 'lodash/isEqual';\nimport packageJson from '../../../package.json';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetWarning,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport SetsManager from './SetsManager';\nimport TitleInfo from '../TitleInfo';\nimport {\n  treeExportLevelZeroNode,\n  treeExportSet,\n  treeToExpectedCheckedLevel,\n  nodeToLevelDescendantNamePaths,\n  treeToIntersection,\n  treeToUnion,\n  treeToComplement,\n  treeFindNodeByNamePath,\n  treesConflict,\n  initializeCellSetColor,\n  nodeTransform,\n  nodeAppendChild,\n  nodePrependChild,\n  nodeInsertChild,\n  filterNode,\n  treeInitialize,\n} from './cell-set-utils';\nimport {\n  isEqualOrPrefix,\n  tryRenamePath,\n  PATH_SEP,\n} from './utils';\nimport {\n  downloadForUser,\n  handleExportJSON,\n  handleExportTabular,\n  tryUpgradeTreeToLatestSchema,\n} from './io';\nimport {\n  FILE_EXTENSION_JSON,\n  FILE_EXTENSION_TABULAR,\n  SETS_DATATYPE_CELL,\n} from './constants';\nimport { useUrls, useReady } from '../hooks';\nimport {\n  setCellSelection,\n  mergeCellSets,\n  getNextNumberedNodeName,\n} from '../utils';\nimport { useCellsData, useCellSetsData } from '../data-hooks';\n\nconst CELL_SETS_DATA_TYPES = ['cells', 'cell-sets'];\n\n/**\n * A subscriber wrapper around the SetsManager component\n * for the 'cell' datatype.\n * @param {object} props\n * @param {function} removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {function} onReady The function to call when the component has finished\n * initializing (subscribing to relevant events, etc).\n * @param {boolean} initializeSelection Should an event be emitted upon initialization,\n * so that cells are colored by some heuristic (e.g. the first clustering in the cell_sets tree)?\n */\nexport default function CellSetsManagerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    initializeSelection = true,\n    initializeColor = true,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n  const setWarning = useSetWarning();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    cellColorEncoding,\n  }, {\n    setCellSetSelection,\n    setCellColorEncoding,\n    setCellSetColor,\n    setAdditionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSets, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    CELL_SETS_DATA_TYPES,\n  );\n\n  const [autoSetSelections, setAutoSetSelections] = useState({});\n  const [autoSetColors, setAutoSetColors] = useState({});\n\n  const [cellSetExpansion, setCellSetExpansion] = useState([]);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    setAutoSetSelections({});\n    setAutoSetColors({});\n    setCellSetExpansion([]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true,\n    (data) => {\n      if (data && data.tree.length >= 1) {\n        // eslint-disable-next-line no-underscore-dangle\n        const newAutoSetSelectionParentName = data.tree[0].name;\n        const newAutoSetSelections = data.tree[0].children\n          .map(node => ([newAutoSetSelectionParentName, node.name]));\n        setAutoSetSelections(prev => ({\n          [dataset]: [\n            ...(prev[dataset] || []),\n            ...newAutoSetSelections,\n          ],\n        }));\n\n        const newAutoSetColors = initializeCellSetColor(data, cellSetColor);\n        setAutoSetColors(prev => ({\n          [dataset]: [\n            ...(prev[dataset] || []),\n            ...newAutoSetColors,\n          ],\n        }));\n      } else {\n        setAutoSetSelections(prev => ({ [dataset]: (prev[dataset] || []) }));\n        setAutoSetColors(prev => ({ [dataset]: (prev[dataset] || []) }));\n      }\n    });\n\n  // Try to set up the selected sets array automatically if undefined.\n  useEffect(() => {\n    // Only initialize cell sets if the value of `cellSetSelection` is `null`\n    // and the `initializeSelection` prop is `true`.\n    if (\n      isReady\n      && initializeSelection\n      && autoSetSelections[dataset]\n      && !cellSetSelection\n    ) {\n      setCellSetSelection(autoSetSelections[dataset]);\n    }\n  }, [dataset, autoSetSelections, isReady, cellSetSelection,\n    setCellSetSelection, initializeSelection]);\n\n  // Try to set up the colored sets array automatically if undefined.\n  useEffect(() => {\n    // Only initialize cell sets if the value of `cellSetColor` is `null`\n    // and the `initializeColor` prop is `true`.\n    if (\n      isReady\n      && initializeColor\n      && autoSetColors[dataset]\n      && !cellSetColor\n    ) {\n      setCellSetColor(autoSetColors[dataset]);\n    }\n  }, [dataset, autoSetColors, isReady, setCellSetColor, initializeColor, cellSetColor]);\n\n  // Validate and upgrade the additionalCellSets.\n  useEffect(() => {\n    if (additionalCellSets) {\n      let upgradedCellSets;\n      try {\n        upgradedCellSets = tryUpgradeTreeToLatestSchema(additionalCellSets, SETS_DATATYPE_CELL);\n      } catch (e) {\n        setWarning(e.message);\n        return;\n      }\n      setAdditionalCellSets(upgradedCellSets);\n    }\n  }, [additionalCellSets, setAdditionalCellSets, setWarning]);\n\n  // Get an array of all cell IDs to use for set complement operations.\n  const allCellIds = useMemo(() => (cells ? Object.keys(cells) : []), [cells]);\n\n  // A helper function for updating the encoding for cell colors,\n  // which may have previously been set to 'geneSelection'.\n  function setCellSetColorEncoding() {\n    setCellColorEncoding('cellSetSelection');\n  }\n\n  // Merged cell sets are only to be used for convenience when reading\n  // (if writing: update either `cellSets` _or_ `additionalCellSets`).\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // Infer the state of the \"checked level\" radio button based on the selected cell sets.\n  const checkedLevel = useMemo(() => {\n    if (cellSetSelection && cellSetSelection.length > 0\n    && mergedCellSets && mergedCellSets.tree.length > 0) {\n      return treeToExpectedCheckedLevel(mergedCellSets, cellSetSelection);\n    }\n    return null;\n  }, [cellSetSelection, mergedCellSets]);\n\n  // Callback functions\n\n  // The user wants to select all nodes at a particular hierarchy level.\n  function onCheckLevel(levelZeroName, levelIndex) {\n    const lzn = mergedCellSets.tree.find(n => n.name === levelZeroName);\n    if (lzn) {\n      const newCellSetSelection = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n      setCellSetSelection(newCellSetSelection);\n      setCellSetColorEncoding();\n    }\n  }\n\n  // The user wants to check or uncheck a cell set node.\n  function onCheckNode(targetKey, checked) {\n    const targetPath = (Array.isArray(targetKey) ? targetKey : targetKey.split(PATH_SEP));\n    if (!targetKey) {\n      return;\n    }\n    if (checked) {\n      setCellSetSelection([...cellSetSelection, targetPath]);\n    } else {\n      setCellSetSelection(cellSetSelection.filter(d => !isEqual(d, targetPath)));\n    }\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to expand or collapse a node in the tree.\n  function onExpandNode(expandedKeys, targetKey, expanded) {\n    if (expanded) {\n      setCellSetExpansion(prev => ([...prev, targetKey.split(PATH_SEP)]));\n    } else {\n      setCellSetExpansion(prev => prev.filter(d => !isEqual(d, targetKey.split(PATH_SEP))));\n    }\n  }\n\n  // The user dragged a tree node and dropped it somewhere else in the tree\n  // to re-arrange or re-order the nodes.\n  // We need to verify that their drop target is valid, and if so, complete\n  // the tree re-arrangement.\n  function onDropNode(dropKey, dragKey, dropPosition, dropToGap) {\n    const dropPath = dropKey.split(PATH_SEP);\n    const dropNode = treeFindNodeByNamePath(additionalCellSets, dropPath);\n    if (!dropNode.children && !dropToGap) {\n      // Do not allow a node with a set (i.e. leaf) to become a child of another node with a set,\n      // as this will result in an internal node having a set, which we do not allow.\n      return;\n    }\n    const dropNodeLevel = dropPath.length - 1;\n    const dropNodeIsLevelZero = dropNodeLevel === 0;\n\n    // Get drag node.\n    const dragPath = dragKey.split(PATH_SEP);\n    const dragNode = treeFindNodeByNamePath(additionalCellSets, dragPath);\n\n    if (dropNodeIsLevelZero && dropToGap && !dragNode.children) {\n      // Do not allow a leaf node to become a level zero node.\n      return;\n    }\n\n    let dropParentNode;\n    let dropParentPath;\n    let dropNodeCurrIndex;\n    if (!dropNodeIsLevelZero) {\n      dropParentPath = dropPath.slice(0, -1);\n      dropParentNode = treeFindNodeByNamePath(additionalCellSets, dropParentPath);\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = additionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    // Further, only allow dragging if the dragged node will have a unique\n    // name among its new siblings.\n    let hasSiblingNameConflict;\n    const dragNodeName = dragNode.name;\n    if (!dropNodeIsLevelZero && dropToGap) {\n      hasSiblingNameConflict = dropParentNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else if (!dropToGap) {\n      hasSiblingNameConflict = dropNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else {\n      hasSiblingNameConflict = additionalCellSets.tree\n        .find(lzn => lzn !== dragNode && lzn.name === dragNodeName);\n    }\n\n    if (hasSiblingNameConflict) {\n      return;\n    }\n\n    // Remove the dragged object from its current position.\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], dragPath)).filter(Boolean),\n    };\n\n    // Update index values after temporarily removing the dragged node.\n    // Names are unique as children of their parents.\n    if (!dropNodeIsLevelZero) {\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = nextAdditionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    let newDragPath = [];\n    if (!dropToGap || !dropNodeIsLevelZero) {\n      let addChildFunction;\n      let checkPathFunction;\n      const newPath = [];\n      if (!dropToGap) {\n        // Append the dragNode to dropNode's children if dropping _onto_ the dropNode.\n        // Set dragNode as the last child of dropNode.\n        addChildFunction = n => nodeAppendChild(n, dragNode);\n        checkPathFunction = path => isEqual(path, dropPath);\n      } else if (!dropNodeIsLevelZero) {\n        // Prepend or insert the dragNode if dropping _between_ (above or below dropNode).\n        // The dropNode is at a level greater than zero,\n        // so it has a parent.\n        checkPathFunction = path => isEqual(path, dropParentPath);\n        if (dropPosition === -1) {\n          // Set dragNode as first child of dropParentNode.\n          addChildFunction = n => nodePrependChild(n, dragNode);\n        } else {\n          // Set dragNode before or after dropNode.\n          const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n          addChildFunction = n => nodeInsertChild(n, dragNode, insertIndex);\n        }\n      }\n      nextAdditionalCellSets.tree = nextAdditionalCellSets.tree.map(\n        node => nodeTransform(\n          node,\n          (n, path) => checkPathFunction(path),\n          (n) => {\n            const newNode = addChildFunction(n);\n            return newNode;\n          },\n          newPath,\n        ),\n      );\n      // Done\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [...newPath[0], dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else if (dropPosition === -1) {\n      // We need to drop the dragNode to level zero,\n      // and level zero nodes do not have parents.\n      // Set dragNode as first level zero node of the tree.\n      nextAdditionalCellSets.tree.unshift(dragNode);\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else {\n      // Set dragNode before or after dropNode in level zero.\n      const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n      const newLevelZero = Array.from(nextAdditionalCellSets.tree);\n      newLevelZero.splice(insertIndex, 0, dragNode);\n      nextAdditionalCellSets.tree = newLevelZero;\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    }\n    const oldColors = cellSetColor.filter(\n      i => isEqualOrPrefix(dragPath, i.path),\n    );\n    const newColors = oldColors.map(\n      i => (\n        {\n          ...i,\n          path: !isEqual(i.path, dragPath)\n            ? newDragPath.concat(i.path.slice(dragPath.length))\n            : newDragPath,\n        }\n      ),\n    );\n    const newCellSetColor = cellSetColor.filter(\n      i => !isEqualOrPrefix(dragPath, i.path),\n    );\n    newCellSetColor.push(...newColors);\n    setCellSetColor(newCellSetColor);\n  }\n\n  // The user wants to change the color of a cell set node.\n  function onNodeSetColor(targetPath, color) {\n    // Replace the color if an array element for this path already exists.\n    const prevNodeColor = cellSetColor?.find(d => isEqual(d.path, targetPath));\n    if (!prevNodeColor) {\n      setCellSetColor([\n        ...(cellSetColor || []),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    } else {\n      setCellSetColor([\n        ...cellSetColor.filter(d => !isEqual(d.path, targetPath)),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    }\n  }\n\n  // The user wants to change the name of a cell set node.\n  function onNodeSetName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n\n    // Recursively check whether each node path\n    // matches the path or a prefix of the path of the node to rename.\n    // If so, rename the node using the new path.\n    function renameNode(node, prevPath) {\n      if (isEqual([...prevPath, node.name], targetPath)) {\n        return {\n          ...node,\n          name,\n        };\n      }\n      if (!node.children) {\n        return node;\n      }\n      return {\n        ...node,\n        children: node.children.map(c => renameNode(c, [...prevPath, node.name])),\n      };\n    }\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => renameNode(lzn, [])),\n    };\n    // Change all paths that have this node as a prefix (i.e. descendants).\n    const nextCellSetColor = cellSetColor.map(d => ({\n      path: tryRenamePath(targetPath, d.path, nextNamePath),\n      color: d.color,\n    }));\n    const nextCellSetSelection = cellSetSelection.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    const nextCellSetExpansion = cellSetExpansion.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    // Need to update the node path everywhere it may be present.\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // Each time the user types while renaming a cell set node,\n  // we need to check whether the potential new name conflicts\n  // with any existing cell set node names.\n  // If there are conflicts, we want to disable the \"Save\" button.\n  function onNodeCheckNewName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n    const hasConflicts = (\n      !isEqual(targetPath, nextNamePath)\n      && treeFindNodeByNamePath(additionalCellSets, nextNamePath)\n    );\n    return hasConflicts;\n  }\n\n  // The user wants to delete a cell set node, and has confirmed their choice.\n  function onNodeRemove(targetPath) {\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], targetPath)).filter(Boolean),\n    };\n    // Delete state for all paths that have this node\n    // path as a prefix (i.e. delete all descendents).\n    const nextCellSetColor = cellSetColor.filter(d => !isEqualOrPrefix(targetPath, d.path));\n    const nextCellSetSelection = cellSetSelection.filter(d => !isEqualOrPrefix(targetPath, d));\n    const nextCellSetExpansion = cellSetExpansion.filter(d => !isEqualOrPrefix(targetPath, d));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // The user wants to view (i.e. select) a particular node,\n  // or its expanded descendents.\n  function onNodeView(targetPath) {\n    // If parent node is clicked, and if it is expanded,\n    // then select the expanded descendent nodes.\n    const setsToView = [];\n    // Recursively determine which descendent nodes are currently expanded.\n    function viewNode(node, nodePath) {\n      if (cellSetExpansion.find(expandedPath => isEqual(nodePath, expandedPath))) {\n        if (node.children) {\n          node.children.forEach((c) => {\n            viewNode(c, [...nodePath, c.name]);\n          });\n        } else {\n          setsToView.push(nodePath);\n        }\n      } else {\n        setsToView.push(nodePath);\n      }\n    }\n    const targetNode = treeFindNodeByNamePath(mergedCellSets, targetPath);\n    viewNode(targetNode, targetPath);\n    setCellSetSelection(setsToView);\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to create a new level zero node.\n  function onCreateLevelZeroNode() {\n    const nextName = getNextNumberedNodeName(additionalCellSets?.tree, 'My hierarchy ');\n    setAdditionalCellSets({\n      ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n      tree: [\n        ...(additionalCellSets ? additionalCellSets.tree : []),\n        {\n          name: nextName,\n          children: [],\n        },\n      ],\n    });\n  }\n\n  // The user wants to create a new node corresponding to\n  // the union of the selected sets.\n  function onUnion() {\n    const newSet = treeToUnion(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Union ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the intersection of the selected sets.\n  function onIntersection() {\n    const newSet = treeToIntersection(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Intersection ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the complement of the selected sets.\n  function onComplement() {\n    const newSet = treeToComplement(mergedCellSets, cellSetSelection, allCellIds);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Complement ',\n    );\n  }\n\n  // The user wants to import a cell set hierarchy,\n  // probably from a CSV or JSON file.\n  function onImportTree(treeToImport) {\n    // Check for any naming conflicts with the current sets\n    // (both user-defined and dataset-defined) before importing.\n    const hasConflict = treesConflict(mergedCellSets, treeToImport);\n    if (!hasConflict) {\n      setAdditionalCellSets({\n        ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n        tree: [\n          ...(additionalCellSets ? additionalCellSets.tree : []),\n          ...treeToImport.tree,\n        ],\n      });\n      // Automatically initialize set colors for the imported sets.\n      const importAutoSetColors = initializeCellSetColor(treeToImport, cellSetColor);\n      setCellSetColor([\n        ...cellSetColor,\n        ...importAutoSetColors,\n      ]);\n    }\n  }\n\n  // The user wants to download a particular hierarchy to a JSON file.\n  function onExportLevelZeroNodeJSON(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor);\n    downloadForUser(\n      handleExportJSON(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_JSON}`,\n    );\n  }\n\n  // The user wants to download a particular hierarchy to a CSV file.\n  function onExportLevelZeroNodeTabular(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor);\n    downloadForUser(\n      handleExportTabular(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_TABULAR}`,\n    );\n  }\n\n  // The user wants to download a particular set to a JSON file.\n  function onExportSetJSON(nodePath) {\n    const { setToExport, nodeName } = treeExportSet(mergedCellSets, nodePath);\n    downloadForUser(\n      handleExportJSON(setToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-set.${FILE_EXTENSION_JSON}`,\n      FILE_EXTENSION_JSON,\n    );\n  }\n  return (\n    <TitleInfo\n      title=\"Cell Sets\"\n      isScroll\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <SetsManager\n        setColor={cellSetColor}\n        sets={cellSets}\n        additionalSets={additionalCellSets}\n        levelSelection={checkedLevel}\n        setSelection={cellSetSelection}\n        setExpansion={cellSetExpansion}\n        hasColorEncoding={cellColorEncoding === 'cellSetSelection'}\n        draggable\n        datatype={SETS_DATATYPE_CELL}\n        onError={setWarning}\n        onCheckNode={onCheckNode}\n        onExpandNode={onExpandNode}\n        onDropNode={onDropNode}\n        onCheckLevel={onCheckLevel}\n        onNodeSetColor={onNodeSetColor}\n        onNodeSetName={onNodeSetName}\n        onNodeCheckNewName={onNodeCheckNewName}\n        onNodeRemove={onNodeRemove}\n        onNodeView={onNodeView}\n        onImportTree={onImportTree}\n        onCreateLevelZeroNode={onCreateLevelZeroNode}\n        onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n        onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n        onExportSetJSON={onExportSetJSON}\n        onUnion={onUnion}\n        onIntersection={onIntersection}\n        onComplement={onComplement}\n        hasCheckedSetsToUnion={cellSetSelection?.length > 1}\n        hasCheckedSetsToIntersect={cellSetSelection?.length > 1}\n        hasCheckedSetsToComplement={cellSetSelection?.length > 0}\n      />\n    </TitleInfo>\n  );\n}\n","import React, { useMemo, useEffect } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { mergeCellSets } from '../utils';\nimport { useCellSetsData } from '../data-hooks';\nimport { treeToSetSizesBySetNames } from './cell-set-utils';\nimport CellSetSizesPlot from './CellSetSizesPlot';\n\nconst CELL_SET_SIZES_DATA_TYPES = ['cell-sets'];\n\n/**\n * A subscriber component for `CellSetSizePlot`,\n * which listens for cell sets data updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {function} props.onReady The function to call when the subscriptions\n * have been made.\n * @param {string} props.theme The name of the current Vitessce theme.\n */\nexport default function CellSetSizesPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetSizes, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    CELL_SET_SIZES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true);\n\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // From the cell sets hierarchy and the list of selected cell sets,\n  // generate the array of set sizes data points for the bar plot.\n  const data = useMemo(() => (mergedCellSets && cellSetSelection\n    ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor)\n    : []\n  ), [mergedCellSets, cellSetSelection, cellSetColor]);\n\n  return (\n    <TitleInfo\n      title=\"Cell Set Sizes\"\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        <CellSetSizesPlot\n          data={data}\n          theme={theme}\n          width={width}\n          height={height}\n        />\n      </div>\n    </TitleInfo>\n  );\n}\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu } from '../shared-mui/components';\n\nconst useStyles = makeStyles(() => ({\n  addButton: {\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontWeight: 400,\n  },\n}));\n\nfunction ImageAddIcon() {\n  return (\n    <>\n      <AddIcon />\n      Add Image Layer\n    </>\n  );\n}\n\nfunction ImageAddButton({ imageOptions, handleImageAdd }) {\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n\n  const handleAdd = (imgData) => {\n    toggle();\n    handleImageAdd(imgData);\n  };\n\n  if (!imageOptions) return null;\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<ImageAddIcon />}\n      buttonClassName={classes.addButton}\n    >\n      {imageOptions.map((imgData, i) => (\n        <MenuItem dense key={imgData.name} onClick={() => handleAdd(i)}>\n          <span>{imgData.name}</span>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nexport default ImageAddButton;\n","/* eslint-disable dot-notation */\nimport React, { useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TitleInfo from '../TitleInfo';\nimport RasterLayerController from './RasterLayerController';\nimport VectorLayerController from './VectorLayerController';\nimport ImageAddButton from './ImageAddButton';\nimport { useReady } from '../hooks';\nimport { useRasterData } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { initializeLayerChannels } from '../spatial/utils';\nimport { DEFAULT_RASTER_LAYER_PROPS } from '../spatial/constants';\n\nconst LAYER_CONTROLLER_DATA_TYPES = ['raster'];\n\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialLayers: layers,\n  }, {\n    setSpatialLayers: setLayers,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    LAYER_CONTROLLER_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n  );\n\n  const handleImageAdd = async (index) => {\n    const loader = imageLayerLoaders[index];\n    const newChannels = await initializeLayerChannels(loader);\n    const newLayer = {\n      type: 'raster',\n      index,\n      modelMatrix: imageLayerMeta[index]?.metadata?.transform?.matrix,\n      ...DEFAULT_RASTER_LAYER_PROPS,\n      channels: newChannels,\n    };\n    const newLayers = [...layers, newLayer];\n    setLayers(newLayers);\n  };\n\n  function handleLayerChange(newLayer, i) {\n    const newLayers = [...layers];\n    newLayers[i] = newLayer;\n    setLayers(newLayers);\n  }\n\n  function handleLayerRemove(i) {\n    const newLayers = [...layers];\n    newLayers.splice(i, 1);\n    setLayers(newLayers);\n  }\n\n  return (\n    <TitleInfo\n      title=\"Spatial Layers\"\n      isScroll\n      removeGridComponent={removeGridComponent}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div className=\"layer-controller-container\">\n        {layers && layers.map((layer, i) => {\n          if (layer.type === 'cells') {\n            return (\n              <VectorLayerController\n                key={`${dataset}-cells`}\n                label=\"Cell Segmentations\"\n                layer={layer}\n                handleLayerChange={v => handleLayerChange(v, i)}\n              />\n            );\n          } if (layer.type === 'molecules') {\n            return (\n              <VectorLayerController\n                key={`${dataset}-molecules`}\n                label=\"Molecules\"\n                layer={layer}\n                handleLayerChange={v => handleLayerChange(v, i)}\n              />\n            );\n          } if (layer.type === 'raster') {\n            const { index } = layer;\n            const loader = imageLayerLoaders[index];\n            const layerMeta = imageLayerMeta[index];\n            return (loader && layerMeta ? (\n              // eslint-disable-next-line react/no-array-index-key\n              <Grid key={`${dataset}-raster-${index}-${i}`} item style={{ marginTop: '10px' }}>\n                <RasterLayerController\n                  name={layerMeta.name}\n                  layer={layer}\n                  loader={loader}\n                  theme={theme}\n                  handleLayerChange={v => handleLayerChange(v, i)}\n                  handleLayerRemove={() => handleLayerRemove(i)}\n                />\n              </Grid>\n            ) : null);\n          }\n          return null;\n        })}\n        <Grid item>\n          <ImageAddButton\n            imageOptions={imageLayerMeta}\n            handleImageAdd={handleImageAdd}\n          />\n        </Grid>\n      </div>\n    </TitleInfo>\n  );\n}\n\nexport default LayerControllerSubscriber;\n","module.exports = function() {\n  return require(\"!!/home/runner/work/vitessce/vitessce/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"./\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = 23);\\n/******/ })\\n/************************************************************************/\\n/******/ ([\\n/* 0 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar createRange = __webpack_require__(6);\\n/**\\n * Creates an array of numbers (positive and/or negative) progressing from\\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\\n * `start` is specified without an `end` or `step`. If `end` is not specified,\\n * it's set to `start` with `start` then set to `0`.\\n *\\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\\n * floating-point values which can produce unexpected results.\\n *\\n * @static\\n * @since 0.1.0\\n * @memberOf _\\n * @category Util\\n * @param {number} [start=0] The start of the range.\\n * @param {number} end The end of the range.\\n * @param {number} [step=1] The value to increment or decrement by.\\n * @returns {Array} Returns the range of numbers.\\n * @see _.inRange, _.rangeRight\\n * @example\\n *\\n * _.range(4);\\n * // => [0, 1, 2, 3]\\n *\\n * _.range(-4);\\n * // => [0, -1, -2, -3]\\n *\\n * _.range(1, 5);\\n * // => [1, 2, 3, 4]\\n *\\n * _.range(0, 20, 5);\\n * // => [0, 5, 10, 15]\\n *\\n * _.range(0, -4, -1);\\n * // => [0, -1, -2, -3]\\n *\\n * _.range(1, 4, 0);\\n * // => [1, 1, 1]\\n *\\n * _.range(0);\\n * // => []\\n */\\n\\n\\nvar range = createRange();\\nmodule.exports = range;\\n\\n/***/ }),\\n/* 1 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * Checks if `value` is the\\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\\n *\\n * @static\\n * @memberOf _\\n * @since 0.1.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\\n * @example\\n *\\n * _.isObject({});\\n * // => true\\n *\\n * _.isObject([1, 2, 3]);\\n * // => true\\n *\\n * _.isObject(_.noop);\\n * // => true\\n *\\n * _.isObject(null);\\n * // => false\\n */\\nfunction isObject(value) {\\n  var type = typeof value;\\n  return value != null && (type == 'object' || type == 'function');\\n}\\n\\nmodule.exports = isObject;\\n\\n/***/ }),\\n/* 2 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseClamp = __webpack_require__(22),\\n    toNumber = __webpack_require__(5);\\n/**\\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Number\\n * @param {number} number The number to clamp.\\n * @param {number} [lower] The lower bound.\\n * @param {number} upper The upper bound.\\n * @returns {number} Returns the clamped number.\\n * @example\\n *\\n * _.clamp(-10, -5, 5);\\n * // => -5\\n *\\n * _.clamp(10, -5, 5);\\n * // => 5\\n */\\n\\n\\nfunction clamp(number, lower, upper) {\\n  if (upper === undefined) {\\n    upper = lower;\\n    lower = undefined;\\n  }\\n\\n  if (upper !== undefined) {\\n    upper = toNumber(upper);\\n    upper = upper === upper ? upper : 0;\\n  }\\n\\n  if (lower !== undefined) {\\n    lower = toNumber(lower);\\n    lower = lower === lower ? lower : 0;\\n  }\\n\\n  return baseClamp(toNumber(number), lower, upper);\\n}\\n\\nmodule.exports = clamp;\\n\\n/***/ }),\\n/* 3 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar Symbol = __webpack_require__(4),\\n    getRawTag = __webpack_require__(15),\\n    objectToString = __webpack_require__(16);\\n/** `Object#toString` result references. */\\n\\n\\nvar nullTag = '[object Null]',\\n    undefinedTag = '[object Undefined]';\\n/** Built-in value references. */\\n\\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\\n/**\\n * The base implementation of `getTag` without fallbacks for buggy environments.\\n *\\n * @private\\n * @param {*} value The value to query.\\n * @returns {string} Returns the `toStringTag`.\\n */\\n\\nfunction baseGetTag(value) {\\n  if (value == null) {\\n    return value === undefined ? undefinedTag : nullTag;\\n  }\\n\\n  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\\n}\\n\\nmodule.exports = baseGetTag;\\n\\n/***/ }),\\n/* 4 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar root = __webpack_require__(12);\\n/** Built-in value references. */\\n\\n\\nvar Symbol = root.Symbol;\\nmodule.exports = Symbol;\\n\\n/***/ }),\\n/* 5 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar isObject = __webpack_require__(1),\\n    isSymbol = __webpack_require__(20);\\n/** Used as references for various `Number` constants. */\\n\\n\\nvar NAN = 0 / 0;\\n/** Used to match leading and trailing whitespace. */\\n\\nvar reTrim = /^\\\\s+|\\\\s+$/g;\\n/** Used to detect bad signed hexadecimal string values. */\\n\\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\\n/** Used to detect binary string values. */\\n\\nvar reIsBinary = /^0b[01]+$/i;\\n/** Used to detect octal string values. */\\n\\nvar reIsOctal = /^0o[0-7]+$/i;\\n/** Built-in method references without a dependency on `root`. */\\n\\nvar freeParseInt = parseInt;\\n/**\\n * Converts `value` to a number.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to process.\\n * @returns {number} Returns the number.\\n * @example\\n *\\n * _.toNumber(3.2);\\n * // => 3.2\\n *\\n * _.toNumber(Number.MIN_VALUE);\\n * // => 5e-324\\n *\\n * _.toNumber(Infinity);\\n * // => Infinity\\n *\\n * _.toNumber('3.2');\\n * // => 3.2\\n */\\n\\nfunction toNumber(value) {\\n  if (typeof value == 'number') {\\n    return value;\\n  }\\n\\n  if (isSymbol(value)) {\\n    return NAN;\\n  }\\n\\n  if (isObject(value)) {\\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\\n    value = isObject(other) ? other + '' : other;\\n  }\\n\\n  if (typeof value != 'string') {\\n    return value === 0 ? value : +value;\\n  }\\n\\n  value = value.replace(reTrim, '');\\n  var isBinary = reIsBinary.test(value);\\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\\n}\\n\\nmodule.exports = toNumber;\\n\\n/***/ }),\\n/* 6 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseRange = __webpack_require__(7),\\n    isIterateeCall = __webpack_require__(8),\\n    toFinite = __webpack_require__(19);\\n/**\\n * Creates a `_.range` or `_.rangeRight` function.\\n *\\n * @private\\n * @param {boolean} [fromRight] Specify iterating from right to left.\\n * @returns {Function} Returns the new range function.\\n */\\n\\n\\nfunction createRange(fromRight) {\\n  return function (start, end, step) {\\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\\n      end = step = undefined;\\n    } // Ensure the sign of `-0` is preserved.\\n\\n\\n    start = toFinite(start);\\n\\n    if (end === undefined) {\\n      end = start;\\n      start = 0;\\n    } else {\\n      end = toFinite(end);\\n    }\\n\\n    step = step === undefined ? start < end ? 1 : -1 : toFinite(step);\\n    return baseRange(start, end, step, fromRight);\\n  };\\n}\\n\\nmodule.exports = createRange;\\n\\n/***/ }),\\n/* 7 */\\n/***/ (function(module, exports) {\\n\\n/* Built-in method references for those with the same name as other `lodash` methods. */\\nvar nativeCeil = Math.ceil,\\n    nativeMax = Math.max;\\n/**\\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\\n * coerce arguments.\\n *\\n * @private\\n * @param {number} start The start of the range.\\n * @param {number} end The end of the range.\\n * @param {number} step The value to increment or decrement by.\\n * @param {boolean} [fromRight] Specify iterating from right to left.\\n * @returns {Array} Returns the range of numbers.\\n */\\n\\nfunction baseRange(start, end, step, fromRight) {\\n  var index = -1,\\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\\n      result = Array(length);\\n\\n  while (length--) {\\n    result[fromRight ? length : ++index] = start;\\n    start += step;\\n  }\\n\\n  return result;\\n}\\n\\nmodule.exports = baseRange;\\n\\n/***/ }),\\n/* 8 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar eq = __webpack_require__(9),\\n    isArrayLike = __webpack_require__(10),\\n    isIndex = __webpack_require__(18),\\n    isObject = __webpack_require__(1);\\n/**\\n * Checks if the given arguments are from an iteratee call.\\n *\\n * @private\\n * @param {*} value The potential iteratee value argument.\\n * @param {*} index The potential iteratee index or key argument.\\n * @param {*} object The potential iteratee object argument.\\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\\n *  else `false`.\\n */\\n\\n\\nfunction isIterateeCall(value, index, object) {\\n  if (!isObject(object)) {\\n    return false;\\n  }\\n\\n  var type = typeof index;\\n\\n  if (type == 'number' ? isArrayLike(object) && isIndex(index, object.length) : type == 'string' && index in object) {\\n    return eq(object[index], value);\\n  }\\n\\n  return false;\\n}\\n\\nmodule.exports = isIterateeCall;\\n\\n/***/ }),\\n/* 9 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * Performs a\\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\\n * comparison between two values to determine if they are equivalent.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to compare.\\n * @param {*} other The other value to compare.\\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\\n * @example\\n *\\n * var object = { 'a': 1 };\\n * var other = { 'a': 1 };\\n *\\n * _.eq(object, object);\\n * // => true\\n *\\n * _.eq(object, other);\\n * // => false\\n *\\n * _.eq('a', 'a');\\n * // => true\\n *\\n * _.eq('a', Object('a'));\\n * // => false\\n *\\n * _.eq(NaN, NaN);\\n * // => true\\n */\\nfunction eq(value, other) {\\n  return value === other || value !== value && other !== other;\\n}\\n\\nmodule.exports = eq;\\n\\n/***/ }),\\n/* 10 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar isFunction = __webpack_require__(11),\\n    isLength = __webpack_require__(17);\\n/**\\n * Checks if `value` is array-like. A value is considered array-like if it's\\n * not a function and has a `value.length` that's an integer greater than or\\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\\n * @example\\n *\\n * _.isArrayLike([1, 2, 3]);\\n * // => true\\n *\\n * _.isArrayLike(document.body.children);\\n * // => true\\n *\\n * _.isArrayLike('abc');\\n * // => true\\n *\\n * _.isArrayLike(_.noop);\\n * // => false\\n */\\n\\n\\nfunction isArrayLike(value) {\\n  return value != null && isLength(value.length) && !isFunction(value);\\n}\\n\\nmodule.exports = isArrayLike;\\n\\n/***/ }),\\n/* 11 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseGetTag = __webpack_require__(3),\\n    isObject = __webpack_require__(1);\\n/** `Object#toString` result references. */\\n\\n\\nvar asyncTag = '[object AsyncFunction]',\\n    funcTag = '[object Function]',\\n    genTag = '[object GeneratorFunction]',\\n    proxyTag = '[object Proxy]';\\n/**\\n * Checks if `value` is classified as a `Function` object.\\n *\\n * @static\\n * @memberOf _\\n * @since 0.1.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\\n * @example\\n *\\n * _.isFunction(_);\\n * // => true\\n *\\n * _.isFunction(/abc/);\\n * // => false\\n */\\n\\nfunction isFunction(value) {\\n  if (!isObject(value)) {\\n    return false;\\n  } // The use of `Object#toString` avoids issues with the `typeof` operator\\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\\n\\n\\n  var tag = baseGetTag(value);\\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\\n}\\n\\nmodule.exports = isFunction;\\n\\n/***/ }),\\n/* 12 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar freeGlobal = __webpack_require__(13);\\n/** Detect free variable `self`. */\\n\\n\\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\\n/** Used as a reference to the global object. */\\n\\nvar root = freeGlobal || freeSelf || Function('return this')();\\nmodule.exports = root;\\n\\n/***/ }),\\n/* 13 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */\\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\\nmodule.exports = freeGlobal;\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(14)))\\n\\n/***/ }),\\n/* 14 */\\n/***/ (function(module, exports) {\\n\\nvar g; // This works in non-strict mode\\n\\ng = function () {\\n  return this;\\n}();\\n\\ntry {\\n  // This works if eval is allowed (see CSP)\\n  g = g || new Function(\\\"return this\\\")();\\n} catch (e) {\\n  // This works if the window reference is available\\n  if (typeof window === \\\"object\\\") g = window;\\n} // g can still be undefined, but nothing to do about it...\\n// We return undefined, instead of nothing here, so it's\\n// easier to handle this case. if(!global) { ...}\\n\\n\\nmodule.exports = g;\\n\\n/***/ }),\\n/* 15 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar Symbol = __webpack_require__(4);\\n/** Used for built-in method references. */\\n\\n\\nvar objectProto = Object.prototype;\\n/** Used to check objects for own properties. */\\n\\nvar hasOwnProperty = objectProto.hasOwnProperty;\\n/**\\n * Used to resolve the\\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\\n * of values.\\n */\\n\\nvar nativeObjectToString = objectProto.toString;\\n/** Built-in value references. */\\n\\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\\n/**\\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\\n *\\n * @private\\n * @param {*} value The value to query.\\n * @returns {string} Returns the raw `toStringTag`.\\n */\\n\\nfunction getRawTag(value) {\\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\\n      tag = value[symToStringTag];\\n\\n  try {\\n    value[symToStringTag] = undefined;\\n    var unmasked = true;\\n  } catch (e) {}\\n\\n  var result = nativeObjectToString.call(value);\\n\\n  if (unmasked) {\\n    if (isOwn) {\\n      value[symToStringTag] = tag;\\n    } else {\\n      delete value[symToStringTag];\\n    }\\n  }\\n\\n  return result;\\n}\\n\\nmodule.exports = getRawTag;\\n\\n/***/ }),\\n/* 16 */\\n/***/ (function(module, exports) {\\n\\n/** Used for built-in method references. */\\nvar objectProto = Object.prototype;\\n/**\\n * Used to resolve the\\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\\n * of values.\\n */\\n\\nvar nativeObjectToString = objectProto.toString;\\n/**\\n * Converts `value` to a string using `Object.prototype.toString`.\\n *\\n * @private\\n * @param {*} value The value to convert.\\n * @returns {string} Returns the converted string.\\n */\\n\\nfunction objectToString(value) {\\n  return nativeObjectToString.call(value);\\n}\\n\\nmodule.exports = objectToString;\\n\\n/***/ }),\\n/* 17 */\\n/***/ (function(module, exports) {\\n\\n/** Used as references for various `Number` constants. */\\nvar MAX_SAFE_INTEGER = 9007199254740991;\\n/**\\n * Checks if `value` is a valid array-like length.\\n *\\n * **Note:** This method is loosely based on\\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\\n * @example\\n *\\n * _.isLength(3);\\n * // => true\\n *\\n * _.isLength(Number.MIN_VALUE);\\n * // => false\\n *\\n * _.isLength(Infinity);\\n * // => false\\n *\\n * _.isLength('3');\\n * // => false\\n */\\n\\nfunction isLength(value) {\\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\\n}\\n\\nmodule.exports = isLength;\\n\\n/***/ }),\\n/* 18 */\\n/***/ (function(module, exports) {\\n\\n/** Used as references for various `Number` constants. */\\nvar MAX_SAFE_INTEGER = 9007199254740991;\\n/** Used to detect unsigned integer values. */\\n\\nvar reIsUint = /^(?:0|[1-9]\\\\d*)$/;\\n/**\\n * Checks if `value` is a valid array-like index.\\n *\\n * @private\\n * @param {*} value The value to check.\\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\\n */\\n\\nfunction isIndex(value, length) {\\n  var type = typeof value;\\n  length = length == null ? MAX_SAFE_INTEGER : length;\\n  return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\\n}\\n\\nmodule.exports = isIndex;\\n\\n/***/ }),\\n/* 19 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar toNumber = __webpack_require__(5);\\n/** Used as references for various `Number` constants. */\\n\\n\\nvar INFINITY = 1 / 0,\\n    MAX_INTEGER = 1.7976931348623157e+308;\\n/**\\n * Converts `value` to a finite number.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.12.0\\n * @category Lang\\n * @param {*} value The value to convert.\\n * @returns {number} Returns the converted number.\\n * @example\\n *\\n * _.toFinite(3.2);\\n * // => 3.2\\n *\\n * _.toFinite(Number.MIN_VALUE);\\n * // => 5e-324\\n *\\n * _.toFinite(Infinity);\\n * // => 1.7976931348623157e+308\\n *\\n * _.toFinite('3.2');\\n * // => 3.2\\n */\\n\\nfunction toFinite(value) {\\n  if (!value) {\\n    return value === 0 ? value : 0;\\n  }\\n\\n  value = toNumber(value);\\n\\n  if (value === INFINITY || value === -INFINITY) {\\n    var sign = value < 0 ? -1 : 1;\\n    return sign * MAX_INTEGER;\\n  }\\n\\n  return value === value ? value : 0;\\n}\\n\\nmodule.exports = toFinite;\\n\\n/***/ }),\\n/* 20 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseGetTag = __webpack_require__(3),\\n    isObjectLike = __webpack_require__(21);\\n/** `Object#toString` result references. */\\n\\n\\nvar symbolTag = '[object Symbol]';\\n/**\\n * Checks if `value` is classified as a `Symbol` primitive or object.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\\n * @example\\n *\\n * _.isSymbol(Symbol.iterator);\\n * // => true\\n *\\n * _.isSymbol('abc');\\n * // => false\\n */\\n\\nfunction isSymbol(value) {\\n  return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;\\n}\\n\\nmodule.exports = isSymbol;\\n\\n/***/ }),\\n/* 21 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * Checks if `value` is object-like. A value is object-like if it's not `null`\\n * and has a `typeof` result of \\\"object\\\".\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\\n * @example\\n *\\n * _.isObjectLike({});\\n * // => true\\n *\\n * _.isObjectLike([1, 2, 3]);\\n * // => true\\n *\\n * _.isObjectLike(_.noop);\\n * // => false\\n *\\n * _.isObjectLike(null);\\n * // => false\\n */\\nfunction isObjectLike(value) {\\n  return value != null && typeof value == 'object';\\n}\\n\\nmodule.exports = isObjectLike;\\n\\n/***/ }),\\n/* 22 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * The base implementation of `_.clamp` which doesn't coerce arguments.\\n *\\n * @private\\n * @param {number} number The number to clamp.\\n * @param {number} [lower] The lower bound.\\n * @param {number} upper The upper bound.\\n * @returns {number} Returns the clamped number.\\n */\\nfunction baseClamp(number, lower, upper) {\\n  if (number === number) {\\n    if (upper !== undefined) {\\n      number = number <= upper ? number : upper;\\n    }\\n\\n    if (lower !== undefined) {\\n      number = number >= lower ? number : lower;\\n    }\\n  }\\n\\n  return number;\\n}\\n\\nmodule.exports = baseClamp;\\n\\n/***/ }),\\n/* 23 */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n__webpack_require__.r(__webpack_exports__);\\n\\n// EXTERNAL MODULE: ./node_modules/lodash/range.js\\nvar range = __webpack_require__(0);\\nvar range_default = /*#__PURE__*/__webpack_require__.n(range);\\n\\n// EXTERNAL MODULE: ./node_modules/lodash/clamp.js\\nvar clamp = __webpack_require__(2);\\nvar clamp_default = /*#__PURE__*/__webpack_require__.n(clamp);\\n\\n// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\\nfunction _defineProperty(obj, key, value) {\\n  if (key in obj) {\\n    Object.defineProperty(obj, key, {\\n      value: value,\\n      enumerable: true,\\n      configurable: true,\\n      writable: true\\n    });\\n  } else {\\n    obj[key] = value;\\n  }\\n\\n  return obj;\\n}\\n// CONCATENATED MODULE: ./node_modules/@luma.gl/constants/dist/esm/index.js\\n/* harmony default export */ var esm = ({\\n  DEPTH_BUFFER_BIT: 0x00000100,\\n  STENCIL_BUFFER_BIT: 0x00000400,\\n  COLOR_BUFFER_BIT: 0x00004000,\\n  POINTS: 0x0000,\\n  LINES: 0x0001,\\n  LINE_LOOP: 0x0002,\\n  LINE_STRIP: 0x0003,\\n  TRIANGLES: 0x0004,\\n  TRIANGLE_STRIP: 0x0005,\\n  TRIANGLE_FAN: 0x0006,\\n  ZERO: 0,\\n  ONE: 1,\\n  SRC_COLOR: 0x0300,\\n  ONE_MINUS_SRC_COLOR: 0x0301,\\n  SRC_ALPHA: 0x0302,\\n  ONE_MINUS_SRC_ALPHA: 0x0303,\\n  DST_ALPHA: 0x0304,\\n  ONE_MINUS_DST_ALPHA: 0x0305,\\n  DST_COLOR: 0x0306,\\n  ONE_MINUS_DST_COLOR: 0x0307,\\n  SRC_ALPHA_SATURATE: 0x0308,\\n  CONSTANT_COLOR: 0x8001,\\n  ONE_MINUS_CONSTANT_COLOR: 0x8002,\\n  CONSTANT_ALPHA: 0x8003,\\n  ONE_MINUS_CONSTANT_ALPHA: 0x8004,\\n  FUNC_ADD: 0x8006,\\n  FUNC_SUBTRACT: 0x800a,\\n  FUNC_REVERSE_SUBTRACT: 0x800b,\\n  BLEND_EQUATION: 0x8009,\\n  BLEND_EQUATION_RGB: 0x8009,\\n  BLEND_EQUATION_ALPHA: 0x883d,\\n  BLEND_DST_RGB: 0x80c8,\\n  BLEND_SRC_RGB: 0x80c9,\\n  BLEND_DST_ALPHA: 0x80ca,\\n  BLEND_SRC_ALPHA: 0x80cb,\\n  BLEND_COLOR: 0x8005,\\n  ARRAY_BUFFER_BINDING: 0x8894,\\n  ELEMENT_ARRAY_BUFFER_BINDING: 0x8895,\\n  LINE_WIDTH: 0x0b21,\\n  ALIASED_POINT_SIZE_RANGE: 0x846d,\\n  ALIASED_LINE_WIDTH_RANGE: 0x846e,\\n  CULL_FACE_MODE: 0x0b45,\\n  FRONT_FACE: 0x0b46,\\n  DEPTH_RANGE: 0x0b70,\\n  DEPTH_WRITEMASK: 0x0b72,\\n  DEPTH_CLEAR_VALUE: 0x0b73,\\n  DEPTH_FUNC: 0x0b74,\\n  STENCIL_CLEAR_VALUE: 0x0b91,\\n  STENCIL_FUNC: 0x0b92,\\n  STENCIL_FAIL: 0x0b94,\\n  STENCIL_PASS_DEPTH_FAIL: 0x0b95,\\n  STENCIL_PASS_DEPTH_PASS: 0x0b96,\\n  STENCIL_REF: 0x0b97,\\n  STENCIL_VALUE_MASK: 0x0b93,\\n  STENCIL_WRITEMASK: 0x0b98,\\n  STENCIL_BACK_FUNC: 0x8800,\\n  STENCIL_BACK_FAIL: 0x8801,\\n  STENCIL_BACK_PASS_DEPTH_FAIL: 0x8802,\\n  STENCIL_BACK_PASS_DEPTH_PASS: 0x8803,\\n  STENCIL_BACK_REF: 0x8ca3,\\n  STENCIL_BACK_VALUE_MASK: 0x8ca4,\\n  STENCIL_BACK_WRITEMASK: 0x8ca5,\\n  VIEWPORT: 0x0ba2,\\n  SCISSOR_BOX: 0x0c10,\\n  COLOR_CLEAR_VALUE: 0x0c22,\\n  COLOR_WRITEMASK: 0x0c23,\\n  UNPACK_ALIGNMENT: 0x0cf5,\\n  PACK_ALIGNMENT: 0x0d05,\\n  MAX_TEXTURE_SIZE: 0x0d33,\\n  MAX_VIEWPORT_DIMS: 0x0d3a,\\n  SUBPIXEL_BITS: 0x0d50,\\n  RED_BITS: 0x0d52,\\n  GREEN_BITS: 0x0d53,\\n  BLUE_BITS: 0x0d54,\\n  ALPHA_BITS: 0x0d55,\\n  DEPTH_BITS: 0x0d56,\\n  STENCIL_BITS: 0x0d57,\\n  POLYGON_OFFSET_UNITS: 0x2a00,\\n  POLYGON_OFFSET_FACTOR: 0x8038,\\n  TEXTURE_BINDING_2D: 0x8069,\\n  SAMPLE_BUFFERS: 0x80a8,\\n  SAMPLES: 0x80a9,\\n  SAMPLE_COVERAGE_VALUE: 0x80aa,\\n  SAMPLE_COVERAGE_INVERT: 0x80ab,\\n  COMPRESSED_TEXTURE_FORMATS: 0x86a3,\\n  VENDOR: 0x1f00,\\n  RENDERER: 0x1f01,\\n  VERSION: 0x1f02,\\n  IMPLEMENTATION_COLOR_READ_TYPE: 0x8b9a,\\n  IMPLEMENTATION_COLOR_READ_FORMAT: 0x8b9b,\\n  BROWSER_DEFAULT_WEBGL: 0x9244,\\n  STATIC_DRAW: 0x88e4,\\n  STREAM_DRAW: 0x88e0,\\n  DYNAMIC_DRAW: 0x88e8,\\n  ARRAY_BUFFER: 0x8892,\\n  ELEMENT_ARRAY_BUFFER: 0x8893,\\n  BUFFER_SIZE: 0x8764,\\n  BUFFER_USAGE: 0x8765,\\n  CURRENT_VERTEX_ATTRIB: 0x8626,\\n  VERTEX_ATTRIB_ARRAY_ENABLED: 0x8622,\\n  VERTEX_ATTRIB_ARRAY_SIZE: 0x8623,\\n  VERTEX_ATTRIB_ARRAY_STRIDE: 0x8624,\\n  VERTEX_ATTRIB_ARRAY_TYPE: 0x8625,\\n  VERTEX_ATTRIB_ARRAY_NORMALIZED: 0x886a,\\n  VERTEX_ATTRIB_ARRAY_POINTER: 0x8645,\\n  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 0x889f,\\n  CULL_FACE: 0x0b44,\\n  FRONT: 0x0404,\\n  BACK: 0x0405,\\n  FRONT_AND_BACK: 0x0408,\\n  BLEND: 0x0be2,\\n  DEPTH_TEST: 0x0b71,\\n  DITHER: 0x0bd0,\\n  POLYGON_OFFSET_FILL: 0x8037,\\n  SAMPLE_ALPHA_TO_COVERAGE: 0x809e,\\n  SAMPLE_COVERAGE: 0x80a0,\\n  SCISSOR_TEST: 0x0c11,\\n  STENCIL_TEST: 0x0b90,\\n  NO_ERROR: 0,\\n  INVALID_ENUM: 0x0500,\\n  INVALID_VALUE: 0x0501,\\n  INVALID_OPERATION: 0x0502,\\n  OUT_OF_MEMORY: 0x0505,\\n  CONTEXT_LOST_WEBGL: 0x9242,\\n  CW: 0x0900,\\n  CCW: 0x0901,\\n  DONT_CARE: 0x1100,\\n  FASTEST: 0x1101,\\n  NICEST: 0x1102,\\n  GENERATE_MIPMAP_HINT: 0x8192,\\n  BYTE: 0x1400,\\n  UNSIGNED_BYTE: 0x1401,\\n  SHORT: 0x1402,\\n  UNSIGNED_SHORT: 0x1403,\\n  INT: 0x1404,\\n  UNSIGNED_INT: 0x1405,\\n  FLOAT: 0x1406,\\n  DOUBLE: 0x140a,\\n  DEPTH_COMPONENT: 0x1902,\\n  ALPHA: 0x1906,\\n  RGB: 0x1907,\\n  RGBA: 0x1908,\\n  LUMINANCE: 0x1909,\\n  LUMINANCE_ALPHA: 0x190a,\\n  UNSIGNED_SHORT_4_4_4_4: 0x8033,\\n  UNSIGNED_SHORT_5_5_5_1: 0x8034,\\n  UNSIGNED_SHORT_5_6_5: 0x8363,\\n  FRAGMENT_SHADER: 0x8b30,\\n  VERTEX_SHADER: 0x8b31,\\n  COMPILE_STATUS: 0x8b81,\\n  DELETE_STATUS: 0x8b80,\\n  LINK_STATUS: 0x8b82,\\n  VALIDATE_STATUS: 0x8b83,\\n  ATTACHED_SHADERS: 0x8b85,\\n  ACTIVE_ATTRIBUTES: 0x8b89,\\n  ACTIVE_UNIFORMS: 0x8b86,\\n  MAX_VERTEX_ATTRIBS: 0x8869,\\n  MAX_VERTEX_UNIFORM_VECTORS: 0x8dfb,\\n  MAX_VARYING_VECTORS: 0x8dfc,\\n  MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0x8b4d,\\n  MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0x8b4c,\\n  MAX_TEXTURE_IMAGE_UNITS: 0x8872,\\n  MAX_FRAGMENT_UNIFORM_VECTORS: 0x8dfd,\\n  SHADER_TYPE: 0x8b4f,\\n  SHADING_LANGUAGE_VERSION: 0x8b8c,\\n  CURRENT_PROGRAM: 0x8b8d,\\n  NEVER: 0x0200,\\n  ALWAYS: 0x0207,\\n  LESS: 0x0201,\\n  EQUAL: 0x0202,\\n  LEQUAL: 0x0203,\\n  GREATER: 0x0204,\\n  GEQUAL: 0x0206,\\n  NOTEQUAL: 0x0205,\\n  KEEP: 0x1e00,\\n  REPLACE: 0x1e01,\\n  INCR: 0x1e02,\\n  DECR: 0x1e03,\\n  INVERT: 0x150a,\\n  INCR_WRAP: 0x8507,\\n  DECR_WRAP: 0x8508,\\n  NEAREST: 0x2600,\\n  LINEAR: 0x2601,\\n  NEAREST_MIPMAP_NEAREST: 0x2700,\\n  LINEAR_MIPMAP_NEAREST: 0x2701,\\n  NEAREST_MIPMAP_LINEAR: 0x2702,\\n  LINEAR_MIPMAP_LINEAR: 0x2703,\\n  TEXTURE_MAG_FILTER: 0x2800,\\n  TEXTURE_MIN_FILTER: 0x2801,\\n  TEXTURE_WRAP_S: 0x2802,\\n  TEXTURE_WRAP_T: 0x2803,\\n  TEXTURE_2D: 0x0de1,\\n  TEXTURE: 0x1702,\\n  TEXTURE_CUBE_MAP: 0x8513,\\n  TEXTURE_BINDING_CUBE_MAP: 0x8514,\\n  TEXTURE_CUBE_MAP_POSITIVE_X: 0x8515,\\n  TEXTURE_CUBE_MAP_NEGATIVE_X: 0x8516,\\n  TEXTURE_CUBE_MAP_POSITIVE_Y: 0x8517,\\n  TEXTURE_CUBE_MAP_NEGATIVE_Y: 0x8518,\\n  TEXTURE_CUBE_MAP_POSITIVE_Z: 0x8519,\\n  TEXTURE_CUBE_MAP_NEGATIVE_Z: 0x851a,\\n  MAX_CUBE_MAP_TEXTURE_SIZE: 0x851c,\\n  TEXTURE0: 0x84c0,\\n  ACTIVE_TEXTURE: 0x84e0,\\n  REPEAT: 0x2901,\\n  CLAMP_TO_EDGE: 0x812f,\\n  MIRRORED_REPEAT: 0x8370,\\n  TEXTURE_WIDTH: 0x1000,\\n  TEXTURE_HEIGHT: 0x1001,\\n  FLOAT_VEC2: 0x8b50,\\n  FLOAT_VEC3: 0x8b51,\\n  FLOAT_VEC4: 0x8b52,\\n  INT_VEC2: 0x8b53,\\n  INT_VEC3: 0x8b54,\\n  INT_VEC4: 0x8b55,\\n  BOOL: 0x8b56,\\n  BOOL_VEC2: 0x8b57,\\n  BOOL_VEC3: 0x8b58,\\n  BOOL_VEC4: 0x8b59,\\n  FLOAT_MAT2: 0x8b5a,\\n  FLOAT_MAT3: 0x8b5b,\\n  FLOAT_MAT4: 0x8b5c,\\n  SAMPLER_2D: 0x8b5e,\\n  SAMPLER_CUBE: 0x8b60,\\n  LOW_FLOAT: 0x8df0,\\n  MEDIUM_FLOAT: 0x8df1,\\n  HIGH_FLOAT: 0x8df2,\\n  LOW_INT: 0x8df3,\\n  MEDIUM_INT: 0x8df4,\\n  HIGH_INT: 0x8df5,\\n  FRAMEBUFFER: 0x8d40,\\n  RENDERBUFFER: 0x8d41,\\n  RGBA4: 0x8056,\\n  RGB5_A1: 0x8057,\\n  RGB565: 0x8d62,\\n  DEPTH_COMPONENT16: 0x81a5,\\n  STENCIL_INDEX: 0x1901,\\n  STENCIL_INDEX8: 0x8d48,\\n  DEPTH_STENCIL: 0x84f9,\\n  RENDERBUFFER_WIDTH: 0x8d42,\\n  RENDERBUFFER_HEIGHT: 0x8d43,\\n  RENDERBUFFER_INTERNAL_FORMAT: 0x8d44,\\n  RENDERBUFFER_RED_SIZE: 0x8d50,\\n  RENDERBUFFER_GREEN_SIZE: 0x8d51,\\n  RENDERBUFFER_BLUE_SIZE: 0x8d52,\\n  RENDERBUFFER_ALPHA_SIZE: 0x8d53,\\n  RENDERBUFFER_DEPTH_SIZE: 0x8d54,\\n  RENDERBUFFER_STENCIL_SIZE: 0x8d55,\\n  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 0x8cd0,\\n  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 0x8cd1,\\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 0x8cd2,\\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 0x8cd3,\\n  COLOR_ATTACHMENT0: 0x8ce0,\\n  DEPTH_ATTACHMENT: 0x8d00,\\n  STENCIL_ATTACHMENT: 0x8d20,\\n  DEPTH_STENCIL_ATTACHMENT: 0x821a,\\n  NONE: 0,\\n  FRAMEBUFFER_COMPLETE: 0x8cd5,\\n  FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 0x8cd6,\\n  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 0x8cd7,\\n  FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 0x8cd9,\\n  FRAMEBUFFER_UNSUPPORTED: 0x8cdd,\\n  FRAMEBUFFER_BINDING: 0x8ca6,\\n  RENDERBUFFER_BINDING: 0x8ca7,\\n  READ_FRAMEBUFFER: 0x8ca8,\\n  DRAW_FRAMEBUFFER: 0x8ca9,\\n  MAX_RENDERBUFFER_SIZE: 0x84e8,\\n  INVALID_FRAMEBUFFER_OPERATION: 0x0506,\\n  UNPACK_FLIP_Y_WEBGL: 0x9240,\\n  UNPACK_PREMULTIPLY_ALPHA_WEBGL: 0x9241,\\n  UNPACK_COLORSPACE_CONVERSION_WEBGL: 0x9243,\\n  READ_BUFFER: 0x0c02,\\n  UNPACK_ROW_LENGTH: 0x0cf2,\\n  UNPACK_SKIP_ROWS: 0x0cf3,\\n  UNPACK_SKIP_PIXELS: 0x0cf4,\\n  PACK_ROW_LENGTH: 0x0d02,\\n  PACK_SKIP_ROWS: 0x0d03,\\n  PACK_SKIP_PIXELS: 0x0d04,\\n  TEXTURE_BINDING_3D: 0x806a,\\n  UNPACK_SKIP_IMAGES: 0x806d,\\n  UNPACK_IMAGE_HEIGHT: 0x806e,\\n  MAX_3D_TEXTURE_SIZE: 0x8073,\\n  MAX_ELEMENTS_VERTICES: 0x80e8,\\n  MAX_ELEMENTS_INDICES: 0x80e9,\\n  MAX_TEXTURE_LOD_BIAS: 0x84fd,\\n  MAX_FRAGMENT_UNIFORM_COMPONENTS: 0x8b49,\\n  MAX_VERTEX_UNIFORM_COMPONENTS: 0x8b4a,\\n  MAX_ARRAY_TEXTURE_LAYERS: 0x88ff,\\n  MIN_PROGRAM_TEXEL_OFFSET: 0x8904,\\n  MAX_PROGRAM_TEXEL_OFFSET: 0x8905,\\n  MAX_VARYING_COMPONENTS: 0x8b4b,\\n  FRAGMENT_SHADER_DERIVATIVE_HINT: 0x8b8b,\\n  RASTERIZER_DISCARD: 0x8c89,\\n  VERTEX_ARRAY_BINDING: 0x85b5,\\n  MAX_VERTEX_OUTPUT_COMPONENTS: 0x9122,\\n  MAX_FRAGMENT_INPUT_COMPONENTS: 0x9125,\\n  MAX_SERVER_WAIT_TIMEOUT: 0x9111,\\n  MAX_ELEMENT_INDEX: 0x8d6b,\\n  RED: 0x1903,\\n  RGB8: 0x8051,\\n  RGBA8: 0x8058,\\n  RGB10_A2: 0x8059,\\n  TEXTURE_3D: 0x806f,\\n  TEXTURE_WRAP_R: 0x8072,\\n  TEXTURE_MIN_LOD: 0x813a,\\n  TEXTURE_MAX_LOD: 0x813b,\\n  TEXTURE_BASE_LEVEL: 0x813c,\\n  TEXTURE_MAX_LEVEL: 0x813d,\\n  TEXTURE_COMPARE_MODE: 0x884c,\\n  TEXTURE_COMPARE_FUNC: 0x884d,\\n  SRGB: 0x8c40,\\n  SRGB8: 0x8c41,\\n  SRGB8_ALPHA8: 0x8c43,\\n  COMPARE_REF_TO_TEXTURE: 0x884e,\\n  RGBA32F: 0x8814,\\n  RGB32F: 0x8815,\\n  RGBA16F: 0x881a,\\n  RGB16F: 0x881b,\\n  TEXTURE_2D_ARRAY: 0x8c1a,\\n  TEXTURE_BINDING_2D_ARRAY: 0x8c1d,\\n  R11F_G11F_B10F: 0x8c3a,\\n  RGB9_E5: 0x8c3d,\\n  RGBA32UI: 0x8d70,\\n  RGB32UI: 0x8d71,\\n  RGBA16UI: 0x8d76,\\n  RGB16UI: 0x8d77,\\n  RGBA8UI: 0x8d7c,\\n  RGB8UI: 0x8d7d,\\n  RGBA32I: 0x8d82,\\n  RGB32I: 0x8d83,\\n  RGBA16I: 0x8d88,\\n  RGB16I: 0x8d89,\\n  RGBA8I: 0x8d8e,\\n  RGB8I: 0x8d8f,\\n  RED_INTEGER: 0x8d94,\\n  RGB_INTEGER: 0x8d98,\\n  RGBA_INTEGER: 0x8d99,\\n  R8: 0x8229,\\n  RG8: 0x822b,\\n  R16F: 0x822d,\\n  R32F: 0x822e,\\n  RG16F: 0x822f,\\n  RG32F: 0x8230,\\n  R8I: 0x8231,\\n  R8UI: 0x8232,\\n  R16I: 0x8233,\\n  R16UI: 0x8234,\\n  R32I: 0x8235,\\n  R32UI: 0x8236,\\n  RG8I: 0x8237,\\n  RG8UI: 0x8238,\\n  RG16I: 0x8239,\\n  RG16UI: 0x823a,\\n  RG32I: 0x823b,\\n  RG32UI: 0x823c,\\n  R8_SNORM: 0x8f94,\\n  RG8_SNORM: 0x8f95,\\n  RGB8_SNORM: 0x8f96,\\n  RGBA8_SNORM: 0x8f97,\\n  RGB10_A2UI: 0x906f,\\n  TEXTURE_IMMUTABLE_FORMAT: 0x912f,\\n  TEXTURE_IMMUTABLE_LEVELS: 0x82df,\\n  UNSIGNED_INT_2_10_10_10_REV: 0x8368,\\n  UNSIGNED_INT_10F_11F_11F_REV: 0x8c3b,\\n  UNSIGNED_INT_5_9_9_9_REV: 0x8c3e,\\n  FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8dad,\\n  UNSIGNED_INT_24_8: 0x84fa,\\n  HALF_FLOAT: 0x140b,\\n  RG: 0x8227,\\n  RG_INTEGER: 0x8228,\\n  INT_2_10_10_10_REV: 0x8d9f,\\n  CURRENT_QUERY: 0x8865,\\n  QUERY_RESULT: 0x8866,\\n  QUERY_RESULT_AVAILABLE: 0x8867,\\n  ANY_SAMPLES_PASSED: 0x8c2f,\\n  ANY_SAMPLES_PASSED_CONSERVATIVE: 0x8d6a,\\n  MAX_DRAW_BUFFERS: 0x8824,\\n  DRAW_BUFFER0: 0x8825,\\n  DRAW_BUFFER1: 0x8826,\\n  DRAW_BUFFER2: 0x8827,\\n  DRAW_BUFFER3: 0x8828,\\n  DRAW_BUFFER4: 0x8829,\\n  DRAW_BUFFER5: 0x882a,\\n  DRAW_BUFFER6: 0x882b,\\n  DRAW_BUFFER7: 0x882c,\\n  DRAW_BUFFER8: 0x882d,\\n  DRAW_BUFFER9: 0x882e,\\n  DRAW_BUFFER10: 0x882f,\\n  DRAW_BUFFER11: 0x8830,\\n  DRAW_BUFFER12: 0x8831,\\n  DRAW_BUFFER13: 0x8832,\\n  DRAW_BUFFER14: 0x8833,\\n  DRAW_BUFFER15: 0x8834,\\n  MAX_COLOR_ATTACHMENTS: 0x8cdf,\\n  COLOR_ATTACHMENT1: 0x8ce1,\\n  COLOR_ATTACHMENT2: 0x8ce2,\\n  COLOR_ATTACHMENT3: 0x8ce3,\\n  COLOR_ATTACHMENT4: 0x8ce4,\\n  COLOR_ATTACHMENT5: 0x8ce5,\\n  COLOR_ATTACHMENT6: 0x8ce6,\\n  COLOR_ATTACHMENT7: 0x8ce7,\\n  COLOR_ATTACHMENT8: 0x8ce8,\\n  COLOR_ATTACHMENT9: 0x8ce9,\\n  COLOR_ATTACHMENT10: 0x8cea,\\n  COLOR_ATTACHMENT11: 0x8ceb,\\n  COLOR_ATTACHMENT12: 0x8cec,\\n  COLOR_ATTACHMENT13: 0x8ced,\\n  COLOR_ATTACHMENT14: 0x8cee,\\n  COLOR_ATTACHMENT15: 0x8cef,\\n  SAMPLER_3D: 0x8b5f,\\n  SAMPLER_2D_SHADOW: 0x8b62,\\n  SAMPLER_2D_ARRAY: 0x8dc1,\\n  SAMPLER_2D_ARRAY_SHADOW: 0x8dc4,\\n  SAMPLER_CUBE_SHADOW: 0x8dc5,\\n  INT_SAMPLER_2D: 0x8dca,\\n  INT_SAMPLER_3D: 0x8dcb,\\n  INT_SAMPLER_CUBE: 0x8dcc,\\n  INT_SAMPLER_2D_ARRAY: 0x8dcf,\\n  UNSIGNED_INT_SAMPLER_2D: 0x8dd2,\\n  UNSIGNED_INT_SAMPLER_3D: 0x8dd3,\\n  UNSIGNED_INT_SAMPLER_CUBE: 0x8dd4,\\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8dd7,\\n  MAX_SAMPLES: 0x8d57,\\n  SAMPLER_BINDING: 0x8919,\\n  PIXEL_PACK_BUFFER: 0x88eb,\\n  PIXEL_UNPACK_BUFFER: 0x88ec,\\n  PIXEL_PACK_BUFFER_BINDING: 0x88ed,\\n  PIXEL_UNPACK_BUFFER_BINDING: 0x88ef,\\n  COPY_READ_BUFFER: 0x8f36,\\n  COPY_WRITE_BUFFER: 0x8f37,\\n  COPY_READ_BUFFER_BINDING: 0x8f36,\\n  COPY_WRITE_BUFFER_BINDING: 0x8f37,\\n  FLOAT_MAT2x3: 0x8b65,\\n  FLOAT_MAT2x4: 0x8b66,\\n  FLOAT_MAT3x2: 0x8b67,\\n  FLOAT_MAT3x4: 0x8b68,\\n  FLOAT_MAT4x2: 0x8b69,\\n  FLOAT_MAT4x3: 0x8b6a,\\n  UNSIGNED_INT_VEC2: 0x8dc6,\\n  UNSIGNED_INT_VEC3: 0x8dc7,\\n  UNSIGNED_INT_VEC4: 0x8dc8,\\n  UNSIGNED_NORMALIZED: 0x8c17,\\n  SIGNED_NORMALIZED: 0x8f9c,\\n  VERTEX_ATTRIB_ARRAY_INTEGER: 0x88fd,\\n  VERTEX_ATTRIB_ARRAY_DIVISOR: 0x88fe,\\n  TRANSFORM_FEEDBACK_BUFFER_MODE: 0x8c7f,\\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 0x8c80,\\n  TRANSFORM_FEEDBACK_VARYINGS: 0x8c83,\\n  TRANSFORM_FEEDBACK_BUFFER_START: 0x8c84,\\n  TRANSFORM_FEEDBACK_BUFFER_SIZE: 0x8c85,\\n  TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 0x8c88,\\n  MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 0x8c8a,\\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 0x8c8b,\\n  INTERLEAVED_ATTRIBS: 0x8c8c,\\n  SEPARATE_ATTRIBS: 0x8c8d,\\n  TRANSFORM_FEEDBACK_BUFFER: 0x8c8e,\\n  TRANSFORM_FEEDBACK_BUFFER_BINDING: 0x8c8f,\\n  TRANSFORM_FEEDBACK: 0x8e22,\\n  TRANSFORM_FEEDBACK_PAUSED: 0x8e23,\\n  TRANSFORM_FEEDBACK_ACTIVE: 0x8e24,\\n  TRANSFORM_FEEDBACK_BINDING: 0x8e25,\\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 0x8210,\\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 0x8211,\\n  FRAMEBUFFER_ATTACHMENT_RED_SIZE: 0x8212,\\n  FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 0x8213,\\n  FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 0x8214,\\n  FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 0x8215,\\n  FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 0x8216,\\n  FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 0x8217,\\n  FRAMEBUFFER_DEFAULT: 0x8218,\\n  DEPTH24_STENCIL8: 0x88f0,\\n  DRAW_FRAMEBUFFER_BINDING: 0x8ca6,\\n  READ_FRAMEBUFFER_BINDING: 0x8caa,\\n  RENDERBUFFER_SAMPLES: 0x8cab,\\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 0x8cd4,\\n  FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 0x8d56,\\n  UNIFORM_BUFFER: 0x8a11,\\n  UNIFORM_BUFFER_BINDING: 0x8a28,\\n  UNIFORM_BUFFER_START: 0x8a29,\\n  UNIFORM_BUFFER_SIZE: 0x8a2a,\\n  MAX_VERTEX_UNIFORM_BLOCKS: 0x8a2b,\\n  MAX_FRAGMENT_UNIFORM_BLOCKS: 0x8a2d,\\n  MAX_COMBINED_UNIFORM_BLOCKS: 0x8a2e,\\n  MAX_UNIFORM_BUFFER_BINDINGS: 0x8a2f,\\n  MAX_UNIFORM_BLOCK_SIZE: 0x8a30,\\n  MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 0x8a31,\\n  MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 0x8a33,\\n  UNIFORM_BUFFER_OFFSET_ALIGNMENT: 0x8a34,\\n  ACTIVE_UNIFORM_BLOCKS: 0x8a36,\\n  UNIFORM_TYPE: 0x8a37,\\n  UNIFORM_SIZE: 0x8a38,\\n  UNIFORM_BLOCK_INDEX: 0x8a3a,\\n  UNIFORM_OFFSET: 0x8a3b,\\n  UNIFORM_ARRAY_STRIDE: 0x8a3c,\\n  UNIFORM_MATRIX_STRIDE: 0x8a3d,\\n  UNIFORM_IS_ROW_MAJOR: 0x8a3e,\\n  UNIFORM_BLOCK_BINDING: 0x8a3f,\\n  UNIFORM_BLOCK_DATA_SIZE: 0x8a40,\\n  UNIFORM_BLOCK_ACTIVE_UNIFORMS: 0x8a42,\\n  UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 0x8a43,\\n  UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 0x8a44,\\n  UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 0x8a46,\\n  OBJECT_TYPE: 0x9112,\\n  SYNC_CONDITION: 0x9113,\\n  SYNC_STATUS: 0x9114,\\n  SYNC_FLAGS: 0x9115,\\n  SYNC_FENCE: 0x9116,\\n  SYNC_GPU_COMMANDS_COMPLETE: 0x9117,\\n  UNSIGNALED: 0x9118,\\n  SIGNALED: 0x9119,\\n  ALREADY_SIGNALED: 0x911a,\\n  TIMEOUT_EXPIRED: 0x911b,\\n  CONDITION_SATISFIED: 0x911c,\\n  WAIT_FAILED: 0x911d,\\n  SYNC_FLUSH_COMMANDS_BIT: 0x00000001,\\n  COLOR: 0x1800,\\n  DEPTH: 0x1801,\\n  STENCIL: 0x1802,\\n  MIN: 0x8007,\\n  MAX: 0x8008,\\n  DEPTH_COMPONENT24: 0x81a6,\\n  STREAM_READ: 0x88e1,\\n  STREAM_COPY: 0x88e2,\\n  STATIC_READ: 0x88e5,\\n  STATIC_COPY: 0x88e6,\\n  DYNAMIC_READ: 0x88e9,\\n  DYNAMIC_COPY: 0x88ea,\\n  DEPTH_COMPONENT32F: 0x8cac,\\n  DEPTH32F_STENCIL8: 0x8cad,\\n  INVALID_INDEX: 0xffffffff,\\n  TIMEOUT_IGNORED: -1,\\n  MAX_CLIENT_WAIT_TIMEOUT_WEBGL: 0x9247,\\n  VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE: 0x88fe,\\n  UNMASKED_VENDOR_WEBGL: 0x9245,\\n  UNMASKED_RENDERER_WEBGL: 0x9246,\\n  MAX_TEXTURE_MAX_ANISOTROPY_EXT: 0x84ff,\\n  TEXTURE_MAX_ANISOTROPY_EXT: 0x84fe,\\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3,\\n  COMPRESSED_R11_EAC: 0x9270,\\n  COMPRESSED_SIGNED_R11_EAC: 0x9271,\\n  COMPRESSED_RG11_EAC: 0x9272,\\n  COMPRESSED_SIGNED_RG11_EAC: 0x9273,\\n  COMPRESSED_RGB8_ETC2: 0x9274,\\n  COMPRESSED_RGBA8_ETC2_EAC: 0x9275,\\n  COMPRESSED_SRGB8_ETC2: 0x9276,\\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 0x9277,\\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9278,\\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9279,\\n  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 0x8c00,\\n  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 0x8c02,\\n  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 0x8c01,\\n  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 0x8c03,\\n  COMPRESSED_RGB_ETC1_WEBGL: 0x8d64,\\n  COMPRESSED_RGB_ATC_WEBGL: 0x8c92,\\n  COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL: 0x8c92,\\n  COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL: 0x87ee,\\n  UNSIGNED_INT_24_8_WEBGL: 0x84fa,\\n  HALF_FLOAT_OES: 0x8d61,\\n  RGBA32F_EXT: 0x8814,\\n  RGB32F_EXT: 0x8815,\\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\\n  UNSIGNED_NORMALIZED_EXT: 0x8c17,\\n  MIN_EXT: 0x8007,\\n  MAX_EXT: 0x8008,\\n  SRGB_EXT: 0x8c40,\\n  SRGB_ALPHA_EXT: 0x8c42,\\n  SRGB8_ALPHA8_EXT: 0x8c43,\\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT: 0x8210,\\n  FRAGMENT_SHADER_DERIVATIVE_HINT_OES: 0x8b8b,\\n  COLOR_ATTACHMENT0_WEBGL: 0x8ce0,\\n  COLOR_ATTACHMENT1_WEBGL: 0x8ce1,\\n  COLOR_ATTACHMENT2_WEBGL: 0x8ce2,\\n  COLOR_ATTACHMENT3_WEBGL: 0x8ce3,\\n  COLOR_ATTACHMENT4_WEBGL: 0x8ce4,\\n  COLOR_ATTACHMENT5_WEBGL: 0x8ce5,\\n  COLOR_ATTACHMENT6_WEBGL: 0x8ce6,\\n  COLOR_ATTACHMENT7_WEBGL: 0x8ce7,\\n  COLOR_ATTACHMENT8_WEBGL: 0x8ce8,\\n  COLOR_ATTACHMENT9_WEBGL: 0x8ce9,\\n  COLOR_ATTACHMENT10_WEBGL: 0x8cea,\\n  COLOR_ATTACHMENT11_WEBGL: 0x8ceb,\\n  COLOR_ATTACHMENT12_WEBGL: 0x8cec,\\n  COLOR_ATTACHMENT13_WEBGL: 0x8ced,\\n  COLOR_ATTACHMENT14_WEBGL: 0x8cee,\\n  COLOR_ATTACHMENT15_WEBGL: 0x8cef,\\n  DRAW_BUFFER0_WEBGL: 0x8825,\\n  DRAW_BUFFER1_WEBGL: 0x8826,\\n  DRAW_BUFFER2_WEBGL: 0x8827,\\n  DRAW_BUFFER3_WEBGL: 0x8828,\\n  DRAW_BUFFER4_WEBGL: 0x8829,\\n  DRAW_BUFFER5_WEBGL: 0x882a,\\n  DRAW_BUFFER6_WEBGL: 0x882b,\\n  DRAW_BUFFER7_WEBGL: 0x882c,\\n  DRAW_BUFFER8_WEBGL: 0x882d,\\n  DRAW_BUFFER9_WEBGL: 0x882e,\\n  DRAW_BUFFER10_WEBGL: 0x882f,\\n  DRAW_BUFFER11_WEBGL: 0x8830,\\n  DRAW_BUFFER12_WEBGL: 0x8831,\\n  DRAW_BUFFER13_WEBGL: 0x8832,\\n  DRAW_BUFFER14_WEBGL: 0x8833,\\n  DRAW_BUFFER15_WEBGL: 0x8834,\\n  MAX_COLOR_ATTACHMENTS_WEBGL: 0x8cdf,\\n  MAX_DRAW_BUFFERS_WEBGL: 0x8824,\\n  VERTEX_ARRAY_BINDING_OES: 0x85b5,\\n  QUERY_COUNTER_BITS_EXT: 0x8864,\\n  CURRENT_QUERY_EXT: 0x8865,\\n  QUERY_RESULT_EXT: 0x8866,\\n  QUERY_RESULT_AVAILABLE_EXT: 0x8867,\\n  TIME_ELAPSED_EXT: 0x88bf,\\n  TIMESTAMP_EXT: 0x8e28,\\n  GPU_DISJOINT_EXT: 0x8fbb\\n});\\n// CONCATENATED MODULE: ./src/layers/heatmap-constants.js\\nvar _PIXELATED_TEXTURE_PA;var TILE_SIZE=2048;var MIN_ROW_AGG=1;var MAX_ROW_AGG=16;var COLOR_BAR_SIZE=20;var AXIS_LABEL_TEXT_SIZE=9;var AXIS_TITLE_TEXT_SIZE=15;var AXIS_MIN_SIZE=10;var AXIS_MAX_SIZE=90;var AXIS_MARGIN=3;var THEME_TO_TEXT_COLOR={dark:[224,224,224],light:[64,64,64]};var AXIS_FONT_FAMILY=\\\"-apple-system, 'Helvetica Neue', Arial, sans-serif\\\";var PIXELATED_TEXTURE_PARAMETERS=(_PIXELATED_TEXTURE_PA={},_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_MIN_FILTER,esm.NEAREST),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_MAG_FILTER,esm.NEAREST),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_WRAP_S,esm.CLAMP_TO_EDGE),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_WRAP_T,esm.CLAMP_TO_EDGE),_PIXELATED_TEXTURE_PA);\\n// CONCATENATED MODULE: ./src/components/heatmap/utils.js\\nfunction getGeneByCellTile(view,_ref){var tileSize=_ref.tileSize,tileI=_ref.tileI,tileJ=_ref.tileJ,numCells=_ref.numCells,numGenes=_ref.numGenes,cellOrdering=_ref.cellOrdering,cells=_ref.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(j){// Need to iterate over cells in the outer loop.\\ncellI=tileJ*tileSize+j;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(i){geneI=tileI*tileSize+i;value=view[sortedCellI*numGenes+geneI];offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}function getCellByGeneTile(view,_ref2){var tileSize=_ref2.tileSize,tileI=_ref2.tileI,tileJ=_ref2.tileJ,numCells=_ref2.numCells,numGenes=_ref2.numGenes,cellOrdering=_ref2.cellOrdering,cells=_ref2.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(i){// Need to iterate over cells in the outer loop.\\ncellI=tileI*tileSize+i;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(j){geneI=tileJ*tileSize+j;if(geneI<numGenes){value=view[sortedCellI*numGenes+geneI];}else{value=0;}offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}/**\\n * Called before a layer is drawn to determine whether it should be rendered.\\n * Reference: https://deck.gl/docs/api-reference/core/deck#layerfilter\\n * @param {object} params A viewport, layer pair.\\n * @param {object} params.layer The layer to check.\\n * @param {object} params.viewport The viewport to check.\\n * @returns {boolean} Should this layer be rendered in this viewport?\\n */function layerFilter(_ref3){var layer=_ref3.layer,viewport=_ref3.viewport;if(viewport.id==='axisLeft'){return layer.id.startsWith('axisLeft');}if(viewport.id==='axisTop'){return layer.id.startsWith('axisTop');}if(viewport.id==='heatmap'){return layer.id.startsWith('heatmap');}if(viewport.id==='colorsLeft'){return layer.id.startsWith('colorsLeft');}if(viewport.id==='colorsTop'){return layer.id.startsWith('colorsTop');}return false;}/**\\n * Get the size of the left and top heatmap axes,\\n * taking into account the maximum label string lengths.\\n * @param {boolean} transpose Is the heatmap transposed?\\n * @param {number} geneLabelMaxLength What is the maximum length gene label?\\n * @param {number} cellLabelMaxLength What is the maximum length cell label?\\n * @returns {number[]} [axisOffsetLeft, axisOffsetTop]\\n */function getAxisSizes(transpose,geneLabelMaxLength,cellLabelMaxLength){var axisOffsetLeft=clamp_default()((transpose?geneLabelMaxLength:cellLabelMaxLength)*AXIS_LABEL_TEXT_SIZE,AXIS_MIN_SIZE,AXIS_MAX_SIZE);var axisOffsetTop=clamp_default()((transpose?cellLabelMaxLength:geneLabelMaxLength)*AXIS_LABEL_TEXT_SIZE,AXIS_MIN_SIZE,AXIS_MAX_SIZE);return[axisOffsetLeft,axisOffsetTop];}/**\\n * Convert a mouse coordinate (x, y) to a heatmap coordinate (col index, row index).\\n * @param {number} mouseX The mouse X of interest.\\n * @param {number} mouseY The mouse Y of interest.\\n * @param {object} param2 An object containing current sizes and scale factors.\\n * @returns {number[]} [colI, rowI]\\n */function mouseToHeatmapPosition(mouseX,mouseY,_ref4){var offsetLeft=_ref4.offsetLeft,offsetTop=_ref4.offsetTop,targetX=_ref4.targetX,targetY=_ref4.targetY,scaleFactor=_ref4.scaleFactor,matrixWidth=_ref4.matrixWidth,matrixHeight=_ref4.matrixHeight,numRows=_ref4.numRows,numCols=_ref4.numCols;// TODO: use linear algebra\\nvar viewMouseX=mouseX-offsetLeft;var viewMouseY=mouseY-offsetTop;if(viewMouseX<0||viewMouseY<0){// The mouse is outside the heatmap.\\nreturn[null,null];}// Determine the rowI and colI values based on the current viewState.\\nvar bboxTargetX=targetX*scaleFactor+matrixWidth*scaleFactor/2;var bboxTargetY=targetY*scaleFactor+matrixHeight*scaleFactor/2;var bboxLeft=bboxTargetX-matrixWidth/2;var bboxTop=bboxTargetY-matrixHeight/2;var zoomedOffsetLeft=bboxLeft/(matrixWidth*scaleFactor);var zoomedOffsetTop=bboxTop/(matrixHeight*scaleFactor);var zoomedViewMouseX=viewMouseX/(matrixWidth*scaleFactor);var zoomedViewMouseY=viewMouseY/(matrixHeight*scaleFactor);var zoomedMouseX=zoomedOffsetLeft+zoomedViewMouseX;var zoomedMouseY=zoomedOffsetTop+zoomedViewMouseY;var rowI=Math.floor(zoomedMouseY*numRows);var colI=Math.floor(zoomedMouseX*numCols);return[colI,rowI];}/**\\n * Convert a heatmap coordinate (col index, row index) to a mouse coordinate (x, y).\\n * @param {number} colI The column index of interest.\\n * @param {number} rowI The row index of interest.\\n * @param {object} param2 An object containing current sizes and scale factors.\\n * @returns {number[]} [x, y]\\n */function heatmapToMousePosition(colI,rowI,_ref5){var offsetLeft=_ref5.offsetLeft,offsetTop=_ref5.offsetTop,targetX=_ref5.targetX,targetY=_ref5.targetY,scaleFactor=_ref5.scaleFactor,matrixWidth=_ref5.matrixWidth,matrixHeight=_ref5.matrixHeight,numRows=_ref5.numRows,numCols=_ref5.numCols;// TODO: use linear algebra\\nvar zoomedMouseY=null;var zoomedMouseX=null;if(rowI!==null){var minY=-matrixHeight*scaleFactor/2;var maxY=matrixHeight*scaleFactor/2;var totalHeight=maxY-minY;var minInViewY=targetY*scaleFactor-matrixHeight/2;var maxInViewY=targetY*scaleFactor+matrixHeight/2;var inViewHeight=maxInViewY-minInViewY;var normalizedRowY=(rowI+0.5)/numRows;var globalRowY=minY+normalizedRowY*totalHeight;if(minInViewY<=globalRowY&&globalRowY<=maxInViewY){zoomedMouseY=offsetTop+(globalRowY-minInViewY)/inViewHeight*matrixHeight;}}if(colI!==null){var minX=-matrixWidth*scaleFactor/2;var maxX=matrixWidth*scaleFactor/2;var totalWidth=maxX-minX;var minInViewX=targetX*scaleFactor-matrixWidth/2;var maxInViewX=targetX*scaleFactor+matrixWidth/2;var inViewWidth=maxInViewX-minInViewX;var normalizedRowX=(colI+0.5)/numCols;var globalRowX=minX+normalizedRowX*totalWidth;if(minInViewX<=globalRowX&&globalRowX<=maxInViewX){zoomedMouseX=offsetLeft+(globalRowX-minInViewX)/inViewWidth*matrixWidth;}}return[zoomedMouseX,zoomedMouseY];}\\n// CONCATENATED MODULE: ./node_modules/eslint-loader/dist/cjs.js??ref--5-0!./src/components/heatmap/heatmap.worker.js\\n/* eslint-disable no-restricted-globals */\\n\\n\\n\\n/**\\n * Map a gene expression matrix onto multiple square array tiles,\\n * taking into account the ordering/selection of cells.\\n * @param {object} params\\n * @param {string} params.curr The current task uuid.\\n * @param {number} params.xTiles How many tiles required in the x direction?\\n * @param {number} params.yTiles How many tiles required in the y direction?\\n * @param {number} params.tileSize How many entries along each tile axis?\\n * @param {string[]} params.cellOrdering The current ordering of cells.\\n * @param {string[]} params.rows The name of each row (cell ID).\\n * Does not take transpose into account (always cells).\\n * @param {string[]} params.cols The name of each column (gene ID).\\n * Does not take transpose into account (always genes).\\n * @param {ArrayBuffer} params.data The array buffer.\\n * Need to transfer back to main thread when done.\\n * @param {boolean} params.transpose Is the heatmap transposed?\\n * @returns {array} [message, transfers]\\n */\\nfunction getTiles({\\n  curr,\\n  xTiles,\\n  yTiles,\\n  tileSize,\\n  cellOrdering,\\n  rows,\\n  cols,\\n  data,\\n  transpose,\\n}) {\\n  const view = new Uint8Array(data);\\n\\n  const numGenes = cols.length;\\n  const numCells = cellOrdering.length;\\n\\n  const getTileFunction = (transpose ? getGeneByCellTile : getCellByGeneTile);\\n\\n  const result = range_default()(yTiles).map(i => range_default()(xTiles).map(j => getTileFunction(\\n    view,\\n    {\\n      tileSize,\\n      tileI: i,\\n      tileJ: j,\\n      numCells,\\n      numGenes,\\n      cellOrdering,\\n      cells: rows,\\n    },\\n  )));\\n  return [{ tiles: result, buffer: data, curr }, [data]];\\n}\\n\\n/**\\n * Worker message passing logic.\\n */\\nif (typeof self !== 'undefined') {\\n  const nameToFunction = {\\n    getTiles,\\n  };\\n\\n  self.addEventListener('message', (event) => {\\n    try {\\n      const [name, args] = event.data;\\n      const [message, transfers] = nameToFunction[name](args);\\n      self.postMessage(message, transfers);\\n    } catch (e) {\\n      console.warn(e);\\n    }\\n  });\\n}\\n\\n\\n/***/ })\\n/******/ ]);\\n//# sourceMappingURL=5da8edac85de30505a38.worker.js.map\", null);\n};","module.exports = require(\"d3-force\");","module.exports = require(\"d3-dsv\");","module.exports = require(\"json2csv\");","module.exports = require(\"lodash/union\");","module.exports = require(\"lodash/difference\");","module.exports = require(\"clsx\");","module.exports = require(\"rc-tree/es/util\");","module.exports = require(\"react-color\");","module.exports = require(\"rc-tooltip\");","module.exports = require(\"@material-ui/core/ExpansionPanel\");","module.exports = require(\"@material-ui/core/ExpansionPanelSummary\");","module.exports = require(\"@material-ui/core/ExpansionPanelDetails\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/MoreVert\");","module.exports = require(\"@material-ui/icons/Lens\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"vega-tooltip\");","export { default as HeatmapSubscriber } from './HeatmapSubscriber';\nexport { default as Heatmap } from './Heatmap';\n","export { default as SpatialSubscriber } from './SpatialSubscriber';\nexport { default as Spatial } from './Spatial';\n","export { default as ScatterplotSubscriber } from './ScatterplotSubscriber';\nexport { default as Scatterplot } from './Scatterplot';\n","'use strict';\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};","module.exports = require(\"react-grid-layout\");","module.exports = require(\"higlass-zarr-datafetchers\");","module.exports = require(\"lz-string\");","module.exports = require(\"react-dom\");","module.exports = require(\"dynamic-import-polyfill\");","module.exports = require(\"higlass-register\");","module.exports = require(\"bowser\");","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import { range } from '../../utils';\n\nexport const COMPONENT_ID_PREFIX = 'i';\n\nfunction sum(a) {\n  return a.reduce((x, y) => x + y, 0);\n}\n\nexport function makeGridLayout(colXs, colLayout) {\n  const colWs = [];\n  for (let i = 0; i < colXs.length; i++) { // eslint-disable-line no-plusplus\n    colWs.push(colXs[i + 1] - colXs[i]);\n  }\n  return Object.entries(colLayout).map(([id, spec]) => ({\n    i: id,\n    y: spec.y,\n    h: spec.h || 1,\n    x: colXs[spec.x],\n    w: sum(colWs.slice(spec.x, spec.x + (spec.w || 1))),\n  }));\n}\n\nexport function getMaxRows(layouts) {\n  return Math.max(\n    ...Object.values(layouts).map(\n      layout => Math.max(\n        ...layout.map(xywh => xywh.y + xywh.h),\n      ),\n    ),\n  );\n}\n\nexport function resolveLayout(layout) {\n  const cols = {};\n  const layouts = {};\n  const breakpoints = {};\n  const components = {};\n  const positions = {};\n\n  (('components' in layout) ? layout.components : layout).forEach(\n    (def, i) => {\n      const id = `${COMPONENT_ID_PREFIX}${i}`;\n      components[id] = {\n        component: def.component,\n        props: def.props || {},\n        coordinationScopes: def.coordinationScopes || {},\n      };\n      positions[id] = {\n        id, x: def.x, y: def.y, w: def.w, h: def.h,\n      };\n    },\n  );\n\n  if ('components' in layout) {\n    Object.entries(layout.columns).forEach(\n      ([width, columnXs]) => {\n        cols[width] = columnXs[columnXs.length - 1];\n        layouts[width] = makeGridLayout(columnXs, positions);\n        breakpoints[width] = width;\n      },\n    );\n  } else {\n    // static layout\n    const id = 'ID';\n    const columnCount = 12;\n    cols[id] = columnCount;\n    layouts[id] = makeGridLayout(range(columnCount + 1), positions);\n    breakpoints[id] = 1000;\n    // Default has different numbers of columns at different widths,\n    // so we do need to override that to ensure the same number of columns,\n    // regardless of window width.\n  }\n  return {\n    cols, layouts, breakpoints, components,\n  };\n}\n","import React from 'react';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport isEqual from 'lodash/isEqual';\nimport { getMaxRows, resolveLayout, COMPONENT_ID_PREFIX } from './layout-utils';\n\nconst ResponsiveGridLayout = WidthProvider(Responsive);\n\nclass ResponsiveHeightGridLayout extends ResponsiveGridLayout {\n  componentDidUpdate(prevProps) {\n    if (this.props.height !== prevProps.height) {\n      this.onWindowResize();\n    }\n  }\n}\n\nexport default function VitessceGridLayout(props) {\n  const {\n    layout,\n    getComponent, padding, margin, draggableHandle,\n    reactGridLayoutProps, rowHeight, theme, height,\n    onRemoveComponent, onLayoutChange: onLayoutChangeProp,\n  } = props;\n\n  // If layout changes, update grid components.\n  const {\n    cols: gridCols, layouts: gridLayouts, breakpoints: gridBreakpoints, components: gridComponents,\n  } = resolveLayout(layout);\n\n  const maxRows = getMaxRows(gridLayouts);\n\n  // Inline CSS is generally avoided, but this saves the end-user a little work,\n  // and prevents class names from getting out of sync.\n  const style = (\n    <style>\n      {`\n        ${draggableHandle} {\n          cursor: grab;\n        }\n        ${draggableHandle}:active {\n          cursor: grabbing;\n        }\n     `}\n    </style>\n  );\n\n  const onLayoutChange = (newLayout) => {\n    if (newLayout.length === Object.entries(gridComponents).length) {\n      const newComponentProps = [];\n      newLayout.forEach((nextC) => {\n        const id = nextC.i;\n        const prevC = gridComponents[id];\n        if (prevC) {\n          const i = parseInt(id.substring(id.indexOf(COMPONENT_ID_PREFIX) + 1), 10);\n          const nextProps = {\n            x: nextC.x, y: nextC.y, w: nextC.w, h: nextC.h,\n          };\n          const prevProps = {\n            x: prevC.x, y: prevC.y, w: prevC.w, h: prevC.h,\n          };\n          if (!isEqual(nextProps, prevProps)) {\n            newComponentProps.push([i, nextProps]);\n          }\n        }\n      });\n      if (newComponentProps.length > 0) {\n        onLayoutChangeProp(newComponentProps);\n      }\n    }\n  };\n\n  const layoutChildren = Object.entries(gridComponents).map(([k, v], i) => {\n    const Component = getComponent(v.component);\n\n    const removeGridComponent = () => {\n      onRemoveComponent(i);\n    };\n\n    return (\n      <div key={k}>\n        <Component\n          {... v.props}\n          uuid={i}\n          coordinationScopes={v.coordinationScopes}\n          theme={theme}\n          removeGridComponent={removeGridComponent}\n        />\n      </div>\n    );\n  });\n  return (gridLayouts && gridComponents && gridBreakpoints && gridCols) && (\n    <>\n      {style}\n      <ResponsiveHeightGridLayout\n        className=\"layout\"\n        cols={gridCols}\n        layouts={gridLayouts}\n        breakpoints={gridBreakpoints}\n        height={height}\n        rowHeight={\n          rowHeight\n          || (\n            (window.innerHeight - 2 * padding - (maxRows - 1) * margin)\n            / maxRows\n          )}\n        containerPadding={[padding, padding]}\n        margin={[margin, margin]}\n        draggableHandle={draggableHandle}\n        onLayoutChange={onLayoutChange}\n        {... reactGridLayoutProps}\n      >\n        {layoutChildren}\n      </ResponsiveHeightGridLayout>\n    </>\n  );\n}\n\nVitessceGridLayout.defaultProps = {\n  padding: 10,\n  margin: 10,\n};\n","import uuidv4 from 'uuid/v4';\n\n/**\n * A loader ancestor class containing a default constructor\n * and a stub for the required load() method.\n */\nexport default class AbstractLoader {\n  constructor({\n    type, url, requestInit, options,\n  }) {\n    this.type = type;\n    this.url = url;\n    this.requestInit = requestInit;\n    this.options = options;\n\n    this.subscriptions = {};\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  load() {\n    throw new Error('The load() method has not been implemented.');\n  }\n\n  subscribe(subscriber) {\n    const token = uuidv4();\n    this.subscriptions[token] = subscriber;\n    return token;\n  }\n\n  unsubscribe(token) {\n    delete this.subscriptions[token];\n  }\n\n  publish(data) {\n    Object.values(this.subscriptions).forEach((subscriber) => {\n      subscriber(data);\n    });\n  }\n}\n","import Ajv from 'ajv';\nimport AbstractLoader from './AbstractLoader';\nimport { LoaderFetchError, LoaderValidationError, AbstractLoaderError } from './errors/index';\n\nimport cellsSchema from '../schemas/cells.schema.json';\nimport moleculesSchema from '../schemas/molecules.schema.json';\nimport neighborhoodsSchema from '../schemas/neighborhoods.schema.json';\nimport rasterSchema from '../schemas/raster.schema.json';\nimport cellSetsSchema from '../schemas/cell-sets.schema.json';\n\nconst typeToSchema = {\n  cells: cellsSchema,\n  molecules: moleculesSchema,\n  neighborhoods: neighborhoodsSchema,\n  raster: rasterSchema,\n  'cell-sets': cellSetsSchema,\n};\n\nexport default class JsonLoader extends AbstractLoader {\n  constructor(params) {\n    super(params);\n\n    const { type } = params;\n    this.schema = typeToSchema[type];\n  }\n\n  load() {\n    const {\n      url, requestInit, type, fileType,\n    } = this;\n    if (this.data) {\n      return this.data;\n    }\n    this.data = fetch(url, requestInit)\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n        return Promise.reject(new LoaderFetchError(type, fileType, url, response.headers));\n      })\n      .catch(reason => Promise.resolve(reason))\n      .then((data) => {\n        if (data instanceof AbstractLoaderError) {\n          return Promise.reject(data);\n        }\n        const [valid, reason] = this.validate(data);\n        if (valid) {\n          return Promise.resolve({ data, url });\n        }\n        return Promise.reject(new LoaderValidationError(type, fileType, url, reason));\n      });\n    return this.data;\n  }\n\n  validate(data) {\n    const { schema, type } = this;\n    if (!schema) {\n      throw Error(`No schema for ${type}`);\n    }\n    const validate = new Ajv().compile(schema);\n    const valid = validate(data);\n    let failureReason;\n    if (!valid) {\n      failureReason = validate.errors;\n    }\n    return [valid, failureReason];\n  }\n}\n","import { HTTPStore, openArray } from 'zarr';\nimport AbstractLoader from './AbstractLoader';\n\nexport default class MatrixZarrLoader extends AbstractLoader {\n  constructor(params) {\n    super(params);\n\n    // TODO: Use this.requestInit to provide headers, tokens, etc.\n    // eslint-disable-next-line no-unused-vars\n    const { url, requestInit } = this;\n    this.store = new HTTPStore(url);\n  }\n\n  loadAttrs() {\n    const { store } = this;\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = store.getItem('.zattrs')\n      .then((bytes) => {\n        const decoder = new TextDecoder('utf-8');\n        const json = JSON.parse(decoder.decode(bytes));\n        return json;\n      });\n    return this.attrs;\n  }\n\n  loadArr() {\n    const { store } = this;\n    if (this.arr) {\n      return this.arr;\n    }\n    this.arr = openArray({ store, path: '/', mode: 'r' }).then(z => new Promise((resolve) => {\n      z.getRaw([null, null])\n        .then(resolve);\n    }));\n    return this.arr;\n  }\n\n  load() {\n    return Promise\n      .all([this.loadAttrs(), this.loadArr()])\n      .then(data => Promise.resolve({ data, url: null }));\n  }\n}\n","import genesSchema from '../schemas/genes.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { AbstractLoaderError } from './errors';\n\nexport default class GenesJsonAsMatrixZarrLoader extends JsonLoader {\n  constructor(params) {\n    super(params);\n\n    this.schema = genesSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data, url } = payload;\n    const cols = Object.keys(data);\n    const rows = (cols.length > 0 ? Object.keys(data[cols[0]].cells) : []);\n    const attrs = { rows, cols };\n\n    const normalizedFlatMatrix = rows\n      .flatMap(cellId => cols.map(\n        geneId => (data[geneId].cells[cellId] / data[geneId].max) * 255,\n      ));\n    // Need to wrap the NestedArray to mock the HTTPStore-based array\n    // which returns promises.\n    const arr = { data: Uint8Array.from(normalizedFlatMatrix) };\n    return Promise.resolve({ data: [attrs, arr], url });\n  }\n}\n","import { extent } from 'd3-array';\nimport range from 'lodash/range';\nimport clustersSchema from '../schemas/clusters.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { AbstractLoaderError } from './errors';\n\nexport default class ClustersJsonAsMatrixZarrLoader extends JsonLoader {\n  constructor(params) {\n    super(params);\n\n    this.schema = clustersSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data, url } = payload;\n    const { rows, cols, matrix } = data;\n    const attrs = {\n      rows: cols,\n      cols: rows,\n    };\n    const shape = [attrs.rows.length, attrs.cols.length];\n    // Normalize values by converting to one-byte integers.\n    // Normalize for each gene (column) independently.\n    const normalizedMatrix = matrix.map((col) => {\n      const [min, max] = extent(col);\n      const normalize = d => Math.floor(((d - min) / (max - min)) * 255);\n      return col.map(normalize);\n    });\n    // Transpose the normalized matrix.\n    const tNormalizedMatrix = range(shape[0])\n      .map(i => range(shape[1]).map(j => normalizedMatrix[j][i]));\n    // Flatten the transposed matrix.\n    const normalizedFlatMatrix = tNormalizedMatrix.flat();\n    // Need to wrap the NestedArray to mock the HTTPStore-based array\n    // which returns promises.\n    const arr = { data: Uint8Array.from(normalizedFlatMatrix) };\n    return Promise.resolve({ data: [attrs, arr], url });\n  }\n}\n","import { createZarrLoader, createOMETiffLoader } from '@hms-dbmi/viv';\nimport rasterSchema from '../schemas/raster.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { AbstractLoaderError } from './errors';\n\nasync function initLoader(imageData) {\n  const {\n    type, url, metadata, requestInit,\n  } = imageData;\n  switch (type) {\n    case ('zarr'): {\n      const { dimensions, isPyramid, transform } = metadata || {};\n      const { scale = 0, translate = { x: 0, y: 0 } } = transform;\n      const loader = await createZarrLoader({\n        url, dimensions, isPyramid, scale, translate,\n      });\n      return loader;\n    }\n    case ('ome-tiff'): {\n      // Fetch offsets for ome-tiff if needed.\n      if (metadata && 'omeTiffOffsetsUrl' in metadata) {\n        const { omeTiffOffsetsUrl } = metadata;\n        const res = await fetch(omeTiffOffsetsUrl, requestInit);\n        if (res.ok) {\n          const offsets = await res.json();\n          const loader = await createOMETiffLoader({\n            urlOrFile: url,\n            offsets,\n            headers: requestInit,\n          });\n          return loader;\n        }\n        throw new Error('Offsets not found but provided.');\n      }\n      const loader = createOMETiffLoader({\n        urlOrFile: url,\n        headers: requestInit,\n      });\n      return loader;\n    }\n    default: {\n      throw Error(`Image type (${type}) is not supported`);\n    }\n  }\n}\n\nexport default class RasterLoader extends JsonLoader {\n  constructor(params) {\n    super(params);\n    const { url, options } = params;\n    if (!url && options) {\n      this.url = URL.createObjectURL(new Blob([JSON.stringify(options)]));\n      this.options = undefined;\n    }\n    this.schema = rasterSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data: raster } = payload;\n    const { images, renderLayers, usePhysicalSizeScaling = false } = raster;\n\n    // Get image name and URL tuples.\n    const urls = images\n      .filter(image => !image.url.includes('zarr'))\n      .map(image => ([image.url, image.name]));\n\n    // Add a loaderCreator function for each image layer.\n    const imagesWithLoaderCreators = images.map(image => ({\n      ...image,\n      loaderCreator: async () => {\n        const loader = await initLoader(image);\n        return loader;\n      },\n    }));\n    return Promise.resolve({\n      data: { layers: imagesWithLoaderCreators, renderLayers, usePhysicalSizeScaling },\n      urls,\n    });\n  }\n}\n","import cellSetsSchema from '../schemas/cell-sets.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { tryUpgradeTreeToLatestSchema } from '../components/sets/io';\nimport { AbstractLoaderError } from './errors';\n\nexport default class CellSetsJsonLoader extends JsonLoader {\n  constructor(params) {\n    super(params);\n\n    this.schema = cellSetsSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data: rawData, url } = payload;\n    const upgradedData = tryUpgradeTreeToLatestSchema(rawData, 'cell');\n    return Promise.resolve({ data: upgradedData, url });\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import { HTTPStore, openArray, KeyError } from 'zarr';\n\nimport AbstractLoader from '../AbstractLoader';\n\n/**\n * A base AnnData loader which has all shared methods for more comlpex laoders,\n * like loading cell names and ids. It inherits from AbstractLoader.\n */\nexport default class BaseAnnDataLoader extends AbstractLoader {\n  constructor(params) {\n    super(params);\n\n    // TODO: Use this.requestInit to provide headers, tokens, etc.\n    // eslint-disable-next-line no-unused-vars\n    const { url, requestInit } = this;\n    this.store = new HTTPStore(url);\n  }\n\n  /**\n   * Class method for decoding json from the store.\n   * @returns {string} An path to the item.\n   */\n  async getJson(key) {\n    try {\n      const buf = await this.store.getItem(key);\n      const text = new TextDecoder().decode(buf);\n      return JSON.parse(text);\n    } catch (err) {\n      if (err instanceof KeyError) {\n        return {};\n      }\n      throw err;\n    }\n  }\n\n  /**\n   * Class method for decoding text arrays from zarr.\n   * @returns {string[]} An array of strings.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  decodeTextArray(buffer) {\n    return (\n      new TextDecoder()\n        // Remove header: https://github.com/zarr-developers/numcodecs/blob/2c1aff98e965c3c4747d9881d8b8d4aad91adb3a/numcodecs/vlen.pyx#L34\n        // Should we validate? Seems unnecessary, but maybe?\n        .decode(buffer.slice(4))\n        // https://stackoverflow.com/questions/11159118/incorrect-string-value-xef-xbf-xbd-for-column\n        // for information on the right hand side of the | in the regex.\n        // eslint-disable-next-line no-control-regex\n        .replace(/[\\u0000-\\u001c]|�c/g, ',')\n        .split(',')\n        .filter(Boolean)\n    );\n  }\n\n  /**\n   * Class method for loading cell set ids.\n   * Takes the location as an argument because this is shared across objects,\n   * which have different ways of specifying location.\n   * @param {string} cellSetZarrLocation A string like obs.leiden or obs.bulk_labels.\n   * @returns {Promise} A promise for an array of ids with one per cell.\n   */\n  loadCellSetIds(cellSetZarrLocation) {\n    const { store } = this;\n    if (this.cellSets) {\n      return this.cellSets;\n    }\n    this.cellSets = Promise.all(\n      cellSetZarrLocation.map(async (setName) => {\n        const { categories } = await this.getJson(\n          `${setName}/.zattrs`,\n        );\n        let categoriesValues;\n        if (categories) {\n          categoriesValues = await this.getFlatTextArr(`/obs/${categories}`);\n        }\n        const cellSetsArr = await openArray({\n          store,\n          path: setName,\n          mode: 'r',\n        });\n        const cellSetsValues = await cellSetsArr.get();\n        const { data } = cellSetsValues;\n        const mappedCellSetValues = new Array(...data).map(\n          i => (!categoriesValues ? i : categoriesValues[i]),\n        );\n        return mappedCellSetValues;\n      }),\n    );\n    return this.cellSets;\n  }\n\n  /**\n   * Class method for loading general numeric arrays.\n   * @param {string} path A string like obsm.X_pca.\n   * @returns {Promise} A promise for a zarr array containing the data.\n   */\n  loadNumeric(path) {\n    const { store } = this;\n    return openArray({\n      store,\n      path,\n      mode: 'r',\n    }).then(arr => arr.get());\n  }\n\n  getFlatArrDecompressed(path) {\n    const { store } = this;\n    return openArray({\n      store,\n      path,\n      mode: 'r',\n    }).then(async (z) => {\n      let data = new Uint8Array();\n      let item = 0;\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        try {\n          // eslint-disable-next-line no-await-in-loop\n          const buf = await store.getItem(`${z.keyPrefix}${String(item)}`);\n          // eslint-disable-next-line no-await-in-loop\n          const dbytes = await z.compressor.decode(buf);\n          const tmp = new Uint8Array(\n            dbytes.buffer.byteLength + data.buffer.byteLength,\n          );\n          tmp.set(new Uint8Array(data.buffer), 0);\n          tmp.set(dbytes, data.buffer.byteLength);\n          data = tmp;\n          item += 1;\n        } catch (err) {\n          if (err instanceof KeyError) {\n            break;\n          }\n          throw err;\n        }\n      }\n      return data;\n    });\n  }\n\n  getFlatTextArr(path) {\n    return this.getFlatArrDecompressed(path).then((data) => {\n      const text = this.decodeTextArray(data);\n      return text;\n    });\n  }\n\n  /**\n   * Class method for loading the cell names from obs.\n   * @returns {Promise} An promise for a zarr array containing the names.\n   */\n  loadCellNames() {\n    if (this.cellNames) {\n      return this.cellNames;\n    }\n    this.cellNames = this.getJson('obs/.zattrs')\n      .then(({ _index }) => this.getFlatTextArr(`/obs/${_index}`));\n    return this.cellNames;\n  }\n}\n","/* eslint-disable no-control-regex */\nimport {\n  treeInitialize,\n  nodeAppendChild,\n} from '../../components/sets/cell-set-utils';\nimport {\n  SETS_DATATYPE_CELL,\n} from '../../components/sets/constants';\nimport BaseAnnDataLoader from './BaseAnnDataLoader';\n\n/**\n * Loader for converting zarr into the cell sets json schema.\n */\nexport default class CellSetsZarrLoader extends BaseAnnDataLoader {\n  load() {\n    const { options } = this;\n    // eslint-disable-next-line camelcase\n    const cellSetZarrLocation = options.map(({ setName }) => setName);\n    return Promise\n      .all([this.loadCellNames(), this.loadCellSetIds(cellSetZarrLocation)])\n      .then((data) => {\n        const [cellNames, cellSets] = data;\n        const cellSetsTree = treeInitialize(SETS_DATATYPE_CELL);\n        cellSets.forEach((cellSetIds, j) => {\n          const name = options[j].groupName;\n          let levelZeroNode = {\n            name,\n            children: [],\n          };\n          const uniqueCellSetIds = Array(...(new Set(cellSetIds))).sort();\n          const clusters = {};\n          // eslint-disable-next-line no-return-assign\n          uniqueCellSetIds.forEach(id => clusters[id] = {\n            name: id,\n            set: [],\n          });\n          cellSetIds.forEach((id, i) => clusters[id].set.push([cellNames[i], null]));\n          Object.values(clusters).forEach(\n            // eslint-disable-next-line no-return-assign\n            cluster => levelZeroNode = nodeAppendChild(levelZeroNode, cluster),\n          );\n          cellSetsTree.tree.push(levelZeroNode);\n        });\n        return Promise.resolve({ data: cellSetsTree, url: null });\n      });\n  }\n}\n","import BaseAnnDataLoader from './BaseAnnDataLoader';\n\n/**\n * Loader for converting zarr into the cell json schema.\n */\nexport default class CellsZarrLoader extends BaseAnnDataLoader {\n  /**\n   * Class method for loading spatial cell centroids.\n   * @returns {Promise} A promise for an array of tuples/triples for cell centroids.\n   */\n  loadXy() {\n    const {\n      options: { xy },\n    } = this;\n    if (this.xy) {\n      return this.xy;\n    }\n    if (!this.xy && xy) {\n      this.xy = this.loadNumeric(xy);\n      return this.xy;\n    }\n    this.xy = Promise.resolve(null);\n    return this.xy;\n  }\n\n  /**\n   * Class method for loading spatial cell polygons.\n   * @returns {Promise} A promise for an array of arrays for cell polygons.\n   */\n  loadPoly() {\n    const {\n      options: { poly },\n    } = this;\n    if (this.poly) {\n      return this.poly;\n    }\n    if (!this.poly && poly) {\n      this.poly = this.loadNumeric(poly);\n      return this.poly;\n    }\n    this.poly = Promise.resolve(null);\n    return this.poly;\n  }\n\n  /**\n   * Class method for loading various mappings, like UMAP or tSNE cooridnates.\n   * @returns {Promise} A promise for an array of tuples of coordinates.\n   */\n  loadMappings() {\n    const {\n      options: { mappings },\n    } = this;\n    if (this.mappings) {\n      return this.mappings;\n    }\n    if (!this.mappings && mappings) {\n      this.mappings = Promise.all(\n        Object.keys(mappings).map(async (coordinationName) => {\n          const { key } = mappings[coordinationName];\n          return { coordinationName, arr: await this.loadNumeric(key) };\n        }),\n      );\n      return this.mappings;\n    }\n    this.mappings = Promise.resolve(null);\n    return this.mappings;\n  }\n\n  /**\n   * Class method for loading factors, which are cell set ids.\n   * @returns {Promise} A promise for an array of an array of strings of ids,\n   * where subarray is a clustering/factor.\n   */\n  loadFactors() {\n    const {\n      options: { factors },\n    } = this;\n    if (factors) {\n      return this.loadCellSetIds(factors);\n    }\n    return Promise.resolve(null);\n  }\n\n  async load() {\n    const [mappings, xy, poly, cellNames, factors] = await Promise.all([\n      this.loadMappings(),\n      this.loadXy(),\n      this.loadPoly(),\n      this.loadCellNames(),\n      this.loadFactors(),\n    ]);\n    const cells = {};\n    cellNames.forEach((name, i) => {\n      cells[name] = {};\n      if (mappings) {\n        mappings.forEach(({ coordinationName, arr }) => {\n          if (!cells[name].mappings) {\n            cells[name].mappings = {};\n          }\n          const { dims } = this.options.mappings[coordinationName];\n          cells[name].mappings[coordinationName] = dims.map(\n            dim => arr.data[i][dim],\n          );\n        });\n      }\n      if (xy) {\n        cells[name].xy = xy.data[i];\n      }\n      if (poly) {\n        cells[name].poly = poly.data[i];\n      }\n      if (factors) {\n        const factorsObj = {};\n        factors.forEach(\n          // eslint-disable-next-line no-return-assign\n          (factor, j) => (factorsObj[this.options.factors[j].split('/').slice(-1)] = factor[i]),\n        );\n        cells[name].factors = factorsObj;\n      }\n    });\n    return Promise.resolve({ data: cells, url: null });\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport { openArray } from 'zarr';\nimport { extent } from 'd3-array';\nimport BaseAnnDataLoader from './BaseAnnDataLoader';\n\n/**\n * Loader for converting zarr into the a cell x gene matrix for use in Genes/Heatmap components.\n */\nexport default class MatrixZarrLoader extends BaseAnnDataLoader {\n  /**\n   * Class method for loading row oriented (CSR) sparse data from zarr.\n   * @param {string} matrix Location of the matrix.\n   * @param {string} shape Shape of the non-sparse output.\n   * @returns {Object} A { data: Float32Array } contianing the CellXGene matrix.\n   */\n  async _loadCSRSparseCellXGene(matrix, shape) {\n    const { store } = this;\n    const [rows, cols, cellXGene] = await Promise.all(['indptr', 'indices', 'data'].map(async (name) => {\n      const z = await openArray({ store, path: `${matrix}/${name}`, mode: 'r' });\n      const { data } = await z.getRaw(null);\n      return data;\n    }));\n    const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n    let row = 0;\n    rows.forEach((_, index) => {\n      const rowStart = rows[index];\n      const rowEnd = rows[index + 1];\n      for (let i = rowStart; i < rowEnd; i += 1) {\n        const val = cellXGene[i];\n        const col = cols[i];\n        cellXGeneMatrix[row * shape[1] + col] = val;\n      }\n      row += 1;\n    });\n    return { data: cellXGeneMatrix };\n  }\n\n  /**\n   * Class method for loading column oriented (CSC) sparse data from zarr.\n   * @param {string} matrix Location of the matrix.\n   * @param {string} shape Shape of the non-sparse output.\n   * @returns {Object} A { data: Float32Array } contianing the CellXGene matrix.\n   */\n  async _loadCSCSparseCellXGene(matrix, shape) {\n    const { store } = this;\n    const [cols, rows, cellXGene] = await Promise.all(['indptr', 'indices', 'data'].map(async (name) => {\n      const z = await openArray({ store, path: `${matrix}/${name}`, mode: 'r' });\n      const { data } = await z.getRaw(null);\n      return data;\n    }));\n    const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n    let col = 0;\n    cols.forEach((_, index) => {\n      const colStart = cols[index];\n      const colEnd = cols[index + 1];\n      for (let i = colStart; i < colEnd; i += 1) {\n        const val = cellXGene[i];\n        const row = rows[i];\n        cellXGeneMatrix[row * shape[1] + col] = val;\n      }\n      col += 1;\n    });\n    return { data: cellXGeneMatrix };\n  }\n\n  /**\n   * Class method for loading the cell x gene matrix.\n   * @returns {Promise} A promise for the zarr array contianing the cell x gene data.\n   */\n  async loadCellXGene() {\n    const { store } = this;\n    if (this.arr) {\n      return this.arr;\n    }\n    const {\n      options: { matrix },\n    } = this;\n    const zattrs = await this.getJson(`${matrix}/.zattrs`);\n    const encodingType = zattrs['encoding-type'];\n    if (encodingType) {\n      if (encodingType === 'csr_matrix') {\n        this.arr = this._loadCSRSparseCellXGene(matrix, zattrs.shape);\n        return this.arr;\n      }\n      if (encodingType === 'csc_matrix') {\n        this.arr = this._loadCSCSparseCellXGene(matrix, zattrs.shape);\n        return this.arr;\n      }\n    }\n    this.arr = openArray({ store, path: matrix, mode: 'r' }).then(z => new Promise((resolve) => {\n      z.getRaw(null)\n        .then(resolve);\n    }));\n    return this.arr;\n  }\n\n  /**\n   * Class method for loading the genes list from AnnData.var.\n   * @returns {Promise} A promise for the zarr array contianing the gene names.\n   */\n  async loadGeneNames() {\n    if (this.geneNames) {\n      return this.geneNames;\n    }\n    const { geneFilter: geneFilterZarr } = this.options;\n    let geneFilter;\n    if (geneFilterZarr) {\n      geneFilter = await this.getFlatArrDecompressed(geneFilterZarr);\n    }\n    const { _index } = await this.getJson('var/.zattrs');\n    if (this.geneNames) {\n      return this.geneNames;\n    }\n    this.geneNames = this.getFlatTextArr(`var/${_index}`).then(data => data.filter(\n      (_, j) => !geneFilter || geneFilter[j],\n    ));\n    return this.geneNames;\n  }\n\n  load() {\n    return Promise\n      .all([this.loadCellNames(), this.loadGeneNames(), this.loadCellXGene()])\n      .then((d) => {\n        const [cellNames, geneNames, { data: cellXGeneMatrix }] = d;\n        const attrs = { rows: cellNames, cols: geneNames };\n        if (!this.min || !this.max) {\n          [this.min, this.max] = extent(cellXGeneMatrix);\n        }\n        const ratio = 255 / (this.max - this.min);\n        const data = new Uint8Array(cellXGeneMatrix.map(i => Math.floor((i - this.min) * ratio)));\n        return {\n          data: [\n            attrs, { data },\n          ],\n          url: null,\n        };\n      });\n  }\n}\n","import CellSetsZarrLoader from './CellSetsZarrLoader';\nimport CellsZarrLoader from './CellsZarrLoader';\nimport MatrixZarrLoader from './MatrixZarrLoader';\n\nexport default { CellSetsZarrLoader, CellsZarrLoader, MatrixZarrLoader };\n","import { HTTPStore } from 'zarr';\nimport AbstractLoader from './AbstractLoader';\n\nexport default class GenomicProfilesZarrLoader extends AbstractLoader {\n  constructor(params) {\n    super(params);\n\n    // TODO: Use this.requestInit to provide headers, tokens, etc.\n    // eslint-disable-next-line no-unused-vars\n    const { url, requestInit } = this;\n    this.store = new HTTPStore(url);\n  }\n\n  loadAttrs() {\n    const { store } = this;\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = store.getItem('.zattrs')\n      .then((bytes) => {\n        const decoder = new TextDecoder('utf-8');\n        const json = JSON.parse(decoder.decode(bytes));\n        return json;\n      });\n    return this.attrs;\n  }\n\n  load() {\n    const { url } = this;\n    return this.loadAttrs()\n      .then(attrs => Promise.resolve({ data: attrs, url }));\n  }\n}\n","import JsonLoader from './JsonLoader';\nimport MatrixZarrLoader from './MatrixZarrLoader';\nimport GenesJsonAsMatrixZarrLoader from './GenesJsonAsMatrixZarrLoader';\nimport ClustersJsonAsMatrixZarrLoader from './ClustersJsonAsMatrixZarrLoader';\nimport RasterJsonLoader from './RasterJsonLoader';\nimport CellSetsJsonLoader from './CellSetsJsonLoader';\nimport AnnDataLoaders from './anndata-loaders';\nimport GenomicProfilesZarrLoader from './GenomicProfilesZarrLoader';\n\nconst ANNDATA = 'anndata';\n\nexport const fileTypeToLoader = {\n  'expression-matrix.zarr': MatrixZarrLoader,\n  'clusters.json': ClustersJsonAsMatrixZarrLoader,\n  'genes.json': GenesJsonAsMatrixZarrLoader,\n  'cells.json': JsonLoader,\n  'molecules.json': JsonLoader,\n  'neighborhoods.json': JsonLoader,\n  'raster.json': RasterJsonLoader,\n  'cell-sets.json': CellSetsJsonLoader,\n  [`${ANNDATA}-cell-sets.zarr`]: AnnDataLoaders.CellSetsZarrLoader,\n  [`${ANNDATA}-cells.zarr`]: AnnDataLoaders.CellsZarrLoader,\n  [`${ANNDATA}-expression-matrix.zarr`]: AnnDataLoaders.MatrixZarrLoader,\n  'genomic-profiles.zarr': GenomicProfilesZarrLoader,\n};\n","import {\n  useState, useEffect, useRef,\n} from 'react';\nimport { fileTypeToLoader } from '../loaders/types';\nimport JsonLoader from '../loaders/JsonLoader';\n\n/**\n * Return the bottom coordinate of the layout.\n * https://github.com/STRML/react-grid-layout/blob/20dac73f91274526034c00968b5bedb9c2ed36b9/lib/utils.js#L82\n * @param  {array} layout react-grid-layout layout array.\n * @returns {number} Bottom coordinate.\n */\nfunction getNumRows(layout) {\n  let max = 0;\n  let bottomY;\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0, len = layout.length; i < len; i++) {\n    bottomY = layout[i].y + layout[i].h;\n    if (bottomY > max) max = bottomY;\n  }\n  return max;\n}\n\n/**\n * Compute the row height based on the container height, number of rows,\n * and margin/padding. Basically the reverse of the react-grid-layout's\n * `.containerHeight()` function.\n * https://github.com/STRML/react-grid-layout/blob/83251e5e682abfa3252ff89d4bacf47fdc1f4270/lib/ReactGridLayout.jsx#L223\n * @param {number} containerHeight The height of the .vitessce-container element.\n * @param {number} numRows The number of rows in the layout.\n * @param {number} margin The margin value that will be passed to VitessceGrid.\n * @param {number} padding The padding value that will be passed to VitessceGrid.\n * @returns {number} The new row height value.\n */\nfunction getRowHeight(containerHeight, numRows, margin, padding) {\n  const effectiveContainerHeight = containerHeight - 2 * padding - (numRows - 1) * margin;\n  return effectiveContainerHeight / numRows;\n}\n\nexport function useRowHeight(config, initialRowHeight, height, margin, padding) {\n  const [containerHeight, setContainerHeight] = useState(height);\n  const [rowHeight, setRowHeight] = useState(initialRowHeight);\n  const containerRef = useRef();\n\n  // Detect when the `config` or `containerHeight` variables\n  // have changed, and update `rowHeight` in response.\n  useEffect(() => {\n    const numRows = getNumRows(config.layout);\n    const newRowHeight = getRowHeight(containerHeight, numRows, margin, padding);\n    setRowHeight(newRowHeight);\n  }, [containerHeight, config, margin, padding]);\n\n  // Update the `containerHeight` state when the `height` prop has changed.\n  useEffect(() => {\n    if (height !== null && height !== undefined) {\n      setContainerHeight(height);\n    }\n  }, [height]);\n\n  // If no height prop has been provided, set the `containerHeight`\n  // using height of the `.vitessce-container` element.\n  // Check the container element height whenever the window has been\n  // resized, as it may change if `.vitessce-container` should be\n  // sized relative to its parent (and by extension, potentially the window).\n  useEffect(() => {\n    if (height !== null && height !== undefined) {\n      // eslint will complain if the return value is inconsistent,\n      // so return a no-op function.\n      return () => {};\n    }\n    function onWindowResize() {\n      if (!containerRef.current) return;\n      const containerRect = containerRef.current.getBoundingClientRect();\n      setContainerHeight(containerRect.height);\n    }\n    window.addEventListener('resize', onWindowResize);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onWindowResize);\n    };\n  }, [containerRef, height]);\n\n\n  return [rowHeight, containerRef];\n}\n\n/**\n * Create a mapping from dataset ID to loader objects by data type.\n * @param {object[]} datasets The datasets array from the view config.\n * @param {string} configDescription The top-level description in the\n * view config.\n * @returns {object} Mapping from dataset ID to data type to loader\n * instance.\n */\nexport function createLoaders(datasets, configDescription) {\n  const result = {};\n  datasets.forEach((dataset) => {\n    const datasetLoaders = {\n      name: dataset.name,\n      description: dataset.description || configDescription,\n      loaders: {},\n    };\n    dataset.files.forEach((file) => {\n      // Fall back to JsonLoader if a loader is not found for the file type.\n      const matchingLoaderClass = fileTypeToLoader[file.fileType] || JsonLoader;\n      // eslint-disable-next-line new-cap\n      datasetLoaders.loaders[file.type] = new matchingLoaderClass(file);\n    });\n    result[dataset.uid] = datasetLoaders;\n  });\n  return result;\n}\n","import React, {\n  useEffect,\n} from 'react';\nimport { VitessceGridLayout } from './vitessce-grid-layout';\nimport { useRowHeight, createLoaders } from './vitessce-grid-utils';\nimport {\n  useSetViewConfig,\n  useSetLoaders,\n  useEmitGridResize,\n  useRemoveComponent,\n  useChangeLayout,\n  useLayout,\n} from './state/hooks';\n\nconst padding = 10;\nconst margin = 5;\n\n/**\n * The wrapper for the VitessceGrid and LoadingIndicator components.\n * @param {object} props\n * @param {number} props.rowHeight The height of each grid row. Optional.\n * @param {object} props.config The view config.\n * @param {function} props.getComponent A function that maps component names to their\n * React counterparts.\n * @param {string} props.theme The theme name.\n * @param {number} props.height Total height for grid. Optional.\n * @param {function} props.onWarn A callback for warning messages. Optional.\n */\nexport default function VitessceGrid(props) {\n  const {\n    rowHeight: initialRowHeight,\n    config,\n    getComponent,\n    theme,\n    height,\n  } = props;\n\n  const [rowHeight, containerRef] = useRowHeight(config, initialRowHeight, height, margin, padding);\n  const onResize = useEmitGridResize();\n\n  // When the row height has changed, publish a GRID_RESIZE event.\n  useEffect(() => {\n    onResize();\n  }, [rowHeight, onResize]);\n\n  const setViewConfig = useSetViewConfig();\n  const setLoaders = useSetLoaders();\n  const removeComponent = useRemoveComponent();\n  const changeLayout = useChangeLayout();\n  const layout = useLayout();\n\n  // Update the view config and loaders in the global state.\n  useEffect(() => {\n    if (config) {\n      setViewConfig(config);\n      const loaders = createLoaders(config.datasets, config.description);\n      setLoaders(loaders);\n    } else {\n      // No config found, so clear the loaders.\n      setLoaders({});\n    }\n  }, [config, setViewConfig, setLoaders]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={`vitessce-container vitessce-theme-${theme}`}\n    >\n      {layout && (\n        <VitessceGridLayout\n          layout={layout}\n          height={height}\n          rowHeight={rowHeight}\n          theme={theme}\n          getComponent={getComponent}\n          draggableHandle=\".title\"\n          margin={margin}\n          padding={padding}\n          onRemoveComponent={removeComponent}\n          onLayoutChange={changeLayout}\n          reactGridLayoutProps={{\n            onResize,\n            onResizeStop: onResize,\n          }}\n        />\n      )}\n    </div>\n  );\n}\n","// Exported because used by the cypress tests: They route API requests to the fixtures instead.\nexport const urlPrefix = 'https://s3.amazonaws.com/vitessce-data/0.0.31/master_release';\n\nfunction makeLayerNameToConfig(datasetPrefix) {\n  return name => ({\n    name,\n    type: name.toUpperCase(),\n    fileType: `${name}.json`,\n    url: `${urlPrefix}/${datasetPrefix}/${datasetPrefix}.${name}.json`,\n  });\n}\n\nconst linnarssonLayerNames = [\n  'cells',\n  'cell-sets',\n  'raster',\n  'molecules',\n  'neighborhoods',\n];\nconst linnarssonDescription = 'Spatial organization of the somatosensory cortex revealed by cyclic smFISH';\nconst linnarssonBase = {\n  description: linnarssonDescription,\n  layers: [\n    ...linnarssonLayerNames.map(makeLayerNameToConfig('linnarsson')),\n    {\n      // TODO: remove this temporary override when the\n      // clusters.json file has been converted to expression-matrix.zarr format.\n      ...makeLayerNameToConfig('linnarsson')('clusters'),\n      type: 'EXPRESSION-MATRIX',\n    },\n  ],\n};\nconst linnarssonBaseNoClusters = {\n  description: linnarssonDescription,\n  layers: linnarssonLayerNames.filter(name => name !== 'clusters')\n    .map(makeLayerNameToConfig('linnarsson')),\n};\n\nconst driesDescription = 'Giotto, a pipeline for integrative analysis and visualization of single-cell spatial transcriptomic data';\nconst driesBase = {\n  description: driesDescription,\n  layers: [\n    'cells',\n    'cell-sets',\n  ].map(makeLayerNameToConfig('dries')),\n};\n\nconst wangDescription = 'Multiplexed imaging of high-density libraries of RNAs with MERFISH and expansion microscopy';\nconst wangBase = {\n  description: wangDescription,\n  layers: [\n    ...['cells', 'molecules'].map(makeLayerNameToConfig('wang')),\n    {\n      // TODO: remove this temporary override when the\n      // genes.json file has been converted to expression-matrix.zarr format.\n      ...makeLayerNameToConfig('wang')('genes'),\n      name: 'expression-matrix',\n      type: 'EXPRESSION-MATRIX',\n    },\n  ],\n};\n\nconst vanderbiltDescription = 'High Bit Depth (uint16) Multiplex Immunofluorescence Imaging';\nconst vanderbiltBase = {\n  description: vanderbiltDescription,\n  layers: [\n    'raster',\n  ].map(makeLayerNameToConfig('spraggins')),\n};\n\n/* eslint-disable object-property-newline */\n/* eslint-disable object-curly-newline */\n// Note that the ordering of the components in the staticLayout\n// can affect the z-index of plot tooltips due to the\n// resulting ordering of elements in the DOM.\nexport const configs = {\n  'just-scatter': {\n    version: '0.1.0',\n    public: false,\n    layers: [\n      {\n        name: 'cells',\n        type: 'CELLS',\n        fileType: 'cells.json',\n        url: `${urlPrefix}/linnarsson/linnarsson.cells.json`,\n        requestInit: {\n          // Where the client checks that the value is from an enumeration,\n          // I've chosen one of the allowed values,\n          // but nothing on our S3 actually needs any of these.\n          method: 'GET',\n          headers: { 'x-foo': 'FAKE' },\n          mode: 'cors',\n          credentials: 'omit',\n          cache: 'no-store',\n          redirect: 'error',\n          referrer: 'FAKE',\n          integrity: 'FAKE',\n        },\n      },\n    ],\n    name: 'Linnarsson, just scatterplot',\n    staticLayout: [\n      {\n        component: 'scatterplot',\n        props: {\n          mapping: 't-SNE',\n          view: {\n            zoom: 0.75,\n            target: [0, 0, 0],\n          },\n        },\n        x: 0, y: 0, w: 12, h: 2,\n      },\n    ],\n  },\n  'just-scatter-expression': {\n    version: '0.1.0',\n    public: false,\n    layers: [\n      {\n        name: 'cells',\n        type: 'CELLS',\n        url: 'https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.cells.json',\n      },\n      {\n        name: 'genes',\n        type: 'GENES',\n        url: 'https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.genes.json',\n      },\n    ],\n    name: 'Linnarsson, just scatterplot and expression',\n    staticLayout: [\n      {\n        component: 'scatterplot',\n        props: {\n          mapping: 't-SNE',\n          view: {\n            zoom: 0.75,\n            target: [0, 0, 0],\n          },\n        },\n        x: 0, y: 0, w: 8, h: 2,\n      },\n      {\n        component: 'genes',\n        x: 8, y: 2, w: 4, h: 2,\n      },\n    ],\n  },\n  'linnarsson-2018': {\n    name: 'Linnarsson',\n    version: '1.0.0',\n    description: linnarssonDescription,\n    public: true,\n    datasets: [\n      {\n        uid: 'linnarsson-2018',\n        name: 'Linnarsson 2018',\n        description: `Linnarsson: ${linnarssonDescription}`,\n        files: linnarssonBase.layers.map(file => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace: {\n      embeddingZoom: {\n        PCA: 0,\n        TSNE: 0.75,\n      },\n      embeddingType: {\n        PCA: 'PCA',\n        TSNE: 't-SNE',\n      },\n      spatialZoom: {\n        A: -5.5,\n      },\n      spatialTargetX: {\n        A: 16000,\n      },\n      spatialTargetY: {\n        A: 20000,\n      },\n    },\n    layout: [\n      { component: 'description',\n        x: 0, y: 0, w: 2, h: 1 },\n      { component: 'layerController',\n        x: 0, y: 1, w: 2, h: 4,\n      },\n      { component: 'status',\n        x: 0, y: 5, w: 2, h: 1 },\n      { component: 'spatial',\n        coordinationScopes: {\n          spatialZoom: 'A',\n          spatialTargetX: 'A',\n          spatialTargetY: 'A',\n        },\n        x: 2, y: 0, w: 4, h: 4 },\n      { component: 'genes',\n        x: 9, y: 0, w: 3, h: 2 },\n      { component: 'cellSets',\n        x: 9, y: 3, w: 3, h: 2 },\n      { component: 'heatmap',\n        props: {\n          transpose: true,\n        },\n        x: 2, y: 4, w: 5, h: 2 },\n      { component: 'cellSetExpression',\n        x: 7, y: 4, w: 3, h: 2 },\n      { component: 'expressionHistogram',\n        x: 10, y: 4, w: 2, h: 2 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'PCA',\n          embeddingZoom: 'PCA',\n        },\n        x: 6, y: 0, w: 3, h: 2 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'TSNE',\n          embeddingZoom: 'TSNE',\n        },\n        x: 6, y: 2, w: 3, h: 2 },\n    ],\n  },\n  'linnarsson-2018-two-spatial': {\n    ...linnarssonBase,\n    version: '0.1.0',\n    name: 'Linnarsson (two spatial)',\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -8,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 0, w: 5, h: 2 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 2, w: 5, h: 2 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 5, y: 0, w: 5, h: 2 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 5, y: 2, w: 5, h: 2 },\n      { component: 'genes',\n        x: 10, y: 2, w: 2, h: 2 },\n      { component: 'heatmap',\n        x: 0, y: 4, w: 12 },\n    ],\n  },\n  'linnarsson-2018-just-spatial': {\n    ...linnarssonBaseNoClusters,\n    version: '0.1.0',\n    name: 'Linnarsson (just spatial)',\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 0, w: 10, h: 2 },\n      { component: 'genes',\n        x: 10, y: 1, w: 2, h: 1 },\n    ],\n  },\n  'linnarsson-2018-static': {\n    ...linnarssonBase,\n    version: '0.1.0',\n    name: 'Linnarsson (static layout)',\n    staticLayout: [\n      { component: 'description',\n        props: {\n          description: `Linnarsson (static layout): ${linnarssonDescription}`,\n        },\n        x: 0, y: 0, w: 3, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 2, w: 3, h: 2 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 3, y: 0, w: 6, h: 4 },\n      { component: 'genes',\n        x: 9, y: 2, w: 3, h: 2 },\n      { component: 'heatmap',\n        x: 0, y: 4, w: 12, h: 1 },\n    ],\n  },\n  'linnarsson-2018-dozen': {\n    ...linnarssonBase,\n    version: '0.1.0',\n    name: 'Linnarsson (static layout, redundant components for performance testing)',\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 0, w: 4, h: 1 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 1, w: 4, h: 1 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 4, y: 0, w: 4, h: 1 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 4, y: 1, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 2, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 3, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 4, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 5, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 2, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 3, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 4, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 5, w: 4, h: 1 },\n      { component: 'genes',\n        x: 8, y: 2, w: 4, h: 2 },\n      { component: 'heatmap',\n        x: 8, y: 4, w: 4, h: 2 },\n    ],\n  },\n  'dries-2019': {\n    name: 'Dries',\n    version: '1.0.0',\n    description: driesDescription,\n    public: true,\n    datasets: [\n      {\n        uid: 'dries-2019',\n        name: 'Dries 2019',\n        files: driesBase.layers.map(file => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace: {\n      embeddingType: {\n        TSNE: 't-SNE',\n        UMAP: 'UMAP',\n      },\n      embeddingCellSetPolygonsVisible: {\n        A: false,\n      },\n      embeddingCellSetLabelsVisible: {\n        A: true,\n      },\n      embeddingCellSetLabelSize: {\n        A: 16,\n      },\n      embeddingCellRadius: {\n        A: 1,\n      },\n      embeddingZoom: {\n        TSNE: 3,\n        UMAP: 3,\n      },\n      spatialZoom: {\n        A: -4.4,\n      },\n      spatialTargetX: {\n        A: 3800,\n      },\n      spatialTargetY: {\n        A: -900,\n      },\n    },\n    layout: [\n      { component: 'description',\n        x: 9, y: 0, w: 3, h: 2 },\n      { component: 'status',\n        x: 9, y: 2, w: 3, h: 2 },\n      { component: 'cellSets',\n        x: 9, y: 4, w: 3, h: 4 },\n      { component: 'cellSetSizes',\n        x: 5, y: 4, w: 4, h: 4 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'TSNE',\n          embeddingZoom: 'TSNE',\n          embeddingCellSetLabelsVisible: 'A',\n          embeddingCellSetLabelSize: 'A',\n          embeddingCellSetPolygonsVisible: 'A',\n          embeddingCellRadius: 'A',\n        },\n        x: 0, y: 2, w: 5, h: 4 },\n      { component: 'spatial',\n        props: {\n          cellRadius: 50,\n        },\n        coordinationScopes: {\n          spatialZoom: 'A',\n          spatialTargetX: 'A',\n          spatialTargetY: 'A',\n        },\n        x: 5, y: 0, w: 4, h: 4 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'UMAP',\n          embeddingZoom: 'UMAP',\n          embeddingCellSetLabelsVisible: 'A',\n          embeddingCellSetLabelSize: 'A',\n          embeddingCellSetPolygonsVisible: 'A',\n          embeddingCellRadius: 'A',\n        },\n        x: 0, y: 0, w: 5, h: 4 },\n    ],\n  },\n  'wang-2019': {\n    name: 'Wang',\n    version: '1.0.0',\n    description: wangDescription,\n    public: true,\n    datasets: [\n      {\n        uid: 'wang-2019',\n        name: 'Wang 2019',\n        files: wangBase.layers.map(file => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace: {\n      spatialZoom: {\n        A: -1,\n      },\n      spatialLayers: {\n        A: [\n          {\n            type: 'molecules', radius: 2, opacity: 1, visible: true,\n          },\n          {\n            type: 'cells', opacity: 1, radius: 50, visible: true, stroked: false,\n          },\n        ],\n      },\n    },\n    layout: [\n      { component: 'spatial',\n        coordinationScopes: {\n          spatialZoom: 'A',\n          spatialLayers: 'A',\n        },\n        x: 0, y: 0, w: 10, h: 2 },\n      { component: 'genes',\n        x: 10, y: 0, w: 2, h: 4 },\n      { component: 'expressionHistogram',\n        x: 0, y: 2, w: 10, h: 2 },\n    ],\n  },\n\n  vanderbilt: {\n    ...vanderbiltBase,\n    version: '0.1.0',\n    name: 'Spraggins',\n    public: true,\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [20000, 20000, 0],\n          },\n        },\n        x: 0, y: 0, w: 9, h: 2 },\n      { component: 'layerController',\n        x: 9, y: 0, w: 3, h: 2 },\n    ],\n  },\n  'just-higlass': {\n    public: false,\n    initStrategy: 'auto',\n    version: '1.0.0',\n    datasets: [\n      {\n        uid: 'higlass-dataset',\n        name: 'HiGlass Dataset',\n        files: [],\n      },\n    ],\n    name: 'HiGlass demo',\n    coordinationSpace: {\n      genomicZoomX: {\n        A: 0,\n      },\n      genomicZoomY: {\n        A: 0,\n      },\n      genomicTargetX: {\n        A: 1549999999.5,\n      },\n      genomicTargetY: {\n        A: 1549999999.5,\n      },\n    },\n    layout: [\n      {\n        component: 'higlass',\n        coordinationScopes: {\n          genomicZoomX: 'A',\n          genomicZoomY: 'A',\n          genomicTargetX: 'A',\n          genomicTargetY: 'A',\n        },\n        props: {\n          hgViewConfig: {\n            uid: 'aa',\n            autocompleteSource: '/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',\n            genomePositionSearchBox: {\n              autocompleteServer: '//higlass.io/api/v1',\n              autocompleteId: 'OHJakQICQD6gTD7skx4EWA',\n              chromInfoServer: '//higlass.io/api/v1',\n              chromInfoId: 'hg19',\n              visible: true,\n            },\n            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n            tracks: {\n              top: [\n                {\n                  type: 'horizontal-gene-annotations',\n                  height: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  uid: 'OHJakQICQD6gTD7skx4EWA',\n                  options: {\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelPosition: 'hidden',\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minHeight: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'horizontal-chromosome-labels',\n                  height: 30,\n                  uid: 'X4e_1DKiQHmyghDa6lLMVA',\n                  options: {\n                    color: '#808080',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              left: [\n                {\n                  type: 'vertical-gene-annotations',\n                  width: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  options: {\n                    labelPosition: 'bottomRight',\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minWidth: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                  uid: 'dqBTMH78Rn6DeSyDBoAEXw',\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'vertical-chromosome-labels',\n                  width: 30,\n                  uid: 'RHdQK4IRQ7yJeDmKWb7Pcg',\n                  options: {\n                    color: '#777777',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    minWidth: 35,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              center: [\n                {\n                  uid: 'c1',\n                  type: 'combined',\n                  height: 600,\n                  contents: [\n                    {\n                      server: '//higlass.io/api/v1',\n                      tilesetUid: 'CQMd6V_cRw6iCI_-Unl3PQ',\n                      type: 'heatmap',\n                      options: {\n                        maxZoom: null,\n                        labelPosition: 'bottomRight',\n                        name: 'Rao et al. (2014) GM12878 MboI (allreps) 1kb',\n                        backgroundColor: 'black',\n                        labelLeftMargin: 0,\n                        labelRightMargin: 0,\n                        labelTopMargin: 0,\n                        labelBottomMargin: 0,\n                        labelShowResolution: true,\n                        labelShowAssembly: true,\n                        labelColor: '#ffffff',\n                        labelTextOpacity: 0.5,\n                        labelBackgroundColor: 'black',\n                        labelBackgroundOpacity: 0.01,\n                        colorRange: [\n                          '#000000',\n                          '#222e54',\n                          '#448db2',\n                          '#68bf30',\n                          '#fdff54',\n                          '#FFFFFF',\n                        ],\n                        colorbarBackgroundColor: 'black',\n                        colorbarBackgroundOpacity: 0.01,\n                        colorbarPosition: 'topRight',\n                        trackBorderWidth: 0,\n                        trackBorderColor: 'black',\n                        heatmapValueScaling: 'log',\n                        showMousePosition: true,\n                        mousePositionColor: '#ff00ff',\n                        showTooltip: false,\n                        extent: 'full',\n                        zeroValueColor: null,\n                        scaleStartPercent: '0.00000',\n                        scaleEndPercent: '1.00000',\n                      },\n                      height: 500,\n                      uid: 'GjuZed1ySGW1IzZZqFB9BA',\n                      transforms: [\n                        {\n                          name: 'ICE',\n                          value: 'weight',\n                        },\n                      ],\n                    },\n                  ],\n                  options: {},\n                },\n              ],\n              right: [],\n              bottom: [],\n              whole: [],\n              gallery: [],\n            },\n            layout: {\n              w: 12,\n              h: 12,\n              x: 0,\n              y: 0,\n              moved: false,\n              static: false,\n            },\n          },\n        },\n        x: 0, y: 0, w: 8, h: 2,\n      },\n      {\n        component: 'higlass',\n        coordinationScopes: {\n          genomicZoomX: 'A',\n          genomicZoomY: 'A',\n          genomicTargetX: 'A',\n          genomicTargetY: 'A',\n        },\n        props: {\n          hgViewConfig: {\n            uid: 'aa',\n            autocompleteSource: '/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',\n            genomePositionSearchBox: {\n              autocompleteServer: '//higlass.io/api/v1',\n              autocompleteId: 'OHJakQICQD6gTD7skx4EWA',\n              chromInfoServer: '//higlass.io/api/v1',\n              chromInfoId: 'hg19',\n              visible: true,\n            },\n            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n            tracks: {\n              top: [\n                {\n                  type: 'horizontal-gene-annotations',\n                  height: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  uid: 'OHJakQICQD6gTD7skx4EWA',\n                  options: {\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelPosition: 'hidden',\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minHeight: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'horizontal-chromosome-labels',\n                  height: 30,\n                  uid: 'X4e_1DKiQHmyghDa6lLMVA',\n                  options: {\n                    color: '#808080',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              left: [\n                {\n                  type: 'vertical-gene-annotations',\n                  width: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  options: {\n                    labelPosition: 'bottomRight',\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minWidth: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                  uid: 'dqBTMH78Rn6DeSyDBoAEXw',\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'vertical-chromosome-labels',\n                  width: 30,\n                  uid: 'RHdQK4IRQ7yJeDmKWb7Pcg',\n                  options: {\n                    color: '#777777',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    minWidth: 35,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              center: [\n                {\n                  uid: 'c1',\n                  type: 'combined',\n                  height: 600,\n                  contents: [\n                    {\n                      server: '//higlass.io/api/v1',\n                      tilesetUid: 'CQMd6V_cRw6iCI_-Unl3PQ',\n                      type: 'heatmap',\n                      options: {\n                        maxZoom: null,\n                        labelPosition: 'bottomRight',\n                        name: 'Rao et al. (2014) GM12878 MboI (allreps) 1kb',\n                        backgroundColor: 'black',\n                        labelLeftMargin: 0,\n                        labelRightMargin: 0,\n                        labelTopMargin: 0,\n                        labelBottomMargin: 0,\n                        labelShowResolution: true,\n                        labelShowAssembly: true,\n                        labelColor: '#ffffff',\n                        labelTextOpacity: 0.5,\n                        labelBackgroundColor: 'black',\n                        labelBackgroundOpacity: 0.01,\n                        colorRange: [\n                          '#000000',\n                          '#222e54',\n                          '#448db2',\n                          '#68bf30',\n                          '#fdff54',\n                          '#FFFFFF',\n                        ],\n                        colorbarBackgroundColor: 'black',\n                        colorbarBackgroundOpacity: 0.01,\n                        colorbarPosition: 'topRight',\n                        trackBorderWidth: 0,\n                        trackBorderColor: 'black',\n                        heatmapValueScaling: 'log',\n                        showMousePosition: true,\n                        mousePositionColor: '#ff00ff',\n                        showTooltip: false,\n                        extent: 'full',\n                        zeroValueColor: null,\n                        scaleStartPercent: '0.00000',\n                        scaleEndPercent: '1.00000',\n                      },\n                      height: 500,\n                      uid: 'GjuZed1ySGW1IzZZqFB9BA',\n                      transforms: [\n                        {\n                          name: 'ICE',\n                          value: 'weight',\n                        },\n                      ],\n                    },\n                  ],\n                  options: {},\n                },\n              ],\n              right: [],\n              bottom: [],\n              whole: [],\n              gallery: [],\n            },\n            layout: {\n              w: 12,\n              h: 12,\n              x: 0,\n              y: 0,\n              moved: false,\n              static: false,\n            },\n          },\n        },\n        x: 8, y: 0, w: 4, h: 2,\n      },\n    ],\n  },\n  'sc-atac-seq-10x-genomics-pbmc': {\n    version: '1.0.0',\n    name: 'HiGlass serverless demo with 10x Genomics scATAC-seq 5k PBMC dataset',\n    datasets: [\n      {\n        uid: '10x-genomics-pbmc',\n        name: '10x Genomics PBMC',\n        files: [\n          {\n            type: 'genomic-profiles',\n            fileType: 'genomic-profiles.zarr',\n            url: 'http://higlass-serverless.s3.amazonaws.com/multivec/pbmc_10x_peaks_by_cluster.zarr',\n          },\n        ],\n      },\n    ],\n    layout: [\n      { component: 'genomicProfiles',\n        props: {\n          profileTrackUidKey: 'file',\n        },\n        x: 0, y: 0, w: 8, h: 2,\n      },\n      { component: 'description',\n        props: {\n          description: '10x Genomics scATAC-seq of 5k PBMCs. Note: the Zarr HiGlass Plugin Datafetcher is not yet optimized. Please be patient while the HiGlass tracks load.',\n        },\n        x: 8, y: 0, w: 4, h: 2 },\n    ],\n    initStrategy: 'auto',\n  },\n};\n/* eslint-enable */\n\nexport function listConfigs(showAll) {\n  return Object.entries(configs).filter(\n    entry => showAll || entry[1].public,\n  ).map(\n    ([id, config]) => ({\n      id,\n      name: config.name,\n      description: config.description,\n    }),\n  );\n}\n\nexport function getConfig(id) {\n  return configs[id];\n}\n","import React from 'react';\n\nimport version from '../version.json';\n\nfunction DatasetList(props) {\n  const { configs, theme } = props;\n  const aClassName = 'list-group-item list-group-item-action flex-column align-items-start bg-secondary';\n  const links = configs.map(\n    ({ id, name, description }) => (\n      <div className={aClassName} key={id}>\n        <a\n          href={`?dataset=${id}&theme=${theme}`}\n          key={id}\n        >\n          <h5>{name}</h5>\n          <p>{description}</p>\n        </a>\n        <a\n          href={`?dataset=${id}&theme=${theme}&small`}\n          style={{ fontSize: '75%' }}\n        >\n          {name} as component\n        </a>\n      </div>\n    ),\n  );\n  return (\n    <div className=\"list-group\">\n      {links}\n    </div>\n  );\n}\n\nfunction Form(props) {\n  const { configs, theme } = props;\n  return (\n    <form method=\"GET\">\n      <h1>Vitessce</h1>\n      <div>Select a dataset:</div>\n      <DatasetList configs={configs} theme={theme} />\n\n      <br />\n      <div>Or specify URL of configuration:</div>\n      <div className=\"input-group mb-3\">\n        <input type=\"text\" name=\"url\" className=\"form-control\" />\n        <input type=\"hidden\" name=\"theme\" value={theme} />\n        <div className=\"input-group-append\">\n          <button className=\"btn btn-outline-secondary\" type=\"submit\">Load</button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nfunction Info() {\n  return (\n    <>\n      <p className=\"info-paragraph\">\n        Vitessce is a visual integration tool for exploration of spatial single cell experiments.\n        Its modular design is optimized for scalable, linked visualizations that support the\n        spatial and non-spatial representation of tissue-, cell- and molecule-level data.\n        Vitessce integrates the <a href=\"https://github.com/hms-dbmi/viv\">Viv library</a> to visualize\n        highly multiplexed, high-resolution, high-bit depth image data directly from\n        OME-TIFF files and Bio-Formats-compatible Zarr stores.\n      </p>\n      <h5 className=\"info-section-text\">\n        Contributors\n      </h5>\n      <ul>\n        <li><a href=\"https://github.com/keller-mark\">Mark Keller</a></li>\n        <li><a href=\"https://github.com/mccalluc\">Chuck McCallum</a></li>\n        <li><a href=\"https://github.com/ilan-gold\">Ilan Gold</a></li>\n        <li><a href=\"https://github.com/manzt\">Trevor Manz</a></li>\n        <li><a href=\"https://github.com/thomaslchan\">Tos Chan</a></li>\n        <li><a href=\"https://github.com/jkmarx\">Jennifer Marx</a></li>\n        <li><a href=\"https://github.com/pkharchenko\">Peter Kharchenko</a></li>\n        <li><a href=\"https://github.com/ngehlenborg\">Nils Gehlenborg</a></li>\n      </ul>\n      <h5 className=\"info-section-text\">\n        Source Code\n      </h5>\n      <ul>\n        <li><a href=\"https://github.com/hubmapconsortium/vitessce\">GitHub</a></li>\n        <li><a href=\"https://www.npmjs.com/package/vitessce\">NPM</a></li>\n      </ul>\n      <h5 className=\"info-section-text\">\n        Funding\n      </h5>\n      <ul>\n        <li>\n          NIH/OD Human BioMolecular Atlas Program (HuBMAP)\n          (OT2OD026677, PI: Nils Gehlenborg).\n        </li>\n        <li>\n          NIH/NLM Biomedical Informatics and Data Science Research Training Program\n          (T15LM007092, PI: Nils Gehlenborg)\n        </li>\n        <li>Harvard Stem Cell Institute (CF-0014-17-03, PI: Nils Gehlenborg)</li>\n      </ul>\n      <p className=\"info-section-text\">\n        This deployment: branch={version.branch} | hash={version.hash} | date={version.date}\n      </p>\n    </>\n  );\n}\n\nexport default function Welcome(props) {\n  const { configs, theme, showBetaHeader } = props;\n  return (\n    <div className={`vitessce-container vitessce-theme-${theme} welcome-container`}>\n      {showBetaHeader && (\n        <div className=\"welcome-beta-header\">\n          <p>Visit <a href=\"http://beta.vitessce.io\">beta.vitessce.io</a> to view the next version of the Vitessce home page and documentation!</p>\n        </div>\n      )}\n      <div className=\"react-grid-layout container-fluid\" style={{ height: 'max(100vh, 100%)' }}>\n        <div className=\"row\">\n          <div className=\"welcome-col-left\">\n            <div className=\"card card-body bg-primary\">\n              <Form configs={configs} theme={theme} />\n            </div>\n          </div>\n          <div className=\"welcome-col-right\">\n            <div className=\"card card-body bg-primary\">\n              <Info />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { PRIMARY_CARD } from '../components/classNames';\n\nexport default function Warning(props) {\n  const {\n    title,\n    preformatted,\n    unformatted,\n    theme,\n  } = props;\n  return (\n    <div className={`vitessce-container vitessce-theme-${theme}`}>\n      <div className=\"warning-layout container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className={PRIMARY_CARD}>\n              <h1>{title}</h1>\n              <pre>{preformatted}</pre>\n              <div>{unformatted}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import Ajv from 'ajv';\nimport { useEffect } from 'react';\nimport configSchema from '../schemas/config.schema.json';\nimport cellSetsSchema from '../schemas/cell-sets.schema.json';\nimport rasterSchema from '../schemas/raster.schema.json';\nimport { useViewConfigStore, useLoaders, useWarning } from './state/hooks';\n\nfunction validateViewConfig(viewConfig) {\n  // Need the try-catch here since Zustand will actually\n  // just catch and ignore errors in its subscription callbacks.\n  try {\n    const validate = new Ajv()\n      .addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema);\n    const valid = validate(viewConfig);\n    if (!valid) {\n      const failureReason = JSON.stringify(validate.errors, null, 2);\n      throw new Error(`Config validation failed: ${failureReason}`);\n    }\n  } catch (e) {\n    console.error(e);\n  }\n  // Do nothing if successful.\n}\n\n/**\n * This is a dummy component which handles\n * publishing new view configs and loaders to\n * the provided callbacks on changes.\n * @param {object} props\n * @param {function} props.onConfigChange A callback function\n * to execute on each change of the Vitessce view config.\n * @param {function} props.onLoaderChange A callback function\n * to execute on each change of the loaders object.\n * @param {boolean} props.validateOnConfigChange Whether to validate\n * against the view config schema when publishing changes.\n */\nexport default function CallbackPublisher(props) {\n  const {\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange,\n  } = props;\n\n  const warning = useWarning();\n  const loaders = useLoaders();\n\n  // View config updates are often-occurring, so\n  // we want to use the \"transient update\" approach\n  // to subscribe to view config changes.\n  // Reference: https://github.com/react-spring/zustand#transient-updates-for-often-occuring-state-changes\n  useEffect(() => useViewConfigStore.subscribe(\n    // The function to run on each publish.\n    (viewConfig) => {\n      if (validateOnConfigChange && viewConfig) {\n        validateViewConfig(viewConfig);\n      }\n      if (onConfigChange && viewConfig) {\n        onConfigChange(viewConfig);\n      }\n    },\n    // The function to specify which part of the store\n    // we want to subscribe to.\n    state => state.viewConfig,\n  ), [onConfigChange, validateOnConfigChange]);\n\n  // Emit updates to the warning message.\n  useEffect(() => {\n    if (onWarn && warning) {\n      onWarn(warning);\n    }\n  }, [warning, onWarn]);\n\n  // Emit updates to the loaders.\n  useEffect(() => {\n    if (onLoaderChange && loaders) {\n      onLoaderChange(loaders);\n    }\n  }, [loaders, onLoaderChange]);\n\n  // Render nothing.\n  return null;\n}\n","import React from 'react';\n\nexport default function Description(props) {\n  const { description, metadata } = props;\n\n  return (\n    <div className=\"description\">\n      <p>{description}</p>\n\n      {metadata && Array.from(metadata.entries())\n        .map(([layerIndex, { name: layerName, metadata: metadataRecord }]) => (\n          metadataRecord && Object.entries(metadataRecord).length > 0 ? (\n            <details key={layerIndex}>\n              <summary>{layerName}</summary>\n              <div className=\"metadata-container\">\n                <table>\n                  <tbody>\n                    {Object.entries(metadataRecord)\n                      .map(([key, value]) => (\n                        <tr key={key}>\n                          <th title={key}>{key}</th>\n                          <td title={value}>{value}</td>\n                        </tr>\n                      ))}\n                  </tbody>\n                </table>\n              </div>\n            </details>\n          ) : null))}\n    </div>\n  );\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { useReady } from '../hooks';\nimport { useDescription, useRasterData } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport TitleInfo from '../TitleInfo';\nimport Description from './Description';\n\nconst DESCRIPTION_DATA_TYPES = ['raster'];\n\nexport default function DescriptionSubscriber(props) {\n  const {\n    coordinationScopes,\n    description: descriptionOverride,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialLayers: layers,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.description, coordinationScopes);\n\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    DESCRIPTION_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [description] = useDescription(loaders, dataset);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n  );\n\n  const metadata = useMemo(() => {\n    const result = new Map();\n    if (layers && layers.length > 0 && raster && imageLayerMeta && imageLayerLoaders) {\n      const rasterLayers = layers.filter(layer => layer.type === 'raster');\n      rasterLayers.forEach((layer) => {\n        if (imageLayerMeta[layer.index]) {\n          // Want to ensure that layer index is a string.\n          result.set(`${layer.index}`, {\n            name: raster.layers[layer.index].name,\n            metadata: imageLayerLoaders[layer.index].getMetadata(),\n          });\n        }\n      });\n    }\n    return result;\n  }, [raster, layers, imageLayerMeta, imageLayerLoaders]);\n\n  return (\n    <TitleInfo\n      title=\"Data Set\"\n      removeGridComponent={removeGridComponent}\n      isScroll\n      theme={theme}\n      isReady={isReady}\n    >\n      <Description\n        description={descriptionOverride || description}\n        metadata={metadata}\n      />\n    </TitleInfo>\n  );\n}\n","import React, {\n  useMemo, useEffect, useRef, Suspense, useState,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport dynamicImportPolyfill from 'dynamic-import-polyfill';\nimport register from 'higlass-register';\nimport { ZarrMultivecDataFetcher } from 'higlass-zarr-datafetchers';\nimport packageJson from '../../../package.json';\nimport { createWarningComponent, asEsModule } from '../utils';\nimport { useGridItemSize } from '../hooks';\nimport {\n  useCoordination,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst PIXI_BUNDLE_VERSION = packageJson.dependencies['window-pixi'];\nconst HIGLASS_BUNDLE_VERSION = packageJson.dependencies.higlass;\nconst BUNDLE_FILE_EXT = process.env.NODE_ENV === 'development' ? 'js' : 'min.js';\nconst PIXI_BUNDLE_URL = `https://unpkg.com/window-pixi@${PIXI_BUNDLE_VERSION}/dist/pixi.${BUNDLE_FILE_EXT}`;\nconst HIGLASS_BUNDLE_URL = `https://unpkg.com/higlass@${HIGLASS_BUNDLE_VERSION}/dist/hglib.${BUNDLE_FILE_EXT}`;\n\n\n// Initialize the dynamic __import__() function.\ndynamicImportPolyfill.initialize();\n\n// Register the zarr-multivec plugin data fetcher.\n// References:\n// https://github.com/higlass/higlass-register\n// https://github.com/higlass/higlass-zarr-datafetchers\nregister(\n  { dataFetcher: ZarrMultivecDataFetcher, config: ZarrMultivecDataFetcher.config },\n  { pluginType: 'dataFetcher' },\n);\n\n// Lazy load the HiGlass React component,\n// using dynamic imports with absolute URLs.\nconst HiGlassComponent = React.lazy(() => {\n  if (!window.React) {\n    window.React = React;\n  }\n  if (!window.ReactDOM) {\n    window.ReactDOM = ReactDOM;\n  }\n  return new Promise((resolve) => {\n    const handleImportError = (e) => {\n      console.warn(e);\n      resolve(asEsModule(createWarningComponent({\n        title: 'Could not load HiGlass',\n        message: 'The HiGlass scripts could not be dynamically imported.',\n      })));\n    };\n      // eslint-disable-next-line no-undef\n    __import__(PIXI_BUNDLE_URL).then(() => {\n      // eslint-disable-next-line no-undef\n      __import__(HIGLASS_BUNDLE_URL).then(() => {\n        // React.lazy promise must return an ES module with the\n        // component as the default export.\n        resolve(asEsModule(window.hglib.HiGlassComponent));\n      }).catch(handleImportError);\n    }).catch(handleImportError);\n  });\n});\n\n// Use an arbitrary size for normalization of the zoom level.\n// (800 means 800 px width for the full genome)\nconst HG_SIZE = 800;\n\n/**\n   * A wrapper around HiGlass (http://higlass.io/).\n   * The HiGlassComponent react component is loaded lazily.\n   * @prop {object} hgViewConfig A HiGlass viewconfig object to pass\n   * to the HiGlassComponent viewConfig prop.\n   * @prop {object} hgOptions An optional HiGlass object to pass\n   * to the HiGlassComponent hgOptions prop.\n   * @prop {function} removeGridComponent A grid component removal handler\n   * to pass to the TitleInfo component.\n   * @prop {function} onReady A callback function to signal that the component is ready.\n   */\nexport default function HiGlassLazy(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig: hgViewConfigProp,\n    hgOptions: hgOptionsProp,\n    genomeSize,\n    height,\n  } = props;\n\n  // Get \"props\" from the coordination space.\n  const [{\n    genomicZoomX,\n    genomicZoomY,\n    genomicTargetX,\n    genomicTargetY,\n  }, {\n    setGenomicZoomX,\n    setGenomicZoomY,\n    setGenomicTargetX,\n    setGenomicTargetY,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.higlass, coordinationScopes);\n\n  // eslint-disable-next-line no-unused-vars\n  const [width, computedHeight, containerRef] = useGridItemSize();\n  const [hgInstance, setHgInstance] = useState();\n  const isActiveRef = useRef();\n\n  const hgOptions = useMemo(() => ({\n    ...hgOptionsProp,\n    theme,\n  }), [hgOptionsProp, theme]);\n\n  const hgViewConfig = useMemo(() => {\n    // HiGlass needs the start and end absolute genome coordinates\n    const centerX = genomicTargetX;\n    const genomesPerUnitX = genomeSize / (2 ** genomicZoomX);\n    const unitX = width / HG_SIZE;\n    const initialXDomain = [\n      centerX - genomesPerUnitX * unitX / 2,\n      centerX + genomesPerUnitX * unitX / 2,\n    ];\n    const centerY = genomicTargetY;\n    const genomesPerUnitY = genomeSize / (2 ** genomicZoomY);\n    const unitY = height / HG_SIZE;\n    const initialYDomain = [\n      centerY - genomesPerUnitY * unitY / 2,\n      centerY + genomesPerUnitY * unitY / 2,\n    ];\n    return {\n      editable: false,\n      zoomFixed: false,\n      trackSourceServers: [\n        '//higlass.io/api/v1',\n      ],\n      exportViewUrl: '//higlass.io/api/v1/viewconfs',\n      views: [\n        {\n          uid: 'main',\n          ...hgViewConfigProp,\n          initialXDomain,\n          initialYDomain,\n        },\n      ],\n      zoomLocks: {\n        locksByViewUid: {},\n        locksDict: {},\n      },\n      locationLocks: {\n        locksByViewUid: {},\n        locksDict: {},\n      },\n      valueScaleLocks: {\n        locksByViewUid: {},\n        locksDict: {},\n      },\n    };\n  }, [genomicTargetX, genomeSize, genomicZoomX, width, genomicTargetY,\n    genomicZoomY, height, hgViewConfigProp]);\n\n  useEffect(() => {\n    const handleMouseEnter = () => {\n      isActiveRef.current = true;\n    };\n    const handleMouseLeave = () => {\n      isActiveRef.current = false;\n    };\n    const container = containerRef.current;\n    container.addEventListener('mouseenter', handleMouseEnter);\n    container.addEventListener('mouseleave', handleMouseLeave);\n    return () => {\n      container.removeEventListener('mouseenter', handleMouseEnter);\n      container.removeEventListener('mouseenter', handleMouseLeave);\n    };\n  }, [containerRef]);\n\n\n  useEffect(() => {\n    if (!hgInstance) {\n      return () => {};\n    }\n    hgInstance.api.on('viewConfig', (viewConfigString) => {\n      // Only set if the user mouse is over this component (\"is active\").\n      // Otherwise, this could be an initial on viewConfig change callback from a sibling,\n      // which will cause an infinite loop.\n      if (!isActiveRef.current) {\n        return;\n      }\n      const viewConfig = JSON.parse(viewConfigString);\n      const xDomain = viewConfig.views[0].initialXDomain;\n      const yDomain = viewConfig.views[0].initialYDomain;\n\n      const nextGenomicZoomX = Math.log2(\n        genomeSize / ((xDomain[1] - xDomain[0]) * (HG_SIZE / width)),\n      );\n      const nextGenomicZoomY = Math.log2(\n        genomeSize / ((yDomain[1] - yDomain[0]) * (HG_SIZE / height)),\n      );\n      const nextGenomicTargetX = xDomain[0] + (xDomain[1] - xDomain[0]) / 2;\n      const nextGenomicTargetY = yDomain[0] + (yDomain[1] - yDomain[0]) / 2;\n      setGenomicZoomX(nextGenomicZoomX);\n      setGenomicZoomY(nextGenomicZoomY);\n      setGenomicTargetX(nextGenomicTargetX);\n      setGenomicTargetY(nextGenomicTargetY);\n    });\n    return () => hgInstance.api.off('viewConfig');\n  }, [hgInstance, genomeSize, width, height, setGenomicZoomX, setGenomicZoomY,\n    setGenomicTargetX, setGenomicTargetY]);\n\n  return (\n    <div className=\"higlass-wrapper-parent\">\n      <div className=\"higlass-wrapper\" ref={containerRef} style={{ height: `${height}px` }}>\n        <Suspense fallback={<div>Loading...</div>}>\n          <HiGlassComponent\n            ref={setHgInstance}\n            zoomFixed={false}\n            viewConfig={hgViewConfig}\n            options={hgOptions}\n          />\n        </Suspense>\n      </div>\n    </div>\n  );\n}\n\nHiGlassLazy.defaultProps = {\n  hgOptions: {\n    bounded: true,\n    pixelPreciseMarginPadding: true,\n    containerPaddingX: 0,\n    containerPaddingY: 0,\n    sizeMode: 'default',\n  },\n  genomeSize: 3100000000,\n};\n","import React from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useReady, useUrls, useGridItemSize } from '../hooks';\nimport HiGlassLazy from './HiGlassLazy';\n\nconst HIGLASS_DATA_TYPES = [];\n\n/**\n * A wrapper around HiGlass (http://higlass.io/).\n * The HiGlassComponent react component is loaded lazily.\n * @prop {object} hgViewConfig A HiGlass viewconfig object to pass\n * to the HiGlassComponent viewConfig prop.\n * @prop {object} hgOptions An optional HiGlass object to pass\n * to the HiGlassComponent hgOptions prop.\n * @prop {function} removeGridComponent A grid component removal handler\n * to pass to the TitleInfo component.\n * @prop {function} onReady A callback function to signal that the component is ready.\n */\nexport default function HiGlassSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    removeGridComponent,\n  } = props;\n\n  // eslint-disable-next-line no-unused-vars\n  const [width, height, containerRef] = useGridItemSize();\n\n  // eslint-disable-next-line no-unused-vars\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    HIGLASS_DATA_TYPES,\n  );\n  // eslint-disable-next-line no-unused-vars\n  const [urls, addUrl, resetUrls] = useUrls();\n\n  return (\n    <div className=\"higlass-title-wrapper\">\n      <TitleInfo\n        title=\"HiGlass\"\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n        urls={urls}\n      >\n        <div className=\"higlass-lazy-wrapper\" ref={containerRef}>\n          <HiGlassLazy\n            coordinationScopes={coordinationScopes}\n            theme={theme}\n            hgViewConfig={hgViewConfig}\n            height={height}\n          />\n        </div>\n      </TitleInfo>\n    </div>\n  );\n}\n","import React, {\n  useMemo, useEffect,\n} from 'react';\nimport isEqual from 'lodash/isEqual';\nimport { sum } from 'd3-array';\nimport TitleInfo from '../TitleInfo';\nimport { useReady, useUrls, useGridItemSize } from '../hooks';\nimport {\n  useCoordination, useLoaders,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useGenomicProfilesData } from '../data-hooks';\nimport HiGlassLazy from './HiGlassLazy';\n\nconst GENOMIC_PROFILES_DATA_TYPES = ['genomic-profiles'];\n\nconst REFERENCE_TILESETS = {\n  hg38: {\n    chromosomes: 'NyITQvZsS_mOFNlz5C2LJg',\n    genes: 'P0PLbQMwTYGy-5uPIQid7A',\n  },\n  hg19: {\n    chromosomes: 'N12wVGG9SPiTkk03yUayUw',\n    genes: 'OHJakQICQD6gTD7skx4EWA',\n  },\n  mm9: {\n    chromosomes: 'WAVhNHYxQVueq6KulwgWiQ',\n    genes: 'GUm5aBiLRCyz2PsBea7Yzg',\n  },\n  mm10: {\n    chromosomes: 'EtrWT0VtScixmsmwFSd7zg',\n    genes: 'QDutvmyiSrec5nX4pA5WGQ',\n  },\n};\n\n/**\n * A component for visualization of genomic profiles\n * with genome-wide bar plots.\n * @param {object} props The component props.\n * @param {string} props.profileTrackUidKey The key in the genomic profiles row_info that identifies\n * each track. By default, 'path'.\n * @param {string} props.profileTrackNameKey The key in the genomic profiles row_info that\n * gives a name for each track. By default, null. When null is provided, uses the\n * profileTrackUidKey for both UID and name. If UID values are path arrays,\n * they will be converted to name strings.\n * @param {string} props.higlassServer The URL for the higlass server used to retreive\n * reference tilesets for the chromosome and gene annotations.\n * @param {string} props.assembly The genome assembly to use for the reference\n * tilesets for the chromosome and gene annotations.\n */\nexport default function GenomicProfilesSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    removeGridComponent,\n    profileTrackUidKey = 'path',\n    profileTrackNameKey = null,\n    higlassServer = 'https://higlass.io/api/v1',\n    assembly = 'hg38',\n  } = props;\n\n  // eslint-disable-next-line no-unused-vars\n  const [width, height, containerRef] = useGridItemSize();\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetColor,\n    cellSetSelection,\n  }] = useCoordination(\n    COMPONENT_COORDINATION_TYPES.genomicProfiles,\n    coordinationScopes,\n  );\n\n  // eslint-disable-next-line no-unused-vars\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    GENOMIC_PROFILES_DATA_TYPES,\n  );\n    // eslint-disable-next-line no-unused-vars\n  const [urls, addUrl, resetUrls] = useUrls();\n\n  const [genomicProfilesAttrs] = useGenomicProfilesData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n\n  const hgViewConfig = useMemo(() => {\n    if (!genomicProfilesAttrs || urls.length !== 1) {\n      return null;\n    }\n    // Get the URL to the data file from the downloadable URLs array.\n    const { url } = urls[0];\n\n    // Set up the colors to use in the HiGlass view config based on the current theme.\n    const foregroundColor = (theme === 'dark' ? '#C0C0C0' : '#000000');\n    const backgroundColor = (theme === 'dark' ? '#000000' : '#f1f1f1');\n    const dimColor = (theme === 'dark' ? 'dimgray' : 'silver');\n\n    // Define the \"reference tracks\" for chromosome labels and gene annotations.\n    const referenceTracks = [\n      {\n        type: 'horizontal-chromosome-labels',\n        server: higlassServer,\n        tilesetUid: REFERENCE_TILESETS[assembly].chromosomes,\n        uid: 'chromosome-labels',\n        options: {\n          color: foregroundColor,\n          fontSize: 12,\n          fontIsLeftAligned: false,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n        },\n        height: 30,\n      },\n      {\n        type: 'horizontal-gene-annotations',\n        server: higlassServer,\n        tilesetUid: REFERENCE_TILESETS[assembly].genes,\n        uid: 'gene-annotations',\n        options: {\n          name: 'Gene Annotations (hg38)',\n          fontSize: 10,\n          labelPosition: 'hidden',\n          labelLeftMargin: 0,\n          labelRightMargin: 0,\n          labelTopMargin: 0,\n          labelBottomMargin: 0,\n          minHeight: 24,\n          geneAnnotationHeight: 16,\n          geneLabelPosition: 'outside',\n          geneStrandSpacing: 4,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          plusStrandColor: foregroundColor,\n          minusStrandColor: foregroundColor,\n          labelColor: 'black',\n          labelBackgroundColor: backgroundColor,\n          trackBorderWidth: 0,\n          trackBorderColor: 'black',\n        },\n        height: 70,\n      },\n    ];\n    // Determine the heights of each profile track by subtracting the\n    // reference track heights from the component height, then\n    // dividing by the number of profiles.\n    const referenceTracksHeightSum = sum(referenceTracks.map(t => t.height));\n    const profileTracksHeightSum = height - referenceTracksHeightSum - 10;\n    const profileTrackHeight = profileTracksHeightSum / genomicProfilesAttrs.row_infos.length;\n    const profileTracks = genomicProfilesAttrs.row_infos.map((rowInfo, i) => {\n      // Get the uid for the HiGlass track.\n      const trackUid = rowInfo[profileTrackUidKey];\n      // When profiles correspond to cell sets, the profile UID will be the cell set path array.\n      const isPath = Array.isArray(trackUid);\n      // Get the name for the HiGlass track: try the name key first,\n      // then try the tail of the path, and otherwise the track UID.\n      // eslint-disable-next-line no-nested-ternary\n      const trackName = profileTrackNameKey\n        ? rowInfo[profileTrackNameKey]\n        : (isPath ? trackUid[trackUid.length - 1] : trackUid);\n      // If the uid is a path, then try to get the corresponding cell set's color,\n      // if it is currently selected.\n      const setInSelection = isPath ? cellSetSelection?.find(s => isEqual(s, trackUid)) : false;\n      const setColor = isPath ? cellSetColor?.find(s => isEqual(s.path, trackUid))?.color : null;\n      // Get the track UID as a string before passing to HiGlass.\n      const trackUidString = isPath ? trackUid.join('__') : trackUid;\n      // Create the HiGlass track definition for this profile.\n      const track = {\n        type: 'horizontal-bar',\n        uid: `bar-track-${trackUidString}`,\n        data: {\n          type: 'zarr-multivec',\n          url,\n          row: i,\n        },\n        options: {\n          name: trackName,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          labelColor: (theme === 'dark' ? 'white' : 'black'),\n          labelBackgroundColor: (theme === 'dark' ? 'black' : 'white'),\n          labelShowAssembly: false,\n        },\n        height: profileTrackHeight,\n      };\n      // Set the track color if it is available.\n      if (setColor && setInSelection) {\n        const c = setColor;\n        track.options.barFillColor = `rgb(${c[0]},${c[1]},${c[2]})`;\n      } else {\n        track.options.barFillColor = dimColor;\n      }\n      return track;\n    });\n\n    // Create the higlass view.\n    // The HiGlassLazy component will fill in the fields 'uid',\n    // 'initialXDomain', and 'initialYDomain'.\n    const hgView = {\n      tracks: {\n        top: [\n          ...referenceTracks,\n          ...profileTracks,\n        ],\n        left: [],\n        center: [],\n        right: [],\n        bottom: [],\n        whole: [],\n        gallery: [],\n      },\n      layout: {\n        w: 12,\n        h: 12,\n        x: 0,\n        y: 0,\n        static: false,\n      },\n    };\n    return hgView;\n  }, [genomicProfilesAttrs, urls, theme, height, profileTrackUidKey,\n    profileTrackNameKey, cellSetSelection, cellSetColor,\n    higlassServer, assembly]);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return (\n    <div className=\"higlass-title-wrapper\">\n      <TitleInfo\n        title=\"Genomic Profiles\"\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n        urls={urls}\n      >\n        <div className=\"higlass-lazy-wrapper\" ref={containerRef}>\n          {hgViewConfig ? (\n            <HiGlassLazy\n              coordinationScopes={coordinationScopes}\n              theme={theme}\n              hgViewConfig={hgViewConfig}\n              height={height}\n            />\n          ) : null}\n        </div>\n      </TitleInfo>\n    </div>\n  );\n}\n","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES } from '../vega';\n\n/**\n * Gene expression histogram displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {string[]} props.geneSelection The list of genes\n * currently selected.\n * @param {object[]} props.data The expression data, an array\n * of objects with properties `value` and `gene`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 50.\n */\nexport default function ExpressionHistogram(props) {\n  const {\n    geneSelection,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 50,\n  } = props;\n\n  const xTitle = geneSelection && geneSelection.length >= 1\n    ? 'Normalized Expression Value'\n    : 'Total Normalized Transcript Count';\n\n  const spec = {\n    mark: { type: 'bar' },\n    encoding: {\n      x: {\n        field: 'value',\n        type: 'quantitative',\n        bin: { maxbins: 50 },\n        title: xTitle,\n      },\n      y: {\n        type: 'quantitative',\n        aggregate: 'count',\n        title: 'Number of Cells',\n      },\n      color: { value: 'gray' },\n    },\n    width: clamp(width - marginRight, 10, Infinity),\n    height: clamp(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React, { useMemo, useEffect } from 'react';\nimport { sum } from 'd3-array';\n\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { useExpressionMatrixData } from '../data-hooks';\nimport ExpressionHistogram from './ExpressionHistogram';\n\nconst EXPRESSION_HISTOGRAM_DATA_TYPES = ['expression-matrix'];\n\n/**\n * A subscriber component for `ExpressionHistogram`,\n * which listens for gene selection updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {object} props.coordinationScopes An object mapping coordination\n * types to coordination scopes.\n * @param {string} props.theme The name of the current Vitessce theme.\n */\nexport default function ExpressionHistogramSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    geneSelection,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.expressionHistogram, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    EXPRESSION_HISTOGRAM_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1\n    ? geneSelection[0]\n    : null;\n\n  // From the expression matrix and the list of selected genes,\n  // generate the array of data points for the histogram.\n  const data = useMemo(() => {\n    if (firstGeneSelected && expressionMatrix) {\n      const numGenes = expressionMatrix.cols.length;\n      const geneIndex = expressionMatrix.cols.indexOf(firstGeneSelected);\n      if (geneIndex !== -1) {\n        // Create new cellColors map based on the selected gene.\n        return expressionMatrix.rows.map((cellId, cellIndex) => {\n          const value = expressionMatrix.matrix[cellIndex * numGenes + geneIndex];\n          const normValue = value * 100 / 255;\n          return { value: normValue, gene: firstGeneSelected };\n        });\n      }\n    } else if (expressionMatrix) {\n      const numGenes = expressionMatrix.cols.length;\n      return expressionMatrix.rows.map((cellId, cellIndex) => {\n        const values = expressionMatrix.matrix\n          .subarray(cellIndex * numGenes, (cellIndex + 1) * numGenes);\n        const sumValue = sum(values) * 100 / 255;\n        return { value: sumValue, gene: null };\n      });\n    }\n    return null;\n  }, [expressionMatrix, firstGeneSelected]);\n\n  return (\n    <TitleInfo\n      title={`Expression Histogram${(firstGeneSelected ? ` (${firstGeneSelected})` : '')}`}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        <ExpressionHistogram\n          geneSelection={geneSelection}\n          data={data}\n          theme={theme}\n          width={width}\n          height={height}\n        />\n      </div>\n    </TitleInfo>\n  );\n}\n","import { useMemo } from 'react';\nimport { mergeCellSets } from '../utils';\nimport { treeToObjectsBySetNames, treeToSetSizesBySetNames } from './cell-set-utils';\n\n/**\n * Get expression data for the cells\n * in the selected cell sets.\n * @param {object} expressionMatrix\n * @param {string[]} expressionMatrix.rows Cell IDs.\n * @param {string[]} expressionMatrix.cols Gene names.\n * @param {Uint8Array} expressionMatrix.matrix The\n * flattened expression matrix as a typed array.\n * @param {object} cellSets The cell sets from the dataset.\n * @param {object} additionalCellSets The user-defined cell sets\n * from the coordination space.\n * @param {array} geneSelection Array of selected genes.\n * @param {array} cellSetSelection Array of selected cell set paths.\n * @param {object[]} cellSetColor Array of objects with properties\n * `path` and `color`.\n */\nexport function useExpressionByCellSet(\n  expressionMatrix, cellSets, additionalCellSets, geneSelection, cellSetSelection, cellSetColor,\n) {\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // From the expression matrix and the list of selected genes / cell sets,\n  // generate the array of data points for the plot.\n  const [expressionArr, expressionMax] = useMemo(() => {\n    if (mergedCellSets && cellSetSelection\n        && geneSelection && geneSelection.length >= 1\n        && expressionMatrix\n    ) {\n      const cellObjects = treeToObjectsBySetNames(mergedCellSets, cellSetSelection, cellSetColor);\n\n      const firstGeneSelected = geneSelection[0];\n      const geneIndex = expressionMatrix.cols.indexOf(firstGeneSelected);\n      if (geneIndex !== -1) {\n        const numGenes = expressionMatrix.cols.length;\n        // Create new cellColors map based on the selected gene.\n        let exprMax = -Infinity;\n        const exprValues = cellObjects.map((cell) => {\n          const cellIndex = expressionMatrix.rows.indexOf(cell.obsId);\n          const value = expressionMatrix.matrix[cellIndex * numGenes + geneIndex];\n          const normValue = value * 100 / 255;\n          exprMax = Math.max(normValue, exprMax);\n          return { value: normValue, gene: firstGeneSelected, set: cell.name };\n        });\n        return [exprValues, exprMax];\n      }\n    }\n    return [null, null];\n  }, [expressionMatrix, geneSelection, mergedCellSets, cellSetSelection, cellSetColor]);\n\n  // From the cell sets hierarchy and the list of selected cell sets,\n  // generate the array of set sizes data points for the bar plot.\n  const setArr = useMemo(() => (mergedCellSets && cellSetSelection\n    ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor)\n    : []\n  ), [mergedCellSets, cellSetSelection, cellSetColor]);\n\n  return [expressionArr, setArr, expressionMax];\n}\n","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES, DATASET_NAME } from '../vega';\nimport { colorArrayToString } from './utils';\n\n/**\n * Gene expression histogram displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {object[]} props.data The expression data, an array\n * of objects with properties `value`, `gene`, and `set`.\n * @param {number} props.domainMax The maximum gene expression value.\n * @param {object[]} props.colors An object for each\n * cell set, with properties `name` and `color`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 50.\n */\nexport default function CellSetExpressionPlot(props) {\n  const {\n    domainMax = 100,\n    colors,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n  } = props;\n\n  // Manually set the color scale so that Vega-Lite does\n  // not choose the colors automatically.\n  const colorScale = {\n    domain: colors.map(d => d.name),\n    range: colors.map(d => colorArrayToString(d.color)),\n  };\n\n  const plotWidth = clamp(width - marginRight, 10, Infinity);\n  const plotHeight = clamp(height - marginBottom, 10, Infinity);\n\n  const numBands = colors.length;\n  const bandWidth = plotWidth / numBands;\n\n  const rectColor = (theme === 'dark' ? 'white' : 'black');\n\n  const spec = {\n    $schema: 'https://vega.github.io/schema/vega/v5.json',\n    description: 'A violin plot showing distributions of expression levels for selected cell sets.',\n    width: plotWidth,\n    height: plotHeight,\n    config: {\n      ...VEGA_THEMES[theme],\n      axisBand: {\n        bandPosition: 1,\n        tickExtra: true,\n        tickOffset: 0,\n      },\n    },\n\n    signals: [\n      { name: 'bandWidth', value: bandWidth },\n      { name: 'width', value: plotWidth },\n      { name: 'height', value: plotHeight },\n      { name: 'trim', value: true },\n    ],\n\n    data: [\n      {\n        name: 'density',\n        source: DATASET_NAME,\n        transform: [\n          {\n            type: 'kde',\n            field: 'value',\n            groupby: ['set'],\n            bandwidth: 0,\n            extent: [0, domainMax],\n          },\n        ],\n      },\n      {\n        name: 'stats',\n        source: DATASET_NAME,\n        transform: [\n          {\n            type: 'aggregate',\n            groupby: ['set'],\n            fields: ['value', 'value', 'value'],\n            ops: ['q1', 'median', 'q3'],\n            as: ['q1', 'median', 'q3'],\n          },\n        ],\n      },\n    ],\n\n    scales: [\n      {\n        name: 'layout',\n        type: 'band',\n        range: 'width',\n        domain: { data: DATASET_NAME, field: 'set' },\n      },\n      {\n        name: 'yscale',\n        type: 'linear',\n        range: 'height',\n        domain: [0, domainMax],\n      },\n      {\n        name: 'wscale',\n        type: 'linear',\n        range: [0, { signal: 'bandWidth' }],\n        domain: { data: 'density', field: 'density' },\n      },\n      {\n        name: 'wscaleReversed',\n        type: 'linear',\n        reverse: true,\n        range: [0, { signal: 'bandWidth' }],\n        domain: { data: 'density', field: 'density' },\n      },\n      {\n        name: 'color',\n        type: 'ordinal',\n        ...colorScale,\n      },\n    ],\n\n    axes: [\n      {\n        orient: 'left',\n        scale: 'yscale',\n        zindex: 1,\n        title: 'Normalized Expression Value',\n      },\n      {\n        orient: 'bottom',\n        scale: 'layout',\n        tickCount: 5,\n        zindex: 1,\n        title: 'Cell Set',\n        labelAngle: -45,\n        labelAlign: 'right',\n      },\n    ],\n\n    marks: [\n      {\n        type: 'group',\n        from: {\n          facet: {\n            data: 'density',\n            name: 'violin',\n            groupby: 'set',\n          },\n        },\n\n        encode: {\n          enter: {\n            xc: { scale: 'layout', field: 'set', band: 0.5 },\n            width: { signal: 'bandWidth' },\n            height: { signal: 'height' },\n          },\n        },\n\n        data: [\n          {\n            name: 'summary',\n            source: 'stats',\n            transform: [\n              {\n                type: 'filter',\n                expr: 'datum.set === parent.set',\n              },\n            ],\n          },\n        ],\n\n        marks: [\n          {\n            type: 'area',\n            orient: 'vertical',\n            from: { data: 'violin' },\n            encode: {\n              enter: {\n                fill: { scale: 'color', field: { parent: 'set' } },\n              },\n              update: {\n                width: { scale: 'wscale', field: 'density' },\n                xc: { signal: 'bandWidth / 2' },\n                y2: { scale: 'yscale', field: 'value' },\n                y: { scale: 'yscale', value: 0 },\n              },\n            },\n          },\n          {\n            type: 'area',\n            orient: 'vertical',\n            from: { data: 'violin' },\n            encode: {\n              enter: {\n                fill: { scale: 'color', field: { parent: 'set' } },\n              },\n              update: {\n                width: { scale: 'wscaleReversed', field: 'density' },\n                xc: { signal: 'bandWidth' },\n                y2: { scale: 'yscale', field: 'value' },\n                y: { scale: 'yscale', value: 0 },\n              },\n            },\n          },\n          {\n            type: 'rect',\n            from: { data: 'summary' },\n            encode: {\n              enter: {\n                fill: { value: rectColor },\n                width: { value: 2 },\n              },\n              update: {\n                y: { scale: 'yscale', field: 'q1' },\n                y2: { scale: 'yscale', field: 'q3' },\n                xc: { signal: 'bandWidth / 2' },\n              },\n            },\n          },\n          {\n            type: 'rect',\n            from: { data: 'summary' },\n            encode: {\n              enter: {\n                fill: { value: rectColor },\n                height: { value: 2 },\n                width: { value: 8 },\n              },\n              update: {\n                y: { scale: 'yscale', field: 'median' },\n                xc: { signal: 'bandWidth / 2' },\n              },\n            },\n          },\n        ],\n      },\n    ],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React, { useEffect } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { useExpressionMatrixData, useCellSetsData } from '../data-hooks';\nimport { useExpressionByCellSet } from './hooks';\n\nimport CellSetExpressionPlot from './CellSetExpressionPlot';\n\nconst CELL_SET_EXPRESSION_DATA_TYPES = ['cell-sets', 'expression-matrix'];\n\n/**\n * A subscriber component for `CellSetExpressionPlot`,\n * which listens for gene selection updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {object} props.coordinationScopes An object mapping coordination\n * types to coordination scopes.\n * @param {string} props.theme The name of the current Vitessce theme.\n */\nexport default function CellSetExpressionPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetExpression, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    CELL_SET_EXPRESSION_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n\n  const [expressionArr, setArr, expressionMax] = useExpressionByCellSet(\n    expressionMatrix, cellSets, additionalCellSets,\n    geneSelection, cellSetSelection, cellSetColor,\n  );\n\n  return (\n    <TitleInfo\n      title=\"Expression by Cell Set\"\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        {expressionArr ? (\n          <CellSetExpressionPlot\n            domainMax={expressionMax}\n            colors={setArr}\n            data={expressionArr}\n            theme={theme}\n            width={width}\n            height={height}\n          />\n        ) : (\n          <span>Select a gene.</span>\n        )}\n      </div>\n    </TitleInfo>\n  );\n}\n","import DescriptionSubscriber from '../components/description/DescriptionSubscriber';\nimport StatusSubscriber from '../components/status/StatusSubscriber';\nimport GenesSubscriber from '../components/genes/GenesSubscriber';\nimport CellSetsManagerSubscriber from '../components/sets/CellSetsManagerSubscriber';\nimport ScatterplotSubscriber from '../components/scatterplot/ScatterplotSubscriber';\nimport SpatialSubscriber from '../components/spatial/SpatialSubscriber';\nimport HeatmapSubscriber from '../components/heatmap/HeatmapSubscriber';\nimport LayerControllerSubscriber from '../components/layer-controller/LayerControllerSubscriber';\nimport HiGlassSubscriber from '../components/higlass/HiGlassSubscriber';\nimport CellSetSizesPlotSubscriber from '../components/sets/CellSetSizesPlotSubscriber';\nimport GenomicProfilesSubscriber from '../components/higlass/GenomicProfilesSubscriber';\nimport ExpressionHistogramSubscriber from '../components/genes/ExpressionHistogramSubscriber';\nimport CellSetExpressionPlotSubscriber from '../components/sets/CellSetExpressionPlotSubscriber';\n\nconst registry = {\n  description: DescriptionSubscriber,\n  status: StatusSubscriber,\n  genes: GenesSubscriber,\n  cellSets: CellSetsManagerSubscriber,\n  scatterplot: ScatterplotSubscriber,\n  spatial: SpatialSubscriber,\n  heatmap: HeatmapSubscriber,\n  layerController: LayerControllerSubscriber,\n  cellSetSizes: CellSetSizesPlotSubscriber,\n  expressionHistogram: ExpressionHistogramSubscriber,\n  genomicProfiles: GenomicProfilesSubscriber,\n  cellSetExpression: CellSetExpressionPlotSubscriber,\n  // The plain higlass component does not abstract away the HiGlass view config,\n  // so we probably want to avoid documenting it, only use it for development purposes.\n  higlass: HiGlassSubscriber,\n};\n\nexport function getComponent(name) {\n  const component = registry[name];\n  if (component === undefined) {\n    throw new Error(`Could not find definition for \"${name}\" in registry.`);\n  }\n  return registry[name];\n}\n","/* eslint-disable no-plusplus */\nimport uuidv4 from 'uuid/v4';\nimport { getNextScope } from '../utils';\nimport {\n  COORDINATION_TYPES,\n  DEFAULT_COORDINATION_VALUES,\n  COMPONENT_COORDINATION_TYPES,\n  AUTO_INDEPENDENT_COORDINATION_TYPES,\n} from './state/coordination';\n\n\n/**\n * Get a list of all unique scope names for a\n * particular coordination type, which exist in\n * a particular view config.\n * @param {object} config A view config object.\n * @param {string} coordinationType A coordination type,\n * for example 'spatialZoom' or 'dataset'.\n * @returns {string[]} Array of existing coordination scope names.\n */\nexport function getExistingScopesForCoordinationType(config, coordinationType) {\n  const spaceScopes = Object.keys(config?.coordinationSpace?.[coordinationType] || {});\n  const componentScopes = config.layout.map(c => c.coordinationScopes?.[coordinationType]);\n  return Array.from(new Set([...spaceScopes, ...componentScopes]));\n}\n\n/**\n * Give each component the same scope name for this coordination type.\n * @param {object} config A view config object.\n * @param {string} coordinationType A coordination type,\n * for example 'spatialZoom' or 'dataset'.\n * @param {*} scopeValue The initial value for the coordination scope,\n * to set in the coordination space.\n * @returns {object} The new view config.\n */\nfunction coordinateComponentsTogether(config, coordinationType, scopeValue) {\n  const scopeName = getNextScope(getExistingScopesForCoordinationType(config, coordinationType));\n  const newConfig = {\n    ...config,\n    coordinationSpace: {\n      ...config.coordinationSpace,\n      [coordinationType]: {\n        ...config?.coordinationSpace?.[coordinationType],\n        // Add the new scope name and value to the coordination space.\n        [scopeName]: scopeValue,\n      },\n    },\n    layout: config.layout.map(component => ({\n      ...component,\n      coordinationScopes: {\n        ...component.coordinationScopes,\n        // Only set the coordination scope if this component uses this coordination type,\n        // and the component is missing a coordination scope for this coordination type.\n        ...((\n          COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType)\n          && !component.coordinationScopes?.[coordinationType]\n        ) ? {\n          // Only set the new scope name if the scope name\n          // for this component and coordination type is currently undefined.\n            [coordinationType]: scopeName,\n          } : {}),\n      },\n    })),\n  };\n  return newConfig;\n}\n\n/**\n * Give each component a different scope name for this coordination type.\n * @param {object} config A view config object.\n * @param {string} coordinationType A coordination type,\n * for example 'spatialZoom' or 'dataset'.\n * @param {*} scopeValue The initial value for the coordination scope,\n * to set in the coordination space.\n * @returns {object} The new view config.\n */\nfunction coordinateComponentsIndependent(config, coordinationType, scopeValue) {\n  const newConfig = {\n    ...config,\n    layout: [...config.layout],\n  };\n  const newScopes = {};\n  newConfig.layout.forEach((component, i) => {\n    // Only set the coordination scope if this component uses this coordination type,\n    // and the component is missing a coordination scope for this coordination type.\n    if (COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType)\n      && !component.coordinationScopes?.[coordinationType]\n    ) {\n      const scopeName = getNextScope([\n        ...getExistingScopesForCoordinationType(config, coordinationType),\n        ...Object.keys(newScopes),\n      ]);\n      newScopes[scopeName] = scopeValue;\n      newConfig.layout[i] = {\n        ...component,\n        coordinationScopes: {\n          ...component.coordinationScopes,\n          [coordinationType]: scopeName,\n        },\n      };\n    }\n  });\n  newConfig.coordinationSpace = {\n    ...newConfig.coordinationSpace,\n    [coordinationType]: {\n      ...newConfig.coordinationSpace[coordinationType],\n      // Add the new scope name and value to the coordination space.\n      ...newScopes,\n    },\n  };\n  return newConfig;\n}\n\nfunction initializeAuto(config) {\n  let newConfig = config;\n  const { layout, datasets } = newConfig;\n\n  // For each coordination type, check whether it requires initialization.\n  Object.values(COORDINATION_TYPES).forEach((coordinationType) => {\n    // A coordination type requires coordination if at least one component is missing\n    // a (coordination type, coordination scope) tuple.\n    // Components may only use a subset of all coordination types.\n    const requiresCoordination = !layout\n      .every(c => (\n        !COMPONENT_COORDINATION_TYPES[c.component].includes(coordinationType)\n                || c.coordinationScopes?.[coordinationType]\n      ));\n    if (requiresCoordination) {\n      // Note that the default value may be undefined.\n      let defaultValue = DEFAULT_COORDINATION_VALUES[coordinationType];\n      // Check whether this is the special 'dataset' coordination type.\n      if (coordinationType === 'dataset' && datasets.length >= 1) {\n        // Use the first dataset ID as the default\n        // if there is at least one dataset.\n        defaultValue = datasets[0].uid;\n      }\n      // Use the list of \"independent\" coordination types\n      // to determine whether a particular coordination type\n      // should be initialized to\n      // a unique scope for every component (\"independent\")\n      // vs. the same scope for every component (\"together\").\n      if (AUTO_INDEPENDENT_COORDINATION_TYPES.includes(coordinationType)) {\n        newConfig = coordinateComponentsIndependent(newConfig, coordinationType, defaultValue);\n      } else {\n        newConfig = coordinateComponentsTogether(newConfig, coordinationType, defaultValue);\n      }\n    }\n  });\n\n  return newConfig;\n}\n\n\n/**\n * Initialize the view config:\n * - Fill in missing coordination objects with default values.\n * - Fill in missing component coordination scope mappings.\n *   based on the `initStrategy` specified in the view config.\n * Should be \"stable\": if run on the same view config twice, the return value the second\n * time should be identical to the return value the first time.\n * @param {object} config The view config prop.\n */\nexport function initialize(config) {\n  if (config.initStrategy === 'auto') {\n    return initializeAuto(config);\n  }\n  return config;\n}\n\n/**\n * A helper function for the `upgrade()` function,\n * which helps convert `props.view` (for scatterplot and spatial),\n * into new coordination scopes, setting their values\n * in the coordination space and returning the new scope mappings.\n * This function does mutate the `coordinationSpace` parameter.\n * @param {string} prefix The coordination type prefix,\n * either 'embedding' or 'spatial'.\n * @param {object} view The view prop object containing\n * the properties `.target` and `.zoom`.\n * @param {object} coordinationSpace The coordination space.\n * @returns {object} The new coordination scope names.\n */\nfunction upgradeReplaceViewProp(prefix, view, coordinationSpace) {\n  const prevZScopes = Object.keys(coordinationSpace[`${prefix}Zoom`]);\n  const prevTXScopes = Object.keys(coordinationSpace[`${prefix}TargetX`]);\n  const prevTYScopes = Object.keys(coordinationSpace[`${prefix}TargetY`]);\n\n  const nextZScope = getNextScope(prevZScopes);\n  const nextTXScope = getNextScope(prevTXScopes);\n  const nextTYScope = getNextScope(prevTYScopes);\n\n  const { zoom, target: [targetX, targetY] } = view;\n  // eslint-disable-next-line no-param-reassign\n  coordinationSpace[`${prefix}Zoom`][nextZScope] = zoom;\n  // eslint-disable-next-line no-param-reassign\n  coordinationSpace[`${prefix}TargetX`][nextTXScope] = targetX;\n  // eslint-disable-next-line no-param-reassign\n  coordinationSpace[`${prefix}TargetY`][nextTYScope] = targetY;\n  return {\n    [`${prefix}Zoom`]: nextZScope,\n    [`${prefix}TargetX`]: nextTXScope,\n    [`${prefix}TargetY`]: nextTYScope,\n  };\n}\n\n/**\n * Convert an older view config to a newer view config.\n * @param {object} config A v0.1.0 \"legacy\" view config.\n * @returns {object} A v1.0.0 \"upgraded\" view config.\n */\nexport function upgrade(config, datasetUid = null) {\n  const coordinationSpace = {\n    embeddingType: {},\n    embeddingZoom: {},\n    embeddingTargetX: {},\n    embeddingTargetY: {},\n    spatialZoom: {},\n    spatialTargetX: {},\n    spatialTargetY: {},\n  };\n\n  const layout = [];\n  config.staticLayout.forEach((componentDef) => {\n    let newComponentDef = {\n      ...componentDef,\n      coordinationScopes: {},\n    };\n    if (componentDef.component === 'scatterplot') {\n      // Need to set up the coordinationSpace\n      // with embeddingType to replace scatterplot\n      // component prop \"mapping\".\n      if (componentDef.props.mapping) {\n        coordinationSpace.embeddingType[componentDef.props.mapping] = componentDef.props.mapping;\n        newComponentDef = {\n          ...newComponentDef,\n          coordinationScopes: {\n            ...newComponentDef.coordinationScopes,\n            embeddingType: componentDef.props.mapping,\n          },\n        };\n      }\n      // Need to set up the coordinationSpace\n      // with embeddingZoom / embeddingTargetX/Y to replace scatterplot\n      // component prop \"view\" ({ zoom, target }).\n      if (componentDef.props.view) {\n        // Note that the below function does mutate the coordinationSpace param.\n        const newScopeValues = upgradeReplaceViewProp(\n          'embedding', componentDef.props.view, coordinationSpace,\n        );\n        newComponentDef = {\n          ...newComponentDef,\n          coordinationScopes: {\n            ...newComponentDef.coordinationScopes,\n            ...newScopeValues,\n          },\n        };\n      }\n    }\n    if (componentDef.component === 'spatial') {\n      // Need to set up the coordinationSpace\n      // with spatialZoom / spatialTargetX/Y to replace spatial\n      // component prop \"view\" ({ zoom, target }).\n      if (componentDef?.props?.view) {\n        // Note that the below function does mutate the coordinationSpace param.\n        const newScopeValues = upgradeReplaceViewProp(\n          'spatial', componentDef.props.view, coordinationSpace,\n        );\n        newComponentDef = {\n          ...newComponentDef,\n          coordinationScopes: {\n            ...newComponentDef.coordinationScopes,\n            ...newScopeValues,\n          },\n        };\n      }\n    }\n    layout.push(newComponentDef);\n  });\n\n  // Use a random dataset ID when initializing automatically,\n  // so that it changes with each new v0.1.0 view config.\n  // However, check if the `datasetUid` parameter was passed,\n  // which allows for unit testing.\n  const newDatasetUid = datasetUid || uuidv4();\n\n  return {\n    version: '1.0.0',\n    name: config.name,\n    description: config.description,\n    public: config.public,\n    datasets: [\n      {\n        uid: newDatasetUid,\n        name: newDatasetUid,\n        files: config.layers.map(layer => ({\n          type: layer.type.toLowerCase(),\n          fileType: layer.fileType,\n          url: layer.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace,\n    layout,\n  };\n}\n","import React, { useEffect, useMemo } from 'react';\nimport Ajv from 'ajv';\nimport {\n  ThemeProvider, StylesProvider,\n  createGenerateClassName,\n} from '@material-ui/core/styles';\nimport isEqual from 'lodash/isEqual';\nimport packageJson from '../../package.json';\nimport { muiTheme } from '../components/shared-mui/styles';\nimport configSchema from '../schemas/config.schema.json';\nimport legacyConfigSchema from '../schemas/config-legacy.schema.json';\nimport cellSetsSchema from '../schemas/cell-sets.schema.json';\nimport rasterSchema from '../schemas/raster.schema.json';\n\nimport VitessceGrid from './VitessceGrid';\nimport Warning from './Warning';\nimport CallbackPublisher from './CallbackPublisher';\nimport { getComponent } from './component-registry';\nimport { initialize, upgrade } from './view-config-utils';\n\nconst generateClassName = createGenerateClassName({\n  disableGlobal: true,\n});\n\n/**\n * The Vitessce component.\n * @param {object} props\n * @param {object} props.config A Vitessce view config.\n * If the config is valid, the VitessceGrid will be rendered as a child.\n * If the config is invalid, a Warning will be rendered instead.\n * @param {number} props.rowHeight Row height for grid layout. Optional.\n * @param {number} props.height Total height for grid layout. Optional.\n * @param {string} props.theme The theme, used for styling as\n * light or dark. Optional. By default, \"dark\"\n * @param {function} props.onWarn A callback for warning messages. Optional.\n * @param {function} props.onConfigChange A callback for view config\n * updates. Optional.\n * @param {function} props.onLoaderChange A callback for loader\n * updates. Optional.\n * @param {boolean} props.validateOnConfigChange Whether to validate\n * against the view config schema when publishing changes. Use for debugging\n * purposes, as this may have a performance impact. By default, false.\n */\nexport default function Vitessce(props) {\n  const {\n    config,\n    rowHeight,\n    height,\n    theme,\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange = false,\n  } = props;\n\n  // Process the view config and memoize the result:\n  // - Validate.\n  // - Upgrade, if legacy schema.\n  // - Validate after upgrade, if legacy schema.\n  // - Initialize (based on initStrategy).\n  const [configOrWarning, success] = useMemo(() => {\n    // If the config value is undefined, show a warning message.\n    if (!config) {\n      return [{\n        title: 'No such dataset',\n        unformatted: 'The dataset configuration could not be found.',\n      }, false];\n    }\n    // If the view config is missing a version, show a warning message.\n    if (!config.version) {\n      return [{\n        title: 'Missing version',\n        unformatted: 'The dataset configuration is missing a version, preventing validation.',\n      }, false];\n    }\n    // Check if this is a \"legacy\" view config.\n    let upgradedConfig = config;\n    if (config.version === '0.1.0') {\n      // Validate under the legacy schema first.\n      const validateLegacy = new Ajv().compile(legacyConfigSchema);\n      const validLegacy = validateLegacy(config);\n      if (!validLegacy) {\n        const failureReason = JSON.stringify(validateLegacy.errors, null, 2);\n        return [{\n          title: 'Config validation failed',\n          preformatted: failureReason,\n        }, false];\n      }\n      // Upgrade from v0.1.0 to v1.0.0 before v1.0.0 schema validation.\n      upgradedConfig = upgrade(config);\n    }\n    // NOTE: Remove when a view config viewer/editor is available in UI.\n    console.groupCollapsed(`🚄 Vitessce (${packageJson.version}) view configuration`);\n    console.info(`data:,${JSON.stringify(upgradedConfig)}`);\n    console.info(JSON.stringify(upgradedConfig, null, 2));\n    console.groupEnd();\n    const validate = new Ajv()\n      .addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema);\n    const valid = validate(upgradedConfig);\n\n    if (!valid) {\n      const failureReason = JSON.stringify(validate.errors, null, 2);\n      return [{\n        title: 'Config validation failed',\n        preformatted: failureReason,\n      }, false];\n    }\n    // Initialize the view config according to the initStrategy.\n    const initializedConfig = initialize(upgradedConfig);\n    return [initializedConfig, true];\n  }, [config]);\n\n  // Emit the upgraded/initialized view config\n  // to onConfigChange if necessary.\n  useEffect(() => {\n    if (success && !isEqual(configOrWarning, config) && onConfigChange) {\n      onConfigChange(configOrWarning);\n    }\n  }, [success, config, configOrWarning, onConfigChange]);\n\n  return success ? (\n    <StylesProvider generateClassName={generateClassName}>\n      <ThemeProvider theme={muiTheme[theme]}>\n        <VitessceGrid\n          config={configOrWarning}\n          getComponent={getComponent}\n          rowHeight={rowHeight}\n          height={height}\n          theme={theme}\n        />\n        <CallbackPublisher\n          onWarn={onWarn}\n          onConfigChange={onConfigChange}\n          onLoaderChange={onLoaderChange}\n          validateOnConfigChange={validateOnConfigChange}\n        />\n      </ThemeProvider>\n    </StylesProvider>\n  ) : (\n    <Warning\n      theme={theme}\n      {...configOrWarning}\n    />\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { getConfig, listConfigs } from './api';\nimport Welcome from './Welcome';\nimport Warning from './Warning';\nimport Vitessce from './Vitessce';\n\nimport '../css/index.scss';\nimport '../../node_modules/react-grid-layout/css/styles.css';\nimport '../../node_modules/react-resizable/css/styles.css';\n\nfunction AwaitResponse(props) {\n  const {\n    response,\n    theme,\n  } = props;\n  const [isLoading, setIsLoading] = useState(true);\n  const responseRef = useRef();\n  useEffect(() => {\n    response.then((c) => {\n      responseRef.current = c;\n      setIsLoading(false);\n    });\n  }, [response]);\n  return (!isLoading ? React.createElement(responseRef.current) : <Warning title=\"Loading...\" theme={theme} />);\n}\n\nfunction preformattedDetails(response) {\n  return `\n    ok: ${response.ok}\n    status: ${response.status}\n    statusText: ${response.statusText}\n    redirected: ${response.redirected}\n    type: ${response.type}\n    url: ${response.url}`; // TODO: headers\n}\n\n\nfunction checkResponse(response, theme, debug) {\n  if (!response.ok) {\n    return Promise.resolve(\n      () => (\n        <Warning\n          title=\"Fetch response not OK\"\n          preformatted={preformattedDetails(response)}\n          theme={theme}\n        />\n      ),\n    );\n  }\n  return response.text().then((text) => {\n    try {\n      const config = JSON.parse(text);\n      return Promise.resolve(() => (\n        <Vitessce\n          config={config}\n          theme={theme}\n          // eslint-disable-next-line no-console\n          onConfigChange={debug ? console.log : undefined}\n          validateOnConfigChange={debug}\n        />\n      ));\n    } catch (e) {\n      return Promise.resolve(() => (\n        <Warning\n          title=\"Error parsing JSON\"\n          preformatted={preformattedDetails(response)}\n          unformatted={`${e.message}: ${text}`}\n          theme={theme}\n        />\n      ));\n    }\n  });\n}\n\n/**\n * Use the theme provided if it is valid, otherwise fall back to the 'dark' theme.\n * @param {string} theme A potentially invalid theme name.\n * @returns {string} A valid theme name.\n */\nfunction validateTheme(theme) {\n  return (['light', 'dark'].includes(theme) ? theme : 'dark');\n}\n\n/**\n * Convenience function for creating the minimal Vitessce demo and demo listing\n * components based on the current URL parameters.\n * @param {object} params\n * @param {number|null} params.rowHeight The row height to pass to the Vitessce grid.\n * Optional. By default, null.\n * @param {boolean} showBetaHeader Should the header which links to the beta documentation\n * website be rendered? Optional. By default, false.\n * @returns A component, either <Welcome/> or <Vitessce/> depending on the URL params.\n */\nexport function createApp(params) {\n  const { rowHeight = null, showBetaHeader = false } = params;\n  const urlParams = new URLSearchParams(window.location.search);\n  const datasetId = urlParams.get('dataset');\n  const debug = urlParams.get('debug') === 'true';\n  const datasetUrl = urlParams.get('url');\n  const showAll = urlParams.get('show') === 'all';\n  const theme = validateTheme(urlParams.get('theme'));\n\n  if (datasetId) {\n    const config = getConfig(datasetId);\n    return (\n      <Vitessce\n        config={config}\n        rowHeight={rowHeight}\n        theme={theme}\n        // eslint-disable-next-line no-console\n        onConfigChange={(debug ? console.log : undefined)}\n        validateOnConfigChange={debug}\n      />\n    );\n  }\n  if (datasetUrl) {\n    const responsePromise = fetch(datasetUrl)\n      .then(response => checkResponse(response, theme, debug))\n      .catch(error => Promise.resolve(\n        <Warning\n          title=\"Error fetching\"\n          unformatted={error.message}\n          theme={theme}\n        />,\n      ));\n    return (\n      <AwaitResponse response={responsePromise} theme={theme} />\n    );\n  }\n  const configs = listConfigs(showAll);\n  return (<Welcome configs={configs} theme={theme} showBetaHeader={showBetaHeader} />);\n}\n","import Bowser from 'bowser';\nimport { compressToEncodedURIComponent, decompressFromEncodedURIComponent } from 'lz-string';\n\nconst CURRENT_VERSION = '0.0.1';\nconst VITESSCE_CONF_QUERY_STRING = 'vitessce_conf';\nconst VERSION_QUERY_STRING = 'vitessce_conf_version';\nconst LENGTH_QUERY_STRING = 'vitessce_conf_length';\n\nfunction sniffBrowser() {\n  const { browser } = Bowser.parse(window.navigator.userAgent);\n  return browser.name;\n}\n\n// https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers\nconst MAX_BROWSER_URL_LENGTHS = {\n  Chrome: 32779,\n  'Internet Explorer': 2047,\n  Edge: 2047,\n  Safari: 65000,\n  Firefox: 65000,\n};\n\nexport default class CompressedConfLengthError {\n  constructor(message) {\n    this.message = message;\n  }\n}\n\n/**\n * Encode a configuration as url params with a version and an lz-compressed conf.\n * @param {Object} params\n * @param {Object} params.conf Previous scope names.\n * @param {function} params.onOverMaximumUrlLength Callback for when new url\n * is over max length for your browser - takes two arguments: { message, willWorkOn }\n * for the error message and the browsers for which the url will work (optional).\n * @returns {string} The new params like\n * vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl\n */\nexport function encodeConfInUrl({\n  conf,\n  onOverMaximumUrlLength = () => { },\n}) {\n  const compressedConf = compressToEncodedURIComponent(JSON.stringify(conf));\n  const newParams = `${LENGTH_QUERY_STRING}=${compressedConf.length}&${VERSION_QUERY_STRING}=${CURRENT_VERSION}&${VITESSCE_CONF_QUERY_STRING}=${compressedConf}`;\n  const browser = sniffBrowser();\n  const maxLength = MAX_BROWSER_URL_LENGTHS[browser];\n  if (newParams.length > maxLength) {\n    const willWorkOn = Object.entries(MAX_BROWSER_URL_LENGTHS)\n      .filter(entry => entry[1] > newParams.length)\n      .map(entry => entry[0]);\n    const message = `Configuration is ${compressedConf.length} characters; max URL for ${browser} is ${maxLength}: it will work on ${willWorkOn.join(', ') || 'no browser'}.`;\n    console.error(message);\n    onOverMaximumUrlLength({ message, willWorkOn });\n  }\n  return newParams;\n}\n\n/**\n * Decode URL params to a Vitessce configuration.\n * The URL params must have version and vitessce_conf params,\n * like vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl.\n * @param {Object} queryString The URL params,\n * like vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl.\n * @returns {string} A vitessce configuration.\n */\nexport function decodeURLParamsToConf(queryString) {\n  const params = new URLSearchParams(queryString.replace('#', '&'));\n  const compressedConfString = params.get(VITESSCE_CONF_QUERY_STRING);\n  const expectedConfLength = Number(params.get(LENGTH_QUERY_STRING));\n  if (expectedConfLength !== compressedConfString.length) {\n    throw new CompressedConfLengthError(`Compressed conf length (${compressedConfString.length}) != expected (${expectedConfLength}). URL truncated?`);\n  }\n  const version = params.get(VERSION_QUERY_STRING);\n  if (version === CURRENT_VERSION) {\n    const conf = JSON.parse(decompressFromEncodedURIComponent(compressedConfString));\n    return conf;\n  }\n  throw new Error('Unrecognized URL Param Version');\n}\n","import { getNextScope, fromEntries } from '../utils';\nimport { COORDINATION_TYPES } from '../app/state/coordination';\n\n\n/**\n * Class representing a file within a Vitessce config dataset.\n */\nexport class VitessceConfigDatasetFile {\n  /**\n   * Construct a new file definition instance.\n   * @param {string} url The URL to the file.\n   * @param {string} dataType The type of data contained in the file.\n   * @param {string} fileType The file type.\n   */\n  constructor(url, dataType, fileType) {\n    this.file = {\n      url,\n      type: dataType,\n      fileType,\n    };\n  }\n\n  /**\n   * @returns {object} This dataset file as a JSON object.\n   */\n  toJSON() {\n    return this.file;\n  }\n}\n\n/**\n * Class representing a dataset within a Vitessce config.\n */\nexport class VitessceConfigDataset {\n  /**\n   * Construct a new dataset definition instance.\n   * @param {string} uid The unique ID for the dataset.\n   * @param {string} name The name of the dataset.\n   * @param {string} description A description for the dataset.\n   */\n  constructor(uid, name, description) {\n    this.dataset = {\n      uid,\n      name,\n      description,\n      files: [],\n    };\n  }\n\n  /**\n   * Add a file definition to the dataset.\n   * @param {string} url The URL to the file.\n   * @param {string} dataType The type of data contained in the file.\n   * @param {string} fileType The file type.\n   * @returns {VitessceConfigDataset} This, to allow chaining.\n   */\n  addFile(url, dataType, fileType) {\n    this.dataset.files.push(new VitessceConfigDatasetFile(url, dataType, fileType));\n    return this;\n  }\n\n  /**\n   * @returns {object} This dataset as a JSON object.\n   */\n  toJSON() {\n    return {\n      ...this.dataset,\n      files: this.dataset.files.map(f => f.toJSON()),\n    };\n  }\n}\n\n/**\n * Class representing a view within a Vitessce layout.\n */\nexport class VitessceConfigView {\n  /**\n   * Construct a new view instance.\n   * @param {string} component The name of the Vitessce component type.\n   * @param {object} coordinationScopes A mapping from coordination type\n   * names to coordination scope names.\n   * @param {number} x The x-coordinate of the view in the layout.\n   * @param {number} y The y-coordinate of the view in the layout.\n   * @param {number} w The width of the view in the layout.\n   * @param {number} h The height of the view in the layout.\n   */\n  constructor(component, coordinationScopes, x, y, w, h) {\n    this.view = {\n      component,\n      coordinationScopes,\n      x,\n      y,\n      w,\n      h,\n    };\n  }\n\n  /**\n   * Attach coordination scopes to this view.\n   * @param  {...VitessceConfigCoordinationScope} args A variable number of\n   * coordination scope instances.\n   * @returns {VitessceConfigView} This, to allow chaining.\n   */\n  useCoordination(...args) {\n    const cScopes = args;\n    cScopes.forEach((cScope) => {\n      this.view.coordinationScopes[cScope.cType] = cScope.cScope;\n    });\n    return this;\n  }\n\n  /**\n    * Set the x, y, w, h values for this view.\n    * @param {number} x The x-coordinate of the view in the layout.\n    * @param {number} y The y-coordinate of the view in the layout.\n    * @param {number} w The width of the view in the layout.\n    * @param {number} h The height of the view in the layout.\n    */\n  setXYWH(x, y, w, h) {\n    this.view.x = x;\n    this.view.y = y;\n    this.view.w = w;\n    this.view.h = h;\n  }\n\n  /**\n   * @returns {object} This view as a JSON object.\n   */\n  toJSON() {\n    return this.view;\n  }\n}\n\n/**\n * Class representing a horizontal concatenation of views.\n */\nexport class VitessceConfigViewHConcat {\n  constructor(views) {\n    this.views = views;\n  }\n}\n\n/**\n * Class representing a vertical concatenation of views.\n */\nexport class VitessceConfigViewVConcat {\n  constructor(views) {\n    this.views = views;\n  }\n}\n\n/**\n * A helper function to create a horizontal concatenation of views.\n * @param  {...(VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat)} views A\n * variable number of views or view concatenations.\n * @returns {VitessceConfigViewHConcat} A new horizontal view concatenation instance.\n */\nexport function hconcat(...views) {\n  const vcvhc = new VitessceConfigViewHConcat(views);\n  return vcvhc;\n}\n\n/**\n * A helper function to create a vertical concatenation of views.\n * @param  {...(VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat)} views A\n * variable number of views or view concatenations.\n * @returns {VitessceConfigViewVConcat} A new vertical view concatenation instance.\n */\nexport function vconcat(...views) {\n  const vcvvc = new VitessceConfigViewVConcat(views);\n  return vcvvc;\n}\n\n/**\n * Class representing a coordination scope in the coordination space.\n */\nexport class VitessceConfigCoordinationScope {\n  /**\n   * Construct a new coordination scope instance.\n   * @param {string} cType The coordination type for this coordination scope.\n   * @param {string} cScope The name of the coordination scope.\n   */\n  constructor(cType, cScope) {\n    this.cType = cType;\n    this.cScope = cScope;\n    this.cValue = null;\n  }\n\n  /**\n   * Set the coordination value of the coordination scope.\n   * @param {any} cValue The value to set.\n   * @returns {VitessceConfigCoordinationScope} This, to allow chaining.\n   */\n  setValue(cValue) {\n    this.cValue = cValue;\n    return this;\n  }\n}\n\n/**\n * Class representing a Vitessce view config.\n */\nexport class VitessceConfig {\n  /**\n   * Construct a new view config instance.\n   * @param {string} name A name for the config. Optional.\n   * @param {string} description A description for the config. Optional.\n   */\n  constructor(name = undefined, description = undefined) {\n    this.config = {\n      version: '1.0.0',\n      name,\n      description,\n      datasets: [],\n      coordinationSpace: {},\n      layout: [],\n      initStrategy: 'auto',\n    };\n  }\n\n  /**\n   * Add a new dataset to the config.\n   * @param {string} name A name for the dataset. Optional.\n   * @param {string} description A description for the dataset. Optional.\n   * @param {object} options Extra parameters to be used internally. Optional.\n   * @param {string} options.uid Override the automatically-generated dataset ID.\n   * Intended for internal usage by the VitessceConfig.fromJSON code.\n   * @returns {VitessceConfigDataset} A new dataset instance.\n   */\n  addDataset(name = undefined, description = undefined, options = undefined) {\n    const { uid } = options || {};\n    const prevDatasetUids = this.config.datasets.map(d => d.dataset.uid);\n    const nextUid = (uid || getNextScope(prevDatasetUids));\n    const newDataset = new VitessceConfigDataset(nextUid, name, description);\n    this.config.datasets.push(newDataset);\n    const [newScope] = this.addCoordination(COORDINATION_TYPES.DATASET);\n    newScope.setValue(nextUid);\n    return newDataset;\n  }\n\n  /**\n   * Add a new view to the config.\n   * @param {VitessceConfigDataset} dataset The dataset instance which defines the data\n   * that will be displayed in the view.\n   * @param {string} component A component name, such as \"scatterplot\" or \"spatial\".\n   * @param {object} options Extra options for the component.\n   * @param {number} options.x The x-coordinate for the view in the grid layout.\n   * @param {number} options.y The y-coordinate for the view in the grid layout.\n   * @param {number} options.w The width for the view in the grid layout.\n   * @param {number} options.h The height for the view in the grid layout.\n   * @param {number} options.mapping A convenience parameter for setting the EMBEDDING_TYPE\n   * coordination value. Only applicable if the component is \"scatterplot\".\n   * @returns {VitessceConfigView} A new view instance.\n   */\n  addView(dataset, component, options) {\n    const {\n      x = 0,\n      y = 0,\n      w = 1,\n      h = 1,\n      mapping = null,\n    } = options || {};\n    const datasetMatches = (\n      this.config.coordinationSpace[COORDINATION_TYPES.DATASET]\n        ? Object.entries(this.config.coordinationSpace[COORDINATION_TYPES.DATASET])\n        // eslint-disable-next-line no-unused-vars\n          .filter(([scopeName, datasetScope]) => datasetScope.cValue === dataset.dataset.uid)\n          .map(([scopeName]) => scopeName)\n        : []\n    );\n    let datasetScope;\n    if (datasetMatches.length === 1) {\n      [datasetScope] = datasetMatches;\n    } else {\n      throw new Error('No coordination scope matching the dataset parameter could be found in the coordination space.');\n    }\n    const coordinationScopes = {\n      [COORDINATION_TYPES.DATASET]: datasetScope,\n    };\n    const newView = new VitessceConfigView(component, coordinationScopes, x, y, w, h);\n    if (mapping) {\n      const [etScope] = this.addCoordination(COORDINATION_TYPES.EMBEDDING_TYPE);\n      etScope.setValue(mapping);\n      newView.useCoordination(etScope);\n    }\n    this.config.layout.push(newView);\n    return newView;\n  }\n\n  /**\n   * Get an array of new coordination scope instances corresponding to coordination types\n   * of interest.\n   * @param {...string} args A variable number of coordination type names.\n   * @returns {VitessceConfigCoordinationScope[]} An array of coordination scope instances.\n   */\n  addCoordination(...args) {\n    const cTypes = args;\n    const result = [];\n    cTypes.forEach((cType) => {\n      const prevScopes = (\n        this.config.coordinationSpace[cType]\n          ? Object.keys(this.config.coordinationSpace[cType])\n          : []\n      );\n      const scope = new VitessceConfigCoordinationScope(cType, getNextScope(prevScopes));\n      if (!this.config.coordinationSpace[scope.cType]) {\n        this.config.coordinationSpace[scope.cType] = {};\n      }\n      this.config.coordinationSpace[scope.cType][scope.cScope] = scope;\n      result.push(scope);\n    });\n    return result;\n  }\n\n  /**\n   * A convenience function for setting up new coordination scopes across a set of views.\n   * @param {VitessceConfigView[]} views An array of view objects to link together.\n   * @param {string[]} cTypes The coordination types on which to coordinate the views.\n   * @param {any[]} cValues Initial values corresponding to each coordination type.\n   * Should have the same length as the cTypes array. Optional.\n   * @returns {VitessceConfig} This, to allow chaining.\n   */\n  linkViews(views, cTypes, cValues = null) {\n    const cScopes = this.addCoordination(...cTypes);\n    views.forEach((view) => {\n      cScopes.forEach((cScope) => {\n        view.useCoordination(cScope);\n      });\n    });\n    if (Array.isArray(cValues) && cValues.length === cTypes.length) {\n      cScopes.forEach((cScope, i) => {\n        cScope.setValue(cValues[i]);\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Set the layout of views.\n   * @param {VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat} viewConcat A\n   * view or a concatenation of views.\n   * @returns {VitessceConfig} This, to allow chaining.\n   */\n  layout(viewConcat) {\n    function layoutAux(obj, xMin, xMax, yMin, yMax) {\n      const w = xMax - xMin;\n      const h = yMax - yMin;\n      if (obj instanceof VitessceConfigView) {\n        obj.setXYWH(xMin, yMin, w, h);\n      } else if (obj instanceof VitessceConfigViewHConcat) {\n        const { views } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin + (w / numViews) * i, xMin + (w / numViews) * (i + 1), yMin, yMax);\n        });\n      } else if (obj instanceof VitessceConfigViewVConcat) {\n        const { views } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin, xMax, yMin + (h / numViews) * i, yMin + (h / numViews) * (i + 1));\n        });\n      }\n    }\n\n    layoutAux(viewConcat, 0, 12, 0, 12);\n\n    return this;\n  }\n\n  /**\n   * Convert this instance to a JSON object that can be passed to the Vitessce component.\n   * @returns {object} The view config as a JSON object.\n   */\n  toJSON() {\n    return {\n      ...this.config,\n      datasets: this.config.datasets.map(d => d.toJSON()),\n      coordinationSpace: fromEntries(\n        Object.entries(this.config.coordinationSpace).map(([cType, cScopes]) => ([\n          cType,\n          fromEntries(\n            Object.entries(cScopes).map(([cScopeName, cScope]) => ([\n              cScopeName,\n              cScope.cValue,\n            ])),\n          ),\n        ])),\n      ),\n      layout: this.config.layout.map(c => c.toJSON()),\n    };\n  }\n\n  /**\n   * Create a VitessceConfig instance from an existing view config, to enable\n   * manipulation with the JavaScript API.\n   * @param {object} config An existing Vitessce view config as a JSON object.\n   * @returns {VitessceConfig} A new config instance, with values set to match\n   * the config parameter.\n   */\n  static fromJSON(config) {\n    const { name, description } = config;\n    const vc = new VitessceConfig(name, description);\n    config.datasets.forEach((d) => {\n      const newDataset = vc.addDataset(d.name, d.description, { uid: d.uid });\n      d.files.forEach((f) => {\n        newDataset.addFile(\n          f.url,\n          f.type,\n          f.fileType,\n        );\n      });\n    });\n    Object.keys(config.coordinationSpace).forEach((cType) => {\n      if (cType !== COORDINATION_TYPES.DATASET) {\n        const cObj = config.coordinationSpace[cType];\n        vc.config.coordinationSpace[cType] = {};\n        Object.entries(cObj).forEach(([cScopeName, cScopeValue]) => {\n          const scope = new VitessceConfigCoordinationScope(cType, cScopeName);\n          scope.setValue(cScopeValue);\n          vc.config.coordinationSpace[cType][cScopeName] = scope;\n        });\n      }\n    });\n    config.layout.forEach((c) => {\n      const newView = new VitessceConfigView(c.component, c.coordinationScopes, c.x, c.y, c.w, c.h);\n      vc.config.layout.push(newView);\n    });\n    return vc;\n  }\n}\n","import { Heatmap } from './components/heatmap';\nimport { Spatial } from './components/spatial';\nimport { Scatterplot } from './components/scatterplot';\nimport VitessceGrid from './app/VitessceGrid';\nimport {\n  createApp,\n  Vitessce,\n  encodeConfInUrl,\n  decodeURLParamsToConf,\n} from './app';\nimport {\n  VitessceConfig,\n  hconcat,\n  vconcat,\n} from './api';\n\nexport {\n  Heatmap,\n  Spatial,\n  Scatterplot,\n  VitessceGrid,\n  createApp,\n  Vitessce,\n  encodeConfInUrl,\n  decodeURLParamsToConf,\n  VitessceConfig,\n  hconcat,\n  vconcat,\n};\n"],"sourceRoot":""}